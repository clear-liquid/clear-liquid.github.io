<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
    <meta name="baidu-site-verification" content="codeva-LpejxCGddy" />
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="dns-prefetch" href="https://clear-liquid.github.io">
    <title>
      
        TS | 
            时间胶囊
    </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
          <meta name="description" content="TypeScript简介">
<meta property="og:type" content="article">
<meta property="og:title" content="TS">
<meta property="og:url" content="https://clear-liquid.github.io/TS/index.html">
<meta property="og:site_name" content="时间胶囊">
<meta property="og:description" content="TypeScript简介">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://clear-liquid.github.io/TS/TS_logo.png">
<meta property="og:image" content="https://clear-liquid.github.io/TS/TS%E6%98%AFJS%E7%9A%84%E8%B6%85%E9%9B%86.png">
<meta property="og:image" content="https://clear-liquid.github.io/TS/TSvsJS.png">
<meta property="og:image" content="https://clear-liquid.github.io/TS/TS%E7%BC%96%E8%AF%91.png">
<meta property="og:image" content="https://clear-liquid.github.io/TS/image-20210917002203414.png">
<meta property="og:image" content="https://clear-liquid.github.io/TS/image-20210917003456128.png">
<meta property="og:image" content="https://clear-liquid.github.io/TS/image-20210917205318957.png">
<meta property="article:published_time" content="2023-02-16T14:41:41.000Z">
<meta property="article:modified_time" content="2023-02-17T14:20:45.065Z">
<meta property="article:author" content="沐澈">
<meta property="article:tag" content="ts">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://clear-liquid.github.io/TS/TS_logo.png">
            
              <link rel="alternative" href="/atom.xml" title="时间胶囊"
                type="application/atom+xml">
              
                
                  <link rel="icon" href="/favicon.ico">
                  
                    
                      <link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png">
                      
                        <link rel="stylesheet" type="text/css" href="/./main.a5fda8.css">
<link rel="stylesheet" href="http://at.alicdn.com/t/c/font_3875704_g9okdxt20pm.css">
<style>
  .icon-yuque {
    font-family: "iconfont" !important;
    font-size: 16px;
    font-style: normal;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
</style>
                          <style type="text/css">
                            #container.show {
                              background: linear-gradient(200deg,#a0cfe4,#e8c37e);
                            }
                          </style>
                          

                            

                              
                                
                                  <script src="/lib/clickLove.js"></script>
                                  
                                    


                                      

<link rel="stylesheet" href="/assets/css/APlayer.min.css" class="aplayer-style-marker">
<script src="/assets/js/APlayer.min.js" class="aplayer-script-marker"></script>
<script src="/assets/js/Meting.min.js" class="meting-script-marker"></script>
</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
	
		
			<div class="overlay"
				style="background: linear-gradient(to top, #d299c2 0%, #fef9d7 100%);background: url('/img/biubiubiu.gif') no-repeat ;">
			</div>
			<div class="intrude-less">
				<header id="header" class="inner">
					<a href="/" class="profilepic">
						<img src="/img/head.jpg" class="js-avatar">
					</a>
					<hgroup>
						<h1 class="header-author"><a href="/">
								沐澈
							</a></h1>
					</hgroup>
					

							<nav class="header-menu">
								<ul>
									
										<li><a href="/" target="_blank"
													>主页</a></li>
										
										<li><a href="/categories" target="_blank"
													>分类</a></li>
										
										<li><a href="https://zhousiwei.gitee.io/ibooks/" target="_blank"
													>技术笔记</a></li>
										
										<li><a href="/tags/%E9%9A%8F%E7%AC%94/" target="_blank"
													>随笔</a></li>
										
								</ul>
							</nav>
							<nav class="header-smart-menu">
								
									
										<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">
											所有文章
										</a>
										
											
									
										<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">
											友链
										</a>
										
											
							</nav>
							<nav class="header-nav">
								<div class="social">
									
										
											<a class="github" href="https://github.com/clear-liquid"
												title="GitHub"
												target="_blank">
												<i class="icon-github "></i>
											</a>
											
												
										
											<a class="gitee" href="https://gitee.com/mu-ce"
												title="码云"
												target="_blank">
												<i class="icon-gitee "></i>
											</a>
											
												
										
											<a class="yuque" href="https://www.yuque.com/dashboard"
												title="subNav.title.yuque"
												target="_blank">
												<i class="icon-yuque "></i>
											</a>
											
												
										
											<a class="weixin" href="/img/weixin.png"
												title="微信"
												target="_blank">
												<i class="icon-weixin "></i>
											</a>
											
												
										
											<a class="mail" href="mailto:2374044812@qq.com"
												title="邮件联系"
												target="_blank">
												<i class="icon-mail "></i>
											</a>
											
												
								</div>
								
									
										

																

																						
																							
																								<div id="aplayer-hjnObCgk"
																									class="aplayer aplayer-tag-marker meting-tag-marker"
																									data-id="8172878910"
																									data-server="netease"
																									data-type="playlist"
																									data-loop="none"
																									data-order="random" data-lrctype="0"
																									data-listfolded="true"
																									data-fixed="true"
																									data-autoplay="false"
																									data-volume="0.4"
																									data-mutex="true"
																									data-listmaxheight="300px"
																									data-preload="none"
																									data-theme="">
																								</div>
																								
																									

							</nav>
				</header>
			</div>
    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
      
      <a class="forkMe" style="position:absolute;z-index:999;top:0;right:0.5em;" 
        href="https://github.com/JoeyBling/hexo-theme-yilia-plus" target="_blank">
        <img src="/img/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
      
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: linear-gradient(to top, #d299c2 0%, #fef9d7 100%)"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<a href="/">
					<img src="/img/head.jpg" class="js-avatar">
				</a>
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">沐澈</h1>
			</hgroup>
			
			
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						
						<a class="github" target="_blank" 
							href="https://github.com/clear-liquid" title="GitHub"><i class="icon-github"></i></a>
						
					
						
						<a class="gitee" target="_blank" 
							href="https://gitee.com/mu-ce" title="码云"><i class="icon-gitee"></i></a>
						
					
						
						<a class="yuque" target="_blank" 
							href="https://www.yuque.com/dashboard" title="subNav.title.yuque"><i class="icon-yuque"></i></a>
						
					
						
						<a class="weixin" target="_blank" 
							href="/img/weixin.png" title="微信"><i class="icon-weixin"></i></a>
						
					
						
						<a class="mail" target="_blank" 
							href="mailto:2374044812@qq.com" title="邮件联系"><i class="icon-mail"></i></a>
						
					
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 25%"><a href="/">主页</a></li>
		        
					<li style="width: 25%"><a href="/categories">分类</a></li>
		        
					<li style="width: 25%"><a target="_blank" rel="noopener" href="https://zhousiwei.gitee.io/ibooks/">技术笔记</a></li>
		        
					<li style="width: 25%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1"
              class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            <article id="post-TS" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 class="article-title" itemprop="name">
      TS
    </h1>
  


  
  
        
        <span id="busuanzi_container_page_pv" style='display:none' class="archive-article-date">
              <i class="icon-smile icon"></i> 阅读数：<span id="busuanzi_value_page_pv"></span>次
        </span>

<a href="/TS/" class="archive-article-date">
        <time datetime="2023-02-16T14:41:41.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    
<div style="margin-top:10px;">
  <span class="post-time">
    <span class="post-meta-item-icon">
      <!-- fonts.scss -->
      <!-- 百度字体平台:http://fontstore.baidu.com/static/editor/index.html -->
      <i class="icon-statistics"></i>
      <span class="post-meta-item-text"> 字数统计:</span>
      <span class="post-count">16.4k字</span>
    </span>
  </span>

  <span class="post-time">
    &nbsp; | &nbsp;
    <span class="post-meta-item-icon">
      <i class="icon-book icon"></i>
      <span class="post-meta-item-text"> 阅读时长≈</span>
      <span class="post-count">69分</span>
    </span>
  </span>
</div>


  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="TypeScript简介"><a href="#TypeScript简介" class="headerlink" title="TypeScript简介"></a>TypeScript简介</h1><span id="more"></span>
<ul>
<li>TypeScript 介绍</li>
<li>TypeScript 初体验</li>
<li>TypeScript 常用类型</li>
<li>TypeScript 高级类型</li>
<li>TypeScript 类型声明文件</li>
<li>在 React 中使用 TypeScript</li>
</ul>
<h2 id="TypeScript-介绍"><a href="#TypeScript-介绍" class="headerlink" title="TypeScript 介绍"></a>TypeScript 介绍</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/">TS 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://www.tslang.cn/">TS 中文参考 - 不再维护</a></li>
</ul>
<p><img src="/TS/TS_logo.png" alt="TS Logo"></p>
<ol>
<li>TypeScript 是什么</li>
<li>TypeScript 为什么要为 JS 添加类型支持?</li>
<li>TypeScript 相比 JS 的优势</li>
</ol>
<h3 id="TypeScript-是什么"><a href="#TypeScript-是什么" class="headerlink" title="TypeScript 是什么"></a>TypeScript 是什么</h3><ul>
<li><strong><code>TypeScript</code> 简称：TS，是 JavaScript 的超集</strong>，简单来说就是：JS 有的 TS 都有</li>
</ul>
<p><img src="/TS/TS%E6%98%AFJS%E7%9A%84%E8%B6%85%E9%9B%86.png" alt="TS是JS的超集"></p>
<ul>
<li>TypeScript &#x3D; <code>Type</code> + JavaScript（在 JS 基础之上，<strong>为 JS 添加了类型支持</strong>）</li>
<li>TypeScript 是<em>微软</em>开发的开源编程语言，可以在任何运行 JavaScript 的地方运行</li>
</ul>
<p><img src="/TS/TSvsJS.png" alt="TS 和 JS 的对比"></p>
<h3 id="TypeScript-为什么要为-JS-添加类型支持"><a href="#TypeScript-为什么要为-JS-添加类型支持" class="headerlink" title="TypeScript 为什么要为 JS 添加类型支持?"></a>TypeScript 为什么要为 JS 添加类型支持?</h3><ul>
<li>背景：JS 的类型系统存在“先天缺陷”，JS 代码中绝大部分错误都是类型错误（Uncaught TypeError） </li>
<li>这些经常出现的错误，导致了在使用 JS 进行项目开发时，增加了找 Bug、改 Bug 的时间，严重影响开发效率</li>
</ul>
<p>为什么会这样？</p>
<ul>
<li><p>从编程语言的动静来区分，<strong>TypeScript 属于静态类型的编程语言</strong>，<strong>JavaScript 属于动态类型的编程语言</strong></p>
<ul>
<li>静态类型：<strong>编译</strong>期做类型检查</li>
<li>动态类型：<strong>执行</strong>期做类型检查</li>
</ul>
</li>
<li><p>代码编译和代码执行的顺序：1 编译 2 执行</p>
</li>
<li><p>对于 JS 来说：需要等到代码真正去执行的时候才能发现错误（晚）</p>
</li>
<li><p>对于 TS 来说：在代码编译的时候（代码执行前）就可以发现错误（早）</p>
</li>
</ul>
<p>并且，配合 VSCode 等开发工具，TS 可以提前到<strong>在编写代码的同时就发现代码中的错误</strong>，减少找 Bug、改 Bug 时间  </p>
<p>对比：</p>
<ul>
<li>使用 JS：<ol>
<li>在 VSCode 里面写代码</li>
<li>在浏览器中运行代码 –&gt; 运行时，才会发现错误【晚】</li>
</ol>
</li>
<li>使用 TS：<ol>
<li>在 VSCode 里面写代码 –&gt; 写代码的同时，就会发现错误【早】</li>
<li>在浏览器中运行代码</li>
</ol>
</li>
</ul>
<h3 id="TypeScript-相比-JS-的优势"><a href="#TypeScript-相比-JS-的优势" class="headerlink" title="TypeScript 相比 JS 的优势"></a>TypeScript 相比 JS 的优势</h3><ol>
<li><strong>更早（写代码的同时）发现错误</strong>，减少找 Bug、改 Bug 时间，提升开发效率</li>
<li>程序中任何位置的代码都有<strong>代码提示</strong>，随时随地的安全感，增强了开发体验</li>
<li>强大的类型系统提升了代码的可维护性，使得<strong>重构代码更加容易</strong></li>
<li>支持最新的 ECMAScript 语法，<strong>优先体验最新的语法，让你走在前端技术的最前沿</strong> </li>
<li>TS 类型推断机制，不需要在代码中的每个地方都显示标注类型，让你在享受优势的同时，尽量降低了学习负担</li>
</ol>
<p>除此之外，Vue 3 源码使用 TS 重写、Angular 默认支持 TS、React 与 TS 完美配合，TypeScript 已成为大中型前端 项目的首选编程语言</p>
<p>目前，前端最新的开发技术栈：</p>
<ol>
<li>React： TS + Hooks</li>
<li>Vue： TS + Vue3</li>
</ol>
<ul>
<li>注意： Vue2 对 TS 的支持不好~</li>
</ul>
<hr>
<h2 id="TypeScript-初体验"><a href="#TypeScript-初体验" class="headerlink" title="TypeScript 初体验"></a>TypeScript 初体验</h2><ol>
<li>安装编译 TS 的工具包</li>
<li>编译并运行 TS 代码</li>
<li>简化运行 TS 的步骤</li>
</ol>
<h3 id="安装编译-TS-的工具包"><a href="#安装编译-TS-的工具包" class="headerlink" title="安装编译 TS 的工具包"></a>安装编译 TS 的工具包</h3><ul>
<li>问题：为什么要安装编译 TS 的工具包?</li>
<li>回答：Node.js&#x2F;浏览器，只认识 JS 代码，不认识 TS 代码。需要先将 TS 代码转化为 JS 代码，然后才能运行</li>
<li>安装命令：<code>npm i -g typescript</code><ul>
<li>typescript 包：用来编译 TS 代码的包，提供了 <code>tsc</code> 命令，实现了 TS -&gt; JS 的转化</li>
<li><em>注意：Mac 电脑安装全局包时，需要添加 <code>sudo</code> 获取权限：<code>sudo npm i -g typescript</code></em>  yarn 全局安装：<code>sudo yarn global add typescript</code></li>
</ul>
</li>
<li>验证是否安装成功：tsc –v(查看 typescript 的版本)</li>
</ul>
<p><img src="/TS/TS%E7%BC%96%E8%AF%91.png" alt="TS 编译"></p>
<h3 id="编译并运行-TS-代码"><a href="#编译并运行-TS-代码" class="headerlink" title="编译并运行 TS 代码"></a>编译并运行 TS 代码</h3><ol>
<li>创建 hello.ts 文件（注意：**TS 文件的后缀名为 <code>.ts</code>**）</li>
<li>将 TS 编译为 JS：在终端中输入命令，<code>tsc hello.ts</code>（此时，在同级目录中会出现一个同名的 JS 文件）</li>
<li>执行 JS 代码：在终端中输入命令，<code>node hello.js</code></li>
</ol>
<p>1 创建 ts 文件  &#x3D;&#x3D;&#x3D;&gt;  2 编译 TS  &#x3D;&#x3D;&#x3D;&gt;  3 执行 JS  </p>
<ul>
<li>说明：所有合法的 JS 代码都是 TS 代码，有 JS 基础只需要学习 TS 的类型即可</li>
<li>注意：由 TS 编译生成的 JS 文件，代码中就没有类型信息了</li>
</ul>
<h3 id="简化运行-TS-的步骤"><a href="#简化运行-TS-的步骤" class="headerlink" title="简化运行 TS 的步骤"></a>简化运行 TS 的步骤</h3><ul>
<li>问题描述：每次修改代码后，都要重复执行两个命令，才能运行 TS 代码，太繁琐</li>
<li>简化方式：使用 <code>ts-node</code> 包，直接在 Node.js 中执行 TS 代码</li>
<li>安装命令：<code>npm i -g ts-node</code><ul>
<li>ts-node 包提供了 <code>ts-node</code> 命令</li>
<li>使用方式：<code>ts-node hello.ts</code> 相当于：1 tsc 命令  2 node（注意：ts-node 不会生成 js 文件）</li>
</ul>
</li>
</ul>
<p>解释：ts-node 命令在内部偷偷的将 TS -&gt; JS，然后，再运行 JS 代码</p>
<p>使用ts-node执行文件，输出报错时使用用</p>
<blockquote>
<p>tsc –init</p>
</blockquote>
<p>初始一个配置文件即可</p>
<h1 id="TypeScript-常用类型"><a href="#TypeScript-常用类型" class="headerlink" title="TypeScript 常用类型"></a>TypeScript 常用类型</h1><ul>
<li>TypeScript 是 JS 的超集，TS 提供了 JS 的所有功能，并且额外的增加了：<strong>类型系统</strong><ul>
<li>所有的 JS 代码都是 TS 代码</li>
<li><strong>JS 有类型</strong>（比如，number&#x2F;string 等），但是 <strong>JS 不会检查变量的类型是否发生变化</strong>，而 TS 会检查</li>
</ul>
</li>
<li>TypeScript 类型系统的主要优势：<strong>可以显示标记出代码中的意外行为，从而降低了发生错误的可能性</strong></li>
</ul>
<ol>
<li>类型注解</li>
<li>常用基础类型</li>
</ol>
<h2 id="类型注解"><a href="#类型注解" class="headerlink" title="类型注解"></a>类型注解</h2><p>示例代码:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">18</span></span><br></pre></td></tr></table></figure>

<ul>
<li>说明：代码中的 <code>: number</code> 就是<strong>类型注解</strong></li>
<li>作用：<strong>为变量添加类型约束</strong>。比如，上述代码中，约定变量 age 的类型为 number 类型（明确指定一个变量的类型，变量的类型是不能修改的）</li>
<li>解释：<strong>约定了什么类型，就只能给变量赋值该类型的值，否则，就会报错</strong></li>
<li>错误演示：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误代码：</span></span><br><span class="line"><span class="comment">// 错误原因：将 string 类型的值赋值给了 number 类型的变量，类型不一致</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="string">&#x27;18&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="常用基础类型"><a href="#常用基础类型" class="headerlink" title="常用基础类型"></a>常用基础类型</h2><p>可以将 TS 中的常用基础类型细分为两类：1 JS 已有类型 2 TS 新增类型</p>
<ol>
<li>JS 已有类型</li>
</ol>
<ul>
<li>原始类型：<code>number/string/boolean/null/undefined/symbol</code>（无浮点型）</li>
<li>对象类型：<code>object</code>（包括，数组、对象、函数等对象）</li>
</ul>
<ol start="2">
<li>TS 新增类型</li>
</ol>
<ul>
<li><p>联合类型、自定义类型(类型别名)、接口、元组、字面量类型、枚举、void、any 等</p>
</li>
<li><p>注意：</p>
<ol>
<li><em>原始类型</em>在 TS 和 JS 中写法一致</li>
<li><em>对象类型</em>在 TS 中更加细化，每个具体的对象（比如，数组、对象、函数）都有自己的类型语法</li>
</ol>
</li>
</ul>
<h3 id="原始类型"><a href="#原始类型" class="headerlink" title="原始类型"></a>原始类型</h3><ul>
<li>原始类型：number&#x2F;string&#x2F;boolean&#x2F;null&#x2F;undefined&#x2F;symbol</li>
<li>特点：简单，这些类型，完全按照 JS 中类型的名称来书写</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myName</span>: <span class="built_in">string</span> = <span class="string">&#x27;老师&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">isLoading</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等等...</span></span><br></pre></td></tr></table></figure>

<h3 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h3><ul>
<li>数组类型的两种写法：<ul>
<li>推荐使用 <code>number[]</code> 写法</li>
</ul>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写法一：</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">numbers</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="comment">// 写法二：</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">strings</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h3><p>需求：数组中既有 number 类型，又有 string 类型，这个数组的类型应该如何写?</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: (<span class="built_in">number</span> | <span class="built_in">string</span>)[] = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：<code>|</code>（竖线）在 TS 中叫做<strong>联合类型</strong>，即：由两个或多个其他类型组成的类型，表示可以是这些类型中的任意一种</li>
<li>注意：这是 TS 中联合类型的语法，只有一根竖线，不要与 JS 中的或（|| 或）混淆了</li>
</ul>
<h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><ul>
<li><code>类型别名（自定义类型）</code>：为任意类型起别名</li>
<li>使用场景：当同一类型（复杂）被多次使用时，可以通过类型别名，<strong>简化该类型的使用</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">CustomArray</span> = (<span class="built_in">number</span> | <span class="built_in">string</span>)[]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="title class_">CustomArray</span> = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">CustomArray</span> = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>使用 <code>type</code> 关键字来创建自定义类型</li>
<li>类型别名（比如，此处的 <em>CustomArray</em>）可以是任意合法的变量名称</li>
<li>推荐使用大写字母开头</li>
<li>创建类型别名后，直接使用该类型别名作为变量的类型注解即可</li>
</ol>
</li>
</ul>
<h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><ul>
<li>函数的类型实际上指的是：<code>函数参数</code>和<code>返回值</code>的类型</li>
<li>为函数指定类型的两种方式：<ol>
<li>单独指定参数、返回值的类型（参数也需要指定类型）</li>
<li>同时指定参数、返回值的类型</li>
</ol>
</li>
</ul>
<ol>
<li>单独指定参数、返回值的类型：</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 箭头函数</span></span><br><span class="line"><span class="keyword">const</span> add = (<span class="attr">num1</span>: <span class="built_in">number</span>, <span class="attr">num2</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>同时指定参数、返回值的类型:</strong></li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">AddFn</span> = <span class="function">(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">add</span>: <span class="title class_">AddFn</span> = <span class="function">(<span class="params">num1, num2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：当函数作为表达式时，可以通过类似箭头函数形式的语法来为函数添加类型</li>
<li>注意：这种形式只适用于<strong>函数表达式</strong></li>
</ul>
<h4 id="void-类型"><a href="#void-类型" class="headerlink" title="void 类型"></a>void 类型</h4><ul>
<li>如果函数没有返回值，那么，函数返回值类型为：<code>void</code></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello&#x27;</span>, name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<ul>
<li>如果一个函数没有返回值，此时，在 TS 的类型中，应该使用 <code>void</code> 类型</li>
</ul>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果什么都不写，此时，add 函数的返回值类型为： void</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params"></span>) =&gt; &#123;&#125;</span><br><span class="line"><span class="comment">// 这种写法是明确指定函数返回值类型为 void，与上面不指定返回值类型相同</span></span><br><span class="line"><span class="keyword">const</span> add = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 但，如果指定 返回值类型为 undefined，此时，函数体中必须显示的 return undefined 才可以</span></span><br><span class="line"><span class="keyword">const</span> add = (): <span class="function"><span class="params">undefined</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 此处，返回的 undefined 是 JS 中的一个值</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数可选参数"><a href="#函数可选参数" class="headerlink" title="函数可选参数"></a>函数可选参数</h4><ul>
<li>使用函数实现某个功能时，参数可以传也可以不传。这种情况下，在给函数参数指定类型时，就用到<strong>可选参数</strong>了</li>
<li>比如，数组的 slice 方法，可以 <code>slice()</code> 也可以 <code>slice(1)</code> 还可以 <code>slice(1, 3)</code></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mySlice</span>(<span class="params">start?: <span class="built_in">number</span>, end?: <span class="built_in">number</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;起始索引：&#x27;</span>, start, <span class="string">&#x27;结束索引：&#x27;</span>, end)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>可选参数：<strong>在可传可不传的参数名称后面添加 <code>?</code>（问号</strong>） </li>
<li>注意：<strong>可选参数只能出现在参数列表的最后</strong>，也就是说可选参数后面不能再出现必选参数</li>
</ul>
<h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h3><ul>
<li>JS 中的对象是由属性和方法构成的，而 <strong>TS 对象的类型就是在描述对象的结构</strong>（有什么类型的属性和方法）</li>
<li>对象类型的写法:</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 空对象</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;&#125; = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有属性的对象</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;同学&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 既有属性又有方法的对象</span></span><br><span class="line"><span class="comment">// 在一行代码中指定对象的多个属性类型时，使用 `;`（分号）来分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="title function_">sayHi</span>(): <span class="built_in">void</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象中如果有多个类型，可以换行写：</span></span><br><span class="line"><span class="comment">// 通过换行来分隔多个属性类型，可以去掉 `;`</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>使用 <code>&#123;&#125;</code> 来描述对象结构</li>
<li>属性采用<code>属性名: 类型</code>的形式</li>
<li>方法采用<code>方法名(): 返回值类型</code>的形式</li>
</ol>
</li>
</ul>
<blockquote>
<p>注意：在一行代码中指定对象的多个属性类型时，使用 <code>;</code>（分号）来分隔</p>
</blockquote>
<h4 id="使用类型别名"><a href="#使用类型别名" class="headerlink" title="使用类型别名"></a>使用类型别名</h4><ul>
<li>注意：直接使用 <code>&#123;&#125;</code> 形式为对象添加类型，会降低代码的可读性（不好辨识类型和值）</li>
<li>推荐：<strong>使用类型别名为对象添加类型</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建类型别名</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用类型别名作为对象的类型：</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="带有参数的方法类型"><a href="#带有参数的方法类型" class="headerlink" title="带有参数的方法类型"></a>带有参数的方法类型</h4><ul>
<li>如果方法有参数，就在方法名后面的小括号中指定参数类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="title function_">greet</span>(<span class="attr">name</span>: <span class="built_in">string</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="箭头函数形式的方法类型"><a href="#箭头函数形式的方法类型" class="headerlink" title="箭头函数形式的方法类型"></a>箭头函数形式的方法类型</h4><ul>
<li>方法的类型也可以使用箭头函数形式</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">greet</span>: <span class="function">(<span class="params">name: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="对象可选属性"><a href="#对象可选属性" class="headerlink" title="对象可选属性"></a>对象可选属性</h4><ul>
<li>对象的属性或方法，也可以是可选的，此时就用到<strong>可选属性</strong>了</li>
<li>比如，我们在使用 <code>axios(&#123; ... &#125;)</code> 时，如果发送 GET 请求，method 属性就可以省略</li>
<li>可选属性的语法与函数可选参数的语法一致，都使用 <code>?</code> 来表示</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Config</span> = &#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span></span><br><span class="line">  method?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myAxios</span>(<span class="params">config: Config</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(config)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>当一个对象类型被多次使用时，一般会使用接口（<code>interface</code>）来描述对象的类型，达到复用的目的</p>
<ul>
<li>解释：<ol>
<li>使用 <code>interface</code> 关键字来声明接口</li>
<li>接口名称(比如，此处的 IPerson)，可以是任意合法的变量名称，推荐以 <code>I</code> 开头</li>
<li>声明接口后，直接使用接口名称作为变量的类型</li>
<li>因为每一行只有一个属性类型，因此，属性类型后没有 ;(分号)</li>
</ol>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">IPerson</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">19</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="interface-vs-type"><a href="#interface-vs-type" class="headerlink" title="interface vs type"></a>interface vs type</h4><ul>
<li>interface（接口）和 type（类型别名）的对比：</li>
<li>相同点：都可以给对象指定类型</li>
<li>不同点:<ul>
<li>接口，只能为对象指定类型</li>
<li>类型别名，不仅可以为对象指定类型，实际上可以为任意类型指定别名</li>
</ul>
</li>
<li>推荐：<strong>能使用 type 就是用 type</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为对象类型创建类型别名</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IPerson</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为联合类型创建类型别名</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NumStr</span> = <span class="built_in">number</span> | <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h4 id="接口继承"><a href="#接口继承" class="headerlink" title="接口继承"></a>接口继承</h4><ul>
<li>如果两个接口之间有相同的属性或方法，可以将<strong>公共的属性或方法抽离出来，通过继承来实现复用</strong></li>
<li>比如，这两个接口都有 x、y 两个属性，重复写两次，可以，但很繁琐</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Point2D</span> &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Point3D</span> &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span>; <span class="attr">z</span>: <span class="built_in">number</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>更好的方式:</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Point2D</span> &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="comment">// 继承 Point2D</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Point3D</span> <span class="keyword">extends</span> <span class="title class_">Point2D</span> &#123;</span><br><span class="line">  <span class="attr">z</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：<ol>
<li>使用 <code>extends</code>(继承)关键字实现了接口 Point3D 继承 Point2D</li>
<li>继承后，Point3D 就有了 Point2D 的所有属性和方法(此时，Point3D 同时有 x、y、z 三个属性)</li>
</ol>
</li>
</ul>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><ul>
<li>场景：在地图中，使用经纬度坐标来标记位置信息</li>
<li>可以使用数组来记录坐标，那么，该数组中只有两个元素，并且这两个元素都是数值类型 number[]</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">position</span>: <span class="built_in">number</span>[] = [<span class="number">116.2317</span>, <span class="number">39.5427</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 number[] 的缺点：不严谨，因为该类型的数组中可以出现任意多个数字</li>
<li>更好的方式：<code>元组 Tuple</code></li>
<li>元组类型是另一种类型的数组，它确切地知道包含多少个元素，<strong>以及特定索引对应的类型</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">position</span>: [<span class="built_in">number</span>, <span class="built_in">number</span>] = [<span class="number">39.5427</span>, <span class="number">116.2317</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：<ol>
<li>元组类型可以确切地标记出有多少个元素，以及每个元素的类型</li>
<li>该示例中，元素有两个元素，每个元素的类型都是 number</li>
</ol>
</li>
</ul>
<hr>
<h3 id="类型推论"><a href="#类型推论" class="headerlink" title="类型推论"></a>类型推论</h3><ul>
<li>在 TS 中，某些没有明确指出类型的地方，<strong>TS 的类型推论机制会帮助提供类型</strong></li>
<li>换句话说：由于类型推论的存在，这些地方，类型注解可以省略不写</li>
<li>发生类型推论的 2 种常见场景:<ol>
<li>声明变量并初始化时</li>
<li>决定函数返回值时</li>
</ol>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量 age 的类型被自动推断为：number</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数返回值的类型被自动推断为：number</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>推荐：<strong>能省略类型注解的地方就省略</strong>（<del>偷懒</del>，充分利用TS类型推论的能力，提升开发效率）</li>
<li>技巧：如果不知道类型，可以通过鼠标放在变量名称上，利用 VSCode 的提示来查看类型</li>
<li>推荐：在 VSCode 中写代码的时候，多看方法、属性的类型，养成写代码看类型的习惯</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log()</span><br><span class="line">document.createElement()</span><br></pre></td></tr></table></figure>



<h3 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h3><ul>
<li>思考以下代码，两个变量的类型分别是什么?</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&#x27;Hello TS&#x27;</span></span><br><span class="line"><span class="keyword">const</span> str2 = <span class="string">&#x27;Hello TS&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>通过 TS 类型推论机制，可以得到答案：</p>
<ol>
<li>变量 str1 的类型为：string</li>
<li>变量 str2 的类型为：’Hello TS’</li>
</ol>
</li>
<li><p>解释:</p>
</li>
</ul>
<ol>
<li>str1 是一个变量(let)，它的值可以是任意字符串，所以类型为:string</li>
<li>str2 是一个常量(const)，它的值不能变化只能是 ‘Hello TS’，所以，它的类型为:’Hello TS’</li>
</ol>
<ul>
<li>注意：此处的 ‘Hello TS’，就是一个<strong>字面量类型</strong>，也就是说某个特定的字符串也可以作为 TS 中的类型</li>
<li>任意的 JS 字面量（比如，对象、数字等）都可以作为类型使用<ul>
<li>字面量：<code>&#123; name: &#39;jack&#39; &#125;</code> <code>[]</code> <code>18</code> <code>20</code> <code>&#39;abc&#39;</code> <code>false</code> <code>function() &#123;&#125;</code></li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&#x27;Hello TS&#x27;</span></span><br><span class="line"><span class="keyword">const</span> str2 = <span class="string">&#x27;Hello TS123&#x27;</span></span><br><span class="line"></span><br><span class="line">str1 = str2</span><br><span class="line"></span><br><span class="line"><span class="comment">// str2 = str1 不行</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="使用模式和场景"><a href="#使用模式和场景" class="headerlink" title="使用模式和场景"></a>使用模式和场景</h4><ul>
<li>使用模式：<strong>字面量类型配合联合类型一起使用</strong></li>
<li>使用场景：用来表示一组明确的可选值列表</li>
<li>比如，在贪吃蛇游戏中，游戏的方向的可选值只能是上、下、左、右中的任意一个</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用自定义类型:</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Direction</span> = <span class="string">&#x27;up&#x27;</span> | <span class="string">&#x27;down&#x27;</span> | <span class="string">&#x27;left&#x27;</span> | <span class="string">&#x27;right&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeDirection</span>(<span class="params">direction: Direction</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(direction)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数时，会有类型提示：</span></span><br><span class="line"><span class="title function_">changeDirection</span>(<span class="string">&#x27;up&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：参数 direction 的值只能是 up&#x2F;down&#x2F;left&#x2F;right 中的任意一个</li>
<li>优势：相比于 string 类型，使用字面量类型更加精确、严谨</li>
</ul>
<h3 id="【了解】枚举"><a href="#【了解】枚举" class="headerlink" title="【了解】枚举"></a>【了解】枚举</h3><ul>
<li>枚举的功能类似于<strong>字面量类型+联合类型组合</strong>的功能，也可以表示一组明确的可选值</li>
<li>枚举：定义一组命名常量。它描述一个值，该值可以是这些命名常量中的一个</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建枚举</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123; <span class="title class_">Up</span>, <span class="title class_">Down</span>, <span class="title class_">Left</span>, <span class="title class_">Right</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用枚举类型</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeDirection</span>(<span class="params">direction: Direction</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(direction)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数时，需要应该传入：枚举 Direction 成员的任意一个</span></span><br><span class="line"><span class="comment">// 类似于 JS 中的对象，直接通过 点（.）语法 访问枚举的成员也可以通过[]来访问</span></span><br><span class="line"><span class="title function_">changeDirection</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>解释:</p>
<ol>
<li><p>使用 <code>enum</code> 关键字定义枚举</p>
</li>
<li><p>约定枚举名称以大写字母开头</p>
</li>
<li><p>枚举中的多个值之间通过 <code>,</code>（逗号）分隔</p>
</li>
<li><p>定义好枚举后，直接使用枚举名称作为类型注解</p>
</li>
<li><p>ts中的枚举：不仅是类型也是值，而type定义的类型是不能当值使用的</p>
</li>
<li><p>类似于 JS 中的对象，直接通过 点（.）语法 访问枚举的成员也可以通过[]来访问</p>
</li>
<li><p>只能读取枚举类型的值不能修改</p>
</li>
</ol>
</li>
</ul>
<h4 id="数字枚举"><a href="#数字枚举" class="headerlink" title="数字枚举"></a>数字枚举</h4><ul>
<li>问题：我们把枚举成员作为了函数的实参，它的值是什么呢?</li>
<li>解释：通过将鼠标移入 Direction.Up，可以看到枚举成员 Up 的值为 0</li>
<li>注意：枚举成员是有值的，默认为：从 0 开始自增的数值</li>
<li>我们把，枚举成员的值为数字的枚举，称为：<code>数字枚举</code></li>
<li>当然，也可以给枚举中的成员初始化值</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Down -&gt; 11、Left -&gt; 12、Right -&gt; 13</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123; <span class="title class_">Up</span> = <span class="number">10</span>, <span class="title class_">Down</span>, <span class="title class_">Left</span>, <span class="title class_">Right</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123; <span class="title class_">Up</span> = <span class="number">2</span>, <span class="title class_">Down</span> = <span class="number">4</span>, <span class="title class_">Left</span> = <span class="number">8</span>, <span class="title class_">Right</span> = <span class="number">16</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="字符串枚举"><a href="#字符串枚举" class="headerlink" title="字符串枚举"></a>字符串枚举</h4><ul>
<li>字符串枚举：枚举成员的值是字符串</li>
<li>注意：字符串枚举没有自增长行为，因此，<strong>字符串枚举的每个成员必须有初始值</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">Up</span> = <span class="string">&#x27;UP&#x27;</span>,</span><br><span class="line">  <span class="title class_">Down</span> = <span class="string">&#x27;DOWN&#x27;</span>,</span><br><span class="line">  <span class="title class_">Left</span> = <span class="string">&#x27;LEFT&#x27;</span>,</span><br><span class="line">  <span class="title class_">Right</span> = <span class="string">&#x27;RIGHT&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="枚举实现原理"><a href="#枚举实现原理" class="headerlink" title="枚举实现原理"></a>枚举实现原理</h4><ul>
<li>枚举是 TS 为数不多的非 JavaScript 类型级扩展(不仅仅是类型)的特性之一</li>
<li>因为：其他类型仅仅被当做类型，而枚举不仅用作类型，还提供值(枚举成员都是有值的)</li>
<li>也就是说，其他的类型会在编译为 JS 代码时自动移除。但是，<strong>枚举类型会被编译为 JS 代码</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">Up</span> = <span class="string">&#x27;UP&#x27;</span>,</span><br><span class="line">  <span class="title class_">Down</span> = <span class="string">&#x27;DOWN&#x27;</span>,</span><br><span class="line">  <span class="title class_">Left</span> = <span class="string">&#x27;LEFT&#x27;</span>,</span><br><span class="line">  <span class="title class_">Right</span> = <span class="string">&#x27;RIGHT&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 会被编译为以下 JS 代码：</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Direction</span>;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params">Direction</span>) &#123;</span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;Up&#x27;</span>] = <span class="string">&#x27;UP&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;Down&#x27;</span>] = <span class="string">&#x27;DOWN&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;Left&#x27;</span>] = <span class="string">&#x27;LEFT&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;Right&#x27;</span>] = <span class="string">&#x27;RIGHT&#x27;</span></span><br><span class="line">&#125;)(<span class="title class_">Direction</span> || <span class="title class_">Direction</span> = &#123;&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>说明：枚举与前面讲到的字面量类型+联合类型组合的功能类似，都用来表示一组明确的可选值列表</li>
<li>一般情况下，<strong>推荐使用字面量类型+联合类型组合的方式</strong>，因为相比枚举，这种方式更加直观、简洁、高效</li>
</ul>
<h3 id="any-类型"><a href="#any-类型" class="headerlink" title="any 类型"></a>any 类型</h3><ul>
<li><strong>原则:不推荐使用 any</strong>!这会让 TypeScript 变为 “AnyScript”(失去 TS 类型保护的优势)</li>
<li>因为当值的类型为 any 时，可以对该值进行任意操作，并且不会有代码提示</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="built_in">any</span> = &#123; <span class="attr">x</span>: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line">obj.<span class="property">bar</span> = <span class="number">100</span></span><br><span class="line"><span class="title function_">obj</span>()</span><br><span class="line"><span class="keyword">const</span> <span class="attr">n</span>: <span class="built_in">number</span> = obj</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:以上操作都不会有任何类型错误提示，即使可能存在错误</li>
<li>尽可能的避免使用 any 类型，除非临时使用 any 来“避免”书写很长、很复杂的类型</li>
<li>其他隐式具有 any 类型的情况<ol>
<li>声明变量不提供类型也不提供默认值</li>
<li>函数参数不加类型</li>
</ol>
</li>
<li>注意：因为不推荐使用 any，所以，这两种情况下都应该提供类型</li>
</ul>
<p>在项目开发中，尽量少用any类型</p>
<hr>
<h3 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h3><p>有时候你会比 TS 更加明确一个值的类型，此时，可以使用类型断言来指定更具体的类型。 比如，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> aLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<strong>该方法返回值的类型是 HTMLElement，</strong>该类型只包含所有标签公共的属性或方法，不包含 a 标签特有的 href 等属性</li>
<li>因此，这个**类型太宽泛(不具体)**，无法操作 href 等 a 标签特有的属性或方法</li>
<li>解决方式：这种情况下就需要<strong>使用类型断言指定更加具体的类型</strong></li>
<li>使用类型断言：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> aLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>) <span class="keyword">as</span> <span class="title class_">HTMLAnchorElement</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>解释:</p>
<ol>
<li>使用 <code>as</code> 关键字实现类型断言</li>
<li>关键字 as 后面的类型是一个更加具体的类型（HTMLAnchorElement 是 HTMLElement 的子类型）</li>
<li>通过类型断言，aLink 的类型变得更加具体，这样就可以访问 a 标签特有的属性或方法了</li>
</ol>
</li>
<li><p>另一种语法，使用 <code>&lt;&gt;</code> 语法，这种语法形式不常用知道即可:</p>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该语法，知道即可：在react的jsx中使用会报错</span></span><br><span class="line"><span class="keyword">const</span> aLink = &lt;<span class="title class_">HTMLAnchorElement</span>&gt;<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><em>技巧：在浏览器控制台，通过 <code>__proto__</code> 获取 DOM 元素的类型</em></p>
<h3 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h3><ul>
<li>众所周知，JS 中提供了 typeof 操作符，用来在 JS 中获取数据的类型</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="string">&#x27;Hello world&#x27;</span>) <span class="comment">// ?</span></span><br></pre></td></tr></table></figure>

<ul>
<li>实际上，TS 也提供了 typeof 操作符：可以在<em>类型上下文</em>中引用变量或属性的类型（类型查询）</li>
<li>使用场景:根据已有变量的值，获取该值的类型，来简化类型书写</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatPoint</span>(<span class="params">point: &#123; x: <span class="built_in">number</span>; y: <span class="built_in">number</span> &#125;</span>) &#123;&#125;</span><br><span class="line"><span class="title function_">formatPoint</span>(p)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatPoint</span>(<span class="params">point: <span class="keyword">typeof</span> p</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>使用 <code>typeof</code> 操作符来获取变量 p 的类型，结果与第一种（对象字面量形式的类型）相同</li>
<li>typeof 出现在<strong>类型注解的位置（参数名称的冒号后面）所处的环境就在类型上下文</strong>(区别于 JS 代码)</li>
<li>注意：typeof 只能用来查询变量或属性的类型，无法查询其他形式的类型（比如，函数调用的类型）</li>
</ol>
</li>
</ul>
<h1 id="TypeScript-高级类型"><a href="#TypeScript-高级类型" class="headerlink" title="TypeScript 高级类型"></a>TypeScript 高级类型</h1><p>TS 中的高级类型有很多，重点学习以下高级类型：</p>
<ol>
<li>泛型 和 keyof</li>
<li>索引签名类型 和 索引查询类型</li>
<li>映射类型</li>
</ol>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><ul>
<li><strong>泛型是可以在保证类型安全前提下，让函数等与多种类型一起工作，从而实现复用</strong>，常用于：函数、接口、class 中</li>
<li>需求：创建一个 id 函数，传入什么数据就返回该数据本身(也就是说，参数和返回值类型相同)</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">id</span>(<span class="params">value: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123; <span class="keyword">return</span> value &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>比如，id(10) 调用以上函数就会直接返回 10 本身。但是，该函数只接收数值类型，无法用于其他类型</li>
<li>为了能让函数能够接受任意类型，可以将参数类型修改为 any。但是，这样就失去了 TS 的类型保护，类型不安全</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">id</span>(<span class="params">value: <span class="built_in">any</span></span>): <span class="built_in">any</span> &#123; <span class="keyword">return</span> value &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>泛型在保证类型安全(不丢失类型信息)的同时，可以让函数等与多种不同的类型一起工作，灵活可复用</strong></li>
<li>实际上，在 C# 和 Java 等编程语言中，泛型都是用来实现可复用组件功能的主要工具之一</li>
</ul>
<h3 id="创建泛型函数"><a href="#创建泛型函数" class="headerlink" title="创建泛型函数"></a>创建泛型函数</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123; <span class="keyword">return</span> value &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> id&lt;T&gt;(<span class="attr">value</span>: T): T &#123; <span class="keyword">return</span> value &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释<ol>
<li>动态指定类型，Type相当于函数的参数,传递的什么类型就是什么类型</li>
<li>语法：在函数名称的后面添加 <code>&lt;&gt;</code>(尖括号)，<strong>尖括号中添加类型变量</strong>，比如此处的 Type</li>
<li><strong>类型变量 Type，是一种特殊类型的变量，它处理类型而不是值</strong></li>
<li><strong>该类型变量相当于一个类型容器</strong>，能够捕获用户提供的类型(具体是什么类型由用户调用该函数时指定)</li>
<li>因为 Type 是类型，因此可以将其作为函数参数和返回值的类型，表示参数和返回值具有相同的类型</li>
<li>类型变量 Type，可以是任意合法的变量名称</li>
</ol>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动态指定类型</span></span><br><span class="line"><span class="keyword">function</span> fn&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">fn&lt;<span class="built_in">number</span>| <span class="built_in">string</span>&gt;(<span class="string">&quot;12&quot;</span>);</span><br><span class="line"><span class="comment">// 简写</span></span><br><span class="line"><span class="title function_">fn</span>(<span class="string">&quot;15&quot;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="调用泛型函数"><a href="#调用泛型函数" class="headerlink" title="调用泛型函数"></a>调用泛型函数</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = id&lt;<span class="built_in">number</span>&gt;(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">const</span> str = id&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>解释：</p>
<ol>
<li>语法：在函数名称的后面添加 <code>&lt;&gt;</code>(尖括号)，<strong>尖括号中指定具体的类型</strong>，比如，此处的 number</li>
<li>当传入类型 number 后，这个类型就会被函数声明时指定的类型变量 Type 捕获到</li>
<li>此时，Type 的类型就是 number，所以，函数 id 参数和返回值的类型也都是 number</li>
</ol>
</li>
<li><p>同样，如果传入类型 string，函数 id 参数和返回值的类型就都是 string</p>
</li>
<li><p>这样，通过泛型就做到了让 id 函数与多种不同的类型一起工作，<strong>实现了复用的同时保证了类型安全</strong></p>
</li>
</ul>
<h3 id="简化泛型函数调用"><a href="#简化泛型函数调用" class="headerlink" title="简化泛型函数调用"></a>简化泛型函数调用</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略 &lt;number&gt; 调用函数</span></span><br><span class="line"><span class="keyword">let</span> num = <span class="title function_">id</span>(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> str = <span class="title function_">id</span>(<span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>解释:</p>
<ol>
<li>在调用泛型函数时，<strong>可以省略 <code>&lt;类型&gt;</code> 来简化泛型函数的调用</strong></li>
<li>此时，TS 内部会采用一种叫做<strong>类型参数推断</strong>的机制，来根据传入的实参自动推断出类型变量 Type 的类型</li>
<li>比如，传入实参 10，TS 会自动推断出变量 num 的类型 number，并作为 Type 的类型</li>
</ol>
</li>
<li><p>推荐：使用这种简化的方式调用泛型函数，使代码更短，更易于阅读</p>
</li>
<li><p>说明：<strong>当编译器无法推断类型或者推断的类型不准确时，就需要显式地传入类型参数</strong></p>
</li>
<li><p>ts的数组就是一个泛型</p>
</li>
</ul>
<h3 id="泛型约束"><a href="#泛型约束" class="headerlink" title="泛型约束"></a>泛型约束</h3><ul>
<li>默认情况下，泛型函数的类型变量 Type 可以代表多个类型，这导致无法访问任何属性</li>
<li>比如，id(‘a’) 调用函数时获取参数的长度：</li>
<li><strong>下列写法会报错</strong>，不确定是否存在length属性</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="property">length</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">id</span>(<span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：<strong>Type 可以代表任意类型，无法保证一定存在 length 属性，</strong>比如 number 类型就没有 length</li>
<li>此时，就需要<strong>为泛型添加约束来<code>收缩类型</code>(缩窄类型取值范围)</strong></li>
<li>添加泛型约束收缩类型，主要有以下两种方式：1 指定更加具体的类型  2 添加约束</li>
</ul>
<h4 id="指定更加具体的类型"><a href="#指定更加具体的类型" class="headerlink" title="指定更加具体的类型"></a>指定更加具体的类型</h4><p>比如，将类型修改为 <code>Type[]</code>(Type 类型的数组)，因为只要是数组就一定存在 length 属性，因此就可以访问了</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>[]): <span class="title class_">Type</span>[] &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="property">length</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ILength</span> &#123; <span class="attr">length</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type extends ILength 添加泛型约束</span></span><br><span class="line"><span class="comment">// 解释：表示传入的 类型 必须满足 ILength 接口的要求才行，也就是得有一个 number 类型的 length 属性</span></span><br><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span> <span class="keyword">extends</span> <span class="title class_">ILength</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="property">length</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>解释:<ol>
<li>创建描述约束的接口 ILength，该接口要求提供 length 属性</li>
<li>通过 <code>extends</code> 关键字使用该接口，为泛型(类型变量)添加约束</li>
<li>该约束表示：<strong>传入的类型必须具有 length 属性</strong></li>
</ol>
</li>
<li>注意:传入的实参(比如，数组)只要有 length 属性即可（类型兼容性)</li>
<li>也可以写成Type,不写接口</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> T = &#123;</span><br><span class="line">  <span class="attr">length</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> fn&lt;<span class="title class_">Type</span> <span class="keyword">extends</span> T&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="property">length</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">fn&lt;<span class="built_in">string</span>| <span class="built_in">number</span>[]&gt;(<span class="string">&quot;asd&quot;</span>);</span><br></pre></td></tr></table></figure>



<h3 id="多个类型变量"><a href="#多个类型变量" class="headerlink" title="多个类型变量"></a>多个类型变量</h3><p>泛型的类型变量可以有多个，并且<strong>类型变量之间还可以约束</strong>(比如，第二个类型变量受第一个类型变量约束)<br>比如，创建一个函数来获取对象中属性的值：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getProp&lt;<span class="title class_">Type</span>, <span class="title class_">Key</span> <span class="keyword">extends</span> keyof <span class="title class_">Type</span>&gt;(<span class="attr">obj</span>: <span class="title class_">Type</span>, <span class="attr">key</span>: <span class="title class_">Key</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[key]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;</span><br><span class="line"><span class="title function_">getProp</span>(person, <span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>添加了第二个类型变量 Key，两个类型变量之间使用 <code>,</code> 逗号分隔。</li>
<li><strong>keyof 关键字接收一个对象类型，生成其键名称(可能是字符串或数字)的联合类型</strong>。</li>
<li>本示例中 <code>keyof Type</code> 实际上获取的是 person 对象所有键的联合类型，也就是：<code>&#39;name&#39; | &#39;age&#39;</code></li>
<li>类型变量 Key 受 Type 约束，可以理解为：Key 只能是 Type 所有键中的任意一个，或者说只能访问对象中存在的属性</li>
</ol>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Type extends object 表示： Type 应该是一个对象类型，如果不是 对象 类型，就会报错</span></span><br><span class="line"><span class="comment">// 如果要用到 对象 类型，应该用 object ，而不是 Object</span></span><br><span class="line"><span class="keyword">function</span> getProperty&lt;<span class="title class_">Type</span> <span class="keyword">extends</span> <span class="built_in">object</span>, <span class="title class_">Key</span> <span class="keyword">extends</span> keyof <span class="title class_">Type</span>&gt;(<span class="attr">obj</span>: <span class="title class_">Type</span>, <span class="attr">key</span>: <span class="title class_">Key</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[key]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h3><p>泛型接口：接口也可以配合泛型来使用，以增加其灵活性，增强其复用性</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IdFunc</span>&lt;<span class="title class_">Type</span>&gt; &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="function">(<span class="params">value: Type</span>) =&gt;</span> <span class="title class_">Type</span></span><br><span class="line">  <span class="attr">ids</span>: <span class="function">() =&gt;</span> <span class="title class_">Type</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="title class_">IdFunc</span>&lt;<span class="built_in">number</span>&gt; = &#123;</span><br><span class="line">  <span class="title function_">id</span>(<span class="params">value</span>) &#123; <span class="keyword">return</span> value &#125;,</span><br><span class="line">  <span class="title function_">ids</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>在接口名称的后面添加 <code>&lt;类型变量&gt;</code>，那么，这个接口就变成了泛型接口。</li>
<li>接口的类型变量，对接口中所有其他成员可见，也就是<strong>接口中所有成员都可以使用类型变量</strong>。</li>
<li>使用泛型接口时，<strong>需要显式指定具体的类型</strong>(比如，此处的 IdFunc<nunber>)。</nunber></li>
<li>此时，id 方法的参数和返回值类型都是 number;ids 方法的返回值类型是 number[]。</li>
</ol>
</li>
</ul>
<h4 id="JS-中的泛型接口"><a href="#JS-中的泛型接口" class="headerlink" title="JS 中的泛型接口"></a>JS 中的泛型接口</h4><p>实际上，JS 中的数组在 TS 中就是一个泛型接口。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> strs = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="comment">// 鼠标放在 forEach 上查看类型</span></span><br><span class="line">strs.<span class="property">forEach</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="comment">// 鼠标放在 forEach 上查看类型</span></span><br><span class="line">nums.<span class="property">forEach</span></span><br></pre></td></tr></table></figure>

<p><img src="/TS/image-20210917002203414.png" alt="image-20210917002203414"></p>
<ul>
<li>解释:当我们在使用数组时，TS 会根据数组的不同类型，来自动将类型变量设置为相应的类型</li>
<li>技巧:可以通过 Ctrl + 鼠标左键(Mac：Command + 鼠标左键)来查看具体的类型信息</li>
</ul>
<h3 id="泛型工具类型"><a href="#泛型工具类型" class="headerlink" title="泛型工具类型"></a>泛型工具类型</h3><ul>
<li>泛型工具类型:TS 内置了一些常用的工具类型，来简化 TS 中的一些常见操作</li>
<li>说明:它们都是基于泛型实现的(泛型适用于多种类型，更加通用)，并且是内置的，可以直接在代码中使用。 这些工具类型有很多，主要学习以下几个:</li>
</ul>
<ol>
<li><code>Partial&lt;Type&gt;</code></li>
<li><code>Readonly&lt;Type&gt;</code></li>
<li><code>Pick&lt;Type, Keys&gt;</code></li>
<li><code>Omit&lt;Type&gt;</code></li>
</ol>
<h4 id="Partial"><a href="#Partial" class="headerlink" title="Partial"></a>Partial</h4><ul>
<li>Partial<Type> 用来构造(创建)一个类型，将 Type 的所有属性设置为可选。</Type></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> =  &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">children</span>: <span class="built_in">number</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialProps</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Props</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:构造出来的新类型 PartialProps 结构和 Props 相同，但所有属性都变为可选的。</li>
</ul>
<h4 id="Readonly"><a href="#Readonly" class="headerlink" title="Readonly"></a>Readonly</h4><ul>
<li>Readonly<Type> 用来构造一个类型，将 Type 的所有属性都设置为 readonly(只读)。</Type></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> =  &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">children</span>: <span class="built_in">number</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReadonlyProps</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">Props</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:构造出来的新类型 ReadonlyProps 结构和 Props 相同，但所有属性都变为只读的。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">props</span>: <span class="title class_">ReadonlyProps</span> = &#123; <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">children</span>: [] &#125;</span><br><span class="line"><span class="comment">// 错误演示</span></span><br><span class="line">props.<span class="property">id</span> = <span class="string">&#x27;2&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>当我们想重新给 id 属性赋值时，就会报错:无法分配到 “id” ，因为它是只读属性。</li>
</ul>
<h4 id="Pick"><a href="#Pick" class="headerlink" title="Pick"></a>Pick</h4><ul>
<li>Pick&lt;Type, Keys&gt; 从 Type 中选择一组属性来构造新类型。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Props</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">children</span>: <span class="built_in">number</span>[]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PickProps</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">Props</span>, <span class="string">&#x27;id&#x27;</span> | <span class="string">&#x27;title&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>Pick 工具类型有两个类型变量:1 表示选择谁的属性 2 表示选择哪几个属性。 2. 其中第二个类型变量，如果只选择一个则只传入该属性名即可。</li>
<li>第二个类型变量传入的属性只能是第一个类型变量中存在的属性。</li>
<li>构造出来的新类型 PickProps，只有 id 和 title 两个属性类型。</li>
</ol>
</li>
</ul>
<h4 id="Omit"><a href="#Omit" class="headerlink" title="Omit"></a>Omit</h4><p>Omit&lt;K,T&gt;类型让我们可以从另一个对象类型中剔除某些属性，并创建一个新的对象类型：</p>
<p>K：是对象类型名称，T：是剔除K类型中的属性名称</p>
<p><img src="/TS/image-20210917003456128.png" alt="image-20210917003456128"></p>
<h2 id="索引签名类型"><a href="#索引签名类型" class="headerlink" title="索引签名类型"></a>索引签名类型</h2><p>绝大多数情况下，我们都可以在使用对象前就确定对象的结构，并为对象添加准确的类型。<br>使用场景:<strong>当无法确定对象中有哪些属性</strong>(或者说对象中可以出现任意多个属性)，此时，就用到<strong>索引签名类型</strong>了。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">AnyObject</span> &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="title class_">AnyObject</span> = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>使用 <code>[key: string]</code> 来约束该接口中允许出现的属性名称。表示只要是 string 类型的属性名称，都可以出现在对象中。</li>
<li>这样，对象 obj 中就可以出现任意多个属性(比如，a、b 等)。</li>
<li><code>key 只是一个占位符</code>，可以换成任意合法的变量名称。</li>
<li>隐藏的前置知识:<code>JS 中对象(&#123;&#125;)的键是 string 类型的</code>。</li>
</ol>
</li>
</ul>
<h3 id="数组索引类型签名"><a href="#数组索引类型签名" class="headerlink" title="数组索引类型签名"></a>数组索引类型签名</h3><ul>
<li>在 JS 中数组是一类特殊的对象，特殊在数组的键(索引)是数值类型</li>
<li>并且，数组也可以出现任意多个元素。所以，在数组对应的泛型接口中，也用到了索引签名类型。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyArray</span>&lt;T&gt; &#123;</span><br><span class="line">  [<span class="attr">n</span>: <span class="built_in">number</span>]: T</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="title class_">MyArray</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>MyArray 接口模拟原生的数组接口，并使用 <code>[n: number]</code> 来作为索引签名类型。</li>
<li>该索引签名类型表示:只要是 number 类型的键(索引)都可以出现在数组中，或者说数组中可以有任意多个元素。</li>
<li>同时也符合数组索引是 number 类型这一前提。</li>
</ol>
</li>
</ul>
<h2 id="映射类型"><a href="#映射类型" class="headerlink" title="映射类型"></a>映射类型</h2><ul>
<li>映射类型:<strong>基于旧类型创建新类型(对象类型</strong>)，减少重复、提升开发效率。<br>比如，类型 PropKeys 有 x&#x2F;y&#x2F;z，另一个类型 Type1 中也有 x&#x2F;y&#x2F;z，并且 Type1 中 x&#x2F;y&#x2F;z 的类型相同:</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PropKeys</span> = <span class="string">&#x27;x&#x27;</span> | <span class="string">&#x27;y&#x27;</span> | <span class="string">&#x27;z&#x27;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Type1</span> = &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span>; <span class="attr">z</span>: <span class="built_in">number</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>这样书写没错，但 x&#x2F;y&#x2F;z 重复书写了两次。像这种情况，就可以使用映射类型来进行简化。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PropKeys</span> = <span class="string">&#x27;x&#x27;</span> | <span class="string">&#x27;y&#x27;</span> | <span class="string">&#x27;z&#x27;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Type2</span> = &#123; [<span class="title class_">Key</span> <span class="keyword">in</span> <span class="title class_">PropKeys</span>]: <span class="built_in">number</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>映射类型是基于索引签名类型的，所以，该语法类似于索引签名类型，也使用了 []。</li>
<li><code>Key in PropKeys</code> 表示 Key 可以是 PropKeys 联合类型中的任意一个，类似于 forin(let k in obj)。</li>
<li>使用映射类型创建的新对象类型 Type2 和类型 Type1 结构完全相同。</li>
<li>注意:<strong>映射类型只能在类型别名中使用，不能在接口中使用</strong>。</li>
</ol>
</li>
</ul>
<h3 id="根据对象创建"><a href="#根据对象创建" class="headerlink" title="根据对象创建"></a>根据对象创建</h3><p>映射类型除了根据联合类型创建新类型外，还可以根据对象类型来创建:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span>; <span class="attr">c</span>: <span class="built_in">boolean</span> &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Type3</span> = &#123; [key <span class="keyword">in</span> keyof <span class="title class_">Props</span>]: <span class="built_in">number</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>首先，先执行 <code>keyof Props</code> 获取到对象类型 Props 中所有键的联合类型即，’a’ | ‘b’ | ‘c’。</li>
<li>然后，<code>Key in ...</code> 就表示 Key 可以是 Props 中所有的键名称中的任意一个。</li>
</ol>
</li>
</ul>
<h3 id="内置映射类型实现分析"><a href="#内置映射类型实现分析" class="headerlink" title="内置映射类型实现分析"></a>内置映射类型实现分析</h3><ul>
<li>实际上，前面讲到的<strong>泛型工具类型</strong>(比如，Partial<Type>)都是基于映射类型实现的。 </Type></li>
<li>比如，Partial<Type> 的实现:</Type></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span>; <span class="attr">c</span>: <span class="built_in">boolean</span> &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialProps</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Props</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li><code>keyof T</code> 即 keyof Props 表示获取 Props 的所有键，也就是:’a’ | ‘b’ | ‘c’。</li>
<li>在 [] 后面添加 <code>?</code>(问号)，表示将这些属性变为<code>可选</code>的，以此来实现 Partial 的功能。</li>
<li>冒号后面的 <code>T[P] 表示获取 T 中每个键对应的类型</code>。比如，如果是 ‘a’ 则类型是 number;如果是 ‘b’ 则类型是 string。</li>
<li>最终，新类型 PartialProps 和旧类型 Props 结构完全相同，只是让所有类型都变为可选了。</li>
</ol>
</li>
</ul>
<h3 id="索引访问类型"><a href="#索引访问类型" class="headerlink" title="索引访问类型"></a>索引访问类型</h3><ul>
<li>刚刚用到的 <code>T[P]</code> 语法，在 TS 中叫做<code>索引访问类型</code></li>
<li>作用:<strong>用来查询属性的类型</strong>。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span>; <span class="attr">c</span>: <span class="built_in">boolean</span> &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TypeA</span> = <span class="title class_">Props</span>[<span class="string">&#x27;a&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<code>Props[&#39;a&#39;]</code> 表示查询类型 Props 中属性 ‘a’ 对应的类型 number。所以，TypeA 的类型为 number</li>
<li>注意:<strong>[] 中的属性必须存在于被查询类型中</strong>，否则就会报错。</li>
</ul>
<h4 id="同时查询多个索引的类型"><a href="#同时查询多个索引的类型" class="headerlink" title="同时查询多个索引的类型"></a>同时查询多个索引的类型</h4><ul>
<li>索引查询类型的其他使用方式:同时查询多个索引的类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span>; <span class="attr">c</span>: <span class="built_in">boolean</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TypeA</span> = <span class="title class_">Props</span>[<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span>] <span class="comment">// string | number</span></span><br></pre></td></tr></table></figure>

<ul>
<li>解释:使用字符串字面量的联合类型，获取属性 a 和 b 对应的类型，结果为: string | number。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TypeA</span> = <span class="title class_">Props</span>[keyof <span class="title class_">Props</span>] <span class="comment">// string | number | boolean</span></span><br></pre></td></tr></table></figure>

<ul>
<li>解释:使用 keyof 操作符获取 Props 中所有键对应的类型，结果为: string | number | boolean。</li>
</ul>
<h1 id="在-React-项目中使用-TS"><a href="#在-React-项目中使用-TS" class="headerlink" title="在 React 项目中使用 TS"></a>在 React 项目中使用 TS</h1><ol>
<li>创建新项目</li>
<li>在现有项目中添加 TS</li>
</ol>
<h2 id="创建新项目"><a href="#创建新项目" class="headerlink" title="创建新项目"></a>创建新项目</h2><ul>
<li><p>命令：<code>npx create-react-app my-app --template typescript</code></p>
</li>
<li><p>说明：在命令行中，添加 <code>--template typescript</code> 表示创建支持 TS 的项目</p>
</li>
<li><p>项目目录的变化：</p>
<ol>
<li>在项目根目录中多了一个文件：<code>tsconfig.json</code><ul>
<li>TS 的配置文件</li>
</ul>
</li>
<li>在 src 目录中，文件的后缀有变化，由原来的 .js 变为 <code>.ts</code> 或 <code>.tsx</code><ul>
<li><code>.ts</code> ts 文件的后缀名</li>
<li><code>.tsx</code> 是在 TS 中使用 React 组件时，需要使用该后缀(组件必须使用该后缀，不能用ts)</li>
</ul>
</li>
<li>在 src 目录中，多了 <code>react-app-env.d.ts</code> 文件<ul>
<li><code>.d.ts</code> 类型声明文件，用来指定类型</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="tsconfig的介绍"><a href="#tsconfig的介绍" class="headerlink" title="tsconfig的介绍"></a>tsconfig的介绍</h2><ul>
<li>tsconfig.json是typescript项目的配置文件，用于配置typescript</li>
<li>tsconfig.json配置文件可以通过 <code>tsc --init</code> 生成</li>
</ul>
<ul>
<li>说明：所有的配置项都可以通过鼠标移入的方式，来查看配置项的解释说明。</li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/tsconfig">tsconfig 文档链接</a></li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 编译选项</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 生成代码的语言版本：将我们写的 TS 代码编译成哪个版本的 JS 代码</span></span><br><span class="line">    <span class="comment">// 命令行： tsc --target es5 11-测试TS配置文件.ts</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 指定要包含在编译中的 library</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;dom&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom.iterable&quot;</span><span class="punctuation">,</span> <span class="string">&quot;esnext&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 允许 ts 编译器编译 js 文件</span></span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 跳过类型声明文件的类型检查</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// es 模块 互操作，屏蔽 ESModule 和 CommonJS 之间的差异</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 允许通过 import x from &#x27;y&#x27; 即使模块没有显式指定 default 导出</span></span><br><span class="line">    <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 开启严格模式</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 对文件名称强制区分大小写</span></span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 为 switch 语句启用错误报告</span></span><br><span class="line">    <span class="attr">&quot;noFallthroughCasesInSwitch&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 生成代码的模块化标准</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;esnext&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 模块解析（查找）策略</span></span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 允许导入扩展名为.json的模块</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 是否将没有 import/export 的文件视为旧（全局而非模块化）脚本文件</span></span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 编译时不生成任何文件（只进行类型检查）</span></span><br><span class="line">    <span class="attr">&quot;noEmit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 指定将 JSX 编译成什么形式</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-jsx&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 指定允许 ts 处理的目录</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="typescript类型声明文件"><a href="#typescript类型声明文件" class="headerlink" title="typescript类型声明文件"></a>typescript类型声明文件</h1><p>今天几乎所有的 JavaScript 应用都会引入许多第三方库来完成任务需求。</p>
<p>这些第三方库不管是否是用 TS 编写的，最终都要编译成 JS 代码，才能发布给开发者使用。</p>
<p>我们知道是 TS 提供了类型，才有了代码提示和类型保护等机制。 </p>
<p>但在项目开发中使用第三方库时，你会发现它们几乎都有相应的 TS 类型，这些类型是怎么来的呢? <code>类型声明文件</code></p>
<ul>
<li><strong>类型声明文件：用来为已存在的 JS 库提供类型信息</strong></li>
</ul>
<p>这样在 TS 项目中使用这些库时，就像用 TS 一样，都会有代码提示、类型保护等机制了。</p>
<ol>
<li>TS 的两种文件类型</li>
<li>类型声明文件的使用说明</li>
</ol>
<h2 id="TS-中的两种文件类型"><a href="#TS-中的两种文件类型" class="headerlink" title="TS 中的两种文件类型"></a>TS 中的两种文件类型</h2><ul>
<li><p>TS 中有两种文件类型：1 <code>.ts</code> 文件 2 <code>.d.ts</code> 文件</p>
</li>
<li><p>.ts 文件:</p>
<ol>
<li><code>既包含类型信息又可执行代码</code></li>
<li>可以被编译为 .js 文件，然后，执行代码</li>
<li>用途：编写程序代码的地方</li>
</ol>
</li>
<li><p>.d.ts 文件:</p>
<ol>
<li><code>只包含类型信息</code>的类型声明文件</li>
<li><strong>不会生成 .js 文件，仅用于提供类型信息,在.d.ts文件中不允许出现可执行的代码，只用于提供类型</strong></li>
<li>用途：为 JS 提供类型信息</li>
</ol>
</li>
<li><p>总结：.ts 是 <code>implementation</code>(代码实现文件)；**.d.ts 是 declaration(类型声明文件)**</p>
</li>
<li><p>如果要为 JS 库提供类型信息，要使用 <code>.d.ts</code> 文件</p>
</li>
</ul>
<h2 id="类型声明文件的使用说明"><a href="#类型声明文件的使用说明" class="headerlink" title="类型声明文件的使用说明"></a>类型声明文件的使用说明</h2><ul>
<li>在使用 TS 开发项目时，类型声明文件的使用包括以下两种方式: <ol>
<li>使用已有的类型声明文件</li>
<li>创建自己的类型声明文件</li>
</ol>
</li>
</ul>
<p>使用已有的类型声明文件</p>
<ol>
<li>内置类型声明文件</li>
<li>第三方库的类型声明文件</li>
<li>自己提供的</li>
</ol>
<h2 id="内置类型声明文件"><a href="#内置类型声明文件" class="headerlink" title="内置类型声明文件"></a>内置类型声明文件</h2><ul>
<li>TS 为 JS 运行时可用的所有标准化内置 API 都提供了声明文件</li>
<li>比如，在使用数组时，数组所有方法都会有相应的代码提示以及类型信息:</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> strs = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="comment">// 鼠标放在 forEach 上查看类型</span></span><br><span class="line">strs.<span class="property">forEach</span></span><br></pre></td></tr></table></figure>

<ul>
<li>实际上这都是 TS 提供的内置类型声明文件</li>
<li>可以通过 Ctrl + 鼠标左键(Mac：Command + 鼠标左键)来查看内置类型声明文件内容</li>
<li>比如，查看 forEach 方法的类型声明，在 VSCode 中会自动跳转到 <code>lib.es5.d.ts</code> 类型声明文件中</li>
<li>当然，像 window、document 等 BOM、DOM API 也都有相应的类型声明(<code>lib.dom.d.ts</code>)</li>
</ul>
<h2 id="第三方库的类型声明文件"><a href="#第三方库的类型声明文件" class="headerlink" title="第三方库的类型声明文件"></a>第三方库的类型声明文件</h2><ul>
<li>目前，几乎所有常用的第三方库都有相应的类型声明文件</li>
<li>第三方库的类型声明文件有两种存在形式:1 库自带类型声明文件 2 由 DefinitelyTyped 提供。</li>
</ul>
<ol>
<li>库自带类型声明文件：比如，axios</li>
</ol>
<ul>
<li>查看 <code>node_modules/axios</code> 目录</li>
</ul>
<p>解释：这种情况下，正常导入该库，<strong>TS 就会自动加载库自己的类型声明文件</strong>，以提供该库的类型声明。</p>
<ol start="2">
<li>由 DefinitelyTyped 提供</li>
</ol>
<ul>
<li>DefinitelyTyped 是一个 github 仓库，用来提供高质量 TypeScript 类型声明</li>
<li><a target="_blank" rel="noopener" href="https://github.com/DefinitelyTyped/DefinitelyTyped/">DefinitelyTyped 链接</a></li>
<li>可以通过 npm&#x2F;yarn 来下载该仓库提供的 TS 类型声明包，这些包的名称格式为:<code>@types/*</code></li>
<li>比如，@types&#x2F;react、@types&#x2F;lodash 等</li>
<li>说明：在实际项目开发时，如果你使用的第三方库没有自带的声明文件，VSCode 会给出明确的提示</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 VSCode 中，查看 &#x27;lodash&#x27; 前面的提示</span></span><br></pre></td></tr></table></figure>

<ul>
<li>解释：当安装 <code>@types/*</code> 类型声明包后，<strong>TS 也会自动加载该类声明包</strong>，以提供该库的类型声明</li>
<li>补充：TS 官方文档提供了一个页面，可以来查询 @types&#x2F;* 库</li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/dt">@types&#x2F;* 库</a></li>
</ul>
<h2 id="创建自己的类型声明文件"><a href="#创建自己的类型声明文件" class="headerlink" title="创建自己的类型声明文件"></a>创建自己的类型声明文件</h2><ol>
<li>项目内共享类型</li>
<li>为已有 JS 文件提供类型声明</li>
</ol>
<h3 id="项目内共享类型"><a href="#项目内共享类型" class="headerlink" title="项目内共享类型"></a>项目内共享类型</h3><ul>
<li>如果多个 .ts 文件中都用到同一个类型，此时可以创建 .d.ts 文件提供该类型，实现类型共享。</li>
<li>操作步骤:<ol>
<li>创建 index.d.ts 类型声明文件。</li>
<li>创建需要共享的类型，并使用 export 导出(TS 中的类型也可以使用 import&#x2F;export 实现模块化功能)。</li>
<li>在需要使用共享类型的 .ts 文件中，通过 import 导入即可(.d.ts 后缀导入时，直接省略)。</li>
</ol>
</li>
</ul>
<h3 id="为已有-JS-文件提供类型声明"><a href="#为已有-JS-文件提供类型声明" class="headerlink" title="为已有 JS 文件提供类型声明"></a>为已有 JS 文件提供类型声明</h3><ol>
<li>在将 JS 项目迁移到 TS 项目时，为了让已有的 .js 文件有类型声明。 </li>
<li>成为库作者，创建库给其他人使用。</li>
</ol>
<ul>
<li>注意:类型声明文件的编写与模块化方式相关，不同的模块化方式有不同的写法。但由于历史原因，JS 模块化的发展 经历过多种变化(AMD、CommonJS、UMD、ESModule 等)，而 TS 支持各种模块化形式的类型声明。这就导致 ，类型声明文件相关内容又多又杂。</li>
<li>演示:基于最新的 ESModule(import&#x2F;export)来为已有 .js 文件，创建类型声明文件。</li>
</ul>
<h3 id="类型声明文件的使用说明-1"><a href="#类型声明文件的使用说明-1" class="headerlink" title="类型声明文件的使用说明"></a>类型声明文件的使用说明</h3><ul>
<li>说明:TS 项目中也可以使用 .js 文件。</li>
<li>说明:在导入 .js 文件时，TS 会自动加载与 .js 同名的 .d.ts 文件，以提供类型声明。</li>
<li>declare 关键字:用于类型声明，<strong>为其他地方(比如，.js 文件)已存在的变量声明类型，而不是创建一个新的变量。</strong><ol>
<li>对于 type、interface 等这些明确就是 TS 类型的(只能在 TS 中使用的)，可以省略 declare 关键字。</li>
<li>对于 let、function 等具有双重含义(在 JS、TS 中都能用)，应该使用 declare 关键字，明确指定此处用于类型声明。</li>
</ol>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> songName = <span class="string">&#x27;痴心绝对&#x27;</span></span><br><span class="line"><span class="keyword">let</span> position = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeDirection</span>(<span class="params">direction</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(direction)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fomartPoint</span> = point =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前坐标：&#x27;</span>, point)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; count, songName, position, add, changeDirection, fomartPoint &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>定义类型声明文件</p>
<h1 id="在现有项目中添加-TS"><a href="#在现有项目中添加-TS" class="headerlink" title="在现有项目中添加 TS"></a>在现有项目中添加 TS</h1><ul>
<li><a target="_blank" rel="noopener" href="https://create-react-app.dev/docs/adding-typescript">CRA 添加 ts 文档</a></li>
<li>如果要在现有的 JS 项目中，添加 TS，需要以下操作：</li>
</ul>
<ol>
<li>安装包：<code>yarn add typescript @types/node @types/react @types/react-dom @types/jest</code></li>
<li>把 <code>jsconfig.json</code>改成 path.tsconfig.json（改其他的文件名也行,只是不能为jsconfig.json）</li>
<li>将原来通过 React 脚手架创建的 TS 项目中的 tsconfig.json 中的配置，拷贝到咱们自己的项目中</li>
<li>创建 <code>path.tsconfig.json</code> 文件，将原来 <code>jsconfig.json</code> 文件中的内容拿过来</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;@scss/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/assets/styles/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>在 <code>tsconfig.json</code> 中，添加以下配置：</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 添加这一句</span></span><br><span class="line">  <span class="comment">// 扩展</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./path.tsconfig.json&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>将通过 React 脚手架创建的 TS 项目中的 <code>src/react-app-env.d.ts</code> 拷贝到咱们自己项目的 src 目录下</li>
<li>重启项目</li>
</ol>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ol>
<li>项目中使用 TS 时，既可以包含 js 文件，又可以包含 ts 文件</li>
</ol>
<ul>
<li><code>.js</code>、<code>.jsx</code>（使用 JS 时，React 组件对应的文件后缀）</li>
<li><code>.ts</code>、<code>.tsx</code>（使用 TS 时，React 组件对应的文件后缀）、<code>.d.ts</code></li>
</ul>
<ol start="2">
<li>在已有项目中，添加 TS 时的推荐模式</li>
</ol>
<ul>
<li>新的功能用 TS</li>
<li>已实现的功能，可以继续保持 JS 文件，慢慢修改为 TS 即可</li>
</ul>
<ol start="3">
<li>React 组件对应的文件后缀，修改为：<code>.tsx</code></li>
<li>工具函数对应的文件后缀，修改为：<code>.ts</code> 或者为其添加类型声明文件 <code>.d.ts</code></li>
</ol>
<h1 id="项目改造"><a href="#项目改造" class="headerlink" title="项目改造"></a>项目改造</h1><h2 id="改造建议"><a href="#改造建议" class="headerlink" title="改造建议"></a>改造建议</h2><ol>
<li>项目中使用 TS 时，既可以包含 js 文件，又可以包含 ts 文件</li>
</ol>
<ul>
<li><code>.js</code>、<code>.jsx</code>（使用 JS 时，React 组件对应的文件后缀）</li>
<li><code>.ts</code>、<code>.tsx</code>（使用 TS 时，React 组件对应的文件后缀）、<code>.d.ts</code></li>
</ul>
<ol start="2">
<li>在已有项目中，添加 TS 时的推荐模式</li>
</ol>
<ul>
<li>新的功能用 TS</li>
<li>已实现的功能，可以继续保持 JS 文件，慢慢修改为 TS 即可</li>
</ul>
<ol start="3">
<li>React 组件对应的文件后缀，修改为：<code>.tsx</code></li>
<li>工具函数对应的文件后缀，修改为：<code>.ts</code> 或者为其添加类型声明文件 <code>.d.ts</code></li>
</ol>
<h2 id="修改入口文件"><a href="#修改入口文件" class="headerlink" title="修改入口文件"></a>修改入口文件</h2><h3 id="index-ts"><a href="#index-ts" class="headerlink" title="index.ts"></a>index.ts</h3><ul>
<li>直接将文件后缀修改为 index.tsx 即可</li>
<li>需要重启项目</li>
</ul>
<h2 id="修改App-js"><a href="#修改App-js" class="headerlink" title="修改App.js"></a>修改App.js</h2><ul>
<li>讲App.js 改成app.tsx即可</li>
<li>需要安装react-router-dom的类型</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add <span class="meta">@types</span>/react-router-dom</span><br></pre></td></tr></table></figure>

<ul>
<li>重启</li>
</ul>
<h1 id="utils工具函数改造"><a href="#utils工具函数改造" class="headerlink" title="utils工具函数改造"></a>utils工具函数改造</h1><h2 id="history-js"><a href="#history-js" class="headerlink" title="history.js"></a>history.js</h2><p>不需要改造，直接把js改成ts即可</p>
<h2 id="storage-js"><a href="#storage-js" class="headerlink" title="storage.js"></a>storage.js</h2><ul>
<li>讲js改成ts</li>
<li>修改getTokenInfo</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从本地缓存中获取 Token 信息</span></span><br><span class="line"><span class="comment"> * JSON.parse() 要求参数必须是字符串</span></span><br><span class="line"><span class="comment"> * localStorage.getItem() 返回值可能是字符串，也可能是null，所以会报错</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getTokenInfo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">TOKEN_KEY</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="非空断言"><a href="#非空断言" class="headerlink" title="非空断言"></a>非空断言</h3><p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#non-null-assertion-operator">Non-null assertion operator</a></p>
<ul>
<li>TS 中提供一个运算符：<code>!</code> <code>非空断言</code><ul>
<li>如果一个值，它的类型可能是 null 或 undefined，但是，我们在使用时又很确定它的值一定不是 null 或 unde，此时，就可以通过 <code>非空断言</code> 来告诉 TS 听哥的，哥很确定它的不是 null 或 undefined</li>
</ul>
</li>
<li>注意：<strong>这个操作是风险的</strong>，非空断言，仅仅是让 TS 中的类型检查不再校验 null 或 undefined，但是，如果它的值真的是 null 或 undefined，代码会在运行时报错！！！</li>
</ul>
<h3 id="整体修改"><a href="#整体修改" class="headerlink" title="整体修改"></a>整体修改</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户 Token 的本地缓存键名</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN_KEY</span> = <span class="string">&#x27;geek-itcast-21&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CHANNEL_KEY</span> = <span class="string">&#x27;geek-itcast-21-channels&#x27;</span></span><br><span class="line">type <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: string</span><br><span class="line">  <span class="attr">refresh_token</span>: string</span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">Channels</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: number</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">&#125;[]</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从本地缓存中获取 Token 信息</span></span><br><span class="line"><span class="comment"> * JSON.parse() 要求参数必须是字符串</span></span><br><span class="line"><span class="comment"> * localStorage.getItem() 返回值可能是字符串，也可能是null，所以会报错</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTokenInfo = (): <span class="function"><span class="params">Token</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">TOKEN_KEY</span>)!) || &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将 Token 信息存入缓存</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; tokenInfo 从后端获取到的 Token 信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setTokenInfo = (<span class="attr">tokenInfo</span>: <span class="title class_">Token</span>): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="variable constant_">TOKEN_KEY</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tokenInfo))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除本地缓存中的 Token 信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">removeTokenInfo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="variable constant_">TOKEN_KEY</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断本地缓存中是否存在 Token 信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hasToken = (): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> !!<span class="title function_">getTokenInfo</span>().<span class="property">token</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存频道数据到本地</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">channels</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setLocalChannels = (<span class="attr">channels</span>: <span class="title class_">Channels</span>): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="variable constant_">CHANNEL_KEY</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(channels))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取本地的频道数据，，，，，，，如果没有数据，不要默认为空数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getLocalChannels = (): <span class="function"><span class="params">Channels</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">CHANNEL_KEY</span>)!)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除本地的频道数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> removeLocalChannels = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="variable constant_">CHANNEL_KEY</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="request-js改造"><a href="#request-js改造" class="headerlink" title="request.js改造"></a>request.js改造</h2><p>讲js改成ts即可</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> (<span class="attr">err</span>: <span class="title class_">AxiosError</span>&lt;&#123; <span class="attr">message</span>: <span class="built_in">string</span> &#125;&gt;) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 如果因为网络原因，response没有，给提示消息</span></span><br><span class="line">    <span class="keyword">if</span> (!err.<span class="property">response</span>) &#123;</span><br><span class="line">      <span class="title class_">Toast</span>.<span class="title function_">info</span>(<span class="string">&#x27;网络繁忙，请稍后重试&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="通用组件改造"><a href="#通用组件改造" class="headerlink" title="通用组件改造"></a>通用组件改造</h1><h2 id="Icon组件修改"><a href="#Icon组件修改" class="headerlink" title="Icon组件修改"></a>Icon组件修改</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">Props</span> = &#123;</span><br><span class="line">  <span class="attr">type</span>: string</span><br><span class="line">  className?: string</span><br><span class="line">  onClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Icon</span>(<span class="params">&#123; type, className, ...rest &#125;: Props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">svg</span> &#123;<span class="attr">...rest</span>&#125; <span class="attr">className</span>=<span class="string">&#123;classNames(</span>&#x27;<span class="attr">icon</span>&#x27;, <span class="attr">className</span>)&#125; <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlinkHref</span>=<span class="string">&#123;</span>`#$&#123;<span class="attr">type</span>&#125;`&#125;&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Icon</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="typescript中ref的使用"><a href="#typescript中ref的使用" class="headerlink" title="typescript中ref的使用"></a>typescript中ref的使用</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> imgRef = useRef&lt;<span class="title class_">HTMLImageElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> current = imgRef.<span class="property">current</span>!</span><br></pre></td></tr></table></figure>

<h2 id="Img懒加载组件修改"><a href="#Img懒加载组件修改" class="headerlink" title="Img懒加载组件修改"></a>Img懒加载组件修改</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classnames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&#x27;../Icon&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line">type <span class="title class_">Props</span> = &#123;</span><br><span class="line">  <span class="attr">src</span>: string</span><br><span class="line">  className?: string</span><br><span class="line">  alt?: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Image</span> = (<span class="params">&#123; className, src, alt &#125;: Props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> imgRef = useRef&lt;<span class="title class_">HTMLImageElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="comment">// 控制是否在加载</span></span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="comment">// 控制是否加载失败</span></span><br><span class="line">  <span class="keyword">const</span> [error, setError] = <span class="title function_">useState</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载成功</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onLoad</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setError</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="title function_">setLoading</span>(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onError</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setLoading</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="title function_">setError</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 监听图片</span></span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="function">(<span class="params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (isIntersecting) &#123;</span><br><span class="line">        <span class="comment">// 图片在可视区</span></span><br><span class="line">        <span class="keyword">const</span> current = imgRef.<span class="property">current</span>!</span><br><span class="line">        current.<span class="property">src</span> = current.<span class="property">dataset</span>.<span class="property">src</span>!</span><br><span class="line">        <span class="comment">// 取消监听</span></span><br><span class="line">        observer.<span class="title function_">unobserve</span>(current)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    observer.<span class="title function_">observe</span>(imgRef.<span class="property">current</span>!)</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classnames(styles.root,</span> <span class="attr">className</span>)&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 加载中 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;loading &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;image-icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&quot;iconphoto&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* 加载出错时显示的内容 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;error &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;image-icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&quot;iconphoto-fail&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;alt&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;imgRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">data-src</span>=<span class="string">&#123;src&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onLoad</span>=<span class="string">&#123;onLoad&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onError</span>=<span class="string">&#123;onError&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Image</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Input组件修改"><a href="#Input组件修改" class="headerlink" title="Input组件修改"></a>Input组件修改</h2><ul>
<li>基本改造</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line">interface <span class="title class_">Props</span> &#123;</span><br><span class="line">  extra?: string</span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  className?: string</span><br><span class="line">  autoFocus?: boolean</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Input</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  extra,</span></span><br><span class="line"><span class="params">  onExtraClick,</span></span><br><span class="line"><span class="params">  className,</span></span><br><span class="line"><span class="params">  autoFocus,</span></span><br><span class="line"><span class="params">  ...rest</span></span><br><span class="line"><span class="params">&#125;: Props</span>) &#123;</span><br><span class="line">  <span class="comment">// focus</span></span><br><span class="line">  <span class="keyword">const</span> inputRef = useRef&lt;<span class="title class_">HTMLInputElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (autoFocus) &#123;</span><br><span class="line">      inputRef.<span class="property">current</span>?.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [autoFocus])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.root&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;classNames(</span>&#x27;<span class="attr">input</span>&#x27;, <span class="attr">className</span>)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#123;<span class="attr">...rest</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;extra ? (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;extra&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;onExtraClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;extra&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ) : null&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>剩余参数的支持</li>
</ul>
<blockquote>
<p>InputHTMLAttributes中包含了Input框所有能够支持的属性</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">Props</span> <span class="keyword">extends</span> <span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt; &#123;</span><br><span class="line">  extra?: string</span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  className?: string</span><br><span class="line">  autoFocus?: boolean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用type替代interface</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Props</span> = &#123;</span><br><span class="line">  extra?: string</span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  className?: string</span><br><span class="line">  autoFocus?: boolean</span><br><span class="line">  type?: <span class="string">&#x27;input&#x27;</span> | <span class="string">&#x27;password&#x27;</span></span><br><span class="line">&#125; &amp; <span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;</span><br></pre></td></tr></table></figure>

<p>TS 中的 &amp;（交叉类型）</p>
<p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#intersection-types">https://www.typescriptlang.org/docs/handbook/2/objects.html#intersection-types</a></p>
<ul>
<li>交叉类型：<code>&amp;</code><ul>
<li>作用：可以理解为取多个类型的并集</li>
</ul>
</li>
<li>联想到了，另一个类型：<code>|</code> 联合类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// | 在 TS 中表示： number 和 string 两者中出现哪一个都行</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NumStr</span> = <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">InputProps</span> = &#123;</span><br><span class="line">  extra?: <span class="built_in">string</span></span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  className?: <span class="built_in">string</span></span><br><span class="line">  dom?: <span class="title class_">React</span>.<span class="property">RefObject</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &amp; 在 TS 中表示： 最终的类型两者都有</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = <span class="title class_">InputProps</span> &amp; <span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;</span><br></pre></td></tr></table></figure>

<p>交叉类型需要注意的地方：同名的属性容易冲突</p>
<p>使用omit优化</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = <span class="title class_">Omit</span>&lt;</span><br><span class="line">  <span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;,</span><br><span class="line">  <span class="string">&#x27;type&#x27;</span> | <span class="string">&#x27;autoFocus&#x27;</span></span><br><span class="line">&gt; &amp; &#123;</span><br><span class="line">  extra?: <span class="built_in">string</span></span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  className?: <span class="built_in">string</span></span><br><span class="line">  autoFocus?: <span class="built_in">boolean</span></span><br><span class="line">  <span class="keyword">type</span>?: <span class="string">&#x27;text&#x27;</span> | <span class="string">&#x27;password&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Textarea组件改造"><a href="#Textarea组件改造" class="headerlink" title="Textarea组件改造"></a>Textarea组件改造</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TextareaHTMLAttributes</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;hoist-non-react-statics/node_modules/@types/react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line">type <span class="title class_">Props</span> = <span class="title class_">Omit</span>&lt;</span><br><span class="line">  <span class="title class_">TextareaHTMLAttributes</span>&lt;<span class="title class_">HTMLTextAreaElement</span>&gt;,</span><br><span class="line">  <span class="string">&#x27;maxLength&#x27;</span> | <span class="string">&#x27;value&#x27;</span> | <span class="string">&#x27;onChange&#x27;</span></span><br><span class="line">&gt; &amp; &#123;</span><br><span class="line">  maxLength?: number</span><br><span class="line">  className?: string</span><br><span class="line">  <span class="attr">value</span>: string</span><br><span class="line">  <span class="attr">onChange</span>: <span class="function">(<span class="params">e: React.ChangeEvent&lt;HTMLTextAreaElement&gt;</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Textarea</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  maxLength = <span class="number">100</span>,</span></span><br><span class="line"><span class="params">  className,</span></span><br><span class="line"><span class="params">  value,</span></span><br><span class="line"><span class="params">  onChange,</span></span><br><span class="line"><span class="params">  ...rest</span></span><br><span class="line"><span class="params">&#125;: Props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [content, setContent] = <span class="title function_">useState</span>(value || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleChange</span> = (<span class="params">e: React.ChangeEvent&lt;HTMLTextAreaElement&gt;</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setContent</span>(e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line">    onChange &amp;&amp; <span class="title function_">onChange</span>(e)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> textRef = useRef&lt;<span class="title class_">HTMLTextAreaElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    textRef.<span class="property">current</span>!.<span class="title function_">focus</span>()</span><br><span class="line">    textRef.<span class="property">current</span>!.<span class="title function_">setSelectionRange</span>(-<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.root&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 文本输入框 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">textarea</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#123;<span class="attr">...rest</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;classNames(</span>&#x27;<span class="attr">textarea</span>&#x27;, <span class="attr">className</span>)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">maxLength</span>=<span class="string">&#123;maxLength&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;textRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* 当前字数/最大允许字数 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;count&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;content.length&#125;/&#123;maxLength&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="NavBar组件改造"><a href="#NavBar组件改造" class="headerlink" title="NavBar组件改造"></a>NavBar组件改造</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Icon&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ReactNode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="comment">// import &#123; withRouter &#125; from &#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="comment">// 1. withRouter的使用</span></span><br><span class="line"><span class="comment">// history match location: 这个组件必须是通过路由配置的  &lt;Route&gt;&lt;/Route&gt;</span></span><br><span class="line"><span class="comment">// 自己渲染的组件，无法获取到路由信息  &lt;NavBar&gt;&lt;/NavBar&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 路由提供了几个和路由相关的hook</span></span><br><span class="line"><span class="comment">// useHistory  useLocation  useParams</span></span><br><span class="line">type <span class="title class_">Props</span> = &#123;</span><br><span class="line">  <span class="attr">children</span>: string | <span class="title class_">ReactNode</span></span><br><span class="line">  extra?: string</span><br><span class="line">  onLeftClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  className?: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NavBar</span>(<span class="params">&#123; children, extra, onLeftClick, className &#125;: Props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> history = <span class="title function_">useHistory</span>()</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">back</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line">    <span class="comment">// 跳回上一页</span></span><br><span class="line">    <span class="keyword">if</span> (onLeftClick) &#123;</span><br><span class="line">      <span class="title function_">onLeftClick</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      history.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classNames(styles.root,</span> <span class="attr">className</span>)&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 后退按钮 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&quot;iconfanhui&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;back&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 居中标题 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* 右侧内容 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;right&quot;</span>&gt;</span>&#123;extra&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">NavBar</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="AuthRoute组件改造"><a href="#AuthRoute组件改造" class="headerlink" title="AuthRoute组件改造"></a>AuthRoute组件改造</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/53104165/implement-react-router-privateroute-in-typescript-project/53111155#">https://stackoverflow.com/questions/53104165/implement-react-router-privateroute-in-typescript-project/53111155#</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; hasToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Route</span>, <span class="title class_">Redirect</span>, useLocation, <span class="title class_">RouteProps</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line">interface <span class="title class_">PrivateRouteProps</span> <span class="keyword">extends</span> <span class="title class_">RouteProps</span> &#123;</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">React</span>.<span class="property">ComponentType</span>&lt;any&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">AuthRoute</span>(<span class="params">props: PrivateRouteProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">component</span>: <span class="title class_">Component</span>, ...rest &#125; = props</span><br><span class="line">  <span class="keyword">const</span> location = <span class="title function_">useLocation</span>()</span><br><span class="line">  <span class="comment">// console.log(location)</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#123;<span class="attr">...rest</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">render</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        if (hasToken()) &#123;</span></span><br><span class="line"><span class="language-xml">          return <span class="tag">&lt;<span class="name">Component</span>&gt;</span><span class="tag">&lt;/<span class="name">Component</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">          return (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Redirect</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">to</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">pathname:</span> &#x27;/<span class="attr">login</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">state:</span> &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  // <span class="attr">从哪儿来的</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">from:</span> <span class="attr">location.pathname</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span><span class="tag">&lt;/<span class="name">Redirect</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          )</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="页面改造"><a href="#页面改造" class="headerlink" title="页面改造"></a>页面改造</h1><h2 id="Layout组件"><a href="#Layout组件" class="headerlink" title="Layout组件"></a>Layout组件</h2><p>直接把js改成tsx</p>
<h1 id="Login组件"><a href="#Login组件" class="headerlink" title="Login组件"></a>Login组件</h1><h3 id="location的处理"><a href="#location的处理" class="headerlink" title="location的处理"></a>location的处理</h3><p><img src="/TS/image-20210917205318957.png" alt="image-20210917205318957"></p>
<ul>
<li>关于useLocation的使用</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">LocationState</span> = &#123;</span><br><span class="line">  <span class="attr">from</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> location = useLocation&lt;<span class="title class_">LocationState</span>&gt;()</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/61668623/react-typescript-correct-type-for-uselocation-from-react-router-dom">https://stackoverflow.com/questions/61668623/react-typescript-correct-type-for-uselocation-from-react-router-dom</a></p>
<h3 id="redux-action修改"><a href="#redux-action修改" class="headerlink" title="redux-action修改"></a>redux-action修改</h3><ul>
<li>修改action&#x2F;login.js</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; setTokenInfo, removeTokenInfo &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dispatch</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line">type <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: string</span><br><span class="line">  <span class="attr">refresh_token</span>: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">sendCode</span> = (<span class="params">mobile: string</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="comment">// 发送请求</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/sms/codes/&#x27;</span> + mobile,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">saveToken</span> = (<span class="params">payload: Token</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 登录功能</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">login</span> = (<span class="params">data: &#123; mobile: string; code: string &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: <span class="title class_">Dispatch</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/authorizations&#x27;</span>,</span><br><span class="line">      data,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 保存token到redux中</span></span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">saveToken</span>(res.<span class="property">data</span>))</span><br><span class="line">    <span class="comment">// 保存到本地</span></span><br><span class="line">    <span class="title function_">setTokenInfo</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 退出</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">logout</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch: Dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">removeTokenInfo</span>()</span><br><span class="line">    <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;login/logout&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>Dispatch的分析</li>
</ul>
<p>索引签名</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#index-signatures">索引签名</a></li>
<li>语法：<code>[key: string]: any</code></li>
<li>应用场景：我要使用一个对象类型，但是，我不确定对象中有什么属性，此时，就可以使用索引签名类型了</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可以将这个内容分为两部分，</span></span><br><span class="line"><span class="comment">//  冒号前面 `[extraProps: string]` 表示对象中的属性类型 - 键</span></span><br><span class="line"><span class="comment">//  冒号后面 `any` 表示属性值的类型 - 值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [extraProps: string] 表示：</span></span><br><span class="line"><span class="comment">//  extraProps 是一个任意合法属性名称，比如，可以叫：k 或 key</span></span><br><span class="line"><span class="comment">//  : string 表示对象属性的类型是 字符串 类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：一个对象，它的属性类型可以是： string | number | symbol</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">AnyAction</span> &#123;</span><br><span class="line">  [<span class="attr">extraProps</span>: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AnyAction</span> <span class="keyword">extends</span> <span class="title class_">Action</span> &#123;</span><br><span class="line">  <span class="comment">// Allows any extra properties to be defined in an action.</span></span><br><span class="line">  [<span class="attr">extraProps</span>: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="redux-reducer修改"><a href="#redux-reducer修改" class="headerlink" title="redux-reducer修改"></a>redux-reducer修改</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: string</span><br><span class="line">  <span class="attr">refresh_token</span>: string</span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">ActionType</span> = &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span> | <span class="string">&#x27;login/logout&#x27;</span></span><br><span class="line">  <span class="attr">payload</span>: <span class="title class_">Token</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">initValue</span>: <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">refresh_token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initValue, action: ActionType</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, payload &#125; = action</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;login/token&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> payload</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;login/logout&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="类型提取"><a href="#类型提取" class="headerlink" title="类型提取"></a>类型提取</h3><ul>
<li>types.d.ts</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * token的类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: string</span><br><span class="line">  <span class="attr">refresh_token</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="Profile组件改造"><a href="#Profile组件改造" class="headerlink" title="Profile组件改造"></a>Profile组件改造</h1><h2 id="修改redux-reducer"><a href="#修改redux-reducer" class="headerlink" title="修改redux-reducer"></a>修改redux-reducer</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">User</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: string</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">photo</span>: string</span><br><span class="line">  <span class="attr">art_count</span>: number</span><br><span class="line">  <span class="attr">follow_count</span>: number</span><br><span class="line">  <span class="attr">fans_count</span>: number</span><br><span class="line">  <span class="attr">like_count</span>: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Profile</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: string</span><br><span class="line">  <span class="attr">photo</span>: string</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">mobile</span>: string</span><br><span class="line">  <span class="attr">gender</span>: number</span><br><span class="line">  <span class="attr">birthday</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">InitType</span> = &#123;</span><br><span class="line">  <span class="attr">user</span>: <span class="title class_">User</span></span><br><span class="line">  <span class="attr">profile</span>: <span class="title class_">Profile</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">ProfileAction</span> =</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;profile/user&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">User</span></span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;profile/profile&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">Profile</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initValue</span>: <span class="title class_">InitType</span> = &#123;</span><br><span class="line">  <span class="attr">user</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">profile</span>: &#123;&#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">InitType</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理个人信息的reducer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">state</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">action</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initValue, action: ProfileAction</span>) &#123;</span><br><span class="line">  <span class="comment">// const &#123; type, payload &#125; = action</span></span><br><span class="line">  <span class="keyword">if</span> (action.<span class="property">type</span> === <span class="string">&#x27;profile/user&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...state,</span><br><span class="line">      <span class="attr">user</span>: action.<span class="property">payload</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (action.<span class="property">type</span> === <span class="string">&#x27;profile/profile&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...state,</span><br><span class="line">      <span class="attr">profile</span>: action.<span class="property">payload</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="修改redux-action的修改"><a href="#修改redux-action的修改" class="headerlink" title="修改redux-action的修改"></a>修改redux-action的修改</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">User</span>, <span class="title class_">Profile</span>, <span class="title class_">ProfileAction</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../reducers/profile&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dispatch</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存用户信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">payload</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// actionCreator: 创建action  必须要符合 ProfileAction类型</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> saveUser = (<span class="attr">payload</span>: <span class="title class_">User</span>): <span class="function"><span class="params">ProfileAction</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;profile/user&#x27;</span>,</span><br><span class="line">    <span class="attr">payload</span>: payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取用户信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> <span class="variable">Promise</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getUser</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: <span class="title class_">Dispatch</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> http.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>)</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">saveUser</span>(res.<span class="property">data</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> saveProfile = (<span class="attr">payload</span>: <span class="title class_">Profile</span>): <span class="function"><span class="params">ProfileAction</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;profile/profile&#x27;</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getProfile</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: <span class="title class_">Dispatch</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> http.<span class="title function_">get</span>(<span class="string">&#x27;/user/profile&#x27;</span>)</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">saveProfile</span>(res.<span class="property">data</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回一个全部属性变成可选的类型</span></span><br><span class="line">type <span class="title class_">PartialProfile</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Profile</span>&gt;</span><br><span class="line"><span class="comment">// 修改用户的信息</span></span><br><span class="line"><span class="comment">// dispatch: Dispatch类型，，，参数必须符合Action类型 &#123;type: T&#125;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">updateProfile</span> = (<span class="params">data: PartialProfile</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: any) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> http.<span class="title function_">patch</span>(<span class="string">&#x27;/user/profile&#x27;</span>, data)</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">getProfile</span>())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">updatePhoto</span> = (<span class="params">fd: FormData</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: any) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> http.<span class="title function_">patch</span>(<span class="string">&#x27;/user/photo&#x27;</span>, fd)</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">getProfile</span>())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="泛型工具类型-ReturnType"><a href="#泛型工具类型-ReturnType" class="headerlink" title="泛型工具类型 - ReturnType"></a>泛型工具类型 - ReturnType</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/57472105/react-redux-useselector-typescript-type-for-state/57472389">https://stackoverflow.com/questions/57472105/react-redux-useselector-typescript-type-for-state/57472389</a></p>
<ul>
<li>泛型：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 尖括号中出现的是 类型</span></span><br><span class="line">id&lt;<span class="built_in">number</span>&gt;(<span class="number">1</span>)</span><br><span class="line">id&lt;<span class="built_in">string</span>&gt;(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>ReturnType<ul>
<li>作用：<strong>用来获取函数返回值的类型</strong></li>
</ul>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// typeof fn 的结果： () =&gt; number</span></span><br><span class="line"><span class="comment">// R1 =&gt; number</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">R1</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> fn&gt;</span><br><span class="line"><span class="comment">// type R1 = ReturnType&lt;() =&gt; number&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="获取redux状态的类型"><a href="#获取redux状态的类型" class="headerlink" title="获取redux状态的类型"></a>获取redux状态的类型</h2><p><a target="_blank" rel="noopener" href="https://redux.js.org/usage/usage-with-typescript">https://redux.js.org/usage/usage-with-typescript</a></p>
<ul>
<li>讲store&#x2F;index.js修改为store&#x2F;index.ts</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数1：reducer</span></span><br><span class="line"><span class="comment">// 参数2：指定store的初始值</span></span><br><span class="line"><span class="comment">// 参数3：指定中间件</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(</span><br><span class="line">  reducer,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">login</span>: <span class="title function_">getTokenInfo</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">composeWithDevTools</span>(<span class="title function_">applyMiddleware</span>(thunk))</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">RootState</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> store.<span class="property">getState</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="useSelector-的类型"><a href="#useSelector-的类型" class="headerlink" title="useSelector 的类型"></a>useSelector 的类型</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 TS 中 useSelector 是一个泛型函数，并且它有两个泛型变量，分别是：</span></span><br><span class="line"><span class="comment">// 1 整个Redux应用的状态类型</span></span><br><span class="line"><span class="comment">// 2 当前要获取的状态类型</span></span><br><span class="line"><span class="comment">// 因此，在使用的时候，需要传入两个 泛型变量：</span></span><br><span class="line"><span class="comment">// 比如，以下代码中，</span></span><br><span class="line"><span class="comment">// 第一个传入了 AppState 也就是整个 Redux 应用的状态类型</span></span><br><span class="line"><span class="comment">// 第二个传入了 AppState[&#x27;profile&#x27;] 也就是当前要获取的 profile 状态的类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = useSelector&lt;<span class="title class_">RootState</span>, <span class="title class_">RootState</span>[<span class="string">&#x27;profile&#x27;</span>][<span class="string">&#x27;user&#x27;</span>]&gt;(</span><br><span class="line">  <span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">profile</span>.<span class="property">user</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型参数1：指定state的类型</span></span><br><span class="line"><span class="comment">// 泛型参数2：指定返回值的类型</span></span><br><span class="line"><span class="keyword">const</span> user = <span class="title function_">useSelector</span>(<span class="function">(<span class="params">state: RootState</span>) =&gt;</span> state.<span class="property">profile</span>.<span class="property">user</span>)</span><br></pre></td></tr></table></figure>



<h2 id="TS-中的索引查询类型"><a href="#TS-中的索引查询类型" class="headerlink" title="TS 中的索引查询类型"></a>TS 中的索引查询类型</h2><ul>
<li>语法：<code>对象类型[键]</code></li>
<li>作用：查询 对象类型 中某个属性对应的类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NameType =&gt; string</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NameTyep</span> = A[<span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure>



<h1 id="Home组件的修改"><a href="#Home组件的修改" class="headerlink" title="Home组件的修改"></a>Home组件的修改</h1><h2 id="修改home组件-reducer"><a href="#修改home组件-reducer" class="headerlink" title="修改home组件-reducer"></a>修改home组件-reducer</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="variable constant_">SAVE_ALL_CHANNELS</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_ARTICLE_LIST</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_CHANNELS</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_MORE_ARTICLE_LIST</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;../action_types/home&#x27;</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">Channel</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: number</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">MoreAction</span> = &#123;</span><br><span class="line">  <span class="attr">visible</span>: boolean</span><br><span class="line">  <span class="attr">articleId</span>: string</span><br><span class="line">  <span class="attr">channelId</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Ariticle</span> = &#123;</span><br><span class="line">  <span class="attr">art_id</span>: string</span><br><span class="line">  <span class="attr">title</span>: string</span><br><span class="line">  <span class="attr">aut_id</span>: string</span><br><span class="line">  <span class="attr">aut_name</span>: string</span><br><span class="line">  <span class="attr">comm_count</span>: string</span><br><span class="line">  <span class="attr">pubdate</span>: string</span><br><span class="line">  <span class="attr">cover</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: string</span><br><span class="line">    <span class="attr">images</span>: string[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Articles</span> = &#123;</span><br><span class="line">  [<span class="attr">index</span>: number]: &#123;</span><br><span class="line">    <span class="attr">timestamp</span>: string</span><br><span class="line">    <span class="attr">list</span>: <span class="title class_">Ariticle</span>[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">HomeType</span> = &#123;</span><br><span class="line">  <span class="attr">userChannels</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">  <span class="attr">allChannels</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">  <span class="attr">moreAction</span>: <span class="title class_">MoreAction</span></span><br><span class="line">  <span class="attr">articles</span>: <span class="title class_">Articles</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initValue</span>: <span class="title class_">HomeType</span> = &#123;</span><br><span class="line">  <span class="attr">userChannels</span>: [],</span><br><span class="line">  <span class="attr">allChannels</span>: [],</span><br><span class="line">  <span class="comment">// 存储所有的文章列表</span></span><br><span class="line">  <span class="attr">articles</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">moreAction</span>: &#123;</span><br><span class="line">    <span class="attr">visible</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">articleId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">channelId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">HomeType</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initValue, action</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="修改home组件-reducer的修改-完成"><a href="#修改home组件-reducer的修改-完成" class="headerlink" title="修改home组件-reducer的修改-完成"></a>修改home组件-reducer的修改-完成</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="variable constant_">SAVE_ALL_CHANNELS</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_ARTICLE_LIST</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_CHANNELS</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_MORE_ARTICLE_LIST</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;../action_types/home&#x27;</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">Channel</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: number</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">MoreAction</span> = &#123;</span><br><span class="line">  <span class="attr">visible</span>: boolean</span><br><span class="line">  <span class="attr">articleId</span>: string</span><br><span class="line">  <span class="attr">channelId</span>: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Ariticle</span> = &#123;</span><br><span class="line">  <span class="attr">art_id</span>: string</span><br><span class="line">  <span class="attr">title</span>: string</span><br><span class="line">  <span class="attr">aut_id</span>: string</span><br><span class="line">  <span class="attr">aut_name</span>: string</span><br><span class="line">  <span class="attr">comm_count</span>: string</span><br><span class="line">  <span class="attr">pubdate</span>: string</span><br><span class="line">  <span class="attr">cover</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: string</span><br><span class="line">    <span class="attr">images</span>: string[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Articles</span> = &#123;</span><br><span class="line">  [<span class="attr">index</span>: number]: &#123;</span><br><span class="line">    <span class="attr">timestamp</span>: string</span><br><span class="line">    <span class="attr">list</span>: <span class="title class_">Ariticle</span>[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">HomeType</span> = &#123;</span><br><span class="line">  <span class="attr">userChannels</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">  <span class="attr">allChannels</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">  <span class="attr">moreAction</span>: <span class="title class_">MoreAction</span></span><br><span class="line">  <span class="attr">articles</span>: <span class="title class_">Articles</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initValue</span>: <span class="title class_">HomeType</span> = &#123;</span><br><span class="line">  <span class="attr">userChannels</span>: [],</span><br><span class="line">  <span class="attr">allChannels</span>: [],</span><br><span class="line">  <span class="comment">// 存储所有的文章列表</span></span><br><span class="line">  <span class="attr">articles</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">moreAction</span>: &#123;</span><br><span class="line">    <span class="attr">visible</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">articleId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">channelId</span>: -<span class="number">1</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">HomeType</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">ActionType</span> =</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/saveChannels&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/saveAllChannels&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/saveArticleList&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: &#123;</span><br><span class="line">        <span class="attr">channelId</span>: number</span><br><span class="line">        <span class="attr">timestamp</span>: string</span><br><span class="line">        <span class="attr">list</span>: <span class="title class_">Ariticle</span>[]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/saveMoreArticleList&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: &#123;</span><br><span class="line">        <span class="attr">channelId</span>: number</span><br><span class="line">        <span class="attr">timestamp</span>: string</span><br><span class="line">        <span class="attr">list</span>: <span class="title class_">Ariticle</span>[]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/setMoreAction&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">MoreAction</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initValue, action: ActionType</span>) &#123;</span><br><span class="line">  <span class="comment">// const &#123; type, payload &#125; = action</span></span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/saveChannels&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">userChannels</span>: action.<span class="property">payload</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/saveAllChannels&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">allChannels</span>: action.<span class="property">payload</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/saveArticleList&#x27;</span>:</span><br><span class="line">      <span class="keyword">const</span> &#123; list, timestamp, channelId &#125; = action.<span class="property">payload</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">articles</span>: &#123;</span><br><span class="line">          ...state.<span class="property">articles</span>,</span><br><span class="line">          [channelId]: &#123;</span><br><span class="line">            <span class="attr">timestamp</span>: timestamp,</span><br><span class="line">            <span class="comment">// 如果是loadMore，追加数据，否则，覆盖数据</span></span><br><span class="line">            <span class="attr">list</span>: list,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/saveMoreArticleList&#x27;</span>:</span><br><span class="line">      <span class="comment">// const oldList = state.articles[action.payload.channelId].list</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">articles</span>: &#123;</span><br><span class="line">          ...state.<span class="property">articles</span>,</span><br><span class="line">          [action.<span class="property">payload</span>.<span class="property">channelId</span>]: &#123;</span><br><span class="line">            <span class="attr">timestamp</span>: action.<span class="property">payload</span>.<span class="property">timestamp</span>,</span><br><span class="line">            <span class="attr">list</span>: [</span><br><span class="line">              ...state.<span class="property">articles</span>[action.<span class="property">payload</span>.<span class="property">channelId</span>].<span class="property">list</span>,</span><br><span class="line">              ...action.<span class="property">payload</span>.<span class="property">list</span>,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/setMoreAction&#x27;</span>: &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">moreAction</span>: action.<span class="property">payload</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="解决问题：request中dispatch的问题"><a href="#解决问题：request中dispatch的问题" class="headerlink" title="解决问题：request中dispatch的问题"></a>解决问题：request中dispatch的问题</h2><p>原因： saveToken没有指定返回值类型，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionCreator</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">saveToken</span> = (<span class="params">payload: Token</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把type推断为string类型   string类型无法常量类型赋值，所以报错了</p>
<p>解决方案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionCreator</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">saveToken</span> = (<span class="params">payload: Token</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span> <span class="keyword">as</span> <span class="keyword">const</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方案2：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionCreator</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> saveToken = (<span class="attr">payload</span>: <span class="title class_">Token</span>): <span class="function"><span class="params">LoginAction</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="解决问题：logout的错误"><a href="#解决问题：logout的错误" class="headerlink" title="解决问题：logout的错误"></a>解决问题：logout的错误</h2><p>原因：store.dispatch的参数必须是一个对象，且要有type属性</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 退出</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">logout</span> = (<span class="params">payload: Token</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/logout&#x27;</span> <span class="keyword">as</span> <span class="keyword">const</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除本地的token</span></span><br><span class="line"><span class="title function_">removeTokenInfo</span>()</span><br><span class="line">store.<span class="title function_">dispatch</span>(</span><br><span class="line">  <span class="title function_">logout</span>(&#123;</span><br><span class="line">    <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">refresh_token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="RootThunkAction的使用"><a href="#RootThunkAction的使用" class="headerlink" title="RootThunkAction的使用"></a>RootThunkAction的使用</h2><p><a target="_blank" rel="noopener" href="https://redux.js.org/usage/usage-with-typescript#type-checking-redux-thunks">https://redux.js.org/usage/usage-with-typescript#type-checking-redux-thunks</a></p>
<p>场景：</p>
<p> 我们如果需要使用redux-thunk的action，需要指定两个参数的类型，dispatch和getState的类型。</p>
<p>redux-thunk中间件帮助我们提供了一个thunkAction的类型。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取RootState的类型‘</span></span><br><span class="line"><span class="comment">// typeof: 获取store.getState的类型</span></span><br><span class="line"><span class="comment">// ReturnType 获取返回值的类型</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">RootState</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> store.<span class="property">getState</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// R：thunk的action的返回类型  void Promise&lt;void&gt;</span></span><br><span class="line"><span class="comment">// S: 需要指定个getState的返回类型  RootState</span></span><br><span class="line"><span class="comment">// E: extra: 额外的参数 any</span></span><br><span class="line"><span class="comment">// A: 需要指定Action的类型 Action AnyAction [extraProps: string]: any</span></span><br><span class="line"><span class="comment">// ThunkAction&lt;R, S, E, A&gt;</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">RootThunkAction</span> = <span class="title class_">ThunkAction</span>&lt;</span><br><span class="line">  <span class="title class_">Promise</span>&lt;<span class="keyword">void</span>&gt;,</span><br><span class="line">  <span class="title class_">RootState</span>,</span><br><span class="line">  unknown,</span><br><span class="line">  <span class="title class_">AnyAction</span></span><br><span class="line">&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>以后，只要是redux-thunk的action的类型，我们只需要指定返回类型为RootThunkAction类型即可，不需要指定dispatch和getState的类型</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取用户的频道</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUserChannels = (): <span class="function"><span class="params">RootThunkAction</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (dispatch) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 1. 判断用户是否登录</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">hasToken</span>()) &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/user/channels&#x27;</span>)</span><br><span class="line">      <span class="title function_">dispatch</span>(<span class="title function_">saveUserChannels</span>(res.<span class="property">data</span>.<span class="property">channels</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 2. 没有token,从本地获取频道数据</span></span><br><span class="line">      <span class="keyword">const</span> channels = <span class="title function_">getLocalChannels</span>()</span><br><span class="line">      <span class="keyword">if</span> (channels) &#123;</span><br><span class="line">        <span class="comment">// 没有token，但本地有channels数据</span></span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">saveUserChannels</span>(channels))</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 没有token, 且本地没有channels数据</span></span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/user/channels&#x27;</span>)</span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">saveUserChannels</span>(res.<span class="property">data</span>.<span class="property">channels</span>))</span><br><span class="line">        <span class="comment">// 保存到本地</span></span><br><span class="line">        <span class="title function_">setLocalChannels</span>(res.<span class="property">data</span>.<span class="property">channels</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    

    
    <div class="page-reward">
      <a href="javascript:void(0);" class="page-reward-btn tooltip-top" target="_self">
        <div class="tooltip tooltip-east">
          <span class="tooltip-item">
            赏
          </span>
          <span class="tooltip-content">
            <span class="tooltip-text">
              <span class="tooltip-inner">
                <p class="reward-p"><i class="icon icon-quo-left"></i>谢谢你请我吃糖果<i
                    class="icon icon-quo-right"></i></p>
                <div class="reward-box">
                  
                  <div class="reward-box-item">
                    <img class="reward-img" src="/img/alipay.png">
                    <span class="reward-type">支付宝</span>
                  </div>
                  
                  
                  <div class="reward-box-item">
                    <img class="reward-img" src="/img/weixin.png">
                    <span class="reward-type">微信</span>
                  </div>
                  
                </div>
              </span>
            </span>
          </span>
        </div>
      </a>
    </div>
    

    
    <div class="declare"> 
      <ul class="post-copyright">
        <li>
          <strong>本文作者：</strong>
          沐澈
        </li>
        <li>
          <strong>本文链接：</strong>
          <a href="https://clear-liquid.github.io/TS/" title="TS" target="_blank">https://clear-liquid.github.io/TS/</a>
        </li>
        
        <li>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，均采用 <a href="https://github.com/JoeyBling/hexo-theme-yilia-plus/blob/master/LICENSE" rel="external nofollow" target="_blank">MIT</a> 许可协议。转载请注明出处！
        </li>
        
      </ul>
    </div>
    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			
				<li class="article-tag-list-item">
					<a href="javascript:void(0)"
						class="js-tag article-tag-list-link color3">ts</a>
				</li>
				
		</ul>
	</div>
	
    
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/学习笔记//" class="article-tag-list-link color5">学习笔记</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="/categories/学习笔记/ts//" class="article-tag-list-link color3">ts</a>
        		</li>
      		
		</ul>
	</div>


    

    
    
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <!-- <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a> -->
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
     <!-- <img src="//pan.baidu.com/share/qrcode?url=https://clear-liquid.github.io/TS/" alt="微信分享二维码"> -->
    </div>
</div>

<div class="mask js-mask"></div>

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>


<nav id="article-nav">
  
    <a href="/React/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          React
        
      </div>
    </a>
  
  
    <a href="/vue3/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">vue3</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>


<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
        <div class="toc-container tooltip-left">
            <i class="icon-font icon-category"></i>
            <div class="tooltip tooltip-east">
                <span class="tooltip-item">
                </span>
                <span class="tooltip-content">
                    <div class="toc-article">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#TypeScript%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">TypeScript简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#TypeScript-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">TypeScript 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TypeScript-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.1.</span> <span class="toc-text">TypeScript 是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TypeScript-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%B8%BA-JS-%E6%B7%BB%E5%8A%A0%E7%B1%BB%E5%9E%8B%E6%94%AF%E6%8C%81"><span class="toc-number">1.1.2.</span> <span class="toc-text">TypeScript 为什么要为 JS 添加类型支持?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TypeScript-%E7%9B%B8%E6%AF%94-JS-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.3.</span> <span class="toc-text">TypeScript 相比 JS 的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TypeScript-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-number">1.2.</span> <span class="toc-text">TypeScript 初体验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%BC%96%E8%AF%91-TS-%E7%9A%84%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="toc-number">1.2.1.</span> <span class="toc-text">安装编译 TS 的工具包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%B9%B6%E8%BF%90%E8%A1%8C-TS-%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.2.</span> <span class="toc-text">编译并运行 TS 代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8C%96%E8%BF%90%E8%A1%8C-TS-%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.2.3.</span> <span class="toc-text">简化运行 TS 的步骤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TypeScript-%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">TypeScript 常用类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.1.</span> <span class="toc-text">类型注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.</span> <span class="toc-text">常用基础类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text">原始类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.2.</span> <span class="toc-text">数组类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.3.</span> <span class="toc-text">联合类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D"><span class="toc-number">2.2.4.</span> <span class="toc-text">类型别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.5.</span> <span class="toc-text">函数类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#void-%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.5.1.</span> <span class="toc-text">void 类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0"><span class="toc-number">2.2.5.2.</span> <span class="toc-text">函数可选参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.6.</span> <span class="toc-text">对象类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D"><span class="toc-number">2.2.6.1.</span> <span class="toc-text">使用类型别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6%E6%9C%89%E5%8F%82%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.6.2.</span> <span class="toc-text">带有参数的方法类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%BD%A2%E5%BC%8F%E7%9A%84%E6%96%B9%E6%B3%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.6.3.</span> <span class="toc-text">箭头函数形式的方法类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%8F%AF%E9%80%89%E5%B1%9E%E6%80%A7"><span class="toc-number">2.2.6.4.</span> <span class="toc-text">对象可选属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.2.7.</span> <span class="toc-text">接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#interface-vs-type"><span class="toc-number">2.2.7.1.</span> <span class="toc-text">interface vs type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF"><span class="toc-number">2.2.7.2.</span> <span class="toc-text">接口继承</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%BB%84"><span class="toc-number">2.2.8.</span> <span class="toc-text">元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%8E%A8%E8%AE%BA"><span class="toc-number">2.2.9.</span> <span class="toc-text">类型推论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.10.</span> <span class="toc-text">字面量类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%9C%BA%E6%99%AF"><span class="toc-number">2.2.10.1.</span> <span class="toc-text">使用模式和场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%BA%86%E8%A7%A3%E3%80%91%E6%9E%9A%E4%B8%BE"><span class="toc-number">2.2.11.</span> <span class="toc-text">【了解】枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%9E%9A%E4%B8%BE"><span class="toc-number">2.2.11.1.</span> <span class="toc-text">数字枚举</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9E%9A%E4%B8%BE"><span class="toc-number">2.2.11.2.</span> <span class="toc-text">字符串枚举</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">2.2.11.3.</span> <span class="toc-text">枚举实现原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#any-%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.12.</span> <span class="toc-text">any 类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80"><span class="toc-number">2.2.13.</span> <span class="toc-text">类型断言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typeof"><span class="toc-number">2.2.14.</span> <span class="toc-text">typeof</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TypeScript-%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">TypeScript 高级类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.1.</span> <span class="toc-text">创建泛型函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.2.</span> <span class="toc-text">调用泛型函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8C%96%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8"><span class="toc-number">3.1.3.</span> <span class="toc-text">简化泛型函数调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.1.4.</span> <span class="toc-text">泛型约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E6%9B%B4%E5%8A%A0%E5%85%B7%E4%BD%93%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.4.1.</span> <span class="toc-text">指定更加具体的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.1.4.2.</span> <span class="toc-text">添加约束</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="toc-number">3.1.5.</span> <span class="toc-text">多个类型变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.1.6.</span> <span class="toc-text">泛型接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.1.6.1.</span> <span class="toc-text">JS 中的泛型接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.7.</span> <span class="toc-text">泛型工具类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Partial"><span class="toc-number">3.1.7.1.</span> <span class="toc-text">Partial</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Readonly"><span class="toc-number">3.1.7.2.</span> <span class="toc-text">Readonly</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Pick"><span class="toc-number">3.1.7.3.</span> <span class="toc-text">Pick</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Omit"><span class="toc-number">3.1.7.4.</span> <span class="toc-text">Omit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%AD%BE%E5%90%8D%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.</span> <span class="toc-text">索引签名类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B%E7%AD%BE%E5%90%8D"><span class="toc-number">3.2.1.</span> <span class="toc-text">数组索引类型签名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.3.</span> <span class="toc-text">映射类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-number">3.3.1.</span> <span class="toc-text">根据对象创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%98%A0%E5%B0%84%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90"><span class="toc-number">3.3.2.</span> <span class="toc-text">内置映射类型实现分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E8%AE%BF%E9%97%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.3.3.</span> <span class="toc-text">索引访问类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E6%9F%A5%E8%AF%A2%E5%A4%9A%E4%B8%AA%E7%B4%A2%E5%BC%95%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.3.3.1.</span> <span class="toc-text">同时查询多个索引的类型</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8-React-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8-TS"><span class="toc-number">4.</span> <span class="toc-text">在 React 项目中使用 TS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.1.</span> <span class="toc-text">创建新项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tsconfig%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.2.</span> <span class="toc-text">tsconfig的介绍</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#typescript%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">typescript类型声明文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E4%B8%AD%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.1.</span> <span class="toc-text">TS 中的两种文件类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-number">5.2.</span> <span class="toc-text">类型声明文件的使用说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">内置类型声明文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6"><span class="toc-number">5.4.</span> <span class="toc-text">第三方库的类型声明文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6"><span class="toc-number">5.5.</span> <span class="toc-text">创建自己的类型声明文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%86%85%E5%85%B1%E4%BA%AB%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.5.1.</span> <span class="toc-text">项目内共享类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E5%B7%B2%E6%9C%89-JS-%E6%96%87%E4%BB%B6%E6%8F%90%E4%BE%9B%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E"><span class="toc-number">5.5.2.</span> <span class="toc-text">为已有 JS 文件提供类型声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-1"><span class="toc-number">5.5.3.</span> <span class="toc-text">类型声明文件的使用说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8%E7%8E%B0%E6%9C%89%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%B7%BB%E5%8A%A0-TS"><span class="toc-number">6.</span> <span class="toc-text">在现有项目中添加 TS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-number">6.1.</span> <span class="toc-text">说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%94%B9%E9%80%A0"><span class="toc-number">7.</span> <span class="toc-text">项目改造</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B9%E9%80%A0%E5%BB%BA%E8%AE%AE"><span class="toc-number">7.1.</span> <span class="toc-text">改造建议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6"><span class="toc-number">7.2.</span> <span class="toc-text">修改入口文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#index-ts"><span class="toc-number">7.2.1.</span> <span class="toc-text">index.ts</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9App-js"><span class="toc-number">7.3.</span> <span class="toc-text">修改App.js</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#utils%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E6%94%B9%E9%80%A0"><span class="toc-number">8.</span> <span class="toc-text">utils工具函数改造</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#history-js"><span class="toc-number">8.1.</span> <span class="toc-text">history.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#storage-js"><span class="toc-number">8.2.</span> <span class="toc-text">storage.js</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E6%96%AD%E8%A8%80"><span class="toc-number">8.2.1.</span> <span class="toc-text">非空断言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E4%BF%AE%E6%94%B9"><span class="toc-number">8.2.2.</span> <span class="toc-text">整体修改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#request-js%E6%94%B9%E9%80%A0"><span class="toc-number">8.3.</span> <span class="toc-text">request.js改造</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E7%BB%84%E4%BB%B6%E6%94%B9%E9%80%A0"><span class="toc-number">9.</span> <span class="toc-text">通用组件改造</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Icon%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9"><span class="toc-number">9.1.</span> <span class="toc-text">Icon组件修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#typescript%E4%B8%ADref%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">9.2.</span> <span class="toc-text">typescript中ref的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Img%E6%87%92%E5%8A%A0%E8%BD%BD%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9"><span class="toc-number">9.3.</span> <span class="toc-text">Img懒加载组件修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Input%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9"><span class="toc-number">9.4.</span> <span class="toc-text">Input组件修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Textarea%E7%BB%84%E4%BB%B6%E6%94%B9%E9%80%A0"><span class="toc-number">9.5.</span> <span class="toc-text">Textarea组件改造</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NavBar%E7%BB%84%E4%BB%B6%E6%94%B9%E9%80%A0"><span class="toc-number">9.6.</span> <span class="toc-text">NavBar组件改造</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AuthRoute%E7%BB%84%E4%BB%B6%E6%94%B9%E9%80%A0"><span class="toc-number">9.7.</span> <span class="toc-text">AuthRoute组件改造</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E6%94%B9%E9%80%A0"><span class="toc-number">10.</span> <span class="toc-text">页面改造</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Layout%E7%BB%84%E4%BB%B6"><span class="toc-number">10.1.</span> <span class="toc-text">Layout组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Login%E7%BB%84%E4%BB%B6"><span class="toc-number">11.</span> <span class="toc-text">Login组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#location%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">11.0.1.</span> <span class="toc-text">location的处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux-action%E4%BF%AE%E6%94%B9"><span class="toc-number">11.0.2.</span> <span class="toc-text">redux-action修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux-reducer%E4%BF%AE%E6%94%B9"><span class="toc-number">11.0.3.</span> <span class="toc-text">redux-reducer修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%8F%90%E5%8F%96"><span class="toc-number">11.0.4.</span> <span class="toc-text">类型提取</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Profile%E7%BB%84%E4%BB%B6%E6%94%B9%E9%80%A0"><span class="toc-number">12.</span> <span class="toc-text">Profile组件改造</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9redux-reducer"><span class="toc-number">12.1.</span> <span class="toc-text">修改redux-reducer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9redux-action%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">12.2.</span> <span class="toc-text">修改redux-action的修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%9E%8B-ReturnType"><span class="toc-number">12.3.</span> <span class="toc-text">泛型工具类型 - ReturnType</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96redux%E7%8A%B6%E6%80%81%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">12.4.</span> <span class="toc-text">获取redux状态的类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useSelector-%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">12.5.</span> <span class="toc-text">useSelector 的类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E4%B8%AD%E7%9A%84%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%AF%A2%E7%B1%BB%E5%9E%8B"><span class="toc-number">12.6.</span> <span class="toc-text">TS 中的索引查询类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Home%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">13.</span> <span class="toc-text">Home组件的修改</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9home%E7%BB%84%E4%BB%B6-reducer"><span class="toc-number">13.1.</span> <span class="toc-text">修改home组件-reducer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9home%E7%BB%84%E4%BB%B6-reducer%E7%9A%84%E4%BF%AE%E6%94%B9-%E5%AE%8C%E6%88%90"><span class="toc-number">13.2.</span> <span class="toc-text">修改home组件-reducer的修改-完成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%EF%BC%9Arequest%E4%B8%ADdispatch%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">13.3.</span> <span class="toc-text">解决问题：request中dispatch的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%EF%BC%9Alogout%E7%9A%84%E9%94%99%E8%AF%AF"><span class="toc-number">13.4.</span> <span class="toc-text">解决问题：logout的错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RootThunkAction%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">13.5.</span> <span class="toc-text">RootThunkAction的使用</span></a></li></ol></li></ol>
                    </div>
                </span>
            </div>
        </div>
        
    </div>
</aside>

















          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2023 <a href="https://clear-liquid.github.io/" target="_blank">沐澈</a>
    	</div>
      	<div class="footer-right">
			
			
      		GitHub:<a href="https://github.com/JoeyBling/hexo-theme-yilia-plus" target="_blank">hexo-theme-yilia-plus</a> by Litten
      	</div>
    </div>
  </div>
  
  
	<script src="/lib/busuanzi.pure.js"></script>
	
  
  
	
	<span id="busuanzi_container_site_pv" style="display:none">
		本站总访问量<span id="busuanzi_value_site_pv"></span>次	
	        <span class="post-meta-divider" >|</span>
	</span>
  	<span id="busuanzi_container_site_uv" style='display:none'>
  		本站访客数<span id="busuanzi_value_site_uv"></span>人
  	</span>
  
</footer>

    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function (r) { function e(t) { if (i[t]) return i[t].exports; var n = i[t] = { exports: {}, id: t, loaded: !1 }; return r[t].call(n.exports, n, n.exports, e), n.loaded = !0, n.exports } var i = {}; e.m = r, e.c = i, e.p = "./", e(0) }([function (t, n, r) { r(208), t.exports = r(205) }, function (t, n, r) { var d = r(3), y = r(46), g = r(26), b = r(27), x = r(47), m = "prototype", S = function (t, n, r) { var e, i, o, u, c = t & S.F, f = t & S.G, a = t & S.S, s = t & S.P, l = t & S.B, h = f ? d : a ? d[n] || (d[n] = {}) : (d[n] || {})[m], v = f ? y : y[n] || (y[n] = {}), p = v[m] || (v[m] = {}); for (e in f && (r = n), r) o = ((i = !c && h && void 0 !== h[e]) ? h : r)[e], u = l && i ? x(o, d) : s && "function" == typeof o ? x(Function.call, o) : o, h && b(h, e, o, t & S.U), v[e] != o && g(v, e, u), s && p[e] != o && (p[e] = o) }; d.core = y, S.F = 1, S.G = 2, S.S = 4, S.P = 8, S.B = 16, S.W = 32, S.U = 64, S.R = 128, t.exports = S }, function (t, n, r) { var e = r(5); t.exports = function (t) { if (!e(t)) throw TypeError(t + " is not an object!"); return t } }, function (t, n) { var r = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = r) }, function (t, n) { t.exports = function (t) { try { return !!t() } catch (t) { return !0 } } }, function (t, n) { t.exports = function (t) { return "object" == typeof t ? null !== t : "function" == typeof t } }, function (t, n) { var r = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = r) }, function (t, n, r) { var e = r(118)("wks"), i = r(79), o = r(3).Symbol, u = "function" == typeof o; (t.exports = function (t) { return e[t] || (e[t] = u && o[t] || (u ? o : i)("Symbol." + t)) }).store = e }, function (t, n, r) { var e = r(49), i = Math.min; t.exports = function (t) { return 0 < t ? i(e(t), 9007199254740991) : 0 } }, function (t, n) { var r = {}.hasOwnProperty; t.exports = function (t, n) { return r.call(t, n) } }, function (t, n, r) { t.exports = !r(4)(function () { return 7 != Object.defineProperty({}, "a", { get: function () { return 7 } }).a }) }, function (t, n, r) { var e = r(2), i = r(174), o = r(53), u = Object.defineProperty; n.f = r(10) ? Object.defineProperty : function (t, n, r) { if (e(t), n = o(n, !0), e(r), i) try { return u(t, n, r) } catch (t) { } if ("get" in r || "set" in r) throw TypeError("Accessors not supported!"); return "value" in r && (t[n] = r.value), t } }, function (t, n, r) { t.exports = !r(20)(function () { return 7 != Object.defineProperty({}, "a", { get: function () { return 7 } }).a }) }, function (t, n, r) { var e = r(14), i = r(24); t.exports = r(12) ? function (t, n, r) { return e.f(t, n, i(1, r)) } : function (t, n, r) { return t[n] = r, t } }, function (t, n, r) { var e = r(22), i = r(60), o = r(42), u = Object.defineProperty; n.f = r(12) ? Object.defineProperty : function (t, n, r) { if (e(t), n = o(n, !0), e(r), i) try { return u(t, n, r) } catch (t) { } if ("get" in r || "set" in r) throw TypeError("Accessors not supported!"); return "value" in r && (t[n] = r.value), t } }, function (t, n, r) { var e = r(96), i = r(34); t.exports = function (t) { return e(i(t)) } }, function (t, n, r) { var e = r(40)("wks"), i = r(25), o = r(6).Symbol, u = "function" == typeof o; (t.exports = function (t) { return e[t] || (e[t] = u && o[t] || (u ? o : i)("Symbol." + t)) }).store = e }, function (t, n, r) { var e = r(51); t.exports = function (t) { return Object(e(t)) } }, function (t, n) { t.exports = function (t) { return "object" == typeof t ? null !== t : "function" == typeof t } }, function (t, n) { var r = t.exports = { version: "2.6.9" }; "number" == typeof __e && (__e = r) }, function (t, n) { t.exports = function (t) { try { return !!t() } catch (t) { return !0 } } }, function (t, n) { t.exports = function (t) { if ("function" != typeof t) throw TypeError(t + " is not a function!"); return t } }, function (t, n, r) { var e = r(18); t.exports = function (t) { if (!e(t)) throw TypeError(t + " is not an object!"); return t } }, function (t, n) { t.exports = !0 }, function (t, n) { t.exports = function (t, n) { return { enumerable: !(1 & t), configurable: !(2 & t), writable: !(4 & t), value: n } } }, function (t, n) { var r = 0, e = Math.random(); t.exports = function (t) { return "Symbol(".concat(void 0 === t ? "" : t, ")_", (++r + e).toString(36)) } }, function (t, n, r) { var e = r(11), i = r(75); t.exports = r(10) ? function (t, n, r) { return e.f(t, n, i(1, r)) } : function (t, n, r) { return t[n] = r, t } }, function (t, n, r) { var o = r(3), u = r(26), c = r(30), f = r(79)("src"), e = r(219), i = "toString", a = ("" + e).split(i); r(46).inspectSource = function (t) { return e.call(t) }, (t.exports = function (t, n, r, e) { var i = "function" == typeof r; i && (c(r, "name") || u(r, "name", n)), t[n] !== r && (i && (c(r, f) || u(r, f, t[n] ? "" + t[n] : a.join(String(n)))), t === o ? t[n] = r : e ? t[n] ? t[n] = r : u(t, n, r) : (delete t[n], u(t, n, r))) })(Function.prototype, i, function () { return "function" == typeof this && this[f] || e.call(this) }) }, function (t, n, r) { var e = r(1), i = r(4), u = r(51), c = /"/g, o = function (t, n, r, e) { var i = String(u(t)), o = "<" + n; return "" !== r && (o += " " + r + '="' + String(e).replace(c, "&quot;") + '"'), o + ">" + i + "</" + n + ">" }; t.exports = function (n, t) { var r = {}; r[n] = t(o), e(e.P + e.F * i(function () { var t = ""[n]('"'); return t !== t.toLowerCase() || 3 < t.split('"').length }), "String", r) } }, function (t, n, r) { var e = r(65), i = r(35); t.exports = Object.keys || function (t) { return e(t, i) } }, function (t, n) { var r = {}.hasOwnProperty; t.exports = function (t, n) { return r.call(t, n) } }, function (t, n, r) { var e = r(117), i = r(75), o = r(33), u = r(53), c = r(30), f = r(174), a = Object.getOwnPropertyDescriptor; n.f = r(10) ? a : function (t, n) { if (t = o(t), n = u(n, !0), f) try { return a(t, n) } catch (t) { } if (c(t, n)) return i(!e.f.call(t, n), t[n]) } }, function (t, n, r) { var e = r(30), i = r(17), o = r(154)("IE_PROTO"), u = Object.prototype; t.exports = Object.getPrototypeOf || function (t) { return t = i(t), e(t, o) ? t[o] : "function" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? u : null } }, function (t, n, r) { var e = r(116), i = r(51); t.exports = function (t) { return e(i(t)) } }, function (t, n) { t.exports = function (t) { if (null == t) throw TypeError("Can't call method on  " + t); return t } }, function (t, n) { t.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",") }, function (t, n) { t.exports = {} }, function (t, n) { n.f = {}.propertyIsEnumerable }, function (t, n, r) { var e = r(14).f, i = r(9), o = r(16)("toStringTag"); t.exports = function (t, n, r) { t && !i(t = r ? t : t.prototype, o) && e(t, o, { configurable: !0, value: n }) } }, function (t, n, r) { var e = r(40)("keys"), i = r(25); t.exports = function (t) { return e[t] || (e[t] = i(t)) } }, function (t, n, r) { var e = r(19), i = r(6), o = "__core-js_shared__", u = i[o] || (i[o] = {}); (t.exports = function (t, n) { return u[t] || (u[t] = void 0 !== n ? n : {}) })("versions", []).push({ version: e.version, mode: r(23) ? "pure" : "global", copyright: "© 2019 Denis Pushkarev (zloirock.ru)" }) }, function (t, n) { var r = Math.ceil, e = Math.floor; t.exports = function (t) { return isNaN(t = +t) ? 0 : (0 < t ? e : r)(t) } }, function (t, n, r) { var i = r(18); t.exports = function (t, n) { if (!i(t)) return t; var r, e; if (n && "function" == typeof (r = t.toString) && !i(e = r.call(t))) return e; if ("function" == typeof (r = t.valueOf) && !i(e = r.call(t))) return e; if (!n && "function" == typeof (r = t.toString) && !i(e = r.call(t))) return e; throw TypeError("Can't convert object to primitive value") } }, function (t, n, r) { var e = r(6), i = r(19), o = r(23), u = r(44), c = r(14).f; t.exports = function (t) { var n = i.Symbol || (i.Symbol = o ? {} : e.Symbol || {}); "_" == t.charAt(0) || t in n || c(n, t, { value: u.f(t) }) } }, function (t, n, r) { n.f = r(16) }, function (t, n) { var r = {}.toString; t.exports = function (t) { return r.call(t).slice(8, -1) } }, function (t, n) { var r = t.exports = { version: "2.6.9" }; "number" == typeof __e && (__e = r) }, function (t, n, r) { var o = r(21); t.exports = function (e, i, t) { if (o(e), void 0 === i) return e; switch (t) { case 1: return function (t) { return e.call(i, t) }; case 2: return function (t, n) { return e.call(i, t, n) }; case 3: return function (t, n, r) { return e.call(i, t, n, r) } }return function () { return e.apply(i, arguments) } } }, function (t, n, r) { "use strict"; var e = r(4); t.exports = function (t, n) { return !!t && e(function () { n ? t.call(null, function () { }, 1) : t.call(null) }) } }, function (t, n) { var r = Math.ceil, e = Math.floor; t.exports = function (t) { return isNaN(t = +t) ? 0 : (0 < t ? e : r)(t) } }, function (t, n, r) { var x = r(47), m = r(116), S = r(17), w = r(8), e = r(138); t.exports = function (l, t) { var h = 1 == l, v = 2 == l, p = 3 == l, d = 4 == l, y = 6 == l, g = 5 == l || y, b = t || e; return function (t, n, r) { for (var e, i, o = S(t), u = m(o), c = x(n, r, 3), f = w(u.length), a = 0, s = h ? b(t, f) : v ? b(t, 0) : void 0; a < f; a++)if ((g || a in u) && (i = c(e = u[a], a, o), l)) if (h) s[a] = i; else if (i) switch (l) { case 3: return !0; case 5: return e; case 6: return a; case 2: s.push(e) } else if (d) return !1; return y ? -1 : p || d ? d : s } } }, function (t, n) { t.exports = function (t) { if (null == t) throw TypeError("Can't call method on  " + t); return t } }, function (t, n, r) { var i = r(1), o = r(46), u = r(4); t.exports = function (t, n) { var r = (o.Object || {})[t] || Object[t], e = {}; e[t] = n(r), i(i.S + i.F * u(function () { r(1) }), "Object", e) } }, function (t, n, r) { var i = r(5); t.exports = function (t, n) { if (!i(t)) return t; var r, e; if (n && "function" == typeof (r = t.toString) && !i(e = r.call(t))) return e; if ("function" == typeof (r = t.valueOf) && !i(e = r.call(t))) return e; if (!n && "function" == typeof (r = t.toString) && !i(e = r.call(t))) return e; throw TypeError("Can't convert object to primitive value") } }, function (t, n, r) { var d = r(6), y = r(19), g = r(93), b = r(13), x = r(9), m = "prototype", S = function (t, n, r) { var e, i, o, u = t & S.F, c = t & S.G, f = t & S.S, a = t & S.P, s = t & S.B, l = t & S.W, h = c ? y : y[n] || (y[n] = {}), v = h[m], p = c ? d : f ? d[n] : (d[n] || {})[m]; for (e in c && (r = n), r) (i = !u && p && void 0 !== p[e]) && x(h, e) || (o = i ? p[e] : r[e], h[e] = c && "function" != typeof p[e] ? r[e] : s && i ? g(o, d) : l && p[e] == o ? function (e) { var t = function (t, n, r) { if (this instanceof e) { switch (arguments.length) { case 0: return new e; case 1: return new e(t); case 2: return new e(t, n) }return new e(t, n, r) } return e.apply(this, arguments) }; return t[m] = e[m], t }(o) : a && "function" == typeof o ? g(Function.call, o) : o, a && ((h.virtual || (h.virtual = {}))[e] = o, t & S.R && v && !v[e] && b(v, e, o))) }; S.F = 1, S.G = 2, S.S = 4, S.P = 8, S.B = 16, S.W = 32, S.U = 64, S.R = 128, t.exports = S }, function (t, n, r) { var e = r(34); t.exports = function (t) { return Object(e(t)) } }, function (t, n, r) { var o = r(196), e = r(1), i = r(118)("metadata"), u = i.store || (i.store = new (r(200))), c = function (t, n, r) { var e = u.get(t); if (!e) { if (!r) return; u.set(t, e = new o) } var i = e.get(n); if (!i) { if (!r) return; e.set(n, i = new o) } return i }; t.exports = { store: u, map: c, has: function (t, n, r) { var e = c(n, r, !1); return void 0 !== e && e.has(t) }, get: function (t, n, r) { var e = c(n, r, !1); return void 0 === e ? void 0 : e.get(t) }, set: function (t, n, r, e) { c(r, e, !0).set(t, n) }, keys: function (t, n) { var r = c(t, n, !1), e = []; return r && r.forEach(function (t, n) { e.push(n) }), e }, key: function (t) { return void 0 === t || "symbol" == typeof t ? t : String(t) }, exp: function (t) { e(e.S, "Reflect", t) } } }, function (t, n, r) { "use strict"; if (r(10)) { var g = r(68), b = r(3), x = r(4), m = r(1), S = r(132), e = r(159), h = r(47), w = r(70), i = r(75), _ = r(26), o = r(76), u = r(49), O = r(8), E = r(194), c = r(78), f = r(53), a = r(30), M = r(81), P = r(5), v = r(17), p = r(145), j = r(72), F = r(32), A = r(73).f, d = r(161), s = r(79), l = r(7), y = r(50), I = r(120), L = r(119), N = r(162), T = r(82), k = r(125), R = r(77), C = r(137), D = r(166), G = r(11), W = r(31), U = G.f, V = W.f, B = b.RangeError, q = b.TypeError, z = b.Uint8Array, K = "ArrayBuffer", H = "Shared" + K, J = "BYTES_PER_ELEMENT", $ = "prototype", Y = Array[$], X = e.ArrayBuffer, Q = e.DataView, Z = y(0), tt = y(2), nt = y(3), rt = y(4), et = y(5), it = y(6), ot = I(!0), ut = I(!1), ct = N.values, ft = N.keys, at = N.entries, st = Y.lastIndexOf, lt = Y.reduce, ht = Y.reduceRight, vt = Y.join, pt = Y.sort, dt = Y.slice, yt = Y.toString, gt = Y.toLocaleString, bt = l("iterator"), xt = l("toStringTag"), mt = s("typed_constructor"), St = s("def_constructor"), wt = S.CONSTR, _t = S.TYPED, Ot = S.VIEW, Et = "Wrong length!", Mt = y(1, function (t, n) { return It(L(t, t[St]), n) }), Pt = x(function () { return 1 === new z(new Uint16Array([1]).buffer)[0] }), jt = !!z && !!z[$].set && x(function () { new z(1).set({}) }), Ft = function (t, n) { var r = u(t); if (r < 0 || r % n) throw B("Wrong offset!"); return r }, At = function (t) { if (P(t) && _t in t) return t; throw q(t + " is not a typed array!") }, It = function (t, n) { if (!(P(t) && mt in t)) throw q("It is not a typed array constructor!"); return new t(n) }, Lt = function (t, n) { return Nt(L(t, t[St]), n) }, Nt = function (t, n) { for (var r = 0, e = n.length, i = It(t, e); r < e;)i[r] = n[r++]; return i }, Tt = function (t, n, r) { U(t, n, { get: function () { return this._d[r] } }) }, kt = function (t) { var n, r, e, i, o, u, c = v(t), f = arguments.length, a = 1 < f ? arguments[1] : void 0, s = void 0 !== a, l = d(c); if (null != l && !p(l)) { for (u = l.call(c), e = [], n = 0; !(o = u.next()).done; n++)e.push(o.value); c = e } for (s && 2 < f && (a = h(a, arguments[2], 2)), n = 0, r = O(c.length), i = It(this, r); n < r; n++)i[n] = s ? a(c[n], n) : c[n]; return i }, Rt = function () { for (var t = 0, n = arguments.length, r = It(this, n); t < n;)r[t] = arguments[t++]; return r }, Ct = !!z && x(function () { gt.call(new z(1)) }), Dt = function () { return gt.apply(Ct ? dt.call(At(this)) : At(this), arguments) }, Gt = { copyWithin: function (t, n) { return D.call(At(this), t, n, 2 < arguments.length ? arguments[2] : void 0) }, every: function (t) { return rt(At(this), t, 1 < arguments.length ? arguments[1] : void 0) }, fill: function (t) { return C.apply(At(this), arguments) }, filter: function (t) { return Lt(this, tt(At(this), t, 1 < arguments.length ? arguments[1] : void 0)) }, find: function (t) { return et(At(this), t, 1 < arguments.length ? arguments[1] : void 0) }, findIndex: function (t) { return it(At(this), t, 1 < arguments.length ? arguments[1] : void 0) }, forEach: function (t) { Z(At(this), t, 1 < arguments.length ? arguments[1] : void 0) }, indexOf: function (t) { return ut(At(this), t, 1 < arguments.length ? arguments[1] : void 0) }, includes: function (t) { return ot(At(this), t, 1 < arguments.length ? arguments[1] : void 0) }, join: function (t) { return vt.apply(At(this), arguments) }, lastIndexOf: function (t) { return st.apply(At(this), arguments) }, map: function (t) { return Mt(At(this), t, 1 < arguments.length ? arguments[1] : void 0) }, reduce: function (t) { return lt.apply(At(this), arguments) }, reduceRight: function (t) { return ht.apply(At(this), arguments) }, reverse: function () { for (var t, n = this, r = At(n).length, e = Math.floor(r / 2), i = 0; i < e;)t = n[i], n[i++] = n[--r], n[r] = t; return n }, some: function (t) { return nt(At(this), t, 1 < arguments.length ? arguments[1] : void 0) }, sort: function (t) { return pt.call(At(this), t) }, subarray: function (t, n) { var r = At(this), e = r.length, i = c(t, e); return new (L(r, r[St]))(r.buffer, r.byteOffset + i * r.BYTES_PER_ELEMENT, O((void 0 === n ? e : c(n, e)) - i)) } }, Wt = function (t, n) { return Lt(this, dt.call(At(this), t, n)) }, Ut = function (t) { At(this); var n = Ft(arguments[1], 1), r = this.length, e = v(t), i = O(e.length), o = 0; if (r < i + n) throw B(Et); for (; o < i;)this[n + o] = e[o++] }, Vt = { entries: function () { return at.call(At(this)) }, keys: function () { return ft.call(At(this)) }, values: function () { return ct.call(At(this)) } }, Bt = function (t, n) { return P(t) && t[_t] && "symbol" != typeof n && n in t && String(+n) == String(n) }, qt = function (t, n) { return Bt(t, n = f(n, !0)) ? i(2, t[n]) : V(t, n) }, zt = function (t, n, r) { return !(Bt(t, n = f(n, !0)) && P(r) && a(r, "value")) || a(r, "get") || a(r, "set") || r.configurable || a(r, "writable") && !r.writable || a(r, "enumerable") && !r.enumerable ? U(t, n, r) : (t[n] = r.value, t) }; wt || (W.f = qt, G.f = zt), m(m.S + m.F * !wt, "Object", { getOwnPropertyDescriptor: qt, defineProperty: zt }), x(function () { yt.call({}) }) && (yt = gt = function () { return vt.call(this) }); var Kt = o({}, Gt); o(Kt, Vt), _(Kt, bt, Vt.values), o(Kt, { slice: Wt, set: Ut, constructor: function () { }, toString: yt, toLocaleString: Dt }), Tt(Kt, "buffer", "b"), Tt(Kt, "byteOffset", "o"), Tt(Kt, "byteLength", "l"), Tt(Kt, "length", "e"), U(Kt, xt, { get: function () { return this[_t] } }), t.exports = function (t, l, n, o) { var h = t + ((o = !!o) ? "Clamped" : "") + "Array", r = "get" + t, u = "set" + t, v = b[h], c = v || {}, e = v && F(v), i = !v || !S.ABV, f = {}, a = v && v[$], p = function (t, i) { U(t, i, { get: function () { return t = i, (n = this._d).v[r](t * l + n.o, Pt); var t, n }, set: function (t) { return n = i, r = t, e = this._d, o && (r = (r = Math.round(r)) < 0 ? 0 : 255 < r ? 255 : 255 & r), void e.v[u](n * l + e.o, r, Pt); var n, r, e }, enumerable: !0 }) }; i ? (v = n(function (t, n, r, e) { w(t, v, h, "_d"); var i, o, u, c, f = 0, a = 0; if (P(n)) { if (!(n instanceof X || (c = M(n)) == K || c == H)) return _t in n ? Nt(v, n) : kt.call(v, n); i = n, a = Ft(r, l); var s = n.byteLength; if (void 0 === e) { if (s % l) throw B(Et); if ((o = s - a) < 0) throw B(Et) } else if (s < (o = O(e) * l) + a) throw B(Et); u = o / l } else u = E(n), i = new X(o = u * l); for (_(t, "_d", { b: i, o: a, l: o, e: u, v: new Q(i) }); f < u;)p(t, f++) }), a = v[$] = j(Kt), _(a, "constructor", v)) : x(function () { v(1) }) && x(function () { new v(-1) }) && k(function (t) { new v, new v(null), new v(1.5), new v(t) }, !0) || (v = n(function (t, n, r, e) { var i; return w(t, v, h), P(n) ? n instanceof X || (i = M(n)) == K || i == H ? void 0 !== e ? new c(n, Ft(r, l), e) : void 0 !== r ? new c(n, Ft(r, l)) : new c(n) : _t in n ? Nt(v, n) : kt.call(v, n) : new c(E(n)) }), Z(e !== Function.prototype ? A(c).concat(A(e)) : A(c), function (t) { t in v || _(v, t, c[t]) }), v[$] = a, g || (a.constructor = v)); var s = a[bt], d = !!s && ("values" == s.name || null == s.name), y = Vt.values; _(v, mt, !0), _(a, _t, h), _(a, Ot, !0), _(a, St, v), (o ? new v(1)[xt] == h : xt in a) || U(a, xt, { get: function () { return h } }), f[h] = v, m(m.G + m.W + m.F * (v != c), f), m(m.S, h, { BYTES_PER_ELEMENT: l }), m(m.S + m.F * x(function () { c.of.call(v, 1) }), h, { from: kt, of: Rt }), J in a || _(a, J, l), m(m.P, h, Gt), R(h), m(m.P + m.F * jt, h, { set: Ut }), m(m.P + m.F * !d, h, Vt), g || a.toString == yt || (a.toString = yt), m(m.P + m.F * x(function () { new v(1).slice() }), h, { slice: Wt }), m(m.P + m.F * (x(function () { return [1, 2].toLocaleString() != new v([1, 2]).toLocaleString() }) || !x(function () { a.toLocaleString.call([1, 2]) })), h, { toLocaleString: Dt }), T[h] = d ? s : y, g || d || _(a, bt, y) } } else t.exports = function () { } }, function (t, n) { var r = {}.toString; t.exports = function (t) { return r.call(t).slice(8, -1) } }, function (t, n, r) { var e = r(18), i = r(6).document, o = e(i) && e(i.createElement); t.exports = function (t) { return o ? i.createElement(t) : {} } }, function (t, n, r) { t.exports = !r(12) && !r(20)(function () { return 7 != Object.defineProperty(r(59)("div"), "a", { get: function () { return 7 } }).a }) }, function (t, n, r) { "use strict"; var x = r(23), m = r(54), S = r(66), w = r(13), _ = r(36), O = r(98), E = r(38), M = r(104), P = r(16)("iterator"), j = !([].keys && "next" in [].keys()), F = "values", A = function () { return this }; t.exports = function (t, n, r, e, i, o, u) { O(r, n, e); var c, f, a, s = function (t) { if (!j && t in p) return p[t]; switch (t) { case "keys": case F: return function () { return new r(this, t) } }return function () { return new r(this, t) } }, l = n + " Iterator", h = i == F, v = !1, p = t.prototype, d = p[P] || p["@@iterator"] || i && p[i], y = d || s(i), g = i ? h ? s("entries") : y : void 0, b = "Array" == n && p.entries || d; if (b && ((a = M(b.call(new t))) !== Object.prototype && a.next && (E(a, l, !0), x || "function" == typeof a[P] || w(a, P, A))), h && d && d.name !== F && (v = !0, y = function () { return d.call(this) }), x && !u || !j && !v && p[P] || w(p, P, y), _[n] = y, _[l] = A, i) if (c = { values: h ? y : s(F), keys: o ? y : s("keys"), entries: g }, u) for (f in c) f in p || S(p, f, c[f]); else m(m.P + m.F * (j || v), n, c); return c } }, function (t, n, e) { var i = e(22), o = e(101), u = e(35), c = e(39)("IE_PROTO"), f = function () { }, a = "prototype", s = function () { var t, n = e(59)("iframe"), r = u.length; for (n.style.display = "none", e(95).appendChild(n), n.src = "javascript:", (t = n.contentWindow.document).open(), t.write("<script>document.F=Object<\/script>"), t.close(), s = t.F; r--;)delete s[a][u[r]]; return s() }; t.exports = Object.create || function (t, n) { var r; return null !== t ? (f[a] = i(t), r = new f, f[a] = null, r[c] = t) : r = s(), void 0 === n ? r : o(r, n) } }, function (t, n, r) { var e = r(65), i = r(35).concat("length", "prototype"); n.f = Object.getOwnPropertyNames || function (t) { return e(t, i) } }, function (t, n) { n.f = Object.getOwnPropertySymbols }, function (t, n, r) { var u = r(9), c = r(15), f = r(92)(!1), a = r(39)("IE_PROTO"); t.exports = function (t, n) { var r, e = c(t), i = 0, o = []; for (r in e) r != a && u(e, r) && o.push(r); for (; n.length > i;)u(e, r = n[i++]) && (~f(o, r) || o.push(r)); return o } }, function (t, n, r) { t.exports = r(13) }, function (t, n, r) { var e = r(7)("unscopables"), i = Array.prototype; null == i[e] && r(26)(i, e, {}), t.exports = function (t) { i[e][t] = !0 } }, function (t, n) { t.exports = !1 }, function (t, n, r) { var e = r(79)("meta"), i = r(5), o = r(30), u = r(11).f, c = 0, f = Object.isExtensible || function () { return !0 }, a = !r(4)(function () { return f(Object.preventExtensions({})) }), s = function (t) { u(t, e, { value: { i: "O" + ++c, w: {} } }) }, l = t.exports = { KEY: e, NEED: !1, fastKey: function (t, n) { if (!i(t)) return "symbol" == typeof t ? t : ("string" == typeof t ? "S" : "P") + t; if (!o(t, e)) { if (!f(t)) return "F"; if (!n) return "E"; s(t) } return t[e].i }, getWeak: function (t, n) { if (!o(t, e)) { if (!f(t)) return !0; if (!n) return !1; s(t) } return t[e].w }, onFreeze: function (t) { return a && l.NEED && f(t) && !o(t, e) && s(t), t } } }, function (t, n) { t.exports = function (t, n, r, e) { if (!(t instanceof n) || void 0 !== e && e in t) throw TypeError(r + ": incorrect invocation!"); return t } }, function (t, n, r) { var h = r(47), v = r(177), p = r(145), d = r(2), y = r(8), g = r(161), b = {}, x = {}; (n = t.exports = function (t, n, r, e, i) { var o, u, c, f, a = i ? function () { return t } : g(t), s = h(r, e, n ? 2 : 1), l = 0; if ("function" != typeof a) throw TypeError(t + " is not iterable!"); if (p(a)) { for (o = y(t.length); l < o; l++)if ((f = n ? s(d(u = t[l])[0], u[1]) : s(t[l])) === b || f === x) return f } else for (c = a.call(t); !(u = c.next()).done;)if ((f = v(c, s, u.value, n)) === b || f === x) return f }).BREAK = b, n.RETURN = x }, function (t, n, e) { var i = e(2), o = e(183), u = e(141), c = e(154)("IE_PROTO"), f = function () { }, a = "prototype", s = function () { var t, n = e(140)("iframe"), r = u.length; for (n.style.display = "none", e(143).appendChild(n), n.src = "javascript:", (t = n.contentWindow.document).open(), t.write("<script>document.F=Object<\/script>"), t.close(), s = t.F; r--;)delete s[a][u[r]]; return s() }; t.exports = Object.create || function (t, n) { var r; return null !== t ? (f[a] = i(t), r = new f, f[a] = null, r[c] = t) : r = s(), void 0 === n ? r : o(r, n) } }, function (t, n, r) { var e = r(185), i = r(141).concat("length", "prototype"); n.f = Object.getOwnPropertyNames || function (t) { return e(t, i) } }, function (t, n, r) { var e = r(185), i = r(141); t.exports = Object.keys || function (t) { return e(t, i) } }, function (t, n) { t.exports = function (t, n) { return { enumerable: !(1 & t), configurable: !(2 & t), writable: !(4 & t), value: n } } }, function (t, n, r) { var i = r(27); t.exports = function (t, n, r) { for (var e in n) i(t, e, n[e], r); return t } }, function (t, n, r) { "use strict"; var e = r(3), i = r(11), o = r(10), u = r(7)("species"); t.exports = function (t) { var n = e[t]; o && n && !n[u] && i.f(n, u, { configurable: !0, get: function () { return this } }) } }, function (t, n, r) { var e = r(49), i = Math.max, o = Math.min; t.exports = function (t, n) { return (t = e(t)) < 0 ? i(t + n, 0) : o(t, n) } }, function (t, n) { var r = 0, e = Math.random(); t.exports = function (t) { return "Symbol(".concat(void 0 === t ? "" : t, ")_", (++r + e).toString(36)) } }, function (t, n, r) { var e = r(5); t.exports = function (t, n) { if (!e(t) || t._t !== n) throw TypeError("Incompatible receiver, " + n + " required!"); return t } }, function (t, n, r) { var i = r(45), o = r(7)("toStringTag"), u = "Arguments" == i(function () { return arguments }()); t.exports = function (t) { var n, r, e; return void 0 === t ? "Undefined" : null === t ? "Null" : "string" == typeof (r = function (t, n) { try { return t[n] } catch (t) { } }(n = Object(t), o)) ? r : u ? i(n) : "Object" == (e = i(n)) && "function" == typeof n.callee ? "Arguments" : e } }, function (t, n) { t.exports = {} }, function (t, n, r) { var e = r(11).f, i = r(30), o = r(7)("toStringTag"); t.exports = function (t, n, r) { t && !i(t = r ? t : t.prototype, o) && e(t, o, { configurable: !0, value: n }) } }, function (t, n, r) { var u = r(1), e = r(51), c = r(4), f = r(157), i = "[" + f + "]", o = RegExp("^" + i + i + "*"), a = RegExp(i + i + "*$"), s = function (t, n, r) { var e = {}, i = c(function () { return !!f[t]() || "​" != "​"[t]() }), o = e[t] = i ? n(l) : f[t]; r && (e[r] = o), u(u.P + u.F * i, "String", e) }, l = s.trim = function (t, n) { return t = String(e(t)), 1 & n && (t = t.replace(o, "")), 2 & n && (t = t.replace(a, "")), t }; t.exports = s }, function (t, n, r) { t.exports = { default: r(88), __esModule: !0 } }, function (t, n, r) { t.exports = { default: r(89), __esModule: !0 } }, function (t, n, r) { "use strict"; function e(t) { return t && t.__esModule ? t : { default: t } } n.__esModule = !0; var i = e(r(86)), o = e(r(85)), u = "function" == typeof o.default && "symbol" == typeof i.default ? function (t) { return typeof t } : function (t) { return t && "function" == typeof o.default && t.constructor === o.default && t !== o.default.prototype ? "symbol" : typeof t }; n.default = "function" == typeof o.default && "symbol" === u(i.default) ? function (t) { return void 0 === t ? "undefined" : u(t) } : function (t) { return t && "function" == typeof o.default && t.constructor === o.default && t !== o.default.prototype ? "symbol" : void 0 === t ? "undefined" : u(t) } }, function (t, n, r) { r(111), r(109), r(112), r(113), t.exports = r(19).Symbol }, function (t, n, r) { r(110), r(114), t.exports = r(44).f("iterator") }, function (t, n) { t.exports = function (t) { if ("function" != typeof t) throw TypeError(t + " is not a function!"); return t } }, function (t, n) { t.exports = function () { } }, function (t, n, r) { var f = r(15), a = r(107), s = r(106); t.exports = function (c) { return function (t, n, r) { var e, i = f(t), o = a(i.length), u = s(r, o); if (c && n != n) { for (; u < o;)if ((e = i[u++]) != e) return !0 } else for (; u < o; u++)if ((c || u in i) && i[u] === n) return c || u || 0; return !c && -1 } } }, function (t, n, r) { var o = r(90); t.exports = function (e, i, t) { if (o(e), void 0 === i) return e; switch (t) { case 1: return function (t) { return e.call(i, t) }; case 2: return function (t, n) { return e.call(i, t, n) }; case 3: return function (t, n, r) { return e.call(i, t, n, r) } }return function () { return e.apply(i, arguments) } } }, function (t, n, r) { var c = r(29), f = r(64), a = r(37); t.exports = function (t) { var n = c(t), r = f.f; if (r) for (var e, i = r(t), o = a.f, u = 0; i.length > u;)o.call(t, e = i[u++]) && n.push(e); return n } }, function (t, n, r) { var e = r(6).document; t.exports = e && e.documentElement }, function (t, n, r) { var e = r(58); t.exports = Object("z").propertyIsEnumerable(0) ? Object : function (t) { return "String" == e(t) ? t.split("") : Object(t) } }, function (t, n, r) { var e = r(58); t.exports = Array.isArray || function (t) { return "Array" == e(t) } }, function (t, n, r) { "use strict"; var e = r(62), i = r(24), o = r(38), u = {}; r(13)(u, r(16)("iterator"), function () { return this }), t.exports = function (t, n, r) { t.prototype = e(u, { next: i(1, r) }), o(t, n + " Iterator") } }, function (t, n) { t.exports = function (t, n) { return { value: n, done: !!t } } }, function (t, n, r) { var e = r(25)("meta"), i = r(18), o = r(9), u = r(14).f, c = 0, f = Object.isExtensible || function () { return !0 }, a = !r(20)(function () { return f(Object.preventExtensions({})) }), s = function (t) { u(t, e, { value: { i: "O" + ++c, w: {} } }) }, l = t.exports = { KEY: e, NEED: !1, fastKey: function (t, n) { if (!i(t)) return "symbol" == typeof t ? t : ("string" == typeof t ? "S" : "P") + t; if (!o(t, e)) { if (!f(t)) return "F"; if (!n) return "E"; s(t) } return t[e].i }, getWeak: function (t, n) { if (!o(t, e)) { if (!f(t)) return !0; if (!n) return !1; s(t) } return t[e].w }, onFreeze: function (t) { return a && l.NEED && f(t) && !o(t, e) && s(t), t } } }, function (t, n, r) { var u = r(14), c = r(22), f = r(29); t.exports = r(12) ? Object.defineProperties : function (t, n) { c(t); for (var r, e = f(n), i = e.length, o = 0; o < i;)u.f(t, r = e[o++], n[r]); return t } }, function (t, n, r) { var e = r(37), i = r(24), o = r(15), u = r(42), c = r(9), f = r(60), a = Object.getOwnPropertyDescriptor; n.f = r(12) ? a : function (t, n) { if (t = o(t), n = u(n, !0), f) try { return a(t, n) } catch (t) { } if (c(t, n)) return i(!e.f.call(t, n), t[n]) } }, function (t, n, r) { var e = r(15), i = r(63).f, o = {}.toString, u = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : []; t.exports.f = function (t) { return u && "[object Window]" == o.call(t) ? function (t) { try { return i(t) } catch (t) { return u.slice() } }(t) : i(e(t)) } }, function (t, n, r) { var e = r(9), i = r(55), o = r(39)("IE_PROTO"), u = Object.prototype; t.exports = Object.getPrototypeOf || function (t) { return t = i(t), e(t, o) ? t[o] : "function" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? u : null } }, function (t, n, r) { var f = r(41), a = r(34); t.exports = function (c) { return function (t, n) { var r, e, i = String(a(t)), o = f(n), u = i.length; return o < 0 || u <= o ? c ? "" : void 0 : (r = i.charCodeAt(o)) < 55296 || 56319 < r || o + 1 === u || (e = i.charCodeAt(o + 1)) < 56320 || 57343 < e ? c ? i.charAt(o) : r : c ? i.slice(o, o + 2) : e - 56320 + (r - 55296 << 10) + 65536 } } }, function (t, n, r) { var e = r(41), i = Math.max, o = Math.min; t.exports = function (t, n) { return (t = e(t)) < 0 ? i(t + n, 0) : o(t, n) } }, function (t, n, r) { var e = r(41), i = Math.min; t.exports = function (t) { return 0 < t ? i(e(t), 9007199254740991) : 0 } }, function (t, n, r) { "use strict"; var e = r(91), i = r(99), o = r(36), u = r(15); t.exports = r(61)(Array, "Array", function (t, n) { this._t = u(t), this._i = 0, this._k = n }, function () { var t = this._t, n = this._k, r = this._i++; return !t || r >= t.length ? (this._t = void 0, i(1)) : i(0, "keys" == n ? r : "values" == n ? t[r] : [r, t[r]]) }, "values"), o.Arguments = o.Array, e("keys"), e("values"), e("entries") }, function (t, n) { }, function (t, n, r) { "use strict"; var e = r(105)(!0); r(61)(String, "String", function (t) { this._t = String(t), this._i = 0 }, function () { var t, n = this._t, r = this._i; return r >= n.length ? { value: void 0, done: !0 } : (t = e(n, r), this._i += t.length, { value: t, done: !1 }) }) }, function (t, n, r) { "use strict"; var e = r(6), u = r(9), i = r(12), o = r(54), c = r(66), f = r(100).KEY, a = r(20), s = r(40), l = r(38), h = r(25), v = r(16), p = r(44), d = r(43), y = r(94), g = r(97), b = r(22), x = r(18), m = r(55), S = r(15), w = r(42), _ = r(24), O = r(62), E = r(103), M = r(102), P = r(64), j = r(14), F = r(29), A = M.f, I = j.f, L = E.f, N = e.Symbol, T = e.JSON, k = T && T.stringify, R = "prototype", C = v("_hidden"), D = v("toPrimitive"), G = {}.propertyIsEnumerable, W = s("symbol-registry"), U = s("symbols"), V = s("op-symbols"), B = Object[R], q = "function" == typeof N && !!P.f, z = e.QObject, K = !z || !z[R] || !z[R].findChild, H = i && a(function () { return 7 != O(I({}, "a", { get: function () { return I(this, "a", { value: 7 }).a } })).a }) ? function (t, n, r) { var e = A(B, n); e && delete B[n], I(t, n, r), e && t !== B && I(B, n, e) } : I, J = function (t) { var n = U[t] = O(N[R]); return n._k = t, n }, $ = q && "symbol" == typeof N.iterator ? function (t) { return "symbol" == typeof t } : function (t) { return t instanceof N }, Y = function (t, n, r) { return t === B && Y(V, n, r), b(t), n = w(n, !0), b(r), u(U, n) ? (r.enumerable ? (u(t, C) && t[C][n] && (t[C][n] = !1), r = O(r, { enumerable: _(0, !1) })) : (u(t, C) || I(t, C, _(1, {})), t[C][n] = !0), H(t, n, r)) : I(t, n, r) }, X = function (t, n) { b(t); for (var r, e = y(n = S(n)), i = 0, o = e.length; i < o;)Y(t, r = e[i++], n[r]); return t }, Q = function (t) { var n = G.call(this, t = w(t, !0)); return !(this === B && u(U, t) && !u(V, t)) && (!(n || !u(this, t) || !u(U, t) || u(this, C) && this[C][t]) || n) }, Z = function (t, n) { if (t = S(t), n = w(n, !0), t !== B || !u(U, n) || u(V, n)) { var r = A(t, n); return !r || !u(U, n) || u(t, C) && t[C][n] || (r.enumerable = !0), r } }, tt = function (t) { for (var n, r = L(S(t)), e = [], i = 0; r.length > i;)u(U, n = r[i++]) || n == C || n == f || e.push(n); return e }, nt = function (t) { for (var n, r = t === B, e = L(r ? V : S(t)), i = [], o = 0; e.length > o;)!u(U, n = e[o++]) || r && !u(B, n) || i.push(U[n]); return i }; q || (c((N = function () { if (this instanceof N) throw TypeError("Symbol is not a constructor!"); var n = h(0 < arguments.length ? arguments[0] : void 0), r = function (t) { this === B && r.call(V, t), u(this, C) && u(this[C], n) && (this[C][n] = !1), H(this, n, _(1, t)) }; return i && K && H(B, n, { configurable: !0, set: r }), J(n) })[R], "toString", function () { return this._k }), M.f = Z, j.f = Y, r(63).f = E.f = tt, r(37).f = Q, P.f = nt, i && !r(23) && c(B, "propertyIsEnumerable", Q, !0), p.f = function (t) { return J(v(t)) }), o(o.G + o.W + o.F * !q, { Symbol: N }); for (var rt = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), et = 0; rt.length > et;)v(rt[et++]); for (var it = F(v.store), ot = 0; it.length > ot;)d(it[ot++]); o(o.S + o.F * !q, "Symbol", { for: function (t) { return u(W, t += "") ? W[t] : W[t] = N(t) }, keyFor: function (t) { if (!$(t)) throw TypeError(t + " is not a symbol!"); for (var n in W) if (W[n] === t) return n }, useSetter: function () { K = !0 }, useSimple: function () { K = !1 } }), o(o.S + o.F * !q, "Object", { create: function (t, n) { return void 0 === n ? O(t) : X(O(t), n) }, defineProperty: Y, defineProperties: X, getOwnPropertyDescriptor: Z, getOwnPropertyNames: tt, getOwnPropertySymbols: nt }); var ut = a(function () { P.f(1) }); o(o.S + o.F * ut, "Object", { getOwnPropertySymbols: function (t) { return P.f(m(t)) } }), T && o(o.S + o.F * (!q || a(function () { var t = N(); return "[null]" != k([t]) || "{}" != k({ a: t }) || "{}" != k(Object(t)) })), "JSON", { stringify: function (t) { for (var n, r, e = [t], i = 1; arguments.length > i;)e.push(arguments[i++]); if (r = n = e[1], (x(n) || void 0 !== t) && !$(t)) return g(n) || (n = function (t, n) { if ("function" == typeof r && (n = r.call(this, t, n)), !$(n)) return n }), e[1] = n, k.apply(T, e) } }), N[R][D] || r(13)(N[R], D, N[R].valueOf), l(N, "Symbol"), l(Math, "Math", !0), l(e.JSON, "JSON", !0) }, function (t, n, r) { r(43)("asyncIterator") }, function (t, n, r) { r(43)("observable") }, function (t, n, r) { r(108); for (var e = r(6), i = r(13), o = r(36), u = r(16)("toStringTag"), c = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), f = 0; f < c.length; f++) { var a = c[f], s = e[a], l = s && s.prototype; l && !l[u] && i(l, u, a), o[a] = o.Array } }, function (t, n, r) { "use strict"; var e = r(2); t.exports = function () { var t = e(this), n = ""; return t.global && (n += "g"), t.ignoreCase && (n += "i"), t.multiline && (n += "m"), t.unicode && (n += "u"), t.sticky && (n += "y"), n } }, function (t, n, r) { var e = r(45); t.exports = Object("z").propertyIsEnumerable(0) ? Object : function (t) { return "String" == e(t) ? t.split("") : Object(t) } }, function (t, n) { n.f = {}.propertyIsEnumerable }, function (t, n, r) { var e = r(46), i = r(3), o = "__core-js_shared__", u = i[o] || (i[o] = {}); (t.exports = function (t, n) { return u[t] || (u[t] = void 0 !== n ? n : {}) })("versions", []).push({ version: e.version, mode: r(68) ? "pure" : "global", copyright: "© 2019 Denis Pushkarev (zloirock.ru)" }) }, function (t, n, r) { var i = r(2), o = r(21), u = r(7)("species"); t.exports = function (t, n) { var r, e = i(t).constructor; return void 0 === e || null == (r = i(e)[u]) ? n : o(r) } }, function (t, n, r) { var f = r(33), a = r(8), s = r(78); t.exports = function (c) { return function (t, n, r) { var e, i = f(t), o = a(i.length), u = s(r, o); if (c && n != n) { for (; u < o;)if ((e = i[u++]) != e) return !0 } else for (; u < o; u++)if ((c || u in i) && i[u] === n) return c || u || 0; return !c && -1 } } }, function (t, n, r) { "use strict"; var g = r(3), b = r(1), x = r(27), m = r(76), S = r(69), w = r(71), _ = r(70), O = r(5), E = r(4), M = r(125), P = r(83), j = r(144); t.exports = function (e, t, n, r, i, o) { var u = g[e], c = u, f = i ? "set" : "add", a = c && c.prototype, s = {}, l = function (t) { var r = a[t]; x(a, t, "delete" == t ? function (t) { return !(o && !O(t)) && r.call(this, 0 === t ? 0 : t) } : "has" == t ? function (t) { return !(o && !O(t)) && r.call(this, 0 === t ? 0 : t) } : "get" == t ? function (t) { return o && !O(t) ? void 0 : r.call(this, 0 === t ? 0 : t) } : "add" == t ? function (t) { return r.call(this, 0 === t ? 0 : t), this } : function (t, n) { return r.call(this, 0 === t ? 0 : t, n), this }) }; if ("function" == typeof c && (o || a.forEach && !E(function () { (new c).entries().next() }))) { var h = new c, v = h[f](o ? {} : -0, 1) != h, p = E(function () { h.has(1) }), d = M(function (t) { new c(t) }), y = !o && E(function () { for (var t = new c, n = 5; n--;)t[f](n, n); return !t.has(-0) }); d || (((c = t(function (t, n) { _(t, c, e); var r = j(new u, t, c); return null != n && w(n, i, r[f], r), r })).prototype = a).constructor = c), (p || y) && (l("delete"), l("has"), i && l("get")), (y || v) && l(f), o && a.clear && delete a.clear } else c = r.getConstructor(t, e, i, f), m(c.prototype, n), S.NEED = !0; return P(c, e), s[e] = c, b(b.G + b.W + b.F * (c != u), s), o || r.setStrong(c, e, i), c } }, function (t, n, r) { "use strict"; r(197); var s = r(27), l = r(26), h = r(4), v = r(51), p = r(7), d = r(152), y = p("species"), g = !h(function () { var t = /./; return t.exec = function () { var t = []; return t.groups = { a: "7" }, t }, "7" !== "".replace(t, "$<a>") }), b = function () { var t = /(?:)/, n = t.exec; t.exec = function () { return n.apply(this, arguments) }; var r = "ab".split(t); return 2 === r.length && "a" === r[0] && "b" === r[1] }(); t.exports = function (r, t, n) { var e = p(r), o = !h(function () { var t = {}; return t[e] = function () { return 7 }, 7 != ""[r](t) }), i = o ? !h(function () { var t = !1, n = /a/; return n.exec = function () { return t = !0, null }, "split" === r && (n.constructor = {}, n.constructor[y] = function () { return n }), n[e](""), !t }) : void 0; if (!o || !i || "replace" === r && !g || "split" === r && !b) { var u = /./[e], c = n(v, e, ""[r], function (t, n, r, e, i) { return n.exec === d ? o && !i ? { done: !0, value: u.call(n, r, e) } : { done: !0, value: t.call(r, n, e) } : { done: !1 } }), f = c[0], a = c[1]; s(String.prototype, r, f), l(RegExp.prototype, e, 2 == t ? function (t, n) { return a.call(t, this, n) } : function (t) { return a.call(t, this) }) } } }, function (t, n, r) { var e = r(45); t.exports = Array.isArray || function (t) { return "Array" == e(t) } }, function (t, n, r) { var e = r(5), i = r(45), o = r(7)("match"); t.exports = function (t) { var n; return e(t) && (void 0 !== (n = t[o]) ? !!n : "RegExp" == i(t)) } }, function (t, n, r) { var o = r(7)("iterator"), u = !1; try { var e = [7][o](); e.return = function () { u = !0 }, Array.from(e, function () { throw 2 }) } catch (t) { } t.exports = function (t, n) { if (!n && !u) return !1; var r = !1; try { var e = [7], i = e[o](); i.next = function () { return { done: r = !0 } }, e[o] = function () { return i }, t(e) } catch (t) { } return r } }, function (t, n, r) { "use strict"; t.exports = r(68) || !r(4)(function () { var t = Math.random(); __defineSetter__.call(null, t, function () { }), delete r(3)[t] }) }, function (t, n) { n.f = Object.getOwnPropertySymbols }, function (t, n, r) { "use strict"; var i = r(81), o = RegExp.prototype.exec; t.exports = function (t, n) { var r = t.exec; if ("function" == typeof r) { var e = r.call(t, n); if ("object" != typeof e) throw new TypeError("RegExp exec method returned something other than an Object or null"); return e } if ("RegExp" !== i(t)) throw new TypeError("RegExp#exec called on incompatible receiver"); return o.call(t, n) } }, function (t, n, r) { "use strict"; var e = r(1), u = r(21), c = r(47), f = r(71); t.exports = function (t) { e(e.S, t, { from: function (t) { var n, r, e, i, o = arguments[1]; return u(this), (n = void 0 !== o) && u(o), null == t ? new this : (r = [], n ? (e = 0, i = c(o, arguments[2], 2), f(t, !1, function (t) { r.push(i(t, e++)) })) : f(t, !1, r.push, r), new this(r)) } }) } }, function (t, n, r) { "use strict"; var e = r(1); t.exports = function (t) { e(e.S, t, { of: function () { for (var t = arguments.length, n = new Array(t); t--;)n[t] = arguments[t]; return new this(n) } }) } }, function (t, n, r) { var f = r(49), a = r(51); t.exports = function (c) { return function (t, n) { var r, e, i = String(a(t)), o = f(n), u = i.length; return o < 0 || u <= o ? c ? "" : void 0 : (r = i.charCodeAt(o)) < 55296 || 56319 < r || o + 1 === u || (e = i.charCodeAt(o + 1)) < 56320 || 57343 < e ? c ? i.charAt(o) : r : c ? i.slice(o, o + 2) : e - 56320 + (r - 55296 << 10) + 65536 } } }, function (t, n, r) { for (var e, i = r(3), o = r(26), u = r(79), c = u("typed_array"), f = u("view"), a = !(!i.ArrayBuffer || !i.DataView), s = a, l = 0, h = "Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(","); l < 9;)(e = i[h[l++]]) ? (o(e.prototype, c, !0), o(e.prototype, f, !0)) : s = !1; t.exports = { ABV: a, CONSTR: s, TYPED: c, VIEW: f } }, function (t, n, r) { var e = r(3).navigator; t.exports = e && e.userAgent || "" }, function (t, n) { "use strict"; var r, e = { versions: (r = window.navigator.userAgent, { trident: -1 < r.indexOf("Trident"), presto: -1 < r.indexOf("Presto"), webKit: -1 < r.indexOf("AppleWebKit"), gecko: -1 < r.indexOf("Gecko") && -1 == r.indexOf("KHTML"), mobile: !!r.match(/AppleWebKit.*Mobile.*/), ios: !!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), android: -1 < r.indexOf("Android") || -1 < r.indexOf("Linux"), iPhone: -1 < r.indexOf("iPhone") || -1 < r.indexOf("Mac"), iPad: -1 < r.indexOf("iPad"), webApp: -1 == r.indexOf("Safari"), weixin: -1 == r.indexOf("MicroMessenger") }) }; t.exports = e }, function (t, n, r) { "use strict"; var e, i = r(87), l = (e = i) && e.__esModule ? e : { default: e }, h = function () { function n(t, n, r) { return n || r ? String.fromCharCode(n || r) : o[t] || t } function r(t) { return s[t] } var e = /&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g, i = /['<> "&]/g, o = { "&quot;": '"', "&lt;": "<", "&gt;": ">", "&amp;": "&", "&nbsp;": " " }, u = /\u00a0/g, c = /<br\s*\/?>/gi, f = /\r?\n/g, a = /\s/g, s = {}; for (var t in o) s[o[t]] = t; return o["&apos;"] = "'", s["'"] = "&#39;", { encode: function (t) { return t ? ("" + t).replace(i, r).replace(f, "<br/>").replace(a, "&nbsp;") : "" }, decode: function (t) { return t ? ("" + t).replace(c, "\n").replace(e, n).replace(u, " ") : "" }, encodeBase16: function (t) { if (!t) return t; for (var n = [], r = 0, e = (t += "").length; r < e; r++)n.push(t.charCodeAt(r).toString(16).toUpperCase()); return n.join("") }, encodeBase16forJSON: function (t) { if (!t) return t; for (var n = [], r = 0, e = (t = t.replace(/[\u4E00-\u9FBF]/gi, function (t) { return escape(t).replace("%u", "\\u") })).length; r < e; r++)n.push(t.charCodeAt(r).toString(16).toUpperCase()); return n.join("") }, decodeBase16: function (t) { if (!t) return t; for (var n = [], r = 0, e = (t += "").length; r < e; r += 2)n.push(String.fromCharCode("0x" + t.slice(r, r + 2))); return n.join("") }, encodeObject: function (t) { if (t instanceof Array) for (var n = 0, r = t.length; n < r; n++)t[n] = h.encodeObject(t[n]); else if ("object" == (void 0 === t ? "undefined" : (0, l.default)(t))) for (var e in t) t[e] = h.encodeObject(t[e]); else if ("string" == typeof t) return h.encode(t); return t }, loadScript: function (t) { var n = document.createElement("script"); document.getElementsByTagName("body")[0].appendChild(n), n.setAttribute("src", t) }, addLoadEvent: function (t) { var n = window.onload; "function" != typeof window.onload ? window.onload = t : window.onload = function () { n(), t() } } } }(); t.exports = h }, function (t, n, r) { "use strict"; var e = r(131)(!0); t.exports = function (t, n, r) { return n + (r ? e(t, n).length : 1) } }, function (t, n, r) { "use strict"; var c = r(17), f = r(78), a = r(8); t.exports = function (t) { for (var n = c(this), r = a(n.length), e = arguments.length, i = f(1 < e ? arguments[1] : void 0, r), o = 2 < e ? arguments[2] : void 0, u = void 0 === o ? r : f(o, r); i < u;)n[i++] = t; return n } }, function (t, n, r) { var e = r(215); t.exports = function (t, n) { return new (e(t))(n) } }, function (t, n, r) { "use strict"; var e = r(11), i = r(75); t.exports = function (t, n, r) { n in t ? e.f(t, n, i(0, r)) : t[n] = r } }, function (t, n, r) { var e = r(5), i = r(3).document, o = e(i) && e(i.createElement); t.exports = function (t) { return o ? i.createElement(t) : {} } }, function (t, n) { t.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",") }, function (t, n, r) { var e = r(7)("match"); t.exports = function (n) { var r = /./; try { "/./"[n](r) } catch (t) { try { return r[e] = !1, !"/./"[n](r) } catch (n) { } } return !0 } }, function (t, n, r) { var e = r(3).document; t.exports = e && e.documentElement }, function (t, n, r) { var o = r(5), u = r(153).set; t.exports = function (t, n, r) { var e, i = n.constructor; return i !== r && "function" == typeof i && (e = i.prototype) !== r.prototype && o(e) && u && u(t, e), t } }, function (t, n, r) { var e = r(82), i = r(7)("iterator"), o = Array.prototype; t.exports = function (t) { return void 0 !== t && (e.Array === t || o[i] === t) } }, function (t, n, r) { "use strict"; var e = r(72), i = r(75), o = r(83), u = {}; r(26)(u, r(7)("iterator"), function () { return this }), t.exports = function (t, n, r) { t.prototype = e(u, { next: i(1, r) }), o(t, n + " Iterator") } }, function (t, n, r) { "use strict"; var x = r(68), m = r(1), S = r(27), w = r(26), _ = r(82), O = r(146), E = r(83), M = r(32), P = r(7)("iterator"), j = !([].keys && "next" in [].keys()), F = "values", A = function () { return this }; t.exports = function (t, n, r, e, i, o, u) { O(r, n, e); var c, f, a, s = function (t) { if (!j && t in p) return p[t]; switch (t) { case "keys": case F: return function () { return new r(this, t) } }return function () { return new r(this, t) } }, l = n + " Iterator", h = i == F, v = !1, p = t.prototype, d = p[P] || p["@@iterator"] || i && p[i], y = d || s(i), g = i ? h ? s("entries") : y : void 0, b = "Array" == n && p.entries || d; if (b && ((a = M(b.call(new t))) !== Object.prototype && a.next && (E(a, l, !0), x || "function" == typeof a[P] || w(a, P, A))), h && d && d.name !== F && (v = !0, y = function () { return d.call(this) }), x && !u || !j && !v && p[P] || w(p, P, y), _[n] = y, _[l] = A, i) if (c = { values: h ? y : s(F), keys: o ? y : s("keys"), entries: g }, u) for (f in c) f in p || S(p, f, c[f]); else m(m.P + m.F * (j || v), n, c); return c } }, function (t, n) { var r = Math.expm1; t.exports = !r || 22025.465794806718 < r(10) || r(10) < 22025.465794806718 || -2e-17 != r(-2e-17) ? function (t) { return 0 == (t = +t) ? t : -1e-6 < t && t < 1e-6 ? t + t * t / 2 : Math.exp(t) - 1 } : r }, function (t, n) { t.exports = Math.sign || function (t) { return 0 == (t = +t) || t != t ? t : t < 0 ? -1 : 1 } }, function (t, n, r) { var c = r(3), f = r(158).set, a = c.MutationObserver || c.WebKitMutationObserver, s = c.process, l = c.Promise, h = "process" == r(45)(s); t.exports = function () { var r, e, i, t = function () { var t, n; for (h && (t = s.domain) && t.exit(); r;) { n = r.fn, r = r.next; try { n() } catch (t) { throw r ? i() : e = void 0, t } } e = void 0, t && t.enter() }; if (h) i = function () { s.nextTick(t) }; else if (!a || c.navigator && c.navigator.standalone) if (l && l.resolve) { var n = l.resolve(void 0); i = function () { n.then(t) } } else i = function () { f.call(c, t) }; else { var o = !0, u = document.createTextNode(""); new a(t).observe(u, { characterData: !0 }), i = function () { u.data = o = !o } } return function (t) { var n = { fn: t, next: void 0 }; e && (e.next = n), r || (r = n, i()), e = n } } }, function (t, n, r) { "use strict"; function e(t) { var r, e; this.promise = new t(function (t, n) { if (void 0 !== r || void 0 !== e) throw TypeError("Bad Promise constructor"); r = t, e = n }), this.resolve = i(r), this.reject = i(e) } var i = r(21); t.exports.f = function (t) { return new e(t) } }, function (t, n, r) { "use strict"; var e, i, u = r(115), c = RegExp.prototype.exec, f = String.prototype.replace, o = c, a = "lastIndex", s = (e = /a/, i = /b*/g, c.call(e, "a"), c.call(i, "a"), 0 !== e[a] || 0 !== i[a]), l = void 0 !== /()??/.exec("")[1]; (s || l) && (o = function (t) { var n, r, e, i, o = this; return l && (r = new RegExp("^" + o.source + "$(?!\\s)", u.call(o))), s && (n = o[a]), e = c.call(o, t), s && e && (o[a] = o.global ? e.index + e[0].length : n), l && e && 1 < e.length && f.call(e[0], r, function () { for (i = 1; i < arguments.length - 2; i++)void 0 === arguments[i] && (e[i] = void 0) }), e }), t.exports = o }, function (t, n, i) { var r = i(5), e = i(2), o = function (t, n) { if (e(t), !r(n) && null !== n) throw TypeError(n + ": can't set as prototype!") }; t.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? function (t, r, e) { try { (e = i(47)(Function.call, i(31).f(Object.prototype, "__proto__").set, 2))(t, []), r = !(t instanceof Array) } catch (t) { r = !0 } return function (t, n) { return o(t, n), r ? t.__proto__ = n : e(t, n), t } }({}, !1) : void 0), check: o } }, function (t, n, r) { var e = r(118)("keys"), i = r(79); t.exports = function (t) { return e[t] || (e[t] = i(t)) } }, function (t, n, r) { var e = r(124), i = r(51); t.exports = function (t, n, r) { if (e(n)) throw TypeError("String#" + r + " doesn't accept regex!"); return String(i(t)) } }, function (t, n, r) { "use strict"; var i = r(49), o = r(51); t.exports = function (t) { var n = String(o(this)), r = "", e = i(t); if (e < 0 || e == 1 / 0) throw RangeError("Count can't be negative"); for (; 0 < e; (e >>>= 1) && (n += n))1 & e && (r += n); return r } }, function (t, n) { t.exports = "\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff" }, function (t, n, r) { var e, i, o, u = r(47), c = r(175), f = r(143), a = r(140), s = r(3), l = s.process, h = s.setImmediate, v = s.clearImmediate, p = s.MessageChannel, d = s.Dispatch, y = 0, g = {}, b = "onreadystatechange", x = function () { var t = +this; if (g.hasOwnProperty(t)) { var n = g[t]; delete g[t], n() } }, m = function (t) { x.call(t.data) }; h && v || (h = function (t) { for (var n = [], r = 1; arguments.length > r;)n.push(arguments[r++]); return g[++y] = function () { c("function" == typeof t ? t : Function(t), n) }, e(y), y }, v = function (t) { delete g[t] }, "process" == r(45)(l) ? e = function (t) { l.nextTick(u(x, t, 1)) } : d && d.now ? e = function (t) { d.now(u(x, t, 1)) } : p ? (o = (i = new p).port2, i.port1.onmessage = m, e = u(o.postMessage, o, 1)) : s.addEventListener && "function" == typeof postMessage && !s.importScripts ? (e = function (t) { s.postMessage(t + "", "*") }, s.addEventListener("message", m, !1)) : e = b in a("script") ? function (t) { f.appendChild(a("script"))[b] = function () { f.removeChild(this), x.call(t) } } : function (t) { setTimeout(u(x, t, 1), 0) }), t.exports = { set: h, clear: v } }, function (t, n, r) { "use strict"; function e(t, n, r) { var e, i, o, u = new Array(r), c = 8 * r - n - 1, f = (1 << c) - 1, a = f >> 1, s = 23 === n ? W(2, -24) - W(2, -77) : 0, l = 0, h = t < 0 || 0 === t && 1 / t < 0 ? 1 : 0; for ((t = G(t)) != t || t === C ? (i = t != t ? 1 : 0, e = f) : (e = U(V(t) / B), t * (o = W(2, -e)) < 1 && (e--, o *= 2), 2 <= (t += 1 <= e + a ? s / o : s * W(2, 1 - a)) * o && (e++, o /= 2), f <= e + a ? (i = 0, e = f) : 1 <= e + a ? (i = (t * o - 1) * W(2, n), e += a) : (i = t * W(2, a - 1) * W(2, n), e = 0)); 8 <= n; u[l++] = 255 & i, i /= 256, n -= 8); for (e = e << n | i, c += n; 0 < c; u[l++] = 255 & e, e /= 256, c -= 8); return u[--l] |= 128 * h, u } function i(t, n, r) { var e, i = 8 * r - n - 1, o = (1 << i) - 1, u = o >> 1, c = i - 7, f = r - 1, a = t[f--], s = 127 & a; for (a >>= 7; 0 < c; s = 256 * s + t[f], f--, c -= 8); for (e = s & (1 << -c) - 1, s >>= -c, c += n; 0 < c; e = 256 * e + t[f], f--, c -= 8); if (0 === s) s = 1 - u; else { if (s === o) return e ? NaN : a ? -C : C; e += W(2, n), s -= u } return (a ? -1 : 1) * e * W(2, s - n) } function o(t) { return t[3] << 24 | t[2] << 16 | t[1] << 8 | t[0] } function u(t) { return [255 & t] } function c(t) { return [255 & t, t >> 8 & 255] } function f(t) { return [255 & t, t >> 8 & 255, t >> 16 & 255, t >> 24 & 255] } function a(t) { return e(t, 52, 8) } function s(t) { return e(t, 23, 4) } function l(t, n, r) { M(t[I], n, { get: function () { return this[r] } }) } function h(t, n, r, e) { var i = O(+r); if (i + n > t[H]) throw R(L); var o = t[K]._b, u = i + t[J], c = o.slice(u, u + n); return e ? c : c.reverse() } function v(t, n, r, e, i, o) { var u = O(+r); if (u + n > t[H]) throw R(L); for (var c = t[K]._b, f = u + t[J], a = e(+i), s = 0; s < n; s++)c[f + s] = a[o ? s : n - s - 1] } var p = r(3), d = r(10), y = r(68), g = r(132), b = r(26), x = r(76), m = r(4), S = r(70), w = r(49), _ = r(8), O = r(194), E = r(73).f, M = r(11).f, P = r(137), j = r(83), F = "ArrayBuffer", A = "DataView", I = "prototype", L = "Wrong index!", N = p[F], T = p[A], k = p.Math, R = p.RangeError, C = p.Infinity, D = N, G = k.abs, W = k.pow, U = k.floor, V = k.log, B = k.LN2, q = "byteLength", z = "byteOffset", K = d ? "_b" : "buffer", H = d ? "_l" : q, J = d ? "_o" : z; if (g.ABV) { if (!m(function () { N(1) }) || !m(function () { new N(-1) }) || m(function () { return new N, new N(1.5), new N(NaN), N.name != F })) { for (var $, Y = (N = function (t) { return S(this, N), new D(O(t)) })[I] = D[I], X = E(D), Q = 0; X.length > Q;)($ = X[Q++]) in N || b(N, $, D[$]); y || (Y.constructor = N) } var Z = new T(new N(2)), tt = T[I].setInt8; Z.setInt8(0, 2147483648), Z.setInt8(1, 2147483649), !Z.getInt8(0) && Z.getInt8(1) || x(T[I], { setInt8: function (t, n) { tt.call(this, t, n << 24 >> 24) }, setUint8: function (t, n) { tt.call(this, t, n << 24 >> 24) } }, !0) } else N = function (t) { S(this, N, F); var n = O(t); this._b = P.call(new Array(n), 0), this[H] = n }, T = function (t, n, r) { S(this, T, A), S(t, N, A); var e = t[H], i = w(n); if (i < 0 || e < i) throw R("Wrong offset!"); if (e < i + (r = void 0 === r ? e - i : _(r))) throw R("Wrong length!"); this[K] = t, this[J] = i, this[H] = r }, d && (l(N, q, "_l"), l(T, "buffer", "_b"), l(T, q, "_l"), l(T, z, "_o")), x(T[I], { getInt8: function (t) { return h(this, 1, t)[0] << 24 >> 24 }, getUint8: function (t) { return h(this, 1, t)[0] }, getInt16: function (t) { var n = h(this, 2, t, arguments[1]); return (n[1] << 8 | n[0]) << 16 >> 16 }, getUint16: function (t) { var n = h(this, 2, t, arguments[1]); return n[1] << 8 | n[0] }, getInt32: function (t) { return o(h(this, 4, t, arguments[1])) }, getUint32: function (t) { return o(h(this, 4, t, arguments[1])) >>> 0 }, getFloat32: function (t) { return i(h(this, 4, t, arguments[1]), 23, 4) }, getFloat64: function (t) { return i(h(this, 8, t, arguments[1]), 52, 8) }, setInt8: function (t, n) { v(this, 1, t, u, n) }, setUint8: function (t, n) { v(this, 1, t, u, n) }, setInt16: function (t, n) { v(this, 2, t, c, n, arguments[2]) }, setUint16: function (t, n) { v(this, 2, t, c, n, arguments[2]) }, setInt32: function (t, n) { v(this, 4, t, f, n, arguments[2]) }, setUint32: function (t, n) { v(this, 4, t, f, n, arguments[2]) }, setFloat32: function (t, n) { v(this, 4, t, s, n, arguments[2]) }, setFloat64: function (t, n) { v(this, 8, t, a, n, arguments[2]) } }); j(N, F), j(T, A), b(T[I], g.VIEW, !0), n[F] = N, n[A] = T }, function (t, n, r) { var e = r(3), i = r(46), o = r(68), u = r(195), c = r(11).f; t.exports = function (t) { var n = i.Symbol || (i.Symbol = o ? {} : e.Symbol || {}); "_" == t.charAt(0) || t in n || c(n, t, { value: u.f(t) }) } }, function (t, n, r) { var e = r(81), i = r(7)("iterator"), o = r(82); t.exports = r(46).getIteratorMethod = function (t) { if (null != t) return t[i] || t["@@iterator"] || o[e(t)] } }, function (t, n, r) { "use strict"; var e = r(67), i = r(178), o = r(82), u = r(33); t.exports = r(147)(Array, "Array", function (t, n) { this._t = u(t), this._i = 0, this._k = n }, function () { var t = this._t, n = this._k, r = this._i++; return !t || r >= t.length ? (this._t = void 0, i(1)) : i(0, "keys" == n ? r : "values" == n ? t[r] : [r, t[r]]) }, "values"), o.Arguments = o.Array, e("keys"), e("values"), e("entries") }, function (t, n) { t.exports = function (t, n) { t.classList ? t.classList.add(n) : t.className += " " + n } }, function (t, n) { t.exports = function (t, n) { if (t.classList) t.classList.remove(n); else { var r = new RegExp("(^|\\b)" + n.split(" ").join("|") + "(\\b|$)", "gi"); t.className = t.className.replace(r, " ") } } }, function (t, n, r) { var e = r(45); t.exports = function (t, n) { if ("number" != typeof t && "Number" != e(t)) throw TypeError(n); return +t } }, function (t, n, r) { "use strict"; var a = r(17), s = r(78), l = r(8); t.exports = [].copyWithin || function (t, n) { var r = a(this), e = l(r.length), i = s(t, e), o = s(n, e), u = 2 < arguments.length ? arguments[2] : void 0, c = Math.min((void 0 === u ? e : s(u, e)) - o, e - i), f = 1; for (o < i && i < o + c && (f = -1, o += c - 1, i += c - 1); 0 < c--;)o in r ? r[i] = r[o] : delete r[i], i += f, o += f; return r } }, function (t, n, r) { var e = r(71); t.exports = function (t, n) { var r = []; return e(t, !1, r.push, r, n), r } }, function (t, n, r) { var s = r(21), l = r(17), h = r(116), v = r(8); t.exports = function (t, n, r, e, i) { s(n); var o = l(t), u = h(o), c = v(o.length), f = i ? c - 1 : 0, a = i ? -1 : 1; if (r < 2) for (; ;) { if (f in u) { e = u[f], f += a; break } if (f += a, i ? f < 0 : c <= f) throw TypeError("Reduce of empty array with no initial value") } for (; i ? 0 <= f : f < c; f += a)f in u && (e = n(e, u[f], f, o)); return e } }, function (t, n, r) { "use strict"; var o = r(21), u = r(5), c = r(175), f = [].slice, a = {}; t.exports = Function.bind || function (n) { var r = o(this), e = f.call(arguments, 1), i = function () { var t = e.concat(f.call(arguments)); return this instanceof i ? function (t, n, r) { if (!(n in a)) { for (var e = [], i = 0; i < n; i++)e[i] = "a[" + i + "]"; a[n] = Function("F,a", "return new F(" + e.join(",") + ")") } return a[n](t, r) }(r, t.length, t) : c(r, t, n) }; return u(r.prototype) && (i.prototype = r.prototype), i } }, function (t, n, r) { "use strict"; var u = r(11).f, c = r(72), f = r(76), a = r(47), s = r(70), l = r(71), e = r(147), i = r(178), o = r(77), h = r(10), v = r(69).fastKey, p = r(80), d = h ? "_s" : "size", y = function (t, n) { var r, e = v(n); if ("F" !== e) return t._i[e]; for (r = t._f; r; r = r.n)if (r.k == n) return r }; t.exports = { getConstructor: function (t, o, r, e) { var i = t(function (t, n) { s(t, i, o, "_i"), t._t = o, t._i = c(null), t._f = void 0, t._l = void 0, t[d] = 0, null != n && l(n, r, t[e], t) }); return f(i.prototype, { clear: function () { for (var t = p(this, o), n = t._i, r = t._f; r; r = r.n)r.r = !0, r.p && (r.p = r.p.n = void 0), delete n[r.i]; t._f = t._l = void 0, t[d] = 0 }, delete: function (t) { var n = p(this, o), r = y(n, t); if (r) { var e = r.n, i = r.p; delete n._i[r.i], r.r = !0, i && (i.n = e), e && (e.p = i), n._f == r && (n._f = e), n._l == r && (n._l = i), n[d]-- } return !!r }, forEach: function (t) { p(this, o); for (var n, r = a(t, 1 < arguments.length ? arguments[1] : void 0, 3); n = n ? n.n : this._f;)for (r(n.v, n.k, this); n && n.r;)n = n.p }, has: function (t) { return !!y(p(this, o), t) } }), h && u(i.prototype, "size", { get: function () { return p(this, o)[d] } }), i }, def: function (t, n, r) { var e, i, o = y(t, n); return o ? o.v = r : (t._l = o = { i: i = v(n, !0), k: n, v: r, p: e = t._l, n: void 0, r: !1 }, t._f || (t._f = o), e && (e.n = o), t[d]++, "F" !== i && (t._i[i] = o)), t }, getEntry: y, setStrong: function (t, r, n) { e(t, r, function (t, n) { this._t = p(t, r), this._k = n, this._l = void 0 }, function () { for (var t = this, n = t._k, r = t._l; r && r.r;)r = r.p; return t._t && (t._l = r = r ? r.n : t._t._f) ? i(0, "keys" == n ? r.k : "values" == n ? r.v : [r.k, r.v]) : (t._t = void 0, i(1)) }, n ? "entries" : "values", !n, !0), o(r) } } }, function (t, n, r) { var e = r(81), i = r(167); t.exports = function (t) { return function () { if (e(this) != t) throw TypeError(t + "#toJSON isn't generic"); return i(this) } } }, function (t, n, r) { "use strict"; var u = r(76), c = r(69).getWeak, i = r(2), f = r(5), a = r(70), s = r(71), e = r(50), l = r(30), h = r(80), o = e(5), v = e(6), p = 0, d = function (t) { return t._l || (t._l = new y) }, y = function () { this.a = [] }, g = function (t, n) { return o(t.a, function (t) { return t[0] === n }) }; y.prototype = { get: function (t) { var n = g(this, t); if (n) return n[1] }, has: function (t) { return !!g(this, t) }, set: function (t, n) { var r = g(this, t); r ? r[1] = n : this.a.push([t, n]) }, delete: function (n) { var t = v(this.a, function (t) { return t[0] === n }); return ~t && this.a.splice(t, 1), !!~t } }, t.exports = { getConstructor: function (t, r, e, i) { var o = t(function (t, n) { a(t, o, r, "_i"), t._t = r, t._i = p++, t._l = void 0, null != n && s(n, e, t[i], t) }); return u(o.prototype, { delete: function (t) { if (!f(t)) return !1; var n = c(t); return !0 === n ? d(h(this, r)).delete(t) : n && l(n, this._i) && delete n[this._i] }, has: function (t) { if (!f(t)) return !1; var n = c(t); return !0 === n ? d(h(this, r)).has(t) : n && l(n, this._i) } }), o }, def: function (t, n, r) { var e = c(i(n), !0); return !0 === e ? d(t).set(n, r) : e[t._i] = r, t }, ufstore: d } }, function (t, n, r) { "use strict"; var p = r(123), d = r(5), y = r(8), g = r(47), b = r(7)("isConcatSpreadable"); t.exports = function t(n, r, e, i, o, u, c, f) { for (var a, s, l = o, h = 0, v = !!c && g(c, f, 3); h < i;) { if (h in e) { if (a = v ? v(e[h], h, r) : e[h], s = !1, d(a) && (s = void 0 !== (s = a[b]) ? !!s : p(a)), s && 0 < u) l = t(n, r, a, y(a.length), l, u - 1) - 1; else { if (9007199254740991 <= l) throw TypeError(); n[l] = a } l++ } h++ } return l } }, function (t, n, r) { t.exports = !r(10) && !r(4)(function () { return 7 != Object.defineProperty(r(140)("div"), "a", { get: function () { return 7 } }).a }) }, function (t, n) { t.exports = function (t, n, r) { var e = void 0 === r; switch (n.length) { case 0: return e ? t() : t.call(r); case 1: return e ? t(n[0]) : t.call(r, n[0]); case 2: return e ? t(n[0], n[1]) : t.call(r, n[0], n[1]); case 3: return e ? t(n[0], n[1], n[2]) : t.call(r, n[0], n[1], n[2]); case 4: return e ? t(n[0], n[1], n[2], n[3]) : t.call(r, n[0], n[1], n[2], n[3]) }return t.apply(r, n) } }, function (t, n, r) { var e = r(5), i = Math.floor; t.exports = function (t) { return !e(t) && isFinite(t) && i(t) === t } }, function (t, n, r) { var o = r(2); t.exports = function (t, n, r, e) { try { return e ? n(o(r)[0], r[1]) : n(r) } catch (n) { var i = t.return; throw void 0 !== i && o(i.call(t)), n } } }, function (t, n) { t.exports = function (t, n) { return { value: n, done: !!t } } }, function (t, n, r) { var o = r(149), e = Math.pow, u = e(2, -52), c = e(2, -23), f = e(2, 127) * (2 - c), a = e(2, -126); t.exports = Math.fround || function (t) { var n, r, e = Math.abs(t), i = o(t); return e < a ? i * (e / a / c + 1 / u - 1 / u) * a * c : f < (r = (n = (1 + c / u) * e) - (n - e)) || r != r ? i * (1 / 0) : i * r } }, function (t, n) { t.exports = Math.log1p || function (t) { return -1e-8 < (t = +t) && t < 1e-8 ? t - t * t / 2 : Math.log(1 + t) } }, function (t, n) { t.exports = Math.scale || function (t, n, r, e, i) { return 0 === arguments.length || t != t || n != n || r != r || e != e || i != i ? NaN : t === 1 / 0 || t === -1 / 0 ? t : (t - n) * (i - e) / (r - n) + e } }, function (t, n, r) { "use strict"; var h = r(10), v = r(74), p = r(127), d = r(117), y = r(17), g = r(116), i = Object.assign; t.exports = !i || r(4)(function () { var t = {}, n = {}, r = Symbol(), e = "abcdefghijklmnopqrst"; return t[r] = 7, e.split("").forEach(function (t) { n[t] = t }), 7 != i({}, t)[r] || Object.keys(i({}, n)).join("") != e }) ? function (t, n) { for (var r = y(t), e = arguments.length, i = 1, o = p.f, u = d.f; i < e;)for (var c, f = g(arguments[i++]), a = o ? v(f).concat(o(f)) : v(f), s = a.length, l = 0; l < s;)c = a[l++], h && !u.call(f, c) || (r[c] = f[c]); return r } : i }, function (t, n, r) { var u = r(11), c = r(2), f = r(74); t.exports = r(10) ? Object.defineProperties : function (t, n) { c(t); for (var r, e = f(n), i = e.length, o = 0; o < i;)u.f(t, r = e[o++], n[r]); return t } }, function (t, n, r) { var e = r(33), i = r(73).f, o = {}.toString, u = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : []; t.exports.f = function (t) { return u && "[object Window]" == o.call(t) ? function (t) { try { return i(t) } catch (t) { return u.slice() } }(t) : i(e(t)) } }, function (t, n, r) { var u = r(30), c = r(33), f = r(120)(!1), a = r(154)("IE_PROTO"); t.exports = function (t, n) { var r, e = c(t), i = 0, o = []; for (r in e) r != a && u(e, r) && o.push(r); for (; n.length > i;)u(e, r = n[i++]) && (~f(o, r) || o.push(r)); return o } }, function (t, n, r) { var f = r(10), a = r(74), s = r(33), l = r(117).f; t.exports = function (c) { return function (t) { for (var n, r = s(t), e = a(r), i = e.length, o = 0, u = []; o < i;)n = e[o++], f && !l.call(r, n) || u.push(c ? [n, r[n]] : r[n]); return u } } }, function (t, n, r) { var e = r(73), i = r(127), o = r(2), u = r(3).Reflect; t.exports = u && u.ownKeys || function (t) { var n = e.f(o(t)), r = i.f; return r ? n.concat(r(t)) : n } }, function (t, n, r) { var e = r(3).parseFloat, i = r(84).trim; t.exports = 1 / e(r(157) + "-0") != -1 / 0 ? function (t) { var n = i(String(t), 3), r = e(n); return 0 === r && "-" == n.charAt(0) ? -0 : r } : e }, function (t, n, r) { var e = r(3).parseInt, i = r(84).trim, o = r(157), u = /^[-+]?0[xX]/; t.exports = 8 !== e(o + "08") || 22 !== e(o + "0x16") ? function (t, n) { var r = i(String(t), 3); return e(r, n >>> 0 || (u.test(r) ? 16 : 10)) } : e }, function (t, n) { t.exports = function (t) { try { return { e: !1, v: t() } } catch (t) { return { e: !0, v: t } } } }, function (t, n, r) { var e = r(2), i = r(5), o = r(151); t.exports = function (t, n) { if (e(t), i(n) && n.constructor === t) return n; var r = o.f(t); return (0, r.resolve)(n), r.promise } }, function (t, n) { t.exports = Object.is || function (t, n) { return t === n ? 0 !== t || 1 / t == 1 / n : t != t && n != n } }, function (t, n, r) { var s = r(8), l = r(156), h = r(51); t.exports = function (t, n, r, e) { var i = String(h(t)), o = i.length, u = void 0 === r ? " " : String(r), c = s(n); if (c <= o || "" == u) return i; var f = c - o, a = l.call(u, Math.ceil(f / u.length)); return a.length > f && (a = a.slice(0, f)), e ? a + i : i + a } }, function (t, n, r) { var e = r(49), i = r(8); t.exports = function (t) { if (void 0 === t) return 0; var n = e(t), r = i(n); if (n !== r) throw RangeError("Wrong length!"); return r } }, function (t, n, r) { n.f = r(7) }, function (t, n, r) { "use strict"; var e = r(170), i = r(80); t.exports = r(121)("Map", function (t) { return function () { return t(this, 0 < arguments.length ? arguments[0] : void 0) } }, { get: function (t) { var n = e.getEntry(i(this, "Map"), t); return n && n.v }, set: function (t, n) { return e.def(i(this, "Map"), 0 === t ? 0 : t, n) } }, e, !0) }, function (t, n, r) { "use strict"; var e = r(152); r(1)({ target: "RegExp", proto: !0, forced: e !== /./.exec }, { exec: e }) }, function (t, n, r) { r(10) && "g" != /./g.flags && r(11).f(RegExp.prototype, "flags", { configurable: !0, get: r(115) }) }, function (t, n, r) { "use strict"; var e = r(170), i = r(80); t.exports = r(121)("Set", function (t) { return function () { return t(this, 0 < arguments.length ? arguments[0] : void 0) } }, { add: function (t) { return e.def(i(this, "Set"), t = 0 === t ? 0 : t, t) } }, e) }, function (t, n, r) { "use strict"; var o, e = r(3), i = r(50)(0), u = r(27), c = r(69), f = r(182), a = r(172), s = r(5), l = r(80), h = r(80), v = !e.ActiveXObject && "ActiveXObject" in e, p = "WeakMap", d = c.getWeak, y = Object.isExtensible, g = a.ufstore, b = function (t) { return function () { return t(this, 0 < arguments.length ? arguments[0] : void 0) } }, x = { get: function (t) { if (s(t)) { var n = d(t); return !0 === n ? g(l(this, p)).get(t) : n ? n[this._i] : void 0 } }, set: function (t, n) { return a.def(l(this, p), t, n) } }, m = t.exports = r(121)(p, b, x, a, !0, !0); h && v && (f((o = a.getConstructor(b, p)).prototype, x), c.NEED = !0, i(["delete", "has", "get", "set"], function (e) { var t = m.prototype, i = t[e]; u(t, e, function (t, n) { if (!s(t) || y(t)) return i.call(this, t, n); this._f || (this._f = new o); var r = this._f[e](t, n); return "set" == e ? this : r }) })) }, , , , function (t, n) { "use strict"; t.exports = { init: function () { var t = document.querySelector("#page-nav"); t && !document.querySelector("#page-nav .extend.prev") && (t.innerHTML = '<a class="extend prev disabled" rel="prev">&laquo; Prev</a>' + t.innerHTML), t && !document.querySelector("#page-nav .extend.next") && (t.innerHTML = t.innerHTML + '<a class="extend next disabled" rel="next">Next &raquo;</a>'), yiliaConfig && yiliaConfig.open_in_new && document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function (t) { var n = t.getAttribute("target"); n && "" !== n || t.setAttribute("target", "_blank") }), yiliaConfig && yiliaConfig.toc_hide_index && document.querySelectorAll(".toc-number").forEach(function (t) { t.style.display = "none" }) } } }, function (t, n, r) { "use strict"; function e(t) { return t && t.__esModule ? t : { default: t } } function i(t, n, r, e, i) { var o = function (t) { for (var n = t.offsetLeft, r = t.offsetParent; null !== r;)n += r.offsetLeft, r = r.offsetParent; return n }(t), u = function (t) { for (var n = t.offsetTop, r = t.offsetParent; null !== r;)n += r.offsetTop, r = r.offsetParent; return n }(t) - n; if (u - r <= i) { var c = t.$newDom; c || (c = t.cloneNode(!0), (0, a.default)(t, c), (t.$newDom = c).style.position = "fixed", c.style.top = (r || u) + "px", c.style.left = o + "px", c.style.zIndex = e || 2, c.style.width = "100%", c.style.color = "#fff"), c.style.visibility = "visible", t.style.visibility = "hidden" } else { t.style.visibility = "visible"; var f = t.$newDom; f && (f.style.visibility = "hidden") } } function o() { var t = document.querySelector(".js-overlay"), n = document.querySelector(".js-header-menu"); i(t, document.body.scrollTop, -63, 2, 0), i(n, document.body.scrollTop, 1, 3, 0) } var f = e(r(163)), a = e((e(r(164)), r(414))), u = e(r(134)), c = e(r(204)), s = r(135); u.default.versions.mobile && window.screen.width < 800 && (function () { for (var t = document.querySelectorAll(".js-header-menu li a"), n = window.location.pathname, r = 0, e = t.length; r < e; r++) { var i = t[r]; o = n, u = i.getAttribute("href"), c = /\/|index.html/g, o.replace(c, "") === u.replace(c, "") && (0, f.default)(i, "active") } var o, u, c }(), document.querySelector("#container").addEventListener("scroll", function (t) { o() }), window.addEventListener("scroll", function (t) { o() }), o()), (0, s.addLoadEvent)(function () { c.default.init() }), t.exports = {} }, , , function (t, n, r) { (function (t) { "use strict"; function n(t, n, r) { t[n] || Object.defineProperty(t, n, { writable: !0, configurable: !0, value: r }) } if (r(413), r(209), r(211), t._babelPolyfill) throw new Error("only one instance of babel-polyfill is allowed"); t._babelPolyfill = !0; n(String.prototype, "padLeft", "".padStart), n(String.prototype, "padRight", "".padEnd), "pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function (t) { [][t] && n(Array, t, Function.call.bind([][t])) }) }).call(n, function () { return this }()) }, function (L, t) { (function (t) { !function (t) { "use strict"; function o(t, n, r, e) { var o, u, c, f, i = n && n.prototype instanceof h ? n : h, a = Object.create(i.prototype), s = new p(e || []); return a._invoke = (o = t, u = r, c = s, f = _, function (t, n) { if (f === E) throw new Error("Generator is already running"); if (f === M) { if ("throw" === t) throw n; return d() } for (c.method = t, c.arg = n; ;) { var r = c.delegate; if (r) { var e = v(r, c); if (e) { if (e === P) continue; return e } } if ("next" === c.method) c.sent = c._sent = c.arg; else if ("throw" === c.method) { if (f === _) throw f = M, c.arg; c.dispatchException(c.arg) } else "return" === c.method && c.abrupt("return", c.arg); f = E; var i = l(o, u, c); if ("normal" === i.type) { if (f = c.done ? M : O, i.arg === P) continue; return { value: i.arg, done: c.done } } "throw" === i.type && (f = M, c.method = "throw", c.arg = i.arg) } }), a } function l(t, n, r) { try { return { type: "normal", arg: t.call(n, r) } } catch (t) { return { type: "throw", arg: t } } } function h() { } function r() { } function n() { } function e(t) { ["next", "throw", "return"].forEach(function (n) { t[n] = function (t) { return this._invoke(n, t) } }) } function u(c) { function f(t, n, r, e) { var i = l(c[t], c, n); if ("throw" !== i.type) { var o = i.arg, u = o.value; return u && "object" == typeof u && y.call(u, "__await") ? Promise.resolve(u.__await).then(function (t) { f("next", t, r, e) }, function (t) { f("throw", t, r, e) }) : Promise.resolve(u).then(function (t) { o.value = t, r(o) }, e) } e(i.arg) } var n; "object" == typeof t.process && t.process.domain && (f = t.process.domain.bind(f)), this._invoke = function (r, e) { function t() { return new Promise(function (t, n) { f(r, e, t, n) }) } return n = n ? n.then(t, t) : t() } } function v(t, n) { var r = t.iterator[n.method]; if (r === a) { if (n.delegate = null, "throw" === n.method) { if (t.iterator.return && (n.method = "return", n.arg = a, v(t, n), "throw" === n.method)) return P; n.method = "throw", n.arg = new TypeError("The iterator does not provide a 'throw' method") } return P } var e = l(r, t.iterator, n.arg); if ("throw" === e.type) return n.method = "throw", n.arg = e.arg, n.delegate = null, P; var i = e.arg; return i ? i.done ? (n[t.resultName] = i.value, n.next = t.nextLoc, "return" !== n.method && (n.method = "next", n.arg = a), n.delegate = null, P) : i : (n.method = "throw", n.arg = new TypeError("iterator result is not an object"), n.delegate = null, P) } function i(t) { var n = { tryLoc: t[0] }; 1 in t && (n.catchLoc = t[1]), 2 in t && (n.finallyLoc = t[2], n.afterLoc = t[3]), this.tryEntries.push(n) } function c(t) { var n = t.completion || {}; n.type = "normal", delete n.arg, t.completion = n } function p(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(i, this), this.reset(!0) } function f(n) { if (n) { var t = n[b]; if (t) return t.call(n); if ("function" == typeof n.next) return n; if (!isNaN(n.length)) { var r = -1, e = function t() { for (; ++r < n.length;)if (y.call(n, r)) return t.value = n[r], t.done = !1, t; return t.value = a, t.done = !0, t }; return e.next = e } } return { next: d } } function d() { return { value: a, done: !0 } } var a, s = Object.prototype, y = s.hasOwnProperty, g = "function" == typeof Symbol ? Symbol : {}, b = g.iterator || "@@iterator", x = g.asyncIterator || "@@asyncIterator", m = g.toStringTag || "@@toStringTag", S = "object" == typeof L, w = t.regeneratorRuntime; if (w) S && (L.exports = w); else { (w = t.regeneratorRuntime = S ? L.exports : {}).wrap = o; var _ = "suspendedStart", O = "suspendedYield", E = "executing", M = "completed", P = {}, j = {}; j[b] = function () { return this }; var F = Object.getPrototypeOf, A = F && F(F(f([]))); A && A !== s && y.call(A, b) && (j = A); var I = n.prototype = h.prototype = Object.create(j); r.prototype = I.constructor = n, n.constructor = r, n[m] = r.displayName = "GeneratorFunction", w.isGeneratorFunction = function (t) { var n = "function" == typeof t && t.constructor; return !!n && (n === r || "GeneratorFunction" === (n.displayName || n.name)) }, w.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, n) : (t.__proto__ = n, m in t || (t[m] = "GeneratorFunction")), t.prototype = Object.create(I), t }, w.awrap = function (t) { return { __await: t } }, e(u.prototype), u.prototype[x] = function () { return this }, w.AsyncIterator = u, w.async = function (t, n, r, e) { var i = new u(o(t, n, r, e)); return w.isGeneratorFunction(n) ? i : i.next().then(function (t) { return t.done ? t.value : i.next() }) }, e(I), I[m] = "Generator", I[b] = function () { return this }, I.toString = function () { return "[object Generator]" }, w.keys = function (r) { var e = []; for (var t in r) e.push(t); return e.reverse(), function t() { for (; e.length;) { var n = e.pop(); if (n in r) return t.value = n, t.done = !1, t } return t.done = !0, t } }, w.values = f, p.prototype = { constructor: p, reset: function (t) { if (this.prev = 0, this.next = 0, this.sent = this._sent = a, this.done = !1, this.delegate = null, this.method = "next", this.arg = a, this.tryEntries.forEach(c), !t) for (var n in this) "t" === n.charAt(0) && y.call(this, n) && !isNaN(+n.slice(1)) && (this[n] = a) }, stop: function () { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval }, dispatchException: function (r) { function t(t, n) { return o.type = "throw", o.arg = r, e.next = t, n && (e.method = "next", e.arg = a), !!n } if (this.done) throw r; for (var e = this, n = this.tryEntries.length - 1; 0 <= n; --n) { var i = this.tryEntries[n], o = i.completion; if ("root" === i.tryLoc) return t("end"); if (i.tryLoc <= this.prev) { var u = y.call(i, "catchLoc"), c = y.call(i, "finallyLoc"); if (u && c) { if (this.prev < i.catchLoc) return t(i.catchLoc, !0); if (this.prev < i.finallyLoc) return t(i.finallyLoc) } else if (u) { if (this.prev < i.catchLoc) return t(i.catchLoc, !0) } else { if (!c) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return t(i.finallyLoc) } } } }, abrupt: function (t, n) { for (var r = this.tryEntries.length - 1; 0 <= r; --r) { var e = this.tryEntries[r]; if (e.tryLoc <= this.prev && y.call(e, "finallyLoc") && this.prev < e.finallyLoc) { var i = e; break } } i && ("break" === t || "continue" === t) && i.tryLoc <= n && n <= i.finallyLoc && (i = null); var o = i ? i.completion : {}; return o.type = t, o.arg = n, i ? (this.method = "next", this.next = i.finallyLoc, P) : this.complete(o) }, complete: function (t, n) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && n && (this.next = n), P }, finish: function (t) { for (var n = this.tryEntries.length - 1; 0 <= n; --n) { var r = this.tryEntries[n]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), c(r), P } }, catch: function (t) { for (var n = this.tryEntries.length - 1; 0 <= n; --n) { var r = this.tryEntries[n]; if (r.tryLoc === t) { var e = r.completion; if ("throw" === e.type) { var i = e.arg; c(r) } return i } } throw new Error("illegal catch attempt") }, delegateYield: function (t, n, r) { return this.delegate = { iterator: f(t), resultName: n, nextLoc: r }, "next" === this.method && (this.arg = a), P } } } }("object" == typeof t ? t : "object" == typeof window ? window : "object" == typeof self ? self : this) }).call(t, function () { return this }()) }, , function (t, n, r) { r(221), t.exports = r(46).RegExp.escape }, , , , function (t, n, r) { var e = r(5), i = r(123), o = r(7)("species"); t.exports = function (t) { var n; return i(t) && ("function" != typeof (n = t.constructor) || n !== Array && !i(n.prototype) || (n = void 0), e(n) && (null === (n = n[o]) && (n = void 0))), void 0 === n ? Array : n } }, function (t, n, r) { "use strict"; var e = r(4), i = Date.prototype.getTime, o = Date.prototype.toISOString, u = function (t) { return 9 < t ? t : "0" + t }; t.exports = e(function () { return "0385-07-25T07:06:39.999Z" != o.call(new Date(-5e13 - 1)) }) || !e(function () { o.call(new Date(NaN)) }) ? function () { if (!isFinite(i.call(this))) throw RangeError("Invalid time value"); var t = this, n = t.getUTCFullYear(), r = t.getUTCMilliseconds(), e = n < 0 ? "-" : 9999 < n ? "+" : ""; return e + ("00000" + Math.abs(n)).slice(e ? -6 : -4) + "-" + u(t.getUTCMonth() + 1) + "-" + u(t.getUTCDate()) + "T" + u(t.getUTCHours()) + ":" + u(t.getUTCMinutes()) + ":" + u(t.getUTCSeconds()) + "." + (99 < r ? r : "0" + u(r)) + "Z" } : o }, function (t, n, r) { "use strict"; var e = r(2), i = r(53); t.exports = function (t) { if ("string" !== t && "number" !== t && "default" !== t) throw TypeError("Incorrect hint"); return i(e(this), "number" != t) } }, function (t, n, r) { var c = r(74), f = r(127), a = r(117); t.exports = function (t) { var n = c(t), r = f.f; if (r) for (var e, i = r(t), o = a.f, u = 0; i.length > u;)o.call(t, e = i[u++]) && n.push(e); return n } }, function (t, n, r) { t.exports = r(118)("native-function-to-string", Function.toString) }, function (t, n) { t.exports = function (n, r) { var e = r === Object(r) ? function (t) { return r[t] } : r; return function (t) { return String(t).replace(n, e) } } }, function (t, n, r) { var e = r(1), i = r(220)(/[\\^$*+?.()|[\]{}]/g, "\\$&"); e(e.S, "RegExp", { escape: function (t) { return i(t) } }) }, function (t, n, r) { var e = r(1); e(e.P, "Array", { copyWithin: r(166) }), r(67)("copyWithin") }, function (t, n, r) { "use strict"; var e = r(1), i = r(50)(4); e(e.P + e.F * !r(48)([].every, !0), "Array", { every: function (t) { return i(this, t, arguments[1]) } }) }, function (t, n, r) { var e = r(1); e(e.P, "Array", { fill: r(137) }), r(67)("fill") }, function (t, n, r) { "use strict"; var e = r(1), i = r(50)(2); e(e.P + e.F * !r(48)([].filter, !0), "Array", { filter: function (t) { return i(this, t, arguments[1]) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(50)(6), o = "findIndex", u = !0; o in [] && Array(1)[o](function () { u = !1 }), e(e.P + e.F * u, "Array", { findIndex: function (t) { return i(this, t, 1 < arguments.length ? arguments[1] : void 0) } }), r(67)(o) }, function (t, n, r) { "use strict"; var e = r(1), i = r(50)(5), o = "find", u = !0; o in [] && Array(1)[o](function () { u = !1 }), e(e.P + e.F * u, "Array", { find: function (t) { return i(this, t, 1 < arguments.length ? arguments[1] : void 0) } }), r(67)(o) }, function (t, n, r) { "use strict"; var e = r(1), i = r(50)(0), o = r(48)([].forEach, !0); e(e.P + e.F * !o, "Array", { forEach: function (t) { return i(this, t, arguments[1]) } }) }, function (t, n, r) { "use strict"; var h = r(47), e = r(1), v = r(17), p = r(177), d = r(145), y = r(8), g = r(139), b = r(161); e(e.S + e.F * !r(125)(function (t) { Array.from(t) }), "Array", { from: function (t) { var n, r, e, i, o = v(t), u = "function" == typeof this ? this : Array, c = arguments.length, f = 1 < c ? arguments[1] : void 0, a = void 0 !== f, s = 0, l = b(o); if (a && (f = h(f, 2 < c ? arguments[2] : void 0, 2)), null == l || u == Array && d(l)) for (r = new u(n = y(o.length)); s < n; s++)g(r, s, a ? f(o[s], s) : o[s]); else for (i = l.call(o), r = new u; !(e = i.next()).done; s++)g(r, s, a ? p(i, f, [e.value, s], !0) : e.value); return r.length = s, r } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(120)(!1), o = [].indexOf, u = !!o && 1 / [1].indexOf(1, -0) < 0; e(e.P + e.F * (u || !r(48)(o)), "Array", { indexOf: function (t) { return u ? o.apply(this, arguments) || 0 : i(this, t, arguments[1]) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Array", { isArray: r(123) }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(33), o = [].join; e(e.P + e.F * (r(116) != Object || !r(48)(o)), "Array", { join: function (t) { return o.call(i(this), void 0 === t ? "," : t) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(33), o = r(49), u = r(8), c = [].lastIndexOf, f = !!c && 1 / [1].lastIndexOf(1, -0) < 0; e(e.P + e.F * (f || !r(48)(c)), "Array", { lastIndexOf: function (t) { if (f) return c.apply(this, arguments) || 0; var n = i(this), r = u(n.length), e = r - 1; for (1 < arguments.length && (e = Math.min(e, o(arguments[1]))), e < 0 && (e = r + e); 0 <= e; e--)if (e in n && n[e] === t) return e || 0; return -1 } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(50)(1); e(e.P + e.F * !r(48)([].map, !0), "Array", { map: function (t) { return i(this, t, arguments[1]) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(139); e(e.S + e.F * r(4)(function () { function t() { } return !(Array.of.call(t) instanceof t) }), "Array", { of: function () { for (var t = 0, n = arguments.length, r = new ("function" == typeof this ? this : Array)(n); t < n;)i(r, t, arguments[t++]); return r.length = n, r } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(168); e(e.P + e.F * !r(48)([].reduceRight, !0), "Array", { reduceRight: function (t) { return i(this, t, arguments.length, arguments[1], !0) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(168); e(e.P + e.F * !r(48)([].reduce, !0), "Array", { reduce: function (t) { return i(this, t, arguments.length, arguments[1], !1) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(143), a = r(45), s = r(78), l = r(8), h = [].slice; e(e.P + e.F * r(4)(function () { i && h.call(i) }), "Array", { slice: function (t, n) { var r = l(this.length), e = a(this); if (n = void 0 === n ? r : n, "Array" == e) return h.call(this, t, n); for (var i = s(t, r), o = s(n, r), u = l(o - i), c = new Array(u), f = 0; f < u; f++)c[f] = "String" == e ? this.charAt(i + f) : this[i + f]; return c } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(50)(3); e(e.P + e.F * !r(48)([].some, !0), "Array", { some: function (t) { return i(this, t, arguments[1]) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(21), o = r(17), u = r(4), c = [].sort, f = [1, 2, 3]; e(e.P + e.F * (u(function () { f.sort(void 0) }) || !u(function () { f.sort(null) }) || !r(48)(c)), "Array", { sort: function (t) { return void 0 === t ? c.call(o(this)) : c.call(o(this), i(t)) } }) }, function (t, n, r) { r(77)("Array") }, function (t, n, r) { var e = r(1); e(e.S, "Date", { now: function () { return (new Date).getTime() } }) }, function (t, n, r) { var e = r(1), i = r(216); e(e.P + e.F * (Date.prototype.toISOString !== i), "Date", { toISOString: i }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(17), o = r(53); e(e.P + e.F * r(4)(function () { return null !== new Date(NaN).toJSON() || 1 !== Date.prototype.toJSON.call({ toISOString: function () { return 1 } }) }), "Date", { toJSON: function (t) { var n = i(this), r = o(n); return "number" != typeof r || isFinite(r) ? n.toISOString() : null } }) }, function (t, n, r) { var e = r(7)("toPrimitive"), i = Date.prototype; e in i || r(26)(i, e, r(217)) }, function (t, n, r) { var e = Date.prototype, i = "Invalid Date", o = "toString", u = e[o], c = e.getTime; new Date(NaN) + "" != i && r(27)(e, o, function () { var t = c.call(this); return t == t ? u.call(this) : i }) }, function (t, n, r) { var e = r(1); e(e.P, "Function", { bind: r(169) }) }, function (t, n, r) { "use strict"; var e = r(5), i = r(32), o = r(7)("hasInstance"), u = Function.prototype; o in u || r(11).f(u, o, { value: function (t) { if ("function" != typeof this || !e(t)) return !1; if (!e(this.prototype)) return t instanceof this; for (; t = i(t);)if (this.prototype === t) return !0; return !1 } }) }, function (t, n, r) { var e = r(11).f, i = Function.prototype, o = /^\s*function ([^ (]*)/; "name" in i || r(10) && e(i, "name", { configurable: !0, get: function () { try { return ("" + this).match(o)[1] } catch (t) { return "" } } }) }, function (t, n, r) { var e = r(1), i = r(180), o = Math.sqrt, u = Math.acosh; e(e.S + e.F * !(u && 710 == Math.floor(u(Number.MAX_VALUE)) && u(1 / 0) == 1 / 0), "Math", { acosh: function (t) { return (t = +t) < 1 ? NaN : 94906265.62425156 < t ? Math.log(t) + Math.LN2 : i(t - 1 + o(t - 1) * o(t + 1)) } }) }, function (t, n, r) { var e = r(1), i = Math.asinh; e(e.S + e.F * !(i && 0 < 1 / i(0)), "Math", { asinh: function t(n) { return isFinite(n = +n) && 0 != n ? n < 0 ? -t(-n) : Math.log(n + Math.sqrt(n * n + 1)) : n } }) }, function (t, n, r) { var e = r(1), i = Math.atanh; e(e.S + e.F * !(i && 1 / i(-0) < 0), "Math", { atanh: function (t) { return 0 == (t = +t) ? t : Math.log((1 + t) / (1 - t)) / 2 } }) }, function (t, n, r) { var e = r(1), i = r(149); e(e.S, "Math", { cbrt: function (t) { return i(t = +t) * Math.pow(Math.abs(t), 1 / 3) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { clz32: function (t) { return (t >>>= 0) ? 31 - Math.floor(Math.log(t + .5) * Math.LOG2E) : 32 } }) }, function (t, n, r) { var e = r(1), i = Math.exp; e(e.S, "Math", { cosh: function (t) { return (i(t = +t) + i(-t)) / 2 } }) }, function (t, n, r) { var e = r(1), i = r(148); e(e.S + e.F * (i != Math.expm1), "Math", { expm1: i }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { fround: r(179) }) }, function (t, n, r) { var e = r(1), f = Math.abs; e(e.S, "Math", { hypot: function (t, n) { for (var r, e, i = 0, o = 0, u = arguments.length, c = 0; o < u;)c < (r = f(arguments[o++])) ? (i = i * (e = c / r) * e + 1, c = r) : 0 < r ? i += (e = r / c) * e : i += r; return c === 1 / 0 ? 1 / 0 : c * Math.sqrt(i) } }) }, function (t, n, r) { var e = r(1), i = Math.imul; e(e.S + e.F * r(4)(function () { return -5 != i(4294967295, 5) || 2 != i.length }), "Math", { imul: function (t, n) { var r = 65535, e = +t, i = +n, o = r & e, u = r & i; return 0 | o * u + ((r & e >>> 16) * u + o * (r & i >>> 16) << 16 >>> 0) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { log10: function (t) { return Math.log(t) * Math.LOG10E } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { log1p: r(180) }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { log2: function (t) { return Math.log(t) / Math.LN2 } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { sign: r(149) }) }, function (t, n, r) { var e = r(1), i = r(148), o = Math.exp; e(e.S + e.F * r(4)(function () { return -2e-17 != !Math.sinh(-2e-17) }), "Math", { sinh: function (t) { return Math.abs(t = +t) < 1 ? (i(t) - i(-t)) / 2 : (o(t - 1) - o(-t - 1)) * (Math.E / 2) } }) }, function (t, n, r) { var e = r(1), i = r(148), o = Math.exp; e(e.S, "Math", { tanh: function (t) { var n = i(t = +t), r = i(-t); return n == 1 / 0 ? 1 : r == 1 / 0 ? -1 : (n - r) / (o(t) + o(-t)) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { trunc: function (t) { return (0 < t ? Math.floor : Math.ceil)(t) } }) }, function (t, n, r) { "use strict"; var e = r(3), i = r(30), o = r(45), u = r(144), s = r(53), c = r(4), f = r(73).f, a = r(31).f, l = r(11).f, h = r(84).trim, v = "Number", p = e[v], d = p, y = p.prototype, g = o(r(72)(y)) == v, b = "trim" in String.prototype, x = function (t) { var n = s(t, !1); if ("string" == typeof n && 2 < n.length) { var r, e, i, o = (n = b ? n.trim() : h(n, 3)).charCodeAt(0); if (43 === o || 45 === o) { if (88 === (r = n.charCodeAt(2)) || 120 === r) return NaN } else if (48 === o) { switch (n.charCodeAt(1)) { case 66: case 98: e = 2, i = 49; break; case 79: case 111: e = 8, i = 55; break; default: return +n }for (var u, c = n.slice(2), f = 0, a = c.length; f < a; f++)if ((u = c.charCodeAt(f)) < 48 || i < u) return NaN; return parseInt(c, e) } } return +n }; if (!p(" 0o1") || !p("0b1") || p("+0x1")) { p = function (t) { var n = arguments.length < 1 ? 0 : t, r = this; return r instanceof p && (g ? c(function () { y.valueOf.call(r) }) : o(r) != v) ? u(new d(x(n)), r, p) : x(n) }; for (var m, S = r(10) ? f(d) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), w = 0; S.length > w; w++)i(d, m = S[w]) && !i(p, m) && l(p, m, a(d, m)); (p.prototype = y).constructor = p, r(27)(e, v, p) } }, function (t, n, r) { var e = r(1); e(e.S, "Number", { EPSILON: Math.pow(2, -52) }) }, function (t, n, r) { var e = r(1), i = r(3).isFinite; e(e.S, "Number", { isFinite: function (t) { return "number" == typeof t && i(t) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Number", { isInteger: r(176) }) }, function (t, n, r) { var e = r(1); e(e.S, "Number", { isNaN: function (t) { return t != t } }) }, function (t, n, r) { var e = r(1), i = r(176), o = Math.abs; e(e.S, "Number", { isSafeInteger: function (t) { return i(t) && o(t) <= 9007199254740991 } }) }, function (t, n, r) { var e = r(1); e(e.S, "Number", { MAX_SAFE_INTEGER: 9007199254740991 }) }, function (t, n, r) { var e = r(1); e(e.S, "Number", { MIN_SAFE_INTEGER: -9007199254740991 }) }, function (t, n, r) { var e = r(1), i = r(188); e(e.S + e.F * (Number.parseFloat != i), "Number", { parseFloat: i }) }, function (t, n, r) { var e = r(1), i = r(189); e(e.S + e.F * (Number.parseInt != i), "Number", { parseInt: i }) }, function (t, n, r) { "use strict"; var e = r(1), a = r(49), s = r(165), l = r(156), i = 1..toFixed, o = Math.floor, u = [0, 0, 0, 0, 0, 0], h = "Number.toFixed: incorrect invocation!", v = function (t, n) { for (var r = -1, e = n; ++r < 6;)e += t * u[r], u[r] = e % 1e7, e = o(e / 1e7) }, p = function (t) { for (var n = 6, r = 0; 0 <= --n;)r += u[n], u[n] = o(r / t), r = r % t * 1e7 }, d = function () { for (var t = 6, n = ""; 0 <= --t;)if ("" !== n || 0 === t || 0 !== u[t]) { var r = String(u[t]); n = "" === n ? r : n + l.call("0", 7 - r.length) + r } return n }, y = function (t, n, r) { return 0 === n ? r : n % 2 == 1 ? y(t, n - 1, r * t) : y(t * t, n / 2, r) }; e(e.P + e.F * (!!i && ("0.000" !== 8e-5.toFixed(3) || "1" !== .9.toFixed(0) || "1.25" !== 1.255.toFixed(2) || "1000000000000000128" !== (0xde0b6b3a7640080).toFixed(0)) || !r(4)(function () { i.call({}) })), "Number", { toFixed: function (t) { var n, r, e, i, o = s(this, h), u = a(t), c = "", f = "0"; if (u < 0 || 20 < u) throw RangeError(h); if (o != o) return "NaN"; if (o <= -1e21 || 1e21 <= o) return String(o); if (o < 0 && (c = "-", o = -o), 1e-21 < o) if (r = (n = function (t) { for (var n = 0, r = t; 4096 <= r;)n += 12, r /= 4096; for (; 2 <= r;)n += 1, r /= 2; return n }(o * y(2, 69, 1)) - 69) < 0 ? o * y(2, -n, 1) : o / y(2, n, 1), r *= 4503599627370496, 0 < (n = 52 - n)) { for (v(0, r), e = u; 7 <= e;)v(1e7, 0), e -= 7; for (v(y(10, e, 1), 0), e = n - 1; 23 <= e;)p(1 << 23), e -= 23; p(1 << e), v(1, 1), p(2), f = d() } else v(0, r), v(1 << -n, 0), f = d() + l.call("0", u); return f = 0 < u ? c + ((i = f.length) <= u ? "0." + l.call("0", u - i) + f : f.slice(0, i - u) + "." + f.slice(i - u)) : c + f } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(4), o = r(165), u = 1..toPrecision; e(e.P + e.F * (i(function () { return "1" !== u.call(1, void 0) }) || !i(function () { u.call({}) })), "Number", { toPrecision: function (t) { var n = o(this, "Number#toPrecision: incorrect invocation!"); return void 0 === t ? u.call(n) : u.call(n, t) } }) }, function (t, n, r) { var e = r(1); e(e.S + e.F, "Object", { assign: r(182) }) }, function (t, n, r) { var e = r(1); e(e.S, "Object", { create: r(72) }) }, function (t, n, r) { var e = r(1); e(e.S + e.F * !r(10), "Object", { defineProperties: r(183) }) }, function (t, n, r) { var e = r(1); e(e.S + e.F * !r(10), "Object", { defineProperty: r(11).f }) }, function (t, n, r) { var e = r(5), i = r(69).onFreeze; r(52)("freeze", function (n) { return function (t) { return n && e(t) ? n(i(t)) : t } }) }, function (t, n, r) { var e = r(33), i = r(31).f; r(52)("getOwnPropertyDescriptor", function () { return function (t, n) { return i(e(t), n) } }) }, function (t, n, r) { r(52)("getOwnPropertyNames", function () { return r(184).f }) }, function (t, n, r) { var e = r(17), i = r(32); r(52)("getPrototypeOf", function () { return function (t) { return i(e(t)) } }) }, function (t, n, r) { var e = r(5); r(52)("isExtensible", function (n) { return function (t) { return !!e(t) && (!n || n(t)) } }) }, function (t, n, r) { var e = r(5); r(52)("isFrozen", function (n) { return function (t) { return !e(t) || !!n && n(t) } }) }, function (t, n, r) { var e = r(5); r(52)("isSealed", function (n) { return function (t) { return !e(t) || !!n && n(t) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Object", { is: r(192) }) }, function (t, n, r) { var e = r(17), i = r(74); r(52)("keys", function () { return function (t) { return i(e(t)) } }) }, function (t, n, r) { var e = r(5), i = r(69).onFreeze; r(52)("preventExtensions", function (n) { return function (t) { return n && e(t) ? n(i(t)) : t } }) }, function (t, n, r) { var e = r(5), i = r(69).onFreeze; r(52)("seal", function (n) { return function (t) { return n && e(t) ? n(i(t)) : t } }) }, function (t, n, r) { var e = r(1); e(e.S, "Object", { setPrototypeOf: r(153).set }) }, function (t, n, r) { "use strict"; var e = r(81), i = {}; i[r(7)("toStringTag")] = "z", i + "" != "[object z]" && r(27)(Object.prototype, "toString", function () { return "[object " + e(this) + "]" }, !0) }, function (t, n, r) { var e = r(1), i = r(188); e(e.G + e.F * (parseFloat != i), { parseFloat: i }) }, function (t, n, r) { var e = r(1), i = r(189); e(e.G + e.F * (parseInt != i), { parseInt: i }) }, function (t, n, r) { "use strict"; var e, i, o, u, c = r(68), f = r(3), a = r(47), s = r(81), l = r(1), h = r(5), v = r(21), p = r(70), d = r(71), y = r(119), g = r(158).set, b = r(150)(), x = r(151), m = r(190), S = r(133), w = r(191), _ = "Promise", O = f.TypeError, E = f.process, M = E && E.versions, P = M && M.v8 || "", j = f[_], F = "process" == s(E), A = function () { }, I = i = x.f, L = !!function () { try { var t = j.resolve(1), n = (t.constructor = {})[r(7)("species")] = function (t) { t(A, A) }; return (F || "function" == typeof PromiseRejectionEvent) && t.then(A) instanceof n && 0 !== P.indexOf("6.6") && -1 === S.indexOf("Chrome/66") } catch (t) { } }(), N = function (t) { var n; return !(!h(t) || "function" != typeof (n = t.then)) && n }, T = function (s, r) { if (!s._n) { s._n = !0; var e = s._c; b(function () { for (var f = s._v, a = 1 == s._s, t = 0, n = function (t) { var n, r, e, i = a ? t.ok : t.fail, o = t.resolve, u = t.reject, c = t.domain; try { i ? (a || (2 == s._h && C(s), s._h = 1), !0 === i ? n = f : (c && c.enter(), n = i(f), c && (c.exit(), e = !0)), n === t.promise ? u(O("Promise-chain cycle")) : (r = N(n)) ? r.call(n, o, u) : o(n)) : u(f) } catch (t) { c && !e && c.exit(), u(t) } }; e.length > t;)n(e[t++]); s._c = [], s._n = !1, r && !s._h && k(s) }) } }, k = function (o) { g.call(f, function () { var t, n, r, e = o._v, i = R(o); if (i && (t = m(function () { F ? E.emit("unhandledRejection", e, o) : (n = f.onunhandledrejection) ? n({ promise: o, reason: e }) : (r = f.console) && r.error && r.error("Unhandled promise rejection", e) }), o._h = F || R(o) ? 2 : 1), o._a = void 0, i && t.e) throw t.v }) }, R = function (t) { return 1 !== t._h && 0 === (t._a || t._c).length }, C = function (n) { g.call(f, function () { var t; F ? E.emit("rejectionHandled", n) : (t = f.onrejectionhandled) && t({ promise: n, reason: n._v }) }) }, D = function (t) { var n = this; n._d || (n._d = !0, (n = n._w || n)._v = t, n._s = 2, n._a || (n._a = n._c.slice()), T(n, !0)) }, G = function (t) { var r, e = this; if (!e._d) { e._d = !0, e = e._w || e; try { if (e === t) throw O("Promise can't be resolved itself"); (r = N(t)) ? b(function () { var n = { _w: e, _d: !1 }; try { r.call(t, a(G, n, 1), a(D, n, 1)) } catch (t) { D.call(n, t) } }) : (e._v = t, e._s = 1, T(e, !1)) } catch (t) { D.call({ _w: e, _d: !1 }, t) } } }; L || (j = function (t) { p(this, j, _, "_h"), v(t), e.call(this); try { t(a(G, this, 1), a(D, this, 1)) } catch (t) { D.call(this, t) } }, (e = function (t) { this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1 }).prototype = r(76)(j.prototype, { then: function (t, n) { var r = I(y(this, j)); return r.ok = "function" != typeof t || t, r.fail = "function" == typeof n && n, r.domain = F ? E.domain : void 0, this._c.push(r), this._a && this._a.push(r), this._s && T(this, !1), r.promise }, catch: function (t) { return this.then(void 0, t) } }), o = function () { var t = new e; this.promise = t, this.resolve = a(G, t, 1), this.reject = a(D, t, 1) }, x.f = I = function (t) { return t === j || t === u ? new o(t) : i(t) }), l(l.G + l.W + l.F * !L, { Promise: j }), r(83)(j, _), r(77)(_), u = r(46)[_], l(l.S + l.F * !L, _, { reject: function (t) { var n = I(this); return (0, n.reject)(t), n.promise } }), l(l.S + l.F * (c || !L), _, { resolve: function (t) { return w(c && this === u ? j : this, t) } }), l(l.S + l.F * !(L && r(125)(function (t) { j.all(t).catch(A) })), _, { all: function (t) { var u = this, n = I(u), c = n.resolve, f = n.reject, r = m(function () { var e = [], i = 0, o = 1; d(t, !1, function (t) { var n = i++, r = !1; e.push(void 0), o++, u.resolve(t).then(function (t) { r || (r = !0, e[n] = t, --o || c(e)) }, f) }), --o || c(e) }); return r.e && f(r.v), n.promise }, race: function (t) { var n = this, r = I(n), e = r.reject, i = m(function () { d(t, !1, function (t) { n.resolve(t).then(r.resolve, e) }) }); return i.e && e(i.v), r.promise } }) }, function (t, n, r) { var e = r(1), o = r(21), u = r(2), c = (r(3).Reflect || {}).apply, f = Function.apply; e(e.S + e.F * !r(4)(function () { c(function () { }) }), "Reflect", { apply: function (t, n, r) { var e = o(t), i = u(r); return c ? c(e, n, i) : f.call(e, n, i) } }) }, function (t, n, r) { var e = r(1), c = r(72), f = r(21), a = r(2), s = r(5), i = r(4), l = r(169), h = (r(3).Reflect || {}).construct, v = i(function () { function t() { } return !(h(function () { }, [], t) instanceof t) }), p = !i(function () { h(function () { }) }); e(e.S + e.F * (v || p), "Reflect", { construct: function (t, n) { f(t), a(n); var r = arguments.length < 3 ? t : f(arguments[2]); if (p && !v) return h(t, n, r); if (t == r) { switch (n.length) { case 0: return new t; case 1: return new t(n[0]); case 2: return new t(n[0], n[1]); case 3: return new t(n[0], n[1], n[2]); case 4: return new t(n[0], n[1], n[2], n[3]) }var e = [null]; return e.push.apply(e, n), new (l.apply(t, e)) } var i = r.prototype, o = c(s(i) ? i : Object.prototype), u = Function.apply.call(t, o, n); return s(u) ? u : o } }) }, function (t, n, r) { var e = r(11), i = r(1), o = r(2), u = r(53); i(i.S + i.F * r(4)(function () { Reflect.defineProperty(e.f({}, 1, { value: 1 }), 1, { value: 2 }) }), "Reflect", { defineProperty: function (t, n, r) { o(t), n = u(n, !0), o(r); try { return e.f(t, n, r), !0 } catch (t) { return !1 } } }) }, function (t, n, r) { var e = r(1), i = r(31).f, o = r(2); e(e.S, "Reflect", { deleteProperty: function (t, n) { var r = i(o(t), n); return !(r && !r.configurable) && delete t[n] } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(2), o = function (t) { this._t = i(t), this._i = 0; var n, r = this._k = []; for (n in t) r.push(n) }; r(146)(o, "Object", function () { var t, n = this._k; do { if (this._i >= n.length) return { value: void 0, done: !0 } } while (!((t = n[this._i++]) in this._t)); return { value: t, done: !1 } }), e(e.S, "Reflect", { enumerate: function (t) { return new o(t) } }) }, function (t, n, r) { var e = r(31), i = r(1), o = r(2); i(i.S, "Reflect", { getOwnPropertyDescriptor: function (t, n) { return e.f(o(t), n) } }) }, function (t, n, r) { var e = r(1), i = r(32), o = r(2); e(e.S, "Reflect", { getPrototypeOf: function (t) { return i(o(t)) } }) }, function (t, n, r) { var u = r(31), c = r(32), f = r(30), e = r(1), a = r(5), s = r(2); e(e.S, "Reflect", { get: function t(n, r) { var e, i, o = arguments.length < 3 ? n : arguments[2]; return s(n) === o ? n[r] : (e = u.f(n, r)) ? f(e, "value") ? e.value : void 0 !== e.get ? e.get.call(o) : void 0 : a(i = c(n)) ? t(i, r, o) : void 0 } }) }, function (t, n, r) { var e = r(1); e(e.S, "Reflect", { has: function (t, n) { return n in t } }) }, function (t, n, r) { var e = r(1), i = r(2), o = Object.isExtensible; e(e.S, "Reflect", { isExtensible: function (t) { return i(t), !o || o(t) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Reflect", { ownKeys: r(187) }) }, function (t, n, r) { var e = r(1), i = r(2), o = Object.preventExtensions; e(e.S, "Reflect", { preventExtensions: function (t) { i(t); try { return o && o(t), !0 } catch (t) { return !1 } } }) }, function (t, n, r) { var e = r(1), i = r(153); i && e(e.S, "Reflect", { setPrototypeOf: function (t, n) { i.check(t, n); try { return i.set(t, n), !0 } catch (t) { return !1 } } }) }, function (t, n, r) { var f = r(11), a = r(31), s = r(32), l = r(30), e = r(1), h = r(75), v = r(2), p = r(5); e(e.S, "Reflect", { set: function t(n, r, e) { var i, o, u = arguments.length < 4 ? n : arguments[3], c = a.f(v(n), r); if (!c) { if (p(o = s(n))) return t(o, r, e, u); c = h(0) } if (l(c, "value")) { if (!1 === c.writable || !p(u)) return !1; if (i = a.f(u, r)) { if (i.get || i.set || !1 === i.writable) return !1; i.value = e, f.f(u, r, i) } else f.f(u, r, h(0, e)); return !0 } return void 0 !== c.set && (c.set.call(u, e), !0) } }) }, function (t, n, r) { var e = r(3), o = r(144), i = r(11).f, u = r(73).f, c = r(124), f = r(115), a = e.RegExp, s = a, l = a.prototype, h = /a/g, v = /a/g, p = new a(h) !== h; if (r(10) && (!p || r(4)(function () { return v[r(7)("match")] = !1, a(h) != h || a(v) == v || "/a/i" != a(h, "i") }))) { a = function (t, n) { var r = this instanceof a, e = c(t), i = void 0 === n; return !r && e && t.constructor === a && i ? t : o(p ? new s(e && !i ? t.source : t, n) : s((e = t instanceof a) ? t.source : t, e && i ? f.call(t) : n), r ? this : l, a) }; for (var d = function (n) { n in a || i(a, n, { configurable: !0, get: function () { return s[n] }, set: function (t) { s[n] = t } }) }, y = u(s), g = 0; y.length > g;)d(y[g++]); (l.constructor = a).prototype = l, r(27)(e, "RegExp", a) } r(77)("RegExp") }, function (t, n, r) { "use strict"; var l = r(2), h = r(8), v = r(136), p = r(128); r(122)("match", 1, function (e, i, a, s) { return [function (t) { var n = e(this), r = null == t ? void 0 : t[i]; return void 0 !== r ? r.call(t, n) : new RegExp(t)[i](String(n)) }, function (t) { var n = s(a, t, this); if (n.done) return n.value; var r = l(t), e = String(this); if (!r.global) return p(r, e); for (var i, o = r.unicode, u = [], c = r.lastIndex = 0; null !== (i = p(r, e));) { var f = String(i[0]); "" === (u[c] = f) && (r.lastIndex = v(e, h(r.lastIndex), o)), c++ } return 0 === c ? null : u }] }) }, function (t, n, r) { "use strict"; var O = r(2), e = r(17), E = r(8), M = r(49), P = r(136), j = r(128), F = Math.max, A = Math.min, h = Math.floor, v = /\$([$&`']|\d\d?|<[^>]*>)/g, p = /\$([$&`']|\d\d?)/g; r(122)("replace", 2, function (i, o, S, w) { function _(o, u, c, f, a, t) { var s = c + o.length, l = f.length, n = p; return void 0 !== a && (a = e(a), n = v), S.call(t, n, function (t, n) { var r; switch (n.charAt(0)) { case "$": return "$"; case "&": return o; case "`": return u.slice(0, c); case "'": return u.slice(s); case "<": r = a[n.slice(1, -1)]; break; default: var e = +n; if (0 === e) return t; if (l < e) { var i = h(e / 10); return 0 === i ? t : i <= l ? void 0 === f[i - 1] ? n.charAt(1) : f[i - 1] + n.charAt(1) : t } r = f[e - 1] }return void 0 === r ? "" : r }) } return [function (t, n) { var r = i(this), e = null == t ? void 0 : t[o]; return void 0 !== e ? e.call(t, r, n) : S.call(String(r), t, n) }, function (t, n) { var r = w(S, t, this, n); if (r.done) return r.value; var e = O(t), i = String(this), o = "function" == typeof n; o || (n = String(n)); var u, c = e.global; if (c) { var f = e.unicode; e.lastIndex = 0 } for (var a = []; ;) { var s = j(e, i); if (null === s) break; if (a.push(s), !c) break; "" === String(s[0]) && (e.lastIndex = P(i, E(e.lastIndex), f)) } for (var l = "", h = 0, v = 0; v < a.length; v++) { s = a[v]; for (var p = String(s[0]), d = F(A(M(s.index), i.length), 0), y = [], g = 1; g < s.length; g++)y.push(void 0 === (u = s[g]) ? u : String(u)); var b = s.groups; if (o) { var x = [p].concat(y, d, i); void 0 !== b && x.push(b); var m = String(n.apply(void 0, x)) } else m = _(p, i, d, y, b, n); h <= d && (l += i.slice(h, d) + m, h = d + p.length) } return l + i.slice(h) }] }) }, function (t, n, r) { "use strict"; var f = r(2), a = r(192), s = r(128); r(122)("search", 1, function (e, i, u, c) { return [function (t) { var n = e(this), r = null == t ? void 0 : t[i]; return void 0 !== r ? r.call(t, n) : new RegExp(t)[i](String(n)) }, function (t) { var n = c(u, t, this); if (n.done) return n.value; var r = f(t), e = String(this), i = r.lastIndex; a(i, 0) || (r.lastIndex = 0); var o = s(r, e); return a(r.lastIndex, i) || (r.lastIndex = i), null === o ? -1 : o.index }] }) }, function (t, n, r) { "use strict"; var l = r(124), x = r(2), m = r(119), S = r(136), w = r(8), _ = r(128), h = r(152), e = r(4), O = Math.min, v = [].push, u = "split", p = "length", d = "lastIndex", E = 4294967295, M = !e(function () { RegExp(E, "y") }); r(122)("split", 2, function (i, o, y, g) { var b; return b = "c" == "abbc"[u](/(b)*/)[1] || 4 != "test"[u](/(?:)/, -1)[p] || 2 != "ab"[u](/(?:ab)*/)[p] || 4 != "."[u](/(.?)(.?)/)[p] || 1 < "."[u](/()()/)[p] || ""[u](/.?/)[p] ? function (t, n) { var r = String(this); if (void 0 === t && 0 === n) return []; if (!l(t)) return y.call(r, t, n); for (var e, i, o, u = [], c = (t.ignoreCase ? "i" : "") + (t.multiline ? "m" : "") + (t.unicode ? "u" : "") + (t.sticky ? "y" : ""), f = 0, a = void 0 === n ? E : n >>> 0, s = new RegExp(t.source, c + "g"); (e = h.call(s, r)) && !(f < (i = s[d]) && (u.push(r.slice(f, e.index)), 1 < e[p] && e.index < r[p] && v.apply(u, e.slice(1)), o = e[0][p], f = i, u[p] >= a));)s[d] === e.index && s[d]++; return f === r[p] ? !o && s.test("") || u.push("") : u.push(r.slice(f)), u[p] > a ? u.slice(0, a) : u } : "0"[u](void 0, 0)[p] ? function (t, n) { return void 0 === t && 0 === n ? [] : y.call(this, t, n) } : y, [function (t, n) { var r = i(this), e = null == t ? void 0 : t[o]; return void 0 !== e ? e.call(t, r, n) : b.call(String(r), t, n) }, function (t, n) { var r = g(b, t, this, n, b !== y); if (r.done) return r.value; var e = x(t), i = String(this), o = m(e, RegExp), u = e.unicode, c = (e.ignoreCase ? "i" : "") + (e.multiline ? "m" : "") + (e.unicode ? "u" : "") + (M ? "y" : "g"), f = new o(M ? e : "^(?:" + e.source + ")", c), a = void 0 === n ? E : n >>> 0; if (0 === a) return []; if (0 === i.length) return null === _(f, i) ? [i] : []; for (var s = 0, l = 0, h = []; l < i.length;) { f.lastIndex = M ? l : 0; var v, p = _(f, M ? i : i.slice(l)); if (null === p || (v = O(w(f.lastIndex + (M ? 0 : l)), i.length)) === s) l = S(i, l, u); else { if (h.push(i.slice(s, l)), h.length === a) return h; for (var d = 1; d <= p.length - 1; d++)if (h.push(p[d]), h.length === a) return h; l = s = v } } return h.push(i.slice(s)), h }] }) }, function (t, n, r) { "use strict"; r(198); var e = r(2), i = r(115), o = r(10), u = "toString", c = /./[u], f = function (t) { r(27)(RegExp.prototype, u, t, !0) }; r(4)(function () { return "/a/b" != c.call({ source: "a", flags: "b" }) }) ? f(function () { var t = e(this); return "/".concat(t.source, "/", "flags" in t ? t.flags : !o && t instanceof RegExp ? i.call(t) : void 0) }) : c.name != u && f(function () { return c.call(this) }) }, function (t, n, r) { "use strict"; r(28)("anchor", function (n) { return function (t) { return n(this, "a", "name", t) } }) }, function (t, n, r) { "use strict"; r(28)("big", function (t) { return function () { return t(this, "big", "", "") } }) }, function (t, n, r) { "use strict"; r(28)("blink", function (t) { return function () { return t(this, "blink", "", "") } }) }, function (t, n, r) { "use strict"; r(28)("bold", function (t) { return function () { return t(this, "b", "", "") } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(131)(!1); e(e.P, "String", { codePointAt: function (t) { return i(this, t) } }) }, function (t, n, r) { "use strict"; var e = r(1), u = r(8), c = r(155), f = "endsWith", a = ""[f]; e(e.P + e.F * r(142)(f), "String", { endsWith: function (t) { var n = c(this, t, f), r = 1 < arguments.length ? arguments[1] : void 0, e = u(n.length), i = void 0 === r ? e : Math.min(u(r), e), o = String(t); return a ? a.call(n, o, i) : n.slice(i - o.length, i) === o } }) }, function (t, n, r) { "use strict"; r(28)("fixed", function (t) { return function () { return t(this, "tt", "", "") } }) }, function (t, n, r) { "use strict"; r(28)("fontcolor", function (n) { return function (t) { return n(this, "font", "color", t) } }) }, function (t, n, r) { "use strict"; r(28)("fontsize", function (n) { return function (t) { return n(this, "font", "size", t) } }) }, function (t, n, r) { var e = r(1), o = r(78), u = String.fromCharCode, i = String.fromCodePoint; e(e.S + e.F * (!!i && 1 != i.length), "String", { fromCodePoint: function (t) { for (var n, r = [], e = arguments.length, i = 0; i < e;) { if (n = +arguments[i++], o(n, 1114111) !== n) throw RangeError(n + " is not a valid code point"); r.push(n < 65536 ? u(n) : u(55296 + ((n -= 65536) >> 10), n % 1024 + 56320)) } return r.join("") } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(155); e(e.P + e.F * r(142)("includes"), "String", { includes: function (t) { return !!~i(this, t, "includes").indexOf(t, 1 < arguments.length ? arguments[1] : void 0) } }) }, function (t, n, r) { "use strict"; r(28)("italics", function (t) { return function () { return t(this, "i", "", "") } }) }, function (t, n, r) { "use strict"; var e = r(131)(!0); r(147)(String, "String", function (t) { this._t = String(t), this._i = 0 }, function () { var t, n = this._t, r = this._i; return r >= n.length ? { value: void 0, done: !0 } : (t = e(n, r), this._i += t.length, { value: t, done: !1 }) }) }, function (t, n, r) { "use strict"; r(28)("link", function (n) { return function (t) { return n(this, "a", "href", t) } }) }, function (t, n, r) { var e = r(1), u = r(33), c = r(8); e(e.S, "String", { raw: function (t) { for (var n = u(t.raw), r = c(n.length), e = arguments.length, i = [], o = 0; o < r;)i.push(String(n[o++])), o < e && i.push(String(arguments[o])); return i.join("") } }) }, function (t, n, r) { var e = r(1); e(e.P, "String", { repeat: r(156) }) }, function (t, n, r) { "use strict"; r(28)("small", function (t) { return function () { return t(this, "small", "", "") } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(8), o = r(155), u = "startsWith", c = ""[u]; e(e.P + e.F * r(142)(u), "String", { startsWith: function (t) { var n = o(this, t, u), r = i(Math.min(1 < arguments.length ? arguments[1] : void 0, n.length)), e = String(t); return c ? c.call(n, e, r) : n.slice(r, r + e.length) === e } }) }, function (t, n, r) { "use strict"; r(28)("strike", function (t) { return function () { return t(this, "strike", "", "") } }) }, function (t, n, r) { "use strict"; r(28)("sub", function (t) { return function () { return t(this, "sub", "", "") } }) }, function (t, n, r) { "use strict"; r(28)("sup", function (t) { return function () { return t(this, "sup", "", "") } }) }, function (t, n, r) { "use strict"; r(84)("trim", function (t) { return function () { return t(this, 3) } }) }, function (t, n, r) { "use strict"; var e = r(3), u = r(30), i = r(10), o = r(1), c = r(27), f = r(69).KEY, a = r(4), s = r(118), l = r(83), h = r(79), v = r(7), p = r(195), d = r(160), y = r(218), g = r(123), b = r(2), x = r(5), m = r(17), S = r(33), w = r(53), _ = r(75), O = r(72), E = r(184), M = r(31), P = r(127), j = r(11), F = r(74), A = M.f, I = j.f, L = E.f, N = e.Symbol, T = e.JSON, k = T && T.stringify, R = "prototype", C = v("_hidden"), D = v("toPrimitive"), G = {}.propertyIsEnumerable, W = s("symbol-registry"), U = s("symbols"), V = s("op-symbols"), B = Object[R], q = "function" == typeof N && !!P.f, z = e.QObject, K = !z || !z[R] || !z[R].findChild, H = i && a(function () { return 7 != O(I({}, "a", { get: function () { return I(this, "a", { value: 7 }).a } })).a }) ? function (t, n, r) { var e = A(B, n); e && delete B[n], I(t, n, r), e && t !== B && I(B, n, e) } : I, J = function (t) { var n = U[t] = O(N[R]); return n._k = t, n }, $ = q && "symbol" == typeof N.iterator ? function (t) { return "symbol" == typeof t } : function (t) { return t instanceof N }, Y = function (t, n, r) { return t === B && Y(V, n, r), b(t), n = w(n, !0), b(r), u(U, n) ? (r.enumerable ? (u(t, C) && t[C][n] && (t[C][n] = !1), r = O(r, { enumerable: _(0, !1) })) : (u(t, C) || I(t, C, _(1, {})), t[C][n] = !0), H(t, n, r)) : I(t, n, r) }, X = function (t, n) { b(t); for (var r, e = y(n = S(n)), i = 0, o = e.length; i < o;)Y(t, r = e[i++], n[r]); return t }, Q = function (t) { var n = G.call(this, t = w(t, !0)); return !(this === B && u(U, t) && !u(V, t)) && (!(n || !u(this, t) || !u(U, t) || u(this, C) && this[C][t]) || n) }, Z = function (t, n) { if (t = S(t), n = w(n, !0), t !== B || !u(U, n) || u(V, n)) { var r = A(t, n); return !r || !u(U, n) || u(t, C) && t[C][n] || (r.enumerable = !0), r } }, tt = function (t) { for (var n, r = L(S(t)), e = [], i = 0; r.length > i;)u(U, n = r[i++]) || n == C || n == f || e.push(n); return e }, nt = function (t) { for (var n, r = t === B, e = L(r ? V : S(t)), i = [], o = 0; e.length > o;)!u(U, n = e[o++]) || r && !u(B, n) || i.push(U[n]); return i }; q || (c((N = function () { if (this instanceof N) throw TypeError("Symbol is not a constructor!"); var n = h(0 < arguments.length ? arguments[0] : void 0), r = function (t) { this === B && r.call(V, t), u(this, C) && u(this[C], n) && (this[C][n] = !1), H(this, n, _(1, t)) }; return i && K && H(B, n, { configurable: !0, set: r }), J(n) })[R], "toString", function () { return this._k }), M.f = Z, j.f = Y, r(73).f = E.f = tt, r(117).f = Q, P.f = nt, i && !r(68) && c(B, "propertyIsEnumerable", Q, !0), p.f = function (t) { return J(v(t)) }), o(o.G + o.W + o.F * !q, { Symbol: N }); for (var rt = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), et = 0; rt.length > et;)v(rt[et++]); for (var it = F(v.store), ot = 0; it.length > ot;)d(it[ot++]); o(o.S + o.F * !q, "Symbol", { for: function (t) { return u(W, t += "") ? W[t] : W[t] = N(t) }, keyFor: function (t) { if (!$(t)) throw TypeError(t + " is not a symbol!"); for (var n in W) if (W[n] === t) return n }, useSetter: function () { K = !0 }, useSimple: function () { K = !1 } }), o(o.S + o.F * !q, "Object", { create: function (t, n) { return void 0 === n ? O(t) : X(O(t), n) }, defineProperty: Y, defineProperties: X, getOwnPropertyDescriptor: Z, getOwnPropertyNames: tt, getOwnPropertySymbols: nt }); var ut = a(function () { P.f(1) }); o(o.S + o.F * ut, "Object", { getOwnPropertySymbols: function (t) { return P.f(m(t)) } }), T && o(o.S + o.F * (!q || a(function () { var t = N(); return "[null]" != k([t]) || "{}" != k({ a: t }) || "{}" != k(Object(t)) })), "JSON", { stringify: function (t) { for (var n, r, e = [t], i = 1; arguments.length > i;)e.push(arguments[i++]); if (r = n = e[1], (x(n) || void 0 !== t) && !$(t)) return g(n) || (n = function (t, n) { if ("function" == typeof r && (n = r.call(this, t, n)), !$(n)) return n }), e[1] = n, k.apply(T, e) } }), N[R][D] || r(26)(N[R], D, N[R].valueOf), l(N, "Symbol"), l(Math, "Math", !0), l(e.JSON, "JSON", !0) }, function (t, n, r) { "use strict"; var e = r(1), i = r(132), o = r(159), a = r(2), s = r(78), l = r(8), u = r(5), c = r(3).ArrayBuffer, h = r(119), v = o.ArrayBuffer, p = o.DataView, f = i.ABV && c.isView, d = v.prototype.slice, y = i.VIEW, g = "ArrayBuffer"; e(e.G + e.W + e.F * (c !== v), { ArrayBuffer: v }), e(e.S + e.F * !i.CONSTR, g, { isView: function (t) { return f && f(t) || u(t) && y in t } }), e(e.P + e.U + e.F * r(4)(function () { return !new v(2).slice(1, void 0).byteLength }), g, { slice: function (t, n) { if (void 0 !== d && void 0 === n) return d.call(a(this), t); for (var r = a(this).byteLength, e = s(t, r), i = s(void 0 === n ? r : n, r), o = new (h(this, v))(l(i - e)), u = new p(this), c = new p(o), f = 0; e < i;)c.setUint8(f++, u.getUint8(e++)); return o } }), r(77)(g) }, function (t, n, r) { var e = r(1); e(e.G + e.W + e.F * !r(132).ABV, { DataView: r(159).DataView }) }, function (t, n, r) { r(57)("Float32", 4, function (e) { return function (t, n, r) { return e(this, t, n, r) } }) }, function (t, n, r) { r(57)("Float64", 8, function (e) { return function (t, n, r) { return e(this, t, n, r) } }) }, function (t, n, r) { r(57)("Int16", 2, function (e) { return function (t, n, r) { return e(this, t, n, r) } }) }, function (t, n, r) { r(57)("Int32", 4, function (e) { return function (t, n, r) { return e(this, t, n, r) } }) }, function (t, n, r) { r(57)("Int8", 1, function (e) { return function (t, n, r) { return e(this, t, n, r) } }) }, function (t, n, r) { r(57)("Uint16", 2, function (e) { return function (t, n, r) { return e(this, t, n, r) } }) }, function (t, n, r) { r(57)("Uint32", 4, function (e) { return function (t, n, r) { return e(this, t, n, r) } }) }, function (t, n, r) { r(57)("Uint8", 1, function (e) { return function (t, n, r) { return e(this, t, n, r) } }) }, function (t, n, r) { r(57)("Uint8", 1, function (e) { return function (t, n, r) { return e(this, t, n, r) } }, !0) }, function (t, n, r) { "use strict"; var e = r(172), i = r(80); r(121)("WeakSet", function (t) { return function () { return t(this, 0 < arguments.length ? arguments[0] : void 0) } }, { add: function (t) { return e.def(i(this, "WeakSet"), t, !0) } }, e, !1, !0) }, function (t, n, r) { "use strict"; var e = r(1), i = r(173), o = r(17), u = r(8), c = r(21), f = r(138); e(e.P, "Array", { flatMap: function (t) { var n, r, e = o(this); return c(t), n = u(e.length), r = f(e, 0), i(r, e, e, n, 0, 1, t, arguments[1]), r } }), r(67)("flatMap") }, function (t, n, r) { "use strict"; var e = r(1), i = r(173), o = r(17), u = r(8), c = r(49), f = r(138); e(e.P, "Array", { flatten: function () { var t = arguments[0], n = o(this), r = u(n.length), e = f(n, 0); return i(e, n, n, r, 0, void 0 === t ? 1 : c(t)), e } }), r(67)("flatten") }, function (t, n, r) { "use strict"; var e = r(1), i = r(120)(!0); e(e.P, "Array", { includes: function (t) { return i(this, t, 1 < arguments.length ? arguments[1] : void 0) } }), r(67)("includes") }, function (t, n, r) { var e = r(1), i = r(150)(), o = r(3).process, u = "process" == r(45)(o); e(e.G, { asap: function (t) { var n = u && o.domain; i(n ? n.bind(t) : t) } }) }, function (t, n, r) { var e = r(1), i = r(45); e(e.S, "Error", { isError: function (t) { return "Error" === i(t) } }) }, function (t, n, r) { var e = r(1); e(e.G, { global: r(3) }) }, function (t, n, r) { r(129)("Map") }, function (t, n, r) { r(130)("Map") }, function (t, n, r) { var e = r(1); e(e.P + e.R, "Map", { toJSON: r(171)("Map") }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { clamp: function (t, n, r) { return Math.min(r, Math.max(n, t)) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { DEG_PER_RAD: Math.PI / 180 }) }, function (t, n, r) { var e = r(1), i = 180 / Math.PI; e(e.S, "Math", { degrees: function (t) { return t * i } }) }, function (t, n, r) { var e = r(1), o = r(181), u = r(179); e(e.S, "Math", { fscale: function (t, n, r, e, i) { return u(o(t, n, r, e, i)) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { iaddh: function (t, n, r, e) { var i = t >>> 0, o = r >>> 0; return (n >>> 0) + (e >>> 0) + ((i & o | (i | o) & ~(i + o >>> 0)) >>> 31) | 0 } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { imulh: function (t, n) { var r = +t, e = +n, i = 65535 & r, o = 65535 & e, u = r >> 16, c = e >> 16, f = (u * o >>> 0) + (i * o >>> 16); return u * c + (f >> 16) + ((i * c >>> 0) + (65535 & f) >> 16) } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { isubh: function (t, n, r, e) { var i = t >>> 0, o = r >>> 0; return (n >>> 0) - (e >>> 0) - ((~i & o | ~(i ^ o) & i - o >>> 0) >>> 31) | 0 } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { RAD_PER_DEG: 180 / Math.PI }) }, function (t, n, r) { var e = r(1), i = Math.PI / 180; e(e.S, "Math", { radians: function (t) { return t * i } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { scale: r(181) }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { signbit: function (t) { return (t = +t) != t ? t : 0 == t ? 1 / t == 1 / 0 : 0 < t } }) }, function (t, n, r) { var e = r(1); e(e.S, "Math", { umulh: function (t, n) { var r = +t, e = +n, i = 65535 & r, o = 65535 & e, u = r >>> 16, c = e >>> 16, f = (u * o >>> 0) + (i * o >>> 16); return u * c + (f >>> 16) + ((i * c >>> 0) + (65535 & f) >>> 16) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(17), o = r(21), u = r(11); r(10) && e(e.P + r(126), "Object", { __defineGetter__: function (t, n) { u.f(i(this), t, { get: o(n), enumerable: !0, configurable: !0 }) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(17), o = r(21), u = r(11); r(10) && e(e.P + r(126), "Object", { __defineSetter__: function (t, n) { u.f(i(this), t, { set: o(n), enumerable: !0, configurable: !0 }) } }) }, function (t, n, r) { var e = r(1), i = r(186)(!0); e(e.S, "Object", { entries: function (t) { return i(t) } }) }, function (t, n, r) { var e = r(1), f = r(187), a = r(33), s = r(31), l = r(139); e(e.S, "Object", { getOwnPropertyDescriptors: function (t) { for (var n, r, e = a(t), i = s.f, o = f(e), u = {}, c = 0; o.length > c;)void 0 !== (r = i(e, n = o[c++])) && l(u, n, r); return u } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(17), o = r(53), u = r(32), c = r(31).f; r(10) && e(e.P + r(126), "Object", { __lookupGetter__: function (t) { var n, r = i(this), e = o(t, !0); do { if (n = c(r, e)) return n.get } while (r = u(r)) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(17), o = r(53), u = r(32), c = r(31).f; r(10) && e(e.P + r(126), "Object", { __lookupSetter__: function (t) { var n, r = i(this), e = o(t, !0); do { if (n = c(r, e)) return n.set } while (r = u(r)) } }) }, function (t, n, r) { var e = r(1), i = r(186)(!1); e(e.S, "Object", { values: function (t) { return i(t) } }) }, function (t, n, r) { "use strict"; var e = r(1), o = r(3), u = r(46), i = r(150)(), c = r(7)("observable"), f = r(21), a = r(2), s = r(70), l = r(76), h = r(26), v = r(71), p = v.RETURN, d = function (t) { return null == t ? void 0 : f(t) }, y = function (t) { var n = t._c; n && (t._c = void 0, n()) }, g = function (t) { return void 0 === t._o }, b = function (t) { g(t) || (t._o = void 0, y(t)) }, x = function (t, n) { a(t), this._c = void 0, this._o = t, t = new m(this); try { var r = n(t), e = r; null != r && ("function" == typeof r.unsubscribe ? r = function () { e.unsubscribe() } : f(r), this._c = r) } catch (n) { return void t.error(n) } g(this) && y(this) }; x.prototype = l({}, { unsubscribe: function () { b(this) } }); var m = function (t) { this._s = t }; m.prototype = l({}, { next: function (t) { var n = this._s; if (!g(n)) { var r = n._o; try { var e = d(r.next); if (e) return e.call(r, t) } catch (t) { try { b(n) } finally { throw t } } } }, error: function (t) { var n = this._s; if (g(n)) throw t; var r = n._o; n._o = void 0; try { var e = d(r.error); if (!e) throw t; t = e.call(r, t) } catch (t) { try { y(n) } finally { throw t } } return y(n), t }, complete: function (t) { var n = this._s; if (!g(n)) { var r = n._o; n._o = void 0; try { var e = d(r.complete); t = e ? e.call(r, t) : void 0 } catch (t) { try { y(n) } finally { throw t } } return y(n), t } } }); var S = function (t) { s(this, S, "Observable", "_f")._f = f(t) }; l(S.prototype, { subscribe: function (t) { return new x(t, this._f) }, forEach: function (e) { var i = this; return new (u.Promise || o.Promise)(function (t, n) { f(e); var r = i.subscribe({ next: function (t) { try { return e(t) } catch (t) { n(t), r.unsubscribe() } }, error: n, complete: t }) }) } }), l(S, { from: function (t) { var n = "function" == typeof this ? this : S, r = d(a(t)[c]); if (r) { var e = a(r.call(t)); return e.constructor === n ? e : new n(function (t) { return e.subscribe(t) }) } return new n(function (n) { var r = !1; return i(function () { if (!r) { try { if (v(t, !1, function (t) { if (n.next(t), r) return p }) === p) return } catch (t) { if (r) throw t; return void n.error(t) } n.complete() } }), function () { r = !0 } }) }, of: function () { for (var t = 0, n = arguments.length, e = new Array(n); t < n;)e[t] = arguments[t++]; return new ("function" == typeof this ? this : S)(function (n) { var r = !1; return i(function () { if (!r) { for (var t = 0; t < e.length; ++t)if (n.next(e[t]), r) return; n.complete() } }), function () { r = !0 } }) } }), h(S.prototype, c, function () { return this }), e(e.G, { Observable: S }), r(77)("Observable") }, function (t, n, r) { "use strict"; var e = r(1), i = r(46), o = r(3), u = r(119), c = r(191); e(e.P + e.R, "Promise", { finally: function (n) { var r = u(this, i.Promise || o.Promise), t = "function" == typeof n; return this.then(t ? function (t) { return c(r, n()).then(function () { return t }) } : n, t ? function (t) { return c(r, n()).then(function () { throw t }) } : n) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(151), o = r(190); e(e.S, "Promise", { try: function (t) { var n = i.f(this), r = o(t); return (r.e ? n.reject : n.resolve)(r.v), n.promise } }) }, function (t, n, r) { var e = r(56), i = r(2), o = e.key, u = e.set; e.exp({ defineMetadata: function (t, n, r, e) { u(t, n, i(r), o(e)) } }) }, function (t, n, r) { var e = r(56), o = r(2), u = e.key, c = e.map, f = e.store; e.exp({ deleteMetadata: function (t, n) { var r = arguments.length < 3 ? void 0 : u(arguments[2]), e = c(o(n), r, !1); if (void 0 === e || !e.delete(t)) return !1; if (e.size) return !0; var i = f.get(n); return i.delete(r), !!i.size || f.delete(n) } }) }, function (t, n, r) { var o = r(199), u = r(167), e = r(56), i = r(2), c = r(32), f = e.keys, a = e.key, s = function (t, n) { var r = f(t, n), e = c(t); if (null === e) return r; var i = s(e, n); return i.length ? r.length ? u(new o(r.concat(i))) : i : r }; e.exp({ getMetadataKeys: function (t) { return s(i(t), arguments.length < 2 ? void 0 : a(arguments[1])) } }) }, function (t, n, r) { var e = r(56), i = r(2), o = r(32), u = e.has, c = e.get, f = e.key, a = function (t, n, r) { if (u(t, n, r)) return c(t, n, r); var e = o(n); return null !== e ? a(t, e, r) : void 0 }; e.exp({ getMetadata: function (t, n) { return a(t, i(n), arguments.length < 3 ? void 0 : f(arguments[2])) } }) }, function (t, n, r) { var e = r(56), i = r(2), o = e.keys, u = e.key; e.exp({ getOwnMetadataKeys: function (t) { return o(i(t), arguments.length < 2 ? void 0 : u(arguments[1])) } }) }, function (t, n, r) { var e = r(56), i = r(2), o = e.get, u = e.key; e.exp({ getOwnMetadata: function (t, n) { return o(t, i(n), arguments.length < 3 ? void 0 : u(arguments[2])) } }) }, function (t, n, r) { var e = r(56), i = r(2), o = r(32), u = e.has, c = e.key, f = function (t, n, r) { if (u(t, n, r)) return !0; var e = o(n); return null !== e && f(t, e, r) }; e.exp({ hasMetadata: function (t, n) { return f(t, i(n), arguments.length < 3 ? void 0 : c(arguments[2])) } }) }, function (t, n, r) { var e = r(56), i = r(2), o = e.has, u = e.key; e.exp({ hasOwnMetadata: function (t, n) { return o(t, i(n), arguments.length < 3 ? void 0 : u(arguments[2])) } }) }, function (t, n, r) { var e = r(56), i = r(2), o = r(21), u = e.key, c = e.set; e.exp({ metadata: function (r, e) { return function (t, n) { c(r, e, (void 0 !== n ? i : o)(t), u(n)) } } }) }, function (t, n, r) { r(129)("Set") }, function (t, n, r) { r(130)("Set") }, function (t, n, r) { var e = r(1); e(e.P + e.R, "Set", { toJSON: r(171)("Set") }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(131)(!0); e(e.P, "String", { at: function (t) { return i(this, t) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(51), o = r(8), u = r(124), c = r(115), f = RegExp.prototype, a = function (t, n) { this._r = t, this._s = n }; r(146)(a, "RegExp String", function () { var t = this._r.exec(this._s); return { value: t, done: null === t } }), e(e.P, "String", { matchAll: function (t) { if (i(this), !u(t)) throw TypeError(t + " is not a regexp!"); var n = String(this), r = "flags" in f ? String(t.flags) : c.call(t), e = new RegExp(t.source, ~r.indexOf("g") ? r : "g" + r); return e.lastIndex = o(t.lastIndex), new a(e, n) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(193), o = r(133), u = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o); e(e.P + e.F * u, "String", { padEnd: function (t) { return i(this, t, 1 < arguments.length ? arguments[1] : void 0, !1) } }) }, function (t, n, r) { "use strict"; var e = r(1), i = r(193), o = r(133), u = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o); e(e.P + e.F * u, "String", { padStart: function (t) { return i(this, t, 1 < arguments.length ? arguments[1] : void 0, !0) } }) }, function (t, n, r) { "use strict"; r(84)("trimLeft", function (t) { return function () { return t(this, 1) } }, "trimStart") }, function (t, n, r) { "use strict"; r(84)("trimRight", function (t) { return function () { return t(this, 2) } }, "trimEnd") }, function (t, n, r) { r(160)("asyncIterator") }, function (t, n, r) { r(160)("observable") }, function (t, n, r) { var e = r(1); e(e.S, "System", { global: r(3) }) }, function (t, n, r) { r(129)("WeakMap") }, function (t, n, r) { r(130)("WeakMap") }, function (t, n, r) { r(129)("WeakSet") }, function (t, n, r) { r(130)("WeakSet") }, function (t, n, r) { for (var e = r(162), i = r(74), o = r(27), u = r(3), c = r(26), f = r(82), a = r(7), s = a("iterator"), l = a("toStringTag"), h = f.Array, v = { CSSRuleList: !0, CSSStyleDeclaration: !1, CSSValueList: !1, ClientRectList: !1, DOMRectList: !1, DOMStringList: !1, DOMTokenList: !0, DataTransferItemList: !1, FileList: !1, HTMLAllCollection: !1, HTMLCollection: !1, HTMLFormElement: !1, HTMLSelectElement: !1, MediaList: !0, MimeTypeArray: !1, NamedNodeMap: !1, NodeList: !0, PaintRequestList: !1, Plugin: !1, PluginArray: !1, SVGLengthList: !1, SVGNumberList: !1, SVGPathSegList: !1, SVGPointList: !1, SVGStringList: !1, SVGTransformList: !1, SourceBufferList: !1, StyleSheetList: !0, TextTrackCueList: !1, TextTrackList: !1, TouchList: !1 }, p = i(v), d = 0; d < p.length; d++) { var y, g = p[d], b = v[g], x = u[g], m = x && x.prototype; if (m && (m[s] || c(m, s, h), m[l] || c(m, l, g), f[g] = h, b)) for (y in e) m[y] || o(m, y, e[y], !0) } }, function (t, n, r) { var e = r(1), i = r(158); e(e.G + e.B, { setImmediate: i.set, clearImmediate: i.clear }) }, function (t, n, r) { var e = r(3), i = r(1), o = r(133), u = [].slice, c = /MSIE .\./.test(o), f = function (i) { return function (t, n) { var r = 2 < arguments.length, e = !!r && u.call(arguments, 2); return i(r ? function () { ("function" == typeof t ? t : Function(t)).apply(this, e) } : t, n) } }; i(i.G + i.B + i.F * c, { setTimeout: f(e.setTimeout), setInterval: f(e.setInterval) }) }, function (t, n, r) { r(341), r(280), r(282), r(281), r(284), r(286), r(291), r(285), r(283), r(293), r(292), r(288), r(289), r(287), r(279), r(290), r(294), r(295), r(247), r(249), r(248), r(297), r(296), r(267), r(277), r(278), r(268), r(269), r(270), r(271), r(272), r(273), r(274), r(275), r(276), r(250), r(251), r(252), r(253), r(254), r(255), r(256), r(257), r(258), r(259), r(260), r(261), r(262), r(263), r(264), r(265), r(266), r(328), r(333), r(340), r(331), r(323), r(324), r(329), r(334), r(336), r(319), r(320), r(321), r(322), r(325), r(326), r(327), r(330), r(332), r(335), r(337), r(338), r(339), r(242), r(244), r(243), r(246), r(245), r(231), r(229), r(235), r(232), r(238), r(240), r(228), r(234), r(225), r(239), r(223), r(237), r(236), r(230), r(233), r(222), r(224), r(227), r(226), r(241), r(162), r(313), r(197), r(318), r(198), r(314), r(315), r(316), r(317), r(298), r(196), r(199), r(200), r(353), r(342), r(343), r(348), r(351), r(352), r(346), r(349), r(347), r(350), r(344), r(345), r(299), r(300), r(301), r(302), r(303), r(306), r(304), r(305), r(307), r(308), r(309), r(310), r(312), r(311), r(356), r(354), r(355), r(397), r(400), r(399), r(401), r(402), r(398), r(403), r(404), r(378), r(381), r(377), r(375), r(376), r(379), r(380), r(362), r(396), r(361), r(395), r(407), r(409), r(360), r(394), r(406), r(408), r(359), r(405), r(358), r(363), r(364), r(365), r(366), r(367), r(369), r(368), r(370), r(371), r(372), r(374), r(373), r(383), r(384), r(385), r(386), r(388), r(387), r(390), r(389), r(391), r(392), r(393), r(357), r(382), r(412), r(411), r(410), t.exports = r(46) }, function (t, n) { t.exports = function (t, n) { if ("string" == typeof n) return t.insertAdjacentHTML("afterend", n); var r = t.nextSibling; return r ? t.parentNode.insertBefore(n, r) : t.parentNode.appendChild(n) } }])</script>
<script src="/./main.a5fda8.js"></script>
<script>!function () { var e, t; e = "/slider.27463f.js", t = document.createElement("script"), document.getElementsByTagName("body")[0].appendChild(t), t.setAttribute("src", e) }()</script>
<script>
  var link = "";
  var a = document.getElementsByTagName('img');
  for (i = 0; i < a.length; i++) {
    console.log(a[i].referrerPolicy)
    a[i].referrerPolicy = 'no-referrer';
  }
</script>



<!--  -->

<script>
  /* 标签页标题切换 */
  var originTitle = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function () {
    if (document.hidden) {
      document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
      titleTime = setTimeout(function () {
        document.title = originTitle;
      }, 2000);
    }
  });
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 50%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 50%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">样式</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">ts</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">框架</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">结构+样式</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">vue3</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">博客搭建</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">博客</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">项目</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">vue2</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">移动端</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">aplayer</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">vue</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia-plus根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="https://clear-liquid.github.io" target="_blank" 
                class="search-title" >
                
                  <img src="https://zhousiwei.gitee.io/ibooks/favicon.ico">
                
                試毅-思伟_技术笔记
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://github.com/JoeyBling" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                GitHub
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://gitee.com/mu-ce" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                码云
              </a>
            </li>
          
        </ul>
  		
    	</section>
    

    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>

  
<script type="text/javascript" src="/plugins/TweenMax/TweenMax.min.js"></script>
<script type="text/javascript" src="/plugins/TweenMax/HoverImg.js"></script>

<script>


  var hoverEffect = {
    "subNav": ".left-col .social a"
  }


  for (var x in hoverEffect) {
    // 初始化data-img属性值
    let $em = document.querySelectorAll(hoverEffect[x]);
    $em.forEach(($a) => {
      //console.log($a.href);
      if (isImageType($a.href)) {
        $a.setAttribute("data-img", $a.href)
      }
    })
    // 实现悬停元素预览图片效果
    let $a = document.querySelectorAll(hoverEffect[x] + "[data-img]");
    $a.forEach(($em) => {
      new HoverImgFx1($em)
    })
  }

</script>

  
<script type="text/javascript" src="/plugins/activate-power-mode/activate-power-mode.js"></script>
<script>
  POWERMODE.colorful = true; // make power mode colorful
  POWERMODE.shake = false; // turn off shake
  document.body.addEventListener('input', POWERMODE);
</script>

  
  <!-- <script async type="text/javascript" size="90" alpha="0.2" zIndex="0" src="/plugins/ribbon.js/ribbon.min.js"></script> -->
  
  
    <script type="text/javascript" src="/plugins/live2d-widget.js/L2Dwidget.min.js"></script>
<script type="text/javascript">
  /**
   * 完整配置请参考：https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init
   */
  var pluginModelPath = "assets/", // 模型的文件路径，无需更改
    pluginRootPath = "/live2d_models/"; // 插件的路径，无需更改
  //特定的模型json文件名称
  var modelPathJson = {
    "epsilon2_1": "Epsilon2.1",
    "gf": "Gantzert_Felixander",
    "haru/01": "haru01",
    "haru/02": "haru02",
    "nietzsche": "nietzche"
  }

  
    var modelName = "miku";
  

  var modelJsonPath = "";
  if (modelPathJson[modelName]) {
    modelJsonPath = pluginRootPath + modelName + "/" + pluginModelPath + modelPathJson[modelName] +
      ".model.json";
  } else {
    modelJsonPath = pluginRootPath + modelName + "/" + pluginModelPath + modelName + ".model.json";
  }
  L2Dwidget.init({
    model: {
      jsonPath: modelJsonPath
    },
    display: {
       position: "right", 
       width: 145, 
       height: 320, 
       hOffset: 50, 
      
    },
    mobile: {
       show: false, 
       scale: 0.6 
    },
    react: {
       opacity: 1 
    }
  })

</script>

  
  
  <script type="text/javascript" src="/lib/snow.js"></script>
  <script type="text/javascript" src="/lib/jquery-2.1.4.min.js"></script>
  <script>
    snow.down();
    $(window).resize(function() {
      $("canvas").css("z-index","500").remove();
      snow.down();
    });
  </script>
  
</body>

</html>
