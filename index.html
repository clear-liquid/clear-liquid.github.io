<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="https://clear-liquid.github.io.git">
  <title>时间胶囊</title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    
    <!-- <meta name="keywords" content="沐澈的时间胶囊">
    <meta name="description" content=""> -->
  
  <meta property="og:type" content="website">
<meta property="og:title" content="时间胶囊">
<meta property="og:url" content="https://clear-liquid.github.io.git/index.html">
<meta property="og:site_name" content="时间胶囊">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="沐澈">
<meta property="article:tag" content="沐澈的时间胶囊">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="时间胶囊" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.a5fda8.css">
  <style type="text/css">
    
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

  
    
 	  <script src="/lib/clickLove.js"></script>
  
  


  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      


<div class="overlay" style="background: #4d4d4d;"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/head.jpg" class="js-avatar">
		</a>
		<hgroup>
			<h1 class="header-author"><a href="/">沐澈</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/" >主页</a></li>
			
				<li><a target="_blank" rel="noopener" href="https://zhousiwei.gitee.io/ibooks/" >技术笔记</a></li>
			
				<li><a href="/tags/%E9%9A%8F%E7%AC%94/" >随笔</a></li>
			
			</ul>
		</nav>
		<nav class="header-smart-menu">
			
				
					<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
				
			
				
					<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
				
			
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					
						<a class="github" target="_blank" rel="noopener" href="https://github.com/clear-liquid" 
												title="GitHub" ><i class="icon-github"></i></a>
					
				
					
						<a class="github" href="#" 
												title="GitHub" ><i class="icon-github"></i></a>
					
				
					
						<a class="gitee" target="_blank" rel="noopener" href="https://gitee.com/mu-ce" 
												title="码云" ><i class="icon-gitee"></i></a>
					
				
					
						<a class="jianshu" href="#" 
												title="简书" ><i class="icon-jianshu"></i></a>
					
				
			</div>
		
			
			
			
			
			<div>
				<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="240" height="52" src="//music.163.com/outchain/player?type=2&id=1334445174&auto=1&height=32"></iframe>
			</div>
			
				
				<p style="font-size: 12px;">这似乎是首纯音乐，请尽情的欣赏它吧！<p>
			
		
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
      
      <a class="forkMe" style="position:absolute;z-index:999;top:0;right:0.5em;" 
        href="https://github.com/JoeyBling/hexo-theme-yilia-plus" target="_blank">
        <img src="/img/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
      
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<a href="/">
					<img src="/img/head.jpg" class="js-avatar">
				</a>
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">沐澈</h1>
			</hgroup>
			
			
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						
						<a class="github" target="_blank" 
							href="https://github.com/clear-liquid" title="GitHub"><i class="icon-github"></i></a>
						
					
						
						<a class="github" target="_blank" 
							href="#" title="GitHub"><i class="icon-github"></i></a>
						
					
						
						<a class="gitee" target="_blank" 
							href="https://gitee.com/mu-ce" title="码云"><i class="icon-gitee"></i></a>
						
					
						
						<a class="jianshu" target="_blank" 
							href="#" title="简书"><i class="icon-jianshu"></i></a>
						
					
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 33.333333333333336%"><a href="/">主页</a></li>
		        
					<li style="width: 33.333333333333336%"><a target="_blank" rel="noopener" href="https://zhousiwei.gitee.io/ibooks/">技术笔记</a></li>
		        
					<li style="width: 33.333333333333336%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1"
              class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            

  
    <article id="post-html-css" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/html-css/">html+css</a>
	
    </h1>
  


  
  
<a href="/html-css/" class="archive-article-date">
        <time datetime="2023-02-16T15:16:27.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="HTML基础"><a href="#HTML基础" class="headerlink" title="HTML基础"></a>HTML基础</h1><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/lNkLbVL8qWsay8c3krVL8A">参考与</a></p>
<h2 id="认识WEB"><a href="#认识WEB" class="headerlink" title="认识WEB"></a>认识WEB</h2><p><strong>「网页」</strong>主要是由<code>文字</code>、<code>图像</code>和<code>超链接</code>等元素构成，当然除了这些元素，网页中还可以包括音频、视频以及Flash等。</p>
<p><strong>「浏览器」</strong>是网页显示、运行的平台。</p>
<p><strong>「浏览器内核」</strong>(排版引擎、解释引擎、渲染引擎)</p>
<blockquote>
<p>负责读取网页内容，整理讯息，计算网页的显示方式并显示页面。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">浏览器</th>
<th align="center">内核</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">IE</td>
<td align="center">Trident</td>
<td align="left">IE、猎豹安全、360极速浏览器、百度浏览器</td>
</tr>
<tr>
<td align="left">firefox</td>
<td align="center">Gecko</td>
<td align="left">可惜这几年已经没落了，打开速度慢、升级频繁、猪一样的队友flash、神一样的对手chrome。</td>
</tr>
<tr>
<td align="left">Safari</td>
<td align="center">webkit</td>
<td align="left">现在很多人错误地把 webkit 叫做 chrome内核（即使 chrome内核已经是 blink 了）。苹果感觉像被别人抢了媳妇，都哭晕在厕所里面了。</td>
</tr>
<tr>
<td align="left">chrome</td>
<td align="center">Chromium&#x2F;Blink</td>
<td align="left">在 Chromium 项目中研发 Blink 渲染引擎（即浏览器核心），内置于 Chrome 浏览器之中。Blink 其实是 WebKit 的分支。大部分国产浏览器最新版都采用Blink内核。二次开发</td>
</tr>
<tr>
<td align="left">Opera</td>
<td align="center">blink</td>
<td align="left">现在跟随chrome用blink内核。</td>
</tr>
</tbody></table>
<h2 id="Web标准"><a href="#Web标准" class="headerlink" title="Web标准"></a>Web标准</h2><p><strong>「构成」</strong>👉 <strong>结构标准，表现标准和行为标准</strong></p>
<ul>
<li>结构标准用于对网页元素进行整理和分类(HTML)</li>
<li>表现标准用于设置网页元素的版式、颜色、大小等外观属性(CSS)</li>
<li>行为标准用于对网页模型的定义及交互的编写(JavaScript)</li>
</ul>
<p><strong>「Web标准的优点」</strong>👇</p>
<ul>
<li>易于维护：只需更改CSS文件，就可以改变整站的样式</li>
<li>页面响应快：HTML文档体积变小，响应时间短</li>
<li>可访问性：语义化的HTML（结构和表现相分离的HTML）编写的网页文件，更容易被屏幕阅读器识别</li>
<li>设备兼容性：不同的样式表可以让网页在不同的设备上呈现不同的样式</li>
<li>搜索引擎：语义化的HTML能更容易被搜索引擎解析，提升排名</li>
</ul>
<h2 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 文档类型声明作用就是告诉浏览器使用的那种html的版本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- html 根标签  最大--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- lang属性定义文档的显示语言 en英文 zh-CN中文 fr法语--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 文档的头部 必须设置的标签是title --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- charset设置字符集  --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- charset 常用的值有GB2312\BIG5\GBK和UTF-8 简体、繁体、简繁结合、万国码--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档的标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 文档主体 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>「团队约定大小写」</strong></p>
<ul>
<li>HTML标签名、类名、标签属性和大部分属性值统一用小写</li>
</ul>
<p><strong>「HTML元素标签分类」</strong></p>
<ul>
<li>常规元素(双标签)</li>
<li>空元素(单标签)</li>
</ul>
<h2 id="页面语言lang"><a href="#页面语言lang" class="headerlink" title="页面语言lang"></a>页面语言lang</h2><p>lang指定该html标签内容所用的语言</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;html lang=&quot;en&quot;&gt;  </span><br><span class="line">en 定义语言为英语 zh-CN定义语言为中文</span><br></pre></td></tr></table></figure>

<p><strong>「lang的作用」</strong></p>
<ul>
<li>根据根据lang属性来设定不同语言的css样式，或者字体</li>
<li>告诉搜索引擎做精确的识别</li>
<li>让语法检查程序做语言识别</li>
<li>帮助翻译工具做识别</li>
<li>帮助网页阅读程序做识别</li>
</ul>
<h2 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h2><p><strong>「字符集」</strong>(Character set)是多个字符的集合,计算机要准确的处理各种字符集文字，需要进行字符编码，以便计算机能够识别和存储各种文字。</p>
<ul>
<li>UTF-8是目前最常用的字符集编码方式</li>
<li>让 html 文件是以 UTF-8 编码保存的， 浏览器根据编码去解码对应的html内容。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>「meta viewport的用法」</strong><br>  通常viewport是指视窗、视口。浏览器上(也可能是一个app中的webview)用来显示网页的那部分区域。在移动端和pc端视口是不同的，pc端的视口是浏览器窗口区域，而在移动端有三个不同的视口概念：布局视口、视觉视口、理想视口</p>
<p>  meta有两个属性name 和 http-equiv</p>
<p><strong>name属性的取值</strong></p>
<ul>
<li>keywords(关键字) 告诉搜索引擎，该网页的关键字</li>
<li>description(网站内容描述) 用于告诉搜索引擎，你网站的主要内容。</li>
<li>viewport(移动端的窗口)</li>
<li>robots(定义搜索引擎爬虫的索引方式) robots用来告诉爬虫哪些页面需要索引，哪些页面不需要索引</li>
<li>author(作者)</li>
<li>generator(网页制作软件）</li>
<li>copyright(版权)</li>
</ul>
<p><strong>http-equiv有以下参数</strong></p>
<p>http-equiv相当于http的文件头作用，它可以向浏览器传回一些有用的信息，以帮助正确和精确地显示网页内容</p>
<ul>
<li>content-Type 设定网页字符集(Html4用法，不推荐)</li>
<li>Expires(期限) ,可以用于设定网页的到期时间。一旦网页过期，必须到服务器上重新传输。</li>
<li>Pragma(cache模式),是用于设定禁止浏览器从本地机的缓存中调阅页面内容，设定后一旦离开网页就无法从Cache中再调出</li>
<li>Refresh(刷新),自动刷新并指向新页面。</li>
<li>cache-control（请求和响应遵循的缓存机制）</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;什么是视口&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;视口(Viewport)是移动Web开发中一个非常重要的概念，最早是由苹果公司在推出iPhone手机时发明的，其目的是为了让iPhone的小屏幕尽可能完整显示整个网页。通过设置视口，不管网页原始的分辨率尺寸有多大，都能将其缩小显示在手机浏览器上，这样保证网页在手机上看起来更像在桌面浏览器中的样子。在苹果公司引入视口的概念后，大多数的移动开发者也都认同了这个做法。&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot;</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="标题、段落、换行标签"><a href="#标题、段落、换行标签" class="headerlink" title="标题、段落、换行标签"></a>标题、段落、换行标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题标签1 块<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span></span><br><span class="line">    标题6</span><br><span class="line"><span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    段落 块 </span><br><span class="line">    段落之间有一个打的空隙</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span> 换行即回车</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="文本的格式化"><a href="#文本的格式化" class="headerlink" title="文本的格式化"></a>文本的格式化</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>加粗(语义更强烈)<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">b</span>&gt;</span>加粗<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">em</span>&gt;</span>倾斜（加粗语义更强烈）<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span>&gt;</span>倾斜<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">del</span>&gt;</span>删除线（加粗语义更强烈<span class="tag">&lt;/<span class="name">del</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">s</span>&gt;</span>删除不赞成使用。使用 del 代替。</span><br><span class="line">    在 HTML 4 中用于定义删除线文本。</span><br><span class="line">  <span class="tag">&lt;/<span class="name">s</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ins</span>&gt;</span>下划线加粗（语义更强烈）<span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">u</span>&gt;</span>不赞成使用。使用样式（style）代替。<span class="tag">&lt;/<span class="name">u</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="div和span"><a href="#div和span" class="headerlink" title="div和span"></a>div和span</h2><p>div和span是没有语义的他们就是一个盒子</p>
<p>span是行内元素</p>
<h2 id="img图像"><a href="#img图像" class="headerlink" title="img图像"></a>img图像</h2><p>src：图像URL,是必须的，它用于指定文件的路径和文件名</p>
<p>alt：图片为找时显示的文本（替换文本）搜索引擎会根据alt中的内容来识别图片</p>
<p>​	如果不写搜索引擎无法找到</p>
<p>title：提示文本鼠标悬停图像时显示</p>
<p>width:宽度</p>
<p>height:高度</p>
<p><img src="/html-css/640-1676560993601455.png" alt="图片"></p>
<p><code>图片格式</code></p>
<p>jpeg(jpg)</p>
<ul>
<li>支持的颜色比较丰富，不支持透明效果，不支持动图	<ul>
<li>一般用来显示照片</li>
</ul>
</li>
</ul>
<p>gif </p>
<ul>
<li>支持颜色比较少，支持简单的透明，支持动图<ul>
<li>颜色一样的图片，动图</li>
</ul>
</li>
</ul>
<p><code>png</code></p>
<ul>
<li>支持颜色丰富，支持复杂透明，不支持动图<ul>
<li>颜色复杂，复杂透明（专门为网页而生的）</li>
</ul>
</li>
</ul>
<p>webp</p>
<ul>
<li>这种格式是谷歌新推出的专门用来表示网页中图片的一种格式</li>
<li>他具备其他图片格式的所有优点，而且文件小</li>
<li>兼容差</li>
</ul>
<p>base64</p>
<ul>
<li>将图片使用base64编码，这样可以将图片转化为字符串，通过字符的形式来引入图片<ul>
<li>一般都是一些需要和网页一起加载的图片才会使用base64</li>
</ul>
</li>
</ul>
<p>效果一样用小的</p>
<p>效果不一样，用效果好的</p>
<h2 id="a超链接标签"><a href="#a超链接标签" class="headerlink" title="a超链接标签"></a>a超链接标签</h2><p>href：必须属性要跳转的url地址或文件路径</p>
<p>target：默认是_self(当前窗口打开)    _blank新窗口打开</p>
<p>下载链接：地址是文件 .exe或zip等形式</p>
<p>锚点链接: a &#x3D;&gt; #name 	要跳转的标签 &#x3D;&gt;	id &#x3D; name</p>
<p>锚点链接和文件链接联合使用url&#x2F;index.html#id</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">href</td>
<td align="left">用于指定链接目标的url地址，（必须属性）当为标签应用href属性时，它就具有了超链接的功能</td>
</tr>
<tr>
<td align="left">target</td>
<td align="left">用于指定链接页面的打开方式，其取值有_self和_blank两种，其中_self为默认值，_blank为在新窗口中打开方式。</td>
</tr>
</tbody></table>
<p>一句话概括:<strong>src 是引入资源的 href 是跳转url的</strong></p>
<ol>
<li>src用于替换当前元素，href用于在当前文档和引用资源之间确立联系。</li>
<li>src是source的缩写，指向外部资源的位置，指向的内容将会嵌入到文档中当前标签所在位置；在请求src资源时会将其指向的资源下载并应用到文档内，例如js脚本，img图片和frame等元素。当浏览器解析到该元素时，会暂停其他资源的下载和处理，直到将该资源加载、编译、执行完毕，图片和框架等元素也如此，类似于将所指向资源嵌入当前标签内。这也是为什么将js脚本放在底部而不是头部。</li>
<li>href是Hypertext Reference的缩写，指向网络资源所在位置，建立和当前元素（锚点）或当前文档（链接）之间的链接。如果我们在文档中添加那么浏览器会识别该文档为css文件，就会并行下载资源并且不会停止对当前文档的处理。这也是为什么建议使用link方式来加载css，而不是使用@import方式。</li>
</ol>
<p><strong>注意：</strong></p>
<ol>
<li>外部链接 需要添加 http:&#x2F;&#x2F; <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></li>
<li>内部链接 直接链接内部页面名称即可 比如 &lt; a href&#x3D;”index.html”&gt; 首页</li>
<li>如果当时没有确定链接目标时，通常将链接标签的href属性值定义为“#”(即href&#x3D;”#”)，表示该链接暂时为一个空链接。</li>
<li>不仅可以创建文本超链接，在网页中各种网页元素，如图像、表格、音频、视频等都可以添加超链接。</li>
</ol>
<h2 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h2><p><img src="/html-css/image-20220605002953244-1676560993601456.png" alt="image-20220605002953244"></p>
<p><strong>什么是XHTML</strong></p>
<ul>
<li>XHTML 指<strong>「可扩展超文本标签语言」</strong>（EXtensible HyperText Markup Language）。</li>
<li>XHTML 的目标是取代 HTML。</li>
<li>XHTML 与 HTML 4.01 几乎是相同的。</li>
<li>XHTML 是更严格更纯净的 HTML 版本。</li>
<li>XHTML 是作为一种 XML 应用被重新定义的 HTML,是严格版本的HTML。例如它要求标签必须小写，标签必须被正确关闭，标签顺序必须正确排列，对于属性都必须使用双引号等。</li>
<li>XHTML 是一个 W3C 标准。</li>
</ul>
<p><strong>写HTML代码时应注意什么？</strong></p>
<ul>
<li>尽可能少的使用无语义的标签div和span；</li>
<li>在语义不明显时，既可以使用div或者p时，尽量用p, 因为p在默认情况下有上下间距，对兼容特殊终端有利；</li>
<li>不要使用纯样式标签，如：b、font、u等，改用css设置。</li>
<li>需要强调的文本，可以包含在strong或者em标签中（浏览器预设样式，能用CSS指定就不用他们），strong默认样式是加粗（不要用b），em是斜体（不用i）；</li>
<li>使用表格时，标题要用caption，表头用thead，主体部分用tbody包围，尾部用tfoot包围。表头和一般单元格要区分开，表头用th，单元格用td；</li>
<li>表单域要用fieldset标签包起来，并用legend标签说明表单的用途；</li>
<li>每个input标签对应的说明文本都需要使用label标签，并且通过为input设置id属性，在lable标签中设置for来让说明文本和相对应的input关联起来。</li>
</ul>
<h2 id="表格标签"><a href="#表格标签" class="headerlink" title="表格标签"></a>表格标签</h2><p>table定义表格标签</p>
<p>caption：表格标题</p>
<p><strong>th:表格头(加粗居中)</strong></p>
<p>thead：表格页眉</p>
<p><strong>tbody：表格主体</strong></p>
<p>tfoot：表格页脚</p>
<p><strong>tr：行</strong></p>
<p><strong>td：单元格</strong></p>
<p>table、tr、td，他们是创建表格的基本标签，缺一不可</p>
<p><strong>表头单元格标签th</strong>:一般表头单元格位于表格的第一行或第一列，并且文本加粗居中,只需用表头标签<th></th>替代相应的单元格标签<td></td>即可。</p>
<p><img src="/html-css/640-16735802460213-1676560993601457.png" alt="图片"></p>
<p><code>属性</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">边框border</span><br><span class="line">对齐方式 align = &quot;left、center、right&quot;</span><br><span class="line">cellspaing内容与单元格边的距离</span><br><span class="line">cellpacing单元格间的距离</span><br><span class="line">宽度width</span><br><span class="line">高度height</span><br></pre></td></tr></table></figure>

<p><img src="/html-css/640-16735803195086-1676560993602458.png" alt="图片"></p>
<p><strong>「4. 合并单元格」</strong>,合并的顺序我们按照  先上 后下   先左  后右 的顺序 ,合并完之后需要删除多余的单元格。</p>
<ul>
<li>跨行合并：rowspan&#x3D;”合并单元格的个数”</li>
<li>跨列合并：colspan&#x3D;”合并单元格的个数”</li>
</ul>
<p><strong>「5. 总结表格」</strong></p>
<table>
<thead>
<tr>
<th align="left">标签名</th>
<th align="left">定义</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><table></table></td>
<td align="left">表格标签</td>
<td align="left">就是一个四方的盒子</td>
</tr>
<tr>
<td align="left"></td></tr><tr></tr>
<td align="left">表格行标签</td>
<td align="left">行标签要再table标签内部才有意义</td>

<tr>
<td align="left"></td><td></td>
<td align="left">单元格标签</td>
<td align="left">单元格标签是个容器级元素，可以放任何东西</td>
</tr>
<tr>
<td align="left"><th></th></td>
<td align="left">表头单元格标签</td>
<td align="left">它还是一个单元格，但是里面的文字会居中且加粗</td>
</tr>
<tr>
<td align="left"><caption></caption></td>
<td align="left">表格标题标签</td>
<td align="left">表格的标题，跟着表格一起走，和表格居中对齐</td>
</tr>
<tr>
<td align="left">clospan 和 rowspan</td>
<td align="left">合并属性</td>
<td align="left">用来合并单元格的</td>
</tr>
</tbody></table>
<p><strong>「6. 表格划分结构」</strong></p>
<p>  对于比较复杂的表格，表格的结构也就相对的复杂了，所以又将表格分割成三个部分：题头、正文和脚注。而这三部分分别用:thead,tbody,tfoot来标注， 这样更好的分清表格结构。</p>
<p><strong>注意：</strong></p>
<ol>
<li>1.<thead></thead>：用于定义表格的头部。用来放标题之类的东西。<thead> 内部必须拥有<tr> 标签！</tr></thead></li>
<li><tbody></tbody>：用于定义表格的主体。放数据本体 。</li>
<li><tfoot></tfoot>放表格的脚注之类。</li>
<li>以上标签都是放到table标签中</li>
</ol>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>布局</p>
<p>分为无序、有序、自定义列表</p>
<h4 id="无序"><a href="#无序" class="headerlink" title="无序"></a>无序</h4><ul>
<li><ul></ul>中只能嵌套</li><li></li>，直接在<ul></ul>标签中输入其他标签或者文字的做法是不被允许的。

<li></li><li>与</li>之间相当于一个容器，可以容纳所有元素。
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="有序"><a href="#有序" class="headerlink" title="有序"></a>有序</h4><ol>标签中的type属性值为排序的序列号，不添加type属性时，有序列表默认从数字1开始排序。


<p>常用的type属性值分别为是1，a，A，i，I</p>
<ol reversed="reversed">中的reversed属性能够让有序列表中的序列倒序排列。


<ol start="3">中的start属性值为3，有序列表中的第一个序列号将从3开始排列。


<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">属性type设置序号类型默认是数值</span><br><span class="line">属性start设置序号的起始值</span><br></pre></td></tr></table></figure>

<h3 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>被描述的内容<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>描述上一个dt<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><p>收集数据将其提交给服务器或后台</p>
<p>表单由表单域、表单元素、提示信息组成</p>
<p><strong>表单控件：</strong><br> 包含了具体的表单功能项，如单行文本输入框、密码输入框、复选框、提交按钮、重置按钮等。<br><strong>提示信息：</strong><br> 一个表单中通常还需要包含一些说明性的文字，提示用户进行填写和操作。<br><strong>表单域：</strong><br> 它相当于一个容器，用来容纳所有的表单控件和提示信息，可以通过他定义处理表单数据所用程序的url地址，以及数据提交到服务器的方法。如果不定义表单域，表单中的数据就无法传送到后台服务器。</p>
<h3 id="表单域即被标签包裹的"><a href="#表单域即被标签包裹的" class="headerlink" title="表单域即被标签包裹的"></a>表单域即被<form>标签包裹的</form></h3><ul>
<li><p>收集的用户信息怎么传递给服务器？</p>
</li>
<li><ul>
<li>通过form表单域</li>
</ul>
</li>
<li><p>目的：</p>
</li>
<li><ul>
<li>在HTML中，form标签被用于定义表单域，以实现用户信息的收集和传递，form中的所有内容都会被提交给服务器。</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;url地址&quot; method=&quot;提交方式&quot; name=&quot;表单名称&quot;&gt;</span><br><span class="line">  各种表单控件</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p><strong>常用属性：</strong></p>
<ul>
<li>每个表单都应该有自己表单域。后面学 ajax 后台交互的时候，必须需要form表单域。</li>
</ul>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">属性值</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">action</td>
<td align="left">url地址</td>
<td align="left">用于指定接收并处理表单数据的服务器程序的url地址。</td>
</tr>
<tr>
<td align="left">method</td>
<td align="left">get&#x2F;post</td>
<td align="left">用于设置表单数据的提交方式，其取值为get或post。</td>
</tr>
<tr>
<td align="left">name</td>
<td align="left">名称</td>
<td align="left">用于指定表单的名称，以区分同一个页面中的多个表单。</td>
</tr>
</tbody></table>
<p><strong>GET 和 POST 的区别</strong></p>
<ul>
<li>GET在浏览器回退时是无害的，而POST会再次提交请求。</li>
<li>GET请求会被浏览器主动cache，而POST不会，除非手动设置。</li>
<li>GET请求只能进行url编码，而POST支持多种编码方式。</li>
<li>GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。</li>
<li>GET请求大小一般是(1024字节)，http协议并没有限制，而与服务器，操作系统有关，POST理论上来说没有大小限制，http协议规范也没有进行大小限制，但实际上post所能传递的数据量根据取决于服务器的设置和内存大小。</li>
<li>对参数的数据类型，GET只接受ASCII字符，而POST没有限制。</li>
<li>GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。</li>
</ul>
<p><strong>团队约定：</strong></p>
<ul>
<li>元素属性值使用双引号语法</li>
<li>元素属性值可以写上的都写上</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">推荐</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h3><ul>
<li>input输入表单</li>
<li>select下拉表单 option</li>
<li>textarea文本域元素</li>
</ul>
<h4 id="input"><a href="#input" class="headerlink" title="input"></a>input</h4><ul>
<li>input 输入的意思</li>
<li><input>标签为单标签</li>
<li>type属性设置不同的属性值用来指定不同的控件类型</li>
<li>除了type属性还有别的属性</li>
</ul>
<p><code>属性</code></p>
<p>常用属性</p>
<p><img src="/html-css/640-167358070479112-1676560993602459.png" alt="图片"></p>
<h4 id="type属性值"><a href="#type属性值" class="headerlink" title="type属性值"></a><code>type</code>属性值</h4><table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>button</code></td>
<td align="left">定义可点击的按钮（通常与 JavaScript 一起使用来启动脚本）。</td>
</tr>
<tr>
<td align="left"><code>checkbox</code></td>
<td align="left">定义复选框。</td>
</tr>
<tr>
<td align="left">color</td>
<td align="left">定义拾色器。</td>
</tr>
<tr>
<td align="left">date</td>
<td align="left">定义 date 控件（包括年、月、日，不包括时间）。</td>
</tr>
<tr>
<td align="left">datetime</td>
<td align="left">定义 date 和 time 控件（包括年、月、日、时、分、秒、几分之一秒，基于 UTC 时区）。</td>
</tr>
<tr>
<td align="left">datetime-local</td>
<td align="left">定义 date 和 time 控件（包括年、月、日、时、分、秒、几分之一秒，不带时区）。</td>
</tr>
<tr>
<td align="left"><code>email</code></td>
<td align="left">定义用于 e-mail 地址的字段。</td>
</tr>
<tr>
<td align="left"><code>file</code></td>
<td align="left">定义文件选择字段和 “浏览…” 按钮，供文件上传。</td>
</tr>
<tr>
<td align="left"><code>hidden</code></td>
<td align="left">定义隐藏输入字段。</td>
</tr>
<tr>
<td align="left"><code>image</code></td>
<td align="left">定义图像作为提交按钮。</td>
</tr>
<tr>
<td align="left">month</td>
<td align="left">定义 month 和 year 控件（不带时区）。</td>
</tr>
<tr>
<td align="left">number</td>
<td align="left">定义用于输入数字的字段。</td>
</tr>
<tr>
<td align="left"><code>password</code></td>
<td align="left">定义密码字段（字段中的字符会被遮蔽）。</td>
</tr>
<tr>
<td align="left"><code>radio</code></td>
<td align="left">定义单选按钮。</td>
</tr>
<tr>
<td align="left"><code>range</code></td>
<td align="left">定义用于精确值不重要的输入数字的控件（比如 slider 控件）。</td>
</tr>
<tr>
<td align="left"><code>reset</code></td>
<td align="left">定义重置按钮（重置所有的表单值为默认值）。</td>
</tr>
<tr>
<td align="left">search</td>
<td align="left">定义用于输入搜索字符串的文本字段。</td>
</tr>
<tr>
<td align="left"><code>submit</code></td>
<td align="left">定义提交按钮。</td>
</tr>
<tr>
<td align="left"><code>tel</code></td>
<td align="left">定义用于输入电话号码的字段。</td>
</tr>
<tr>
<td align="left"><code>text</code></td>
<td align="left">默认。定义一个单行的文本字段（默认宽度为 20 个字符）。</td>
</tr>
<tr>
<td align="left">time</td>
<td align="left">定义用于输入时间的控件（不带时区）。</td>
</tr>
<tr>
<td align="left">url</td>
<td align="left">定义用于输入 URL 的字段。</td>
</tr>
<tr>
<td align="left">week</td>
<td align="left">定义 week 和 year 控件（不带时区）。</td>
</tr>
</tbody></table>
<p>高亮为常用的</p>
<h4 id="其他属性"><a href="#其他属性" class="headerlink" title="其他属性"></a>其他属性</h4><p><img src="/html-css/image-20220605221053812-1676560993602460.png" alt="image-20220605221053812"></p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="center">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-accept.html">accept</a></td>
<td align="center">audio&#x2F;* video&#x2F;* image&#x2F;* <em>MIME_type</em></td>
<td align="left">规定通过文件上传来提交的文件的类型。 (只针对type&#x3D;”file”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-align.html">align</a></td>
<td align="center">left right top middle bottom</td>
<td align="left">HTML5已废弃，不赞成使用。规定图像输入的对齐方式。 (只针对type&#x3D;”image”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-alt.html"><code>alt</code></a></td>
<td align="center"><em>text</em></td>
<td align="left">定义图像输入的替代文本。 (只针对type&#x3D;”image”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-autocomplete.html">autocomplete</a></td>
<td align="center">on off</td>
<td align="left">autocomplete 属性规定 <input> 元素输入字段是否应该启用自动完成功能。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-autofocus.html">autofocus</a></td>
<td align="center">autofocus</td>
<td align="left">属性规定当页面加载时 <input> 元素应该自动获得焦点。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-checked.html"><code>checked</code></a></td>
<td align="center">checked</td>
<td align="left">checked 属性规定在页面加载时应该被预先选定的 <input> 元素。 (只针对 type&#x3D;”checkbox” 或者 type&#x3D;”radio”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-disabled.html"><code>disabled</code></a></td>
<td align="center">disabled</td>
<td align="left">disabled 属性规定应该禁用的 <input> 元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-form.html"><code>form</code></a></td>
<td align="center"><em>form_id</em></td>
<td align="left">form 属性规定 <input> 元素所属的一个或多个表单。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-formaction.html">formaction</a></td>
<td align="center"><em>URL</em></td>
<td align="left">属性规定当表单提交时处理输入控件的文件的 URL。(只针对 type&#x3D;”submit” 和 type&#x3D;”image”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-formenctype.html">formenctype</a></td>
<td align="center">application&#x2F;x-www-form-urlencoded multipart&#x2F;form-data text&#x2F;plain</td>
<td align="left">属性规定当表单数据提交到服务器时如何编码(只适合 type&#x3D;”submit” 和 type&#x3D;”image”)。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-formmethod.html">formmethod</a></td>
<td align="center">get post</td>
<td align="left">定义发送表单数据到 action URL 的 HTTP 方法。 (只适合 type&#x3D;”submit” 和 type&#x3D;”image”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-formnovalidate.html">formnovalidate</a></td>
<td align="center">formnovalidate</td>
<td align="left">formnovalidate 属性覆盖 <form> 元素的 novalidate 属性。</form></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-formtarget.html">formtarget</a></td>
<td align="center">_blank _self _parent _top <em>framename</em></td>
<td align="left">规定表示提交表单后在哪里显示接收到响应的名称或关键词。(只适合 type&#x3D;”submit” 和 type&#x3D;”image”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-height.html">height</a></td>
<td align="center"><em>pixels</em></td>
<td align="left">规定 <input>元素的高度。(只针对type&#x3D;”image”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-list.html">list</a></td>
<td align="center"><em>datalist_id</em></td>
<td align="left">属性引用 <datalist> 元素，其中包含 </datalist><input> 元素的预定义选项。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-max.html"><code>max</code></a></td>
<td align="center"><em>number date</em></td>
<td align="left">属性规定 <input> 元素的最大值。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-maxlength.html"><code>maxlength</code></a></td>
<td align="center"><em>number</em></td>
<td align="left">属性规定 <input> 元素中允许的最大字符数。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-min.html"><code>min</code></a></td>
<td align="center"><em>number date</em></td>
<td align="left">属性规定 <input>元素的最小值。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-multiple.html">multiple</a></td>
<td align="center">multiple</td>
<td align="left">属性规定允许用户输入到 <input> 元素的多个值。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-name.html"><code>name</code></a></td>
<td align="center"><em>text</em></td>
<td align="left">name 属性规定 <input> 元素的名称。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-pattern.html">pattern</a></td>
<td align="center"><em>regexp</em></td>
<td align="left">pattern 属性规定用于验证 <input> 元素的值的正则表达式。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-placeholder.html"><code>placeholder</code></a></td>
<td align="center"><em>text</em></td>
<td align="left">placeholder 属性规定可描述输入 <input> 字段预期值的简短的提示信息 。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-readonly.html"><code>readonly</code></a></td>
<td align="center">readonly</td>
<td align="left">readonly 属性规定输入字段是只读的。</td>
</tr>
<tr>
<td align="left"><code>required</code></td>
<td align="center">required</td>
<td align="left">属性规定必需在提交表单之前填写输入字段。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-size.html"><code>size</code></a></td>
<td align="center"><em>number</em></td>
<td align="left">size 属性规定以字符数计的 <input> 元素的可见宽度。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-src.html"><code>src</code></a></td>
<td align="center"><em>URL</em></td>
<td align="left">src 属性规定显示为提交按钮的图像的 URL。 (只针对 type&#x3D;”image”)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-step.html">step</a></td>
<td align="center"><em>number</em></td>
<td align="left">step 属性规定 <input> 元素的合法数字间隔。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-value.html"><code>value</code></a></td>
<td align="center"><em>text</em></td>
<td align="left">指定 <input> 元素 value 的值。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.runoob.com/tags/att-input-width.html">width</a></td>
<td align="center"><em>pixels</em></td>
<td align="left">width 属性规定 <input> 元素的宽度。 (只针对type&#x3D;”image”)</td>
</tr>
</tbody></table>
<h5 id="label"><a href="#label" class="headerlink" title="label"></a>label</h5><p><label> 标签为 input 元素定义标注（标记）。</label></p>
<p><label> 标签的 for 属性应当与相关元素的 id 属性相同。</label></p>
<p><strong>作用：</strong>用于绑定一个表单元素, 当点击label标签的时候, 被绑定的表单元素就会获得输入焦点。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&#x27;nan&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;radio&#x27;</span> <span class="attr">id</span>=<span class="string">&#x27;nan&#x27;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>作用：</strong>用于绑定一个表单元素, 当点击label标签的时候, 被绑定的表单元素就会获得输入焦点。</p>
<p><strong>如何绑定元素呢</strong></p>
<ul>
<li>第一种用法就是用label标签直接包含input表单， 适合单个表单选择</li>
<li>第二种用法 for 属性规定 label 与哪个表单元素绑定(通过id)。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">第一种</span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span> 用户名： </span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;usename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line">第二种</span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="select"><a href="#select" class="headerlink" title="select"></a>select</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>选项一<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/html-css/image-20220605222602588-1676560993602461.png" alt="image-20220605222602588"></p>
<h5 id="textarea"><a href="#textarea" class="headerlink" title="textarea"></a>textarea</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span> = <span class="string">&#x27;&#x27;</span> <span class="attr">cols</span>=<span class="string">&#x27;&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/html-css/image-20220605223021508-1676560993602462.png" alt="image-20220605223021508"></p>
<p><strong>文本框和文本域区别</strong></p>
<table>
<thead>
<tr>
<th align="left">表单</th>
<th align="center">名称</th>
<th align="center">区别</th>
<th align="right">默认值显示</th>
<th align="right">用于场景</th>
</tr>
</thead>
<tbody><tr>
<td align="left">input type&#x3D;”text”</td>
<td align="center">文本框</td>
<td align="center">只能显示一行文本</td>
<td align="right">单标签，通过value显示默认值</td>
<td align="right">用户名、昵称、密码等</td>
</tr>
<tr>
<td align="left">textarea</td>
<td align="center">文本域</td>
<td align="center">可以显示多行文本</td>
<td align="right">双标签，默认值写到标签中间</td>
<td align="right">留言板</td>
</tr>
</tbody></table>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>q和blockquote</p>
<h3 id="q短引用"><a href="#q短引用" class="headerlink" title="q短引用"></a>q短引用</h3><p>HTML <em><q></q></em> 元素定义<em>短的引用</em></p>
<p>浏览器通常会为 <q> 元素包围<em>引号</em>。</q></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>WWF 的目标是：<span class="tag">&lt;<span class="name">q</span>&gt;</span>构建人与自然和谐共存的世界。<span class="tag">&lt;/<span class="name">q</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="blockquote长引用"><a href="#blockquote长引用" class="headerlink" title="blockquote长引用"></a>blockquote长引用</h3><p>浏览器通常会对 <blockquote> 元素进行<em>缩进</em>处理。</blockquote></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>以下内容引用自 WWF 的网站：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">cite</span>=<span class="string">&quot;http://www.worldwildlife.org/who/index.html&quot;</span>&gt;</span></span><br><span class="line">五十年来，WWF 一直致力于保护自然界的未来。</span><br><span class="line">世界领先的环保组织，WWF 工作于 100 个国家，</span><br><span class="line">并得到美国一百二十万会员及全球近五百万会员的支持。</span><br><span class="line"><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="缩略词abbr"><a href="#缩略词abbr" class="headerlink" title="缩略词abbr"></a>缩略词abbr</h2><p>HTML <em><abbr></abbr></em> 元素定义<em>缩写</em>或首字母缩略语。</p>
<p>对缩写进行标记能够为浏览器、翻译系统以及搜索引擎提供有用的信息。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">abbr</span> <span class="attr">title</span>=<span class="string">&quot;World Health Organization&quot;</span>&gt;</span>WHO<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span> 成立于 1948 年。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="用于定义的-HTML"><a href="#用于定义的-HTML" class="headerlink" title="用于定义的 HTML "></a>用于定义的 HTML <dfn></dfn></h2><p>HTML <em><dfn></dfn></em> 元素定义项目或缩写的<em>定义</em>。</p>
<p><dfn> 的用法，按照 HTML5 标准中的描述，有点复杂：</dfn></p>
<ol>
<li>如果设置了 <dfn> 元素的 title 属性，则定义项目：</dfn></li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">dfn</span> <span class="attr">title</span>=<span class="string">&quot;World Health Organization&quot;</span>&gt;</span>WHO<span class="tag">&lt;/<span class="name">dfn</span>&gt;</span> 成立于 1948 年。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>如果 <dfn> 元素包含具有标题的 <abbr> 元素，则 title 定义项目：</abbr></dfn></li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">dfn</span>&gt;</span><span class="tag">&lt;<span class="name">abbr</span> <span class="attr">title</span>=<span class="string">&quot;World Health Organization&quot;</span>&gt;</span>WHO<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span><span class="tag">&lt;/<span class="name">dfn</span>&gt;</span> 成立于 1948 年。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>否则，<dfn> 文本内容即是项目，并且父元素包含定义。</dfn></li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">dfn</span>&gt;</span>WHO<span class="tag">&lt;/<span class="name">dfn</span>&gt;</span> World Health Organization 成立于 1948 年。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="用于联系信息的-HTML"><a href="#用于联系信息的-HTML" class="headerlink" title="用于联系信息的 HTML "></a>用于联系信息的 HTML <address></address></h2><p>HTML <em><address></address></em> 元素定义文档或文章的联系信息（作者&#x2F;拥有者）。</p>
<p>此元素通常以<em>斜体</em>显示。大多数浏览器会在此元素前后添加折行。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">Written by Donald Duck.<span class="tag">&lt;<span class="name">br</span>&gt;</span> </span><br><span class="line">Visit us at:<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">Example.com<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">Box 564, Disneyland<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">USA</span><br><span class="line"><span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="用于著作标题的-HTML"><a href="#用于著作标题的-HTML" class="headerlink" title="用于著作标题的 HTML "></a>用于著作标题的 HTML <cite></cite></h2><p>HTML <em><cite></cite></em> 元素定义<em>著作的标题</em>。</p>
<p>浏览器通常会以斜体显示 <cite> 元素。</cite></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">cite</span>&gt;</span>The Scream<span class="tag">&lt;/<span class="name">cite</span>&gt;</span> by Edward Munch. Painted in 1893.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="用于双向重写的-HTML"><a href="#用于双向重写的-HTML" class="headerlink" title="用于双向重写的 HTML "></a>用于双向重写的 HTML <bdo></bdo></h2><p>HTML <em><bdo></bdo></em> 元素定义双流向覆盖（bi-directional override）。</p>
<p><bdo> 元素用于覆盖当前文本方向：</bdo></p>
<p>必须属性dir否者无效</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bdo</span> <span class="attr">dir</span>=<span class="string">&quot;rtl&quot;</span>&gt;</span>This text will be written from right to left<span class="tag">&lt;/<span class="name">bdo</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="元素的分类"><a href="#元素的分类" class="headerlink" title="元素的分类"></a>元素的分类</h2><p>大多数 HTML 元素被定义为块级元素或内联元素。</p>
<p>编者注：“块级元素”译为 block level element，“内联元素”译为 inline element。</p>
<p>块级元素在浏览器显示时，通常会以新行来开始（和结束）。</p>
<p>例子：</p><h1>, <p>, <ul>, <table></table></ul></p>
<p>HTML 内联元素</p>
<p>内联元素在显示时通常不会以新行开始。</p>
<p>例子：<b>, <td>, <a>, <img></a></td></b></p>
<p>HTML <div> 元素</div></p>
<p>HTML <div> 元素是块级元素，它是可用于组合其他 HTML 元素的容器。</div></p>
<div> 元素没有特定的含义。除此之外，由于它属于块级元素，浏览器会在其前后显示折行。


<p>如果与 CSS 一同使用，<div> 元素可用于对大的内容块设置样式属性。</div></p>
<div> 元素的另一个常见的用途是文档布局。它取代了使用表格定义布局的老式方法。使用 <table> 元素进行文档布局不是表格的正确用法。<table> 元素的作用是显示表格化的数据。


<p>HTML <span> 元素</span></p>
<p>HTML <span> 元素是内联元素，可用作文本的容器。</span></p>
<p><span> 元素也没有特定的含义。</span></p>
<p>当与 CSS 一同使用时，<span> 元素可用于为部分文本设置样式属性。</span></p>
<h2 id="内联框架-iframe-用于在网页内显示网页。"><a href="#内联框架-iframe-用于在网页内显示网页。" class="headerlink" title="内联框架(iframe 用于在网页内显示网页。)"></a>内联框架(<strong>iframe 用于在网页内显示网页。</strong>)</h2><p>iframe是一种框架，也是一种很常见的网页嵌入方式。</p>
<p><strong>「iframe的优点」</strong></p>
<ul>
<li>iframe能够原封不动的把嵌入的网页展现出来。</li>
<li>如果有多个网页引用iframe，那么你只需要修改iframe的内容，就可以实现调用的每一个页面内容的更改，方便快捷。</li>
<li>网页如果为了统一风格，头部和版本都是一样的，就可以写成一个页面，用iframe来嵌套，可以增加代码的可重用。</li>
<li>如果遇到加载缓慢的第三方内容如图标和广告，这些问题可以由iframe来解决。</li>
</ul>
<p><strong>「iframe的缺点」</strong></p>
<ul>
<li>会产生很多页面，不容易管理。</li>
<li>iframe框架结构有时会让人感到迷惑，如果框架个数多的话，可能会出现上下、左右滚动条，会分散访问者的注意力，用户体验度差。</li>
<li>代码复杂，无法被一些搜索引擎索引到，这一点很关键，现在的搜索引擎爬虫还不能很好的处理iframe中的内容，所以使用iframe会不利于搜索引擎优化。</li>
<li>很多的移动设备（PDA 手机）无法完全显示框架，设备兼容性差。</li>
<li>iframe框架页面会增加服务器的http请求，对于大型网站是不可取的。</li>
<li>现在基本上都是用Ajax来代替iframe，所以iframe已经渐渐的退出了前端开发。</li>
</ul>
<h3 id="添加-iframe-的语法"><a href="#添加-iframe-的语法" class="headerlink" title="添加 iframe 的语法"></a>添加 iframe 的语法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;URL&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><em>URL</em> 指向隔离页面的位置。</p>
<h3 id="Iframe-删除边框"><a href="#Iframe-删除边框" class="headerlink" title="Iframe - 删除边框"></a>Iframe - 删除边框</h3><p>frameborder 属性规定是否显示 iframe 周围的边框。</p>
<p>设置属性值为 “0” 就可以移除边框：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;demo_iframe.htm&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用-iframe-作为链接的目标"><a href="#使用-iframe-作为链接的目标" class="headerlink" title="使用 iframe 作为链接的目标"></a>使用 iframe 作为链接的目标</h3><p>iframe 可用作链接的目标（target）。</p>
<p>链接的 target 属性必须引用 iframe 的 name 属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;demo_iframe.htm&quot;</span> <span class="attr">name</span>=<span class="string">&quot;iframe_a&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.w3school.com.cn&quot;</span> <span class="attr">target</span>=<span class="string">&quot;iframe_a&quot;</span>&gt;</span>W3School.com.cn<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="头部元素"><a href="#头部元素" class="headerlink" title="头部元素"></a>头部元素<head></head></h2><p>其中包含的元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>、<span class="tag">&lt;<span class="name">base</span>&gt;</span>、<span class="tag">&lt;<span class="name">link</span>&gt;</span>、<span class="tag">&lt;<span class="name">meat</span>&gt;</span>、<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml">、<span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure>



<ul>
<li>title标签定义文档的标题<ul>
<li>定义浏览器工具栏中的标题</li>
<li>提供页面被添加到收藏夹时显示的标题</li>
<li>显示在搜索引擎结果中的页面标题</li>
</ul>
</li>
<li>base 标签为页面上的所有链接规定默认地址或默认目标</li>
<li>link 标签定义文档与外部资源之间的关系</li>
<li>style标签用于为 HTML 文档定义样式信息。</li>
</ul>
<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><h4 id="HTML5-语义元素"><a href="#HTML5-语义元素" class="headerlink" title="HTML5 语义元素"></a>HTML5 语义元素</h4><table>
<thead>
<tr>
<th>header</th>
<th>定义文档或节的页眉</th>
</tr>
</thead>
<tbody><tr>
<td>nav</td>
<td>定义导航链接的容器</td>
</tr>
<tr>
<td>section</td>
<td>定义文档中的节</td>
</tr>
<tr>
<td>article</td>
<td>定义独立的自包含文章</td>
</tr>
<tr>
<td>aside</td>
<td>定义内容之外的内容（比如侧栏）</td>
</tr>
<tr>
<td>footer</td>
<td>定义文档或节的页脚</td>
</tr>
<tr>
<td>details</td>
<td>定义额外的细节</td>
</tr>
<tr>
<td>summary</td>
<td>定义 details 元素的标题</td>
</tr>
</tbody></table>
<h2 id="音视频标签"><a href="#音视频标签" class="headerlink" title="音视频标签"></a>音视频标签</h2><h3 id="音频audio"><a href="#音频audio" class="headerlink" title="音频audio"></a>音频audio</h3><p>向页面引入一个外部的音频文件，浏览器默认用户不能控制音频文件的停播</p>
<p><code>属性</code></p>
<ul>
<li><p>controls</p>
<ul>
<li>浏览器可能在controls属性设置后才会显示音频标签内容</li>
</ul>
</li>
<li><p>loop循环播放</p>
</li>
<li><p>autoplay自动播放</p>
<ul>
<li>不过目前浏览器默认情况下不会进行自动播放</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">简单写法</span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&#x27;&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">考虑兼容性问题的写法</span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span>&gt;</span></span><br><span class="line">    在浏览器不支持audio标签元素时显示这段文字</span><br><span class="line">	<span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&#x27;&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&#x27;&#x27;</span>&gt;</span></span><br><span class="line">	多个source标签可以防止浏览器不支持前面的音频格式</span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/html-css/image-20220606172500259-1676560993602463.png" alt="image-20220606172500259"></p>
<h3 id="embed"><a href="#embed" class="headerlink" title="embed"></a>embed</h3><p>在老版本中引用音视频文件(自动播放)</p>
<p>必须指定width和height属性</p>
<p>type也需要指定</p>
<p>例如：audio&#x2F;mp3</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">&#x27;&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;&#x27;</span>&gt;</span>不存在兼容性问题</span><br></pre></td></tr></table></figure>

<p>最好的写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span>&gt;</span></span><br><span class="line">    在浏览器不支持audio标签元素时显示这段文字</span><br><span class="line">	<span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&#x27;&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&#x27;&#x27;</span>&gt;</span></span><br><span class="line">	多个source标签可以防止浏览器不支持前面的音频格式</span><br><span class="line">    <span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">&#x27;&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>







<h3 id="视频video"><a href="#视频video" class="headerlink" title="视频video"></a>视频video</h3><p>引入一个视频文件</p>
<p>属性与上的audio标签基本相同  </p>
<blockquote>
<p>注意：chrome 只加autoplay自动播放无效需要在加上muted（静音）</p>
</blockquote>
<h2 id="浏览器的多进程架构"><a href="#浏览器的多进程架构" class="headerlink" title="浏览器的多进程架构"></a><strong>浏览器的多进程架构</strong></h2><p>从浏览器输入 URL 到页面渲染的整个过程都是由 浏览器架构中的各个进程之间的配合完成。</p>
<ol>
<li>浏览器主进程: 管理子进程、提供服务功能</li>
<li>渲染进程：将HTML、CSS、JS渲染成界面，js引擎v8和排版引擎Blink就在上面，他会为每一个tab页面创建一个渲染进程</li>
<li>GPU进程：本来是负责处理3Dcss的，后来慢慢的UI界面也交给GPU来绘制</li>
<li>网络进程：就是负责网络请求，网络资源加载的进程</li>
<li>插件进程：负责插件的运行的，因为插件很容易崩溃，把它放到独立的进程里不要让它影响别人</li>
</ol>
<p><strong>浏览器的多进程架构</strong></p>
<p>从用户输入信息到页面展示的不同阶段，是不同的进程在发挥作用，示意图如下：<img src="/html-css/640-167358114020818-1676560993602464.jpeg" alt="图片">从图中可以看出，整个过程是需要各个进程之间相互配合完成的，过程大致可以描述为：</p>
<ol>
<li>用户输入url,处理输入信息，主进程开始导航，交给网络进程干活</li>
<li>网络进程发起网络请求，其中有可能会发生重定向</li>
<li>服务器响应URL之后，主进程就要通知渲染进程，你要开始干活了</li>
<li>渲染进程准备好了，要想渲染进程提交数据，这个时间叫做提交文档</li>
<li>渲染进程接受到数据，完成页面渲染。</li>
</ol>
<p><strong>具体过程</strong></p>
<ol>
<li><p>输入url</p>
<ul>
<li>用户输入url，处理输入信息：</li>
<li>如果为非url结构的字符串，交给浏览器默认引擎去搜索改字符串；</li>
<li>若为url结构的字符串，浏览器主进程会交给 网络进程 ,开始干活。</li>
</ul>
</li>
<li><p>查找浏览器缓存</p>
<ul>
<li>网络进程会先看看是否存在本地缓存，如果有就直接返回资源给浏览器进程，无则下一步 DNS-&gt; IP -&gt; TCP</li>
</ul>
</li>
<li><p>DNS解析</p>
<ul>
<li>网络进程拿到url后，先会进行DNS域名解析得到IP地址。如果请求协议是HTTPS，那么还需要建立TLS连接。</li>
</ul>
</li>
<li><p>建立TCP连接，三次握手</p>
<p>接下来就是利用IP地址和服务器建立TCP连接。连接建立之后，向服务器发送请求</p>
</li>
<li><p>服务器响</p>
<ul>
<li>服务器收到请求信息后，会根据请求信息生成响应行、响应头、响应体，并发给网络进程。网络进程接受了响应信息之后，就开始解析响应头的内容。</li>
<li>网络进程解析响应行和响应头信息的过程：</li>
</ul>
</li>
<li><p>重定向</p>
<ul>
<li>如果响应行状态码为301（永久重定向）和302（临时），那么说明需要重定向到其他url。这时候网络进程会从响应头中的Location字段里读取重定向的地址，并重新发起网络请求。</li>
</ul>
</li>
<li><p>响应数据处理</p>
<ul>
<li>导航会通过请求头的Content-type字段判断响应体数据的类型。浏览器通过这个来决定如何显示响应体的内容。比如：若为application&#x2F;octet-stream，则会按照下载类型来处理这个请求，导航结束。若为text&#x2F;html，这就告诉浏览器服务器返回的是html格式，浏览器会通知渲染进程，你要干活了。</li>
</ul>
</li>
<li><p>准备渲染进程</p>
<ul>
<li>默认情况，每个页面一个渲染进程。但若处于同一站点（同根域名+协议），那么渲染进程就会复用。</li>
</ul>
</li>
<li><p>提交文档</p>
<ul>
<li>渲染进程准备好后，浏览器进程发出“提交文档的消息”，渲染进程接受了消息之后，会跟网络进程简历传输数据的管道。</li>
<li>等数据传输完成了，渲染进程会告诉浏览器进程，确认文档提交，这时候浏览器会更新页面，安全状态，url，前进后退的历史。</li>
<li>到这里导航结束，进入渲染阶段。</li>
</ul>
</li>
</ol>
<h1 id="CSS基础"><a href="#CSS基础" class="headerlink" title="CSS基础"></a>CSS基础</h1><h3 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h3><p><img src="/html-css/image-20220606231540207-1676560993602465.png" alt="image-20220606231540207"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">      <span class="attribute">font-family</span>:<span class="string">&#x27;Courier New&#x27;</span>, Courier, monospace;</span><br><span class="line">      <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">      <span class="attribute">font-style</span>: italic;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>font-family 属性应包含多个字体名称作为“后备”系统，以确保浏览器&#x2F;操作系统之间的最大兼容性。请以您需要的字体开始，并以通用系列结束（如果没有其他可用字体，则让浏览器选择通用系列中的相似字体）。字体名称应以逗号分隔。</p>
<p><code>注释：如果字体名称不止一个单词，则必须用引号引起来，例如：&quot;Times New Roman&quot;。</code></p>
<h3 id="文本属性"><a href="#文本属性" class="headerlink" title="文本属性"></a>文本属性</h3><h4 id="文本颜色color"><a href="#文本颜色color" class="headerlink" title="文本颜色color"></a>文本颜色color</h4><p>表示方法有</p>
<p>16进制、预定义和rgb(0,0,0)或rgb(100%,100%,100%)形式</p>
<p>常用的是十六进制的</p>
<p>rgba(<em>red</em>, <em>green</em>, <em>blue</em>, <em>alpha</em>)</p>
<p>hsla(<em>hue</em>, <em>saturation</em>, <em>lightness</em>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">色相（hue）是色轮上从 0 到 360 的度数。0 是红色，120 是绿色，240 是蓝色。</span><br><span class="line"></span><br><span class="line">饱和度（saturation）是一个百分比值，0％ 表示灰色阴影，而 100％ 是全色。</span><br><span class="line"></span><br><span class="line">亮度（lightness）也是百分比，0％ 是黑色，50％ 是既不明也不暗，100％是白色。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HSLA 值</span><br><span class="line">HSLA 颜色值是带有 Alpha 通道的 HSL 颜色值的扩展 - 它指定了颜色的不透明度。</span><br><span class="line"></span><br><span class="line">HSLA 颜色值指定为：</span><br><span class="line"></span><br><span class="line">hsla(hue, saturation, lightness, alpha)</span><br><span class="line">alpha 参数是介于 0.0（完全透明）和 1.0（完全不透明）之间的数字：</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="对齐文本text-align"><a href="#对齐文本text-align" class="headerlink" title="对齐文本text-align"></a>对齐文本text-align</h4><p>有left(默认值)\center\right</p>
<p>让图片对齐时加在img的父元素中的</p>
<h4 id="文本装饰text-decoration-即加线"><a href="#文本装饰text-decoration-即加线" class="headerlink" title="文本装饰text-decoration(即加线)"></a>文本装饰text-decoration(即加线)</h4><p>none默认无</p>
<p>underline 下划线</p>
<p>line-through 删除线</p>
<p>overline 上划线</p>
<p>常用下划线和无</p>
<h4 id="文本缩进text-indenx"><a href="#文本缩进text-indenx" class="headerlink" title="文本缩进text-indenx"></a>文本缩进text-indenx</h4><p>只缩进首行 多少距离（也可以是负值）</p>
<p>最好单位使用em</p>
<p>em 相当于当前文字的相对大小</p>
<h4 id="行间距line-heigth"><a href="#行间距line-heigth" class="headerlink" title="行间距line-heigth"></a>行间距line-heigth</h4><p><img src="/html-css/image-20220606233438027-1676560993602466.png" alt="image-20220606233438027"></p>
<p><code>行高等于高可以实现单行文字垂直居中</code></p>
<h4 id="文本转换text-transform"><a href="#文本转换text-transform" class="headerlink" title="文本转换text-transform"></a>文本转换text-transform</h4><p>text-transform属性用于指定文本中的大小字母</p>
<p>它可用于将所有内容转换为大写或小写字母，或将每个单词的首字母大写：</p>
<p>全大写：uppercase</p>
<p>全小写：lowercase</p>
<p>首字母大写： capitalize</p>
<h4 id="字符间距letter-spacing"><a href="#字符间距letter-spacing" class="headerlink" title="字符间距letter-spacing"></a>字符间距letter-spacing</h4><p>数值可以是负数</p>
<h4 id="空白white-space"><a href="#空白white-space" class="headerlink" title="空白white-space"></a>空白white-space</h4><p><code>white-space</code> 属性指定元素内部空白的处理方式。</p>
<p>此例演示如何禁用元素内的文本换行：</p>
<p>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p &#123;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/white-space#%E8%AF%AD%E6%B3%95">语法</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/* Keyword values */</span><br><span class="line">white-space: normal;</span><br><span class="line">white-space: nowrap;</span><br><span class="line">white-space: pre;</span><br><span class="line">white-space: pre-wrap;</span><br><span class="line">white-space: pre-line;</span><br><span class="line">white-space: break-spaces;</span><br><span class="line"></span><br><span class="line">/* Global values */</span><br><span class="line">white-space: inherit;</span><br><span class="line">white-space: initial;</span><br><span class="line">white-space: revert;</span><br><span class="line">white-space: revert-layer;</span><br><span class="line">white-space: unset;</span><br></pre></td></tr></table></figure>

<p>Copy to Clipboard</p>
<p><code>white-space</code>属性被指定为从下面的值列表中选择的单个关键字。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/white-space#%E5%80%BC">值</a></p>
<ul>
<li><p><code>normal</code></p>
<p>连续的空白符会被合并，换行符会被当作空白符来处理。换行在填充「行框盒子 (<a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS2/visuren.html#inline-formatting">line boxes</a>)」时是必要。</p>
</li>
<li><p><code>nowrap</code></p>
<p>和 normal 一样，连续的空白符会被合并。但文本内的换行无效。</p>
</li>
<li><p><code>pre</code></p>
<p>连续的空白符会被保留。在遇到换行符或者<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/br">&#96;&#96;</a>元素时才会换行。</p>
</li>
<li><p><code>pre-wrap</code></p>
<p>连续的空白符会被保留。在遇到换行符或者<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/br">&#96;&#96;</a>元素，或者需要为了填充「行框盒子 (<a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS2/visuren.html#inline-formatting">line boxes</a>)」时才会换行。</p>
</li>
<li><p><code>pre-line</code></p>
<p>连续的空白符会被合并。在遇到换行符或者<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/br">&#96;&#96;</a>元素，或者需要为了填充「行框盒子 (<a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS2/visuren.html#inline-formatting">line boxes</a>)」时会换行。</p>
</li>
</ul>
<p><strong><code>break-spaces</code></strong> 与 <code>pre-wrap</code>的行为相同，除了：</p>
<ul>
<li>任何保留的空白序列总是占用空间，包括在行尾。</li>
<li>每个保留的空格字符后都存在换行机会，包括空格字符之间。</li>
<li>这样保留的空间占用空间而不会挂起，从而影响盒子的固有尺寸（最小内容大小和最大内容大小）。</li>
</ul>
<p>下面的表格总结了各种 white-space 值的行为：</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">换行符</th>
<th align="left">空格和制表符</th>
<th align="left">文字换行</th>
<th align="left">行尾空格</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>normal</code></td>
<td align="left">合并</td>
<td align="left">合并</td>
<td align="left">换行</td>
<td align="left">删除</td>
</tr>
<tr>
<td align="left"><code>nowrap</code></td>
<td align="left">合并</td>
<td align="left">合并</td>
<td align="left">不换行</td>
<td align="left">删除</td>
</tr>
<tr>
<td align="left"><code>pre</code></td>
<td align="left">保留</td>
<td align="left">保留</td>
<td align="left">不换行</td>
<td align="left">保留</td>
</tr>
<tr>
<td align="left"><code>pre-wrap</code></td>
<td align="left">保留</td>
<td align="left">保留</td>
<td align="left">换行</td>
<td align="left">挂起</td>
</tr>
<tr>
<td align="left"><code>pre-line</code></td>
<td align="left">保留</td>
<td align="left">合并</td>
<td align="left">换行</td>
<td align="left">删除</td>
</tr>
<tr>
<td align="left"><code>break-spaces</code></td>
<td align="left">保留</td>
<td align="left">保留</td>
<td align="left">换行</td>
<td align="left">换行</td>
</tr>
</tbody></table>
<h3 id="文字阴影text-shadow"><a href="#文字阴影text-shadow" class="headerlink" title="文字阴影text-shadow"></a>文字阴影text-shadow</h3><p>text-shadow属性为文本添加阴影</p>
<p>最简单的用法是只指定水平阴影（2px）和垂直阴影（2px）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">2px</span> <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来，向阴影添加颜色（红色）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，向阴影添加模糊效果（5px）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="多个阴影"><a href="#多个阴影" class="headerlink" title="多个阴影"></a>多个阴影</h4><p>如需在文本中添加多个阴影，您可以添加以逗号分隔的阴影列表。</p>
<p>下面的例子展示了红色和蓝色的霓虹灯发光阴影：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="number">#FF0000</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#0000FF</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="所有-CSS-文本属性"><a href="#所有-CSS-文本属性" class="headerlink" title="所有 CSS 文本属性"></a>所有 CSS 文本属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_color.asp">color</a></td>
<td align="left">设置文本颜色。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_direction.asp">direction</a></td>
<td align="left">指定文本的方向 &#x2F; 书写方向。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_letter-spacing.asp">letter-spacing</a></td>
<td align="left">设置字符间距。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_dim_line-height.asp">line-height</a></td>
<td align="left">设置行高。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_text-align.asp">text-align</a></td>
<td align="left">指定文本的水平对齐方式。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_text-decoration.asp">text-decoration</a></td>
<td align="left">指定添加到文本的装饰效果。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_text-indent.asp">text-indent</a></td>
<td align="left">指定文本块中首行的缩进。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text-shadow.asp">text-shadow</a></td>
<td align="left">指定添加到文本的阴影效果。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_text-transform.asp">text-transform</a></td>
<td align="left">控制文本的大小写。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text-overflow.asp">text-overflow</a></td>
<td align="left">指定应如何向用户示意未显示的溢出内容。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_unicode-bidi.asp">unicode-bidi</a></td>
<td align="left">与 direction 属性一起使用，设置或返回是否应重写文本来支持同一文档中的多种语言。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_pos_vertical-align.asp">vertical-align</a></td>
<td align="left">指定文本的垂直对齐方式。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_white-space.asp">white-space</a></td>
<td align="left">指定如何处理元素内的空白。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_text_word-spacing.asp">word-spacing</a></td>
<td align="left">设置单词间距。</td>
</tr>
</tbody></table>
<p><img src="/html-css/image-20220704145830963-1676560993602467.png" alt="image-20220704145830963"></p>
<h3 id="字体图标"><a href="#字体图标" class="headerlink" title="字体图标"></a>字体图标</h3><p>引入方法一</p>
<p>下载<a target="_blank" rel="noopener" href="http://icomoon.io/">http://icomoon.io</a> 或 </p>
<p>下载后进行解压</p>
<p><img src="/html-css/image-20220607224235514-1676560993602468.png" alt="image-20220607224235514"></p>
<ul>
<li><p>将文件中的fonts文件添加到使用的根目录下或修改路径</p>
</li>
<li><p>引入css样式</p>
<ul>
<li><p>将下载文件中style中的样式部分的</p>
</li>
<li><p>&#96;&#96;&#96;css<br>@font-face {<br>  font-family: ‘icomoon’;<br>  src:  url(‘fonts&#x2F;icomoon.eot?r0zc5q’);<br>  src:  url(‘fonts&#x2F;icomoon.eot?r0zc5q#iefix’) format(‘embedded-opentype’),<br>url(‘fonts&#x2F;icomoon.ttf?r0zc5q’) format(‘truetype’),<br>url(‘fonts&#x2F;icomoon.woff?r0zc5q’) format(‘woff’),<br>url(‘fonts&#x2F;icomoon.svg?r0zc5q#icomoon’) format(‘svg’);<br>  font-weight: normal;<br>  font-style: normal;<br>  font-display: block;<br>}<br>在未将fonst文件放到要使用的文件下时需要修改路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 在demo.html找到要使用的字体图标放到标签中</span><br><span class="line"></span><br><span class="line">+ 也要设置引入字体图标的字体样式</span><br><span class="line"></span><br><span class="line">  + ```css</span><br><span class="line">    span&#123;</span><br><span class="line">    	font-family: &#x27;icomoon&#x27;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p><code>字体图标的追加</code></p>
<p>在网页中导下载文件中的selection.json进行追加并下载追加后的文件再将在将项目中的fonts文件替换掉</p>
<p>引入方法二</p>
<p>通过bootstrap来引入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Bootstrap Icons<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一些 Bootstrap 图标：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-cloud&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-remove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-envelope&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-thumbs-up&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>有样式的 Bootstrap 图标（尺寸和颜色）：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-cloud&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size:24px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-cloud&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size:36px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-cloud&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size:48px;color:red;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-cloud&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size:60px;color:lightblue;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="列表-1"><a href="#列表-1" class="headerlink" title="列表"></a>列表</h3><p>CSS 列表属性使您可以：</p>
<ul>
<li>为有序列表设置不同的列表项标记</li>
<li>为无序列表设置不同的列表项标记</li>
<li>将图像设置为列表项标记</li>
<li>为列表和列表项添加背景色</li>
</ul>
<h4 id="不同的列表项目标记list-style-type"><a href="#不同的列表项目标记list-style-type" class="headerlink" title="不同的列表项目标记list-style-type"></a>不同的列表项目标记list-style-type</h4><p><code>list-style-type</code> 属性指定列表项标记的类型。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.a</span> &#123;</span><br><span class="line">  <span class="attribute">list-style-type</span>: circle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.b</span> &#123;</span><br><span class="line">  <span class="attribute">list-style-type</span>: square;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span><span class="selector-class">.c</span> &#123;</span><br><span class="line">  <span class="attribute">list-style-type</span>: upper-roman;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span><span class="selector-class">.d</span> &#123;</span><br><span class="line">  <span class="attribute">list-style-type</span>: lower-alpha;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>注释：</strong>有些值用于无序列表，而有些值用于有序列表。</p>
<h4 id="图像作为列表项标记list-style-image"><a href="#图像作为列表项标记list-style-image" class="headerlink" title="图像作为列表项标记list-style-image"></a>图像作为列表项标记list-style-image</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;sqpurple.gif&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="定位列表项标记list-style-position"><a href="#定位列表项标记list-style-position" class="headerlink" title="定位列表项标记list-style-position"></a>定位列表项标记list-style-position</h4><p>“list-style-position: outside;” 表示项目符号点将在列表项之外。列表项每行的开头将垂直对齐。这是默认的：</p>
<p><img src="/html-css/image-20220607230746832-1676560993602469.png" alt="image-20220607230746832"></p>
<p><code>&quot;list-style-position: inside;&quot;</code> 表示项目符号将在列表项内。由于它是列表项的一部分，因此它将成为文本的一部分，并在开头推开文本：</p>
<p><img src="/html-css/image-20220607230807861-1676560993602470.png" alt="image-20220607230807861"></p>
<h4 id="删除默认设置"><a href="#删除默认设置" class="headerlink" title="删除默认设置"></a>删除默认设置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list-style-type:none` 属性也可以用于删除标记/项目符号。请注意，列表还拥有默认的外边距和内边距。要删除此内容，请在 &lt;ul&gt; 或 &lt;ol&gt; 中添加 `margin:0` 和 `padding:0</span><br></pre></td></tr></table></figure>

<h4 id="所有-CSS-列表属性"><a href="#所有-CSS-列表属性" class="headerlink" title="所有 CSS 列表属性"></a>所有 CSS 列表属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_list-style.asp">list-style</a></td>
<td align="left">简写属性。在一条声明中设置列表的所有属性。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_list-style-image.asp">list-style-image</a></td>
<td align="left">指定图像作为列表项标记。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_list-style-position.asp">list-style-position</a></td>
<td align="left">规定列表项标记（项目符号）的位置。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_list-style-type.asp">list-style-type</a></td>
<td align="left">规定列表项标记的类型。</td>
</tr>
</tbody></table>
<h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><h4 id="表格边框border"><a href="#表格边框border" class="headerlink" title="表格边框border"></a>表格边框border</h4><p>给table\th\td都加上边框</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">table</span>,</span><br><span class="line"><span class="selector-tag">th</span>,</span><br><span class="line"><span class="selector-tag">td</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有缺点为双边框展示的</p>
<p>解决方法使用合并边框属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">table</span>&#123;</span><br><span class="line">	<span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="水平对齐使用text-align"><a href="#水平对齐使用text-align" class="headerlink" title="水平对齐使用text-align"></a>水平对齐使用text-align</h4><h4 id="垂直对齐使用vertical-align"><a href="#垂直对齐使用vertical-align" class="headerlink" title="垂直对齐使用vertical-align"></a>垂直对齐使用vertical-align</h4><p>如需控制边框和表格内容之间的间距，请在 <td> 和 <th> 元素上使用 <code>padding</code> 属性</th></td></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">th</span>, <span class="selector-tag">td</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="响应式表格"><a href="#响应式表格" class="headerlink" title="响应式表格"></a>响应式表格</h4><p>在 <table> 元素周围添加带有 <code>overflow-x:auto</code> 的容器元素（例如 <div>），以实现响应式效果：</div></table></p>
<h3 id="emmet语法"><a href="#emmet语法" class="headerlink" title="emmet语法"></a>emmet语法</h3><p><img src="/html-css/image-20220607001525645-1676560993603471.png" alt="image-20220607001525645"><img src="/html-css/image-20220607001522398-1676560993603472.png" alt="image-20220607001522398"></p>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><h4 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th>权重</th>
</tr>
</thead>
<tbody><tr>
<td align="left">！important重要的</td>
<td>无穷大</td>
</tr>
<tr>
<td align="left">行内</td>
<td>1000</td>
</tr>
<tr>
<td align="left">id</td>
<td>0100</td>
</tr>
<tr>
<td align="left">calls、伪类、属性</td>
<td>0010</td>
</tr>
<tr>
<td align="left">元素</td>
<td>1</td>
</tr>
<tr>
<td align="left">继承和 通配符 *</td>
<td>0</td>
</tr>
</tbody></table>
<p>元素选择器 eg: a</p>
<p>类选择器 .</p>
<p>id选择器 #</p>
<p>后代选择器 div p ……</p>
<p>子代选择器 div &gt; p</p>
<table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">例子</th>
<th align="left">例子描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/css/css_selectors.asp">.<em>class</em></a></td>
<td align="left">.intro</td>
<td align="left">选取所有 class&#x3D;”intro” 的元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/css/css_selectors.asp">#<em>id</em></a></td>
<td align="left">#firstname</td>
<td align="left">选取 id&#x3D;”firstname” 的那个元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/css/css_selectors.asp">*</a></td>
<td align="left">*</td>
<td align="left">选取所有元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/css/css_selectors.asp"><em>element</em></a></td>
<td align="left">p</td>
<td align="left">选取所有 <p> 元素。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/css/css_selectors.asp"><em>element</em>,<em>element</em>,..</a></td>
<td align="left">div, p</td>
<td align="left">选取所有 <div> 元素和所有 <p> 元素。</p></div></td>
</tr>
</tbody></table>
<h4 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h4><h5 id="结合元素选择器"><a href="#结合元素选择器" class="headerlink" title="结合元素选择器"></a>结合元素选择器</h5><p>类选择器可以结合元素选择器来使用。</p>
<p>例如，您可能希望只有段落显示为红色文本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p.important &#123;color:red;&#125;</span><br></pre></td></tr></table></figure>

<p>选择器现在会匹配 class 属性包含 important 的所有 p 元素，但是其他任何类型的元素都不匹配，不论是否有此 class 属性。选择器 p.important 解释为：“其 class 属性值为 important 的所有段落”。 因为 h1 元素不是段落，这个规则的选择器与之不匹配，因此 h1 元素不会变成红色文本。</p>
<p>如果你确实希望为 h1 元素指定不同的样式，可以使用选择器 h1.important：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p.important &#123;color:red;&#125;</span><br><span class="line">h1.important &#123;color:blue;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="CSS-多类选择器"><a href="#CSS-多类选择器" class="headerlink" title="CSS 多类选择器"></a>CSS 多类选择器</h5><p>在上一节中，我们处理了 class 值中包含一个词的情况。在 HTML 中，一个 class 值中可能包含一个词列表，各个词之间用空格分隔。例如，如果希望将一个特定的元素同时标记为重要（important）和警告（warning），就可以写作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;p class=&quot;important warning&quot;&gt;</span><br><span class="line">This paragraph is a very important warning.</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>这两个词的顺序无关紧要，写成 warning important 也可以。</p>
<p>我们假设 class 为 important 的所有元素都是粗体，而 class 为 warning 的所有元素为斜体，class 中同时包含 important 和 warning 的所有元素还有一个银色的背景 。就可以写作：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.important</span> &#123;<span class="attribute">font-weight</span>:bold;&#125;</span><br><span class="line"><span class="selector-class">.warning</span> &#123;<span class="attribute">font-style</span>:italic;&#125;</span><br><span class="line"><span class="selector-class">.important</span><span class="selector-class">.warning</span> &#123;<span class="attribute">background</span>:silver;&#125;</span><br></pre></td></tr></table></figure>



<p>通过把两个类选择器链接在一起，仅可以选择<em>同时包含这些类名</em>的元素（类名的顺序不限）。</p>
<p><strong>如果一个多类选择器包含类名列表中没有的一个类名，匹配就会失败。请看下面的规则：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.important.urgent &#123;background:silver;&#125;</span><br></pre></td></tr></table></figure>

<p>不出所料，这个选择器将只匹配 class 属性中包含词 important 和 urgent 的 p 元素。因此<strong>，如果一个 p 元素的 class 属性中只有词 important 和 warning，将不能匹配。不过，它能匹配以下元素：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;p class=&quot;important urgent warning&quot;&gt;</span><br><span class="line">This paragraph is a very important and urgent warning.</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>



<h4 id="焦点选择器：focus"><a href="#焦点选择器：focus" class="headerlink" title="焦点选择器：focus"></a>焦点选择器：focus</h4><img src="/html-css/image-20220607011121155-1676560993603473.png" alt="image-20220607011121155" style="zoom:80%;">

<h3 id="CSS-属性选择器详解"><a href="#CSS-属性选择器详解" class="headerlink" title="CSS 属性选择器详解"></a>CSS 属性选择器详解</h3><p><strong>CSS 2 引入了属性选择器。</strong></p>
<p><strong>属性选择器可以根据元素的属性及属性值来选择元素</strong></p>
<h4 id="简单属性选择"><a href="#简单属性选择" class="headerlink" title="简单属性选择"></a>简单属性选择</h4><p>如果希望选择有某个属性的元素，而不论属性值是什么，可以使用简单属性选择器。</p>
<p>例子 1</p>
<p>如果您希望把包含标题（title）的所有元素变为红色，可以写作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*[title] &#123;color:red;&#125;</span><br></pre></td></tr></table></figure>



<p>例子 2</p>
<p>与上面类似，可以只对有 href 属性的锚（a 元素）应用样式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[href] &#123;color:red;&#125;</span><br></pre></td></tr></table></figure>



<p>例子 3</p>
<p>还可以根据多个属性进行选择，只需将属性选择器链接在一起即可。</p>
<p>例如，为了将<strong>同时有 href 和 title 属性的 HTML 超链接的文本设置为红色</strong>，可以这样写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[href][title] &#123;color:red;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="根据具体属性值选择"><a href="#根据具体属性值选择" class="headerlink" title="根据具体属性值选择"></a>根据具体属性值选择</h4><p>除了选择拥有某些属性的元素，还可以进一步缩小选择范围，只选择有特定属性值的元素。</p>
<p>例子 1<br>例如，假设希望将指向 Web 服务器上某个指定文档的超链接变成红色，可以这样写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[href=&quot;http://www.w3school.com.cn/about_us.asp&quot;] &#123;color: red;&#125;</span><br></pre></td></tr></table></figure>

<p>例子 2</p>
<p>与简单属性选择器类似，可以把多个属性-值选择器链接在一起来选择一个文档。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[href=&quot;http://www.w3school.com.cn/&quot;][title=&quot;W3School&quot;] &#123;color: red;&#125;</span><br></pre></td></tr></table></figure>

<p>这会把以下标记中的第一个超链接的文本变为红色，但是第二个或第三个链接不受影响：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;http://www.w3school.com.cn/&quot; title=&quot;W3School&quot;&gt;W3School&lt;/a&gt;</span><br><span class="line">&lt;a href=&quot;http://www.w3school.com.cn/css/&quot; title=&quot;CSS&quot;&gt;CSS&lt;/a&gt;</span><br><span class="line">&lt;a href=&quot;http://www.w3school.com.cn/html/&quot; title=&quot;HTML&quot;&gt;HTML&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p><strong>属性与属性值必须完全匹配</strong></p>
<p>请注意，这种格式要求必须与属性值完全匹配。</p>
<p>如果属性值包含用空格分隔的值列表，匹配就可能出问题。</p>
<p>请考虑一下的标记片段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p class=&quot;important warning&quot;&gt;This paragraph is a very important warning.&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p><strong>如果写成 p[class&#x3D;”important”]，那么这个规则不能匹配示例标记。</strong></p>
<p>要根据具体属性值来选择该元素，必须这样写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p[class=&quot;important warning&quot;] &#123;color: red;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>根据部分属性值选择(包含)</strong></p>
<p>如果需要根据属性值中的词列表的某个词进行选择，则需要使用波浪号（~）。</p>
<p>假设您想选择 class 属性中包含 important 的元素，可以用下面这个选择器做到这一点：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p[class~=&quot;important&quot;] &#123;color: red;&#125;</span><br></pre></td></tr></table></figure>

<p>上面的为~&#x3D;</p>
<p><em>如果忽略了波浪号，则说明需要完成完全值匹配</em></p>
<p><strong>部分值属性选择器与点号类名记法的区别</strong></p>
<p>该选择器等价于我们在类选择器中讨论过的点号类名记法。</p>
<p>也就是说，p.important 和 p[class&#x3D;”important”] 应用到 HTML 文档时是等价的。</p>
<p>那么，为什么还要有 “~&#x3D;” 属性选择器呢？因为它能用于任何属性，而不只是 class。</p>
<p>例如，可以有一个包含大量图像的文档，其中只有一部分是图片。对此，可以使用一个基于 title 文档的部分属性选择器，只选择这些图片：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img[title~=&quot;Figure&quot;] &#123;border: 1px solid gray;&#125;</span><br></pre></td></tr></table></figure>

<p>这个规则会选择 title 文本包含 “Figure” 的所有图像。没有 title 属性或者 title 属性中不包含 “Figure” 的图像都不会匹配。</p>
<h4 id="子串匹配属性选择器"><a href="#子串匹配属性选择器" class="headerlink" title="子串匹配属性选择器"></a><strong>子串匹配属性选择器</strong></h4><p>下面为您介绍一个更高级的选择器模块，它是 CSS2 完成之后发布的，其中包含了更多的部分值属性选择器。按照规范的说法，应该称之为“子串匹配属性选择器”。</p>
<p>很多现代浏览器都支持这些选择器，包括 IE7。</p>
<p>下表是对这些选择器的简单总结：</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">[abc^&#x3D;”def”]</td>
<td align="center">选择 abc 属性值以 “def” <strong>开头</strong>的所有元素</td>
</tr>
<tr>
<td align="center">[abc$&#x3D;”def”]</td>
<td align="center">选择 abc 属性值以 “def” <strong>结尾</strong>的所有元素</td>
</tr>
<tr>
<td align="center">[abc*&#x3D;”def”]</td>
<td align="center">选择 abc 属性值中<strong>包含</strong>子串 “def” 的所有元素</td>
</tr>
</tbody></table>
<p>可以想到，这些选择有很多用途。</p>
<blockquote>
<p>提示：任何属性都可以使用这些选择器</p>
</blockquote>
<p><strong>特定属性选择类型</strong></p>
<p>最后为您介绍特定属性选择器。请看下面的例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*[lang|=&quot;en&quot;] &#123;color: red;&#125;</span><br></pre></td></tr></table></figure>

<p>上面这个规则会选择 lang 属性等于 en 或以 en- 开头的所有元素。因此，以下示例标记中的前三个元素将被选中，而不会选择后两个元素：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;p lang=&quot;en&quot;&gt;Hello!&lt;/p&gt;</span><br><span class="line">&lt;p lang=&quot;en-us&quot;&gt;Greetings!&lt;/p&gt;</span><br><span class="line">&lt;p lang=&quot;en-au&quot;&gt;G&#x27;day!&lt;/p&gt;</span><br><span class="line">&lt;p lang=&quot;fr&quot;&gt;Bonjour!&lt;/p&gt;</span><br><span class="line">&lt;p lang=&quot;cy-en&quot;&gt;Jrooana!&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>提示：任何属性都可以使用这些选择器</p>
</blockquote>
<h4 id="CSS-属性选择器参考手册"><a href="#CSS-属性选择器参考手册" class="headerlink" title="CSS 属性选择器参考手册"></a>CSS 属性选择器参考手册</h4><p>attribute</p>
<table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">[<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_attribute.asp"><em>attribute</em>]</a></td>
<td align="left">用于选取带有指定属性的元素。</td>
</tr>
<tr>
<td align="left">[<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_attribute_value.asp"><em>attribute</em>&#x3D;<em>value</em>]</a></td>
<td align="left">用于选取带有指定属性和值的元素。</td>
</tr>
<tr>
<td align="left">[<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_attribute_value_contain.asp"><em>attribute</em>~&#x3D;<em>value</em>]</a></td>
<td align="left">用于选取属性值中包含指定词汇的元素。</td>
</tr>
<tr>
<td align="left">[<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_attribute_value_start.asp"><em>attribute</em>|&#x3D;<em>value</em>]</a></td>
<td align="left">用于选取带有以指定值开头的属性值的元素，该值必须是整个单词。</td>
</tr>
<tr>
<td align="left">[<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_attr_begin.asp"><em>attribute</em>^&#x3D;<em>value</em>]</a></td>
<td align="left">匹配属性值以指定值开头的每个元素。</td>
</tr>
<tr>
<td align="left">[<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_attr_end.asp"><em>attribute</em>$&#x3D;<em>value</em>]</a></td>
<td align="left">匹配属性值以指定值结尾的每个元素。</td>
</tr>
<tr>
<td align="left">[<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_attr_contain.asp"><em>attribute</em>*&#x3D;<em>value</em>]</a></td>
<td align="left">匹配属性值中包含指定值的每个元素</td>
</tr>
</tbody></table>
<h3 id="后子相邻选择器"><a href="#后子相邻选择器" class="headerlink" title="后子相邻选择器"></a>后子相邻选择器</h3><p>CSS 中有四种不同的组合器：</p>
<ul>
<li>后代选择器 (空格)</li>
<li>子选择器 (<code>&gt;</code>)</li>
<li>相邻兄弟选择器 (<code>+</code>)</li>
<li>通用兄弟选择器 (<code>~</code>)</li>
</ul>
<p>通用兄弟选择器</p>
<p>通用兄弟选择器匹配属于指定元素的<strong>同级元素的所有元素</strong>。</p>
<p>下面的例子选择属于 <div> 元素的同级元素的所有 <p> 元素：</p>
<p>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div ~ p &#123;</span><br><span class="line">  background-color: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">后代选择器(所有子孙后代中包含的)</span><br><span class="line">h1 em &#123;color:red;&#125;  </span><br><span class="line">&gt; 子代选择器（子代中包含的）</span><br><span class="line">h1&gt;em &#123;color:red;&#125;</span><br><span class="line">+ 相邻选择器（同级的下一个节点）</span><br><span class="line">h1+em &#123;color:red;&#125;</span><br></pre></td></tr></table></figure>

<p>所有 CSS 组合选择器</p>
<table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">示例</th>
<th align="left">示例描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_element_element.asp"><em>element</em> <em>element</em></a></td>
<td align="left">div p</td>
<td align="left">选择 <div> 元素内的所有 <p> 元素。</p></div></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_element_gt.asp"><em>element</em>&gt;<em>element</em></a></td>
<td align="left">div &gt; p</td>
<td align="left">选择其父元素是 <div> 元素的所有 <p> 元素。</p></div></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_element_plus.asp"><em>element</em>+<em>element</em></a></td>
<td align="left">div + p</td>
<td align="left">选择所有紧随 <div> 元素之后的 <p> 元素。</p></div></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_gen_sibling.asp"><em>element1</em>~<em>element2</em></a></td>
<td align="left">p ~ ul</td>
<td align="left">选择前面有 <p> 元素的每个 <ul> 元素。</ul></p></td>
</tr>
</tbody></table>
<h3 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h3><h4 id="链接伪类选择器"><a href="#链接伪类选择器" class="headerlink" title="链接伪类选择器"></a>链接伪类选择器</h4><ul>
<li><p>链接伪类（要按顺序写不然可能存在问题）要给a指定样式要单独给a 指定(即a无法继承父级样式)</p>
<ul>
<li>&#96;&#96;&#96;<br>l v h a<br>a:link 未被访问的<br>a:visited  已被访问的<br>a:hover 鼠标悬浮时 （常用）<br>a:acyive 按下为弹起时<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### :first-child</span><br><span class="line"></span><br><span class="line">`:first-child` 伪类与指定的元素匹配：该元素是另一个元素的第一个子元素。（即父元素中的第一个子元素是指定元素的子元素）</span><br><span class="line"></span><br><span class="line">eg：匹配所有子元素中`第一个元素是`p 的 </span><br><span class="line"></span><br><span class="line">```css</span><br><span class="line">p:first-child &#123;</span><br><span class="line">  color: blue;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>选择器匹配所有 </p><p> 元素中的<code>第一个元素是</code> <i> ：</i></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> <span class="selector-tag">i</span><span class="selector-pseudo">:first</span>-child &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="last-child"><a href="#last-child" class="headerlink" title=":last-child"></a>:last-child</h4><p>:last-child 选择器匹配属于其父元素的最后一个子元素的每个元素。（即父元素中的最后一个子元素是指定元素的子元素）</p>
<h4 id="nth-child"><a href="#nth-child" class="headerlink" title=":nth-child"></a>:nth-child</h4><p>:nth-child(<em>n</em>) 选择器匹配属于其父元素的第 N 个子元素与指定元素相同的，不论元素的类型</p>
<p>n也可以是关键字even偶数 odd奇数</p>
<p><code>nth-child与:first-child\last-child的区别是后者先看后在看前，而前者反之</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">background</span>:<span class="number">#ff0000</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第二个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第三个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第四个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面表示的子元素中第二个元素是p 的如果不是就不匹配 </p>
<p><img src="/html-css/image-20220609120928541-1676560993603474.png" alt="image-20220609120928541"></p>
<h4 id="first-of-type"><a href="#first-of-type" class="headerlink" title=":first-of-type"></a>:first-of-type</h4><p>匹配所有父元素中的第一个p元素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:first</span>-of-type</span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="last-of-type"><a href="#last-of-type" class="headerlink" title=":last-of-type"></a>:last-of-type</h4><p>匹配所有父元素中的最后一个p元素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:last-of-type</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="nth-of-type-n"><a href="#nth-of-type-n" class="headerlink" title=":nth-of-type(n)"></a>:nth-of-type(n)</h4><p>:nth-of-type(n) 选择器匹配属于其父元素的第 N 个子元素，不论元素的类型</p>
<h4 id="empty"><a href="#empty" class="headerlink" title=":empty"></a>:empty</h4><p>匹配所有指定元素中没有子节点的</p>
<h4 id="disabled"><a href="#disabled" class="headerlink" title=":disabled"></a>:disabled</h4><p>匹配出所有input被禁用的</p>
<h4 id="not-selevtor"><a href="#not-selevtor" class="headerlink" title=":not(selevtor)"></a>:not(selevtor)</h4><p>匹配所有指定元素中的非selevtor元素</p>
<p>未指定即为body的子元素中</p>
<h4 id="所有-CSS-伪类"><a href="#所有-CSS-伪类" class="headerlink" title="所有 CSS 伪类"></a>所有 CSS 伪类</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">例子</th>
<th align="left">例子描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_active.asp">:active</a></td>
<td align="left">a:active</td>
<td align="left">选择点击后没有松开时</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_checked.asp">:checked</a></td>
<td align="left">input:checked</td>
<td align="left">选择每个被选中的 <input> 元素。(<strong>只在 Opera 中正确地工作！</strong>)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_disabled.asp">:disabled</a></td>
<td align="left">input:disabled</td>
<td align="left">选择每个被禁用的 <input> 元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_empty.asp">:empty</a></td>
<td align="left">p:empty</td>
<td align="left">选择没有子元素的每个 <p> 元素。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_enabled.asp">:enabled</a></td>
<td align="left">input:enabled</td>
<td align="left">选择每个已启用的 <input> 元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_first-child.asp">:first-child</a></td>
<td align="left">p:first-child</td>
<td align="left">选择每一个父元素的首个子元素是p元素的 <p> 元素。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_first-of-type.asp">:first-of-type</a></td>
<td align="left">p:first-of-type</td>
<td align="left">选择每一个父元素中的首个子 <p> 元素</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_focus.asp">:focus</a></td>
<td align="left">input:focus</td>
<td align="left">选择获得焦点的 <input> 元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_hover.asp">:hover</a></td>
<td align="left">a:hover</td>
<td align="left">选择鼠标悬停其上的链接。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_in-range.asp">:in-range</a></td>
<td align="left">input:in-range</td>
<td align="left">选择具有指定范围内的值的 <input> 元素。(<strong>注释：</strong>:in-range 选择器仅适用于带有 min 和&#x2F;或 max 属性的 input 元素！)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_invalid.asp">:invalid</a></td>
<td align="left">input:invalid</td>
<td align="left">选择所有具有无效值的 <input> 元素。(<strong>:invalid 选择器仅适用于有限制的表单元素，例如带有 min 和 max 属性的输入元素，没有合法电子邮件的 email 字段或没有数值的 number 字段等。</strong>)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_lang.asp">:lang(<em>language</em>)</a></td>
<td align="left">p:lang(it)</td>
<td align="left">选择每个 lang 属性值以 “it” 开头的 <p> 元素。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_last-child.asp">:last-child</a></td>
<td align="left">p:last-child</td>
<td align="left">选择每一个父元素的最后一个子元素是p元素的<p> 元素。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_last-of-type.asp">:last-of-type</a></td>
<td align="left">p:last-of-type</td>
<td align="left">选择每一个父元素中最后的一个子 <p> 元素</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_link.asp">:link</a></td>
<td align="left">a:link</td>
<td align="left">选择所有未被访问的链接。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_not.asp">:not(<em>selector</em>)</a></td>
<td align="left">:not(p)</td>
<td align="left">选择每个非 <p> 元素的元素。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_nth-child.asp">:nth-child(<em>n</em>)</a></td>
<td align="left">p:nth-child(2)</td>
<td align="left">选择作为其父的第二个子元素是p元素的每个 <p> 元素。(n值也可以是odd奇even还可以是以n为未知数的公式如2n+0)</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_nth-last-child.asp">:nth-last-child(<em>n</em>)</a></td>
<td align="left">p:nth-last-child(2)</td>
<td align="left">选择作为父的<strong>倒数</strong>第二个子元素是p元素的每个<p>元素，从最后一个子元素计数。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_nth-last-of-type.asp">:nth-last-of-type(<em>n</em>)</a></td>
<td align="left">p:nth-last-of-type(2)</td>
<td align="left">选择作为父的倒数第二个<p>元素的每个</p><p>元素，从最后一个子元素计数</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_nth-of-type.asp">:nth-of-type(<em>n</em>)</a></td>
<td align="left">p:nth-of-type(2)</td>
<td align="left">选择作为其父的第二个 <p> 元素的每个 </p><p> 元素。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_only-of-type.asp">:only-of-type</a></td>
<td align="left">p:only-of-type</td>
<td align="left">选择作为其父的唯一 <p> 元素的每个 </p><p> 元素(即父元素只有一个子元素节点是p元素的p元素)</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_only-child.asp">:only-child</a></td>
<td align="left">p:only-child</td>
<td align="left">选择作为其父的唯一子元素的 <p> 元素。(即父元素只有一个子元素节点的p元素)</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_optional.asp">:optional</a></td>
<td align="left">input:optional</td>
<td align="left">选择不带 “required” （必填）属性的 <input> 元素。（<strong>注释：</strong>:optional 选择器仅适用于这几个表单元素：input、select 和 textarea。）</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_out-of-range.asp">:out-of-range</a></td>
<td align="left">input:out-of-range</td>
<td align="left">选择值在指定范围之外的 <input> 元素。（同上面的:in-range）</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_read-only.asp">:read-only</a></td>
<td align="left">input:read-only</td>
<td align="left">选择指定了 “readonly”(只读) 属性的 <input> 元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_read-write.asp">:read-write</a></td>
<td align="left">input:read-write</td>
<td align="left">选择不带 “readonly” 属性的 <input> 元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_required.asp">:required</a></td>
<td align="left">input:required</td>
<td align="left">选择指定了 “required”（必填） 属性的 <input> 元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_root.asp">:root</a></td>
<td align="left">root</td>
<td align="left">选择元素的根元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_target.asp">:target</a></td>
<td align="left">#news:target</td>
<td align="left">选择当前活动的 #news 元素（单击包含该锚名称的 URL）。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_valid.asp">:valid</a></td>
<td align="left">input:valid</td>
<td align="left">选择所有具有有效值的 <input> 元素。（类似于上面的:invalid）</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_visited.asp">:visited</a></td>
<td align="left">a:visited</td>
<td align="left">选择所有已访问的链接。</td>
</tr>
</tbody></table>
<h3 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h3><h4 id="after"><a href="#after" class="headerlink" title="::after"></a>::after</h4><p>在指定元素后面插入内容(必须有content属性不然无效)</p>
<p>在每个 </p><p> 元素后面插入内容，并设置所插入内容的样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:after</span></span><br><span class="line">&#123; </span><br><span class="line"><span class="attribute">content</span>:<span class="string">&quot;台词：-&quot;</span>;</span><br><span class="line"><span class="attribute">background-color</span>:yellow;</span><br><span class="line"><span class="attribute">color</span>:red;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="before"><a href="#before" class="headerlink" title="::before"></a>::before</h4><p>在指定元素前面插入内容</p>
<p>使用方法与::after一样</p>
<h4 id="所有css伪元素"><a href="#所有css伪元素" class="headerlink" title="所有css伪元素"></a>所有css伪元素</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">例子</th>
<th align="left">例子描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_after.asp">::after</a></td>
<td align="left">p::after</td>
<td align="left">在每个 <p> 元素之后插入内容。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_before.asp">::before</a></td>
<td align="left">p::before</td>
<td align="left">在每个 <p> 元素之前插入内容。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_first-letter.asp">::first-letter</a></td>
<td align="left">p::first-letter</td>
<td align="left">选择每个 <p> 元素的首字母。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_first-line.asp">::first-line</a></td>
<td align="left">p::first-line</td>
<td align="left">选择每个 <p> 元素的首行。</p></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/selector_selection.asp">::selection</a></td>
<td align="left">p::selection</td>
<td align="left">选择用户选择的元素部分。</td>
</tr>
</tbody></table>
<h3 id="元素显示模式display"><a href="#元素显示模式display" class="headerlink" title="元素显示模式display"></a>元素显示模式display</h3><p>块、行、行内、(block、inline、inline-block)</p>
<p>还有flex布局方式</p>
<h4 id="块"><a href="#块" class="headerlink" title="块"></a>块</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h1 div p ul ol dl li dt dl   </span><br><span class="line">文字类中不能在方块元素</span><br></pre></td></tr></table></figure>

<img src="/html-css/image-20220607011616931-1676560993603475.png" alt="image-20220607011616931" style="zoom: 50%;">

<img src="/html-css/image-20220607011823048-1676560993603476.png" alt="image-20220607011823048" style="zoom: 50%;">

<h4 id="行"><a href="#行" class="headerlink" title="行"></a>行</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a span strong b em  i del ins i</span><br><span class="line">不能直接宽和高</span><br></pre></td></tr></table></figure>

<img src="/html-css/image-20220607012054837-1676560993603477.png" alt="image-20220607012054837" style="zoom:50%;">

<img src="/html-css/image-20220607012201755-1676560993603478.png" alt="image-20220607012201755" style="zoom:50%;">

<h4 id="行内块"><a href="#行内块" class="headerlink" title="行内块"></a>行内块</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">imp inut td</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/html-css/image-20220607012439616-1676560993603479.png" alt="image-20220607012439616" style="zoom:50%;">

<p><img src="/html-css/image-20220607012548152-1676560993603480.png" alt="image-20220607012548152"></p>
<h4 id="模式可以转换displa"><a href="#模式可以转换displa" class="headerlink" title="模式可以转换displa"></a>模式可以转换displa</h4><h3 id="三大特性"><a href="#三大特性" class="headerlink" title="三大特性"></a>三大特性</h3><h4 id="层叠性"><a href="#层叠性" class="headerlink" title="层叠性"></a>层叠性</h4><img src="/html-css/image-20220607165949598-1676560993603481.png" alt="image-20220607165949598" style="zoom:50%;">

<p>样式不冲突时合并使用</p>
<h4 id="优先级-1"><a href="#优先级-1" class="headerlink" title="优先级"></a>优先级</h4><table>
<thead>
<tr>
<th align="left">选择器</th>
<th>权重</th>
</tr>
</thead>
<tbody><tr>
<td align="left">！important重要的</td>
<td>无穷大</td>
</tr>
<tr>
<td align="left">行内</td>
<td>1000</td>
</tr>
<tr>
<td align="left">id</td>
<td>0100</td>
</tr>
<tr>
<td align="left">calls、伪类、属性</td>
<td>0010</td>
</tr>
<tr>
<td align="left">元素和伪元素</td>
<td>1</td>
</tr>
<tr>
<td align="left">继承和 通配符 *</td>
<td>0</td>
</tr>
</tbody></table>
<p>优先级的权重会叠加</p>
<h4 id="继承性"><a href="#继承性" class="headerlink" title="继承性"></a>继承性</h4><p>跟文字相关的样式基本都可以继承</p>
<p>子元素会继承父元素的样式（text- \font-\line-这些元素开头的可以继承以及color ）</p>
<h3 id="背景background"><a href="#背景background" class="headerlink" title="背景background"></a>背景background</h3><h4 id="background-color-背景颜色"><a href="#background-color-背景颜色" class="headerlink" title="background-color 背景颜色"></a>background-color 背景颜色</h4><p>通过 CSS，颜色通常由以下方式指定：</p>
<ul>
<li>有效的颜色名称 - 比如 “red”</li>
<li>十六进制值 - 比如 “#ff0000”</li>
<li>RGB 值 - 比如 “rgb(255,0,0)”</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">opacity 透明度属性</span><br><span class="line">或使用</span><br><span class="line">rgba</span><br><span class="line">hsla</span><br></pre></td></tr></table></figure>

<h4 id="background-image-背景图片"><a href="#background-image-背景图片" class="headerlink" title="background-image 背景图片"></a>background-image 背景图片</h4><p><code>background-image</code> 属性指定用作元素背景的图像。</p>
<p>默认情况下，图像会重复，以覆盖整个元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-image: url();</span><br></pre></td></tr></table></figure>



<h4 id="background-repeat"><a href="#background-repeat" class="headerlink" title="background-repeat"></a>background-repeat</h4><p>默认情况下，<code>background-image</code> 属性在水平和垂直方向上都重复图像。</p>
<p>某些图像应只适合水平或垂直方向上重复，否则它们看起来会很奇怪</p>
<p>仅在水平方向重复 (<code>background-repeat: repeat-x;</code>)</p>
<p>垂直重复图像<code>background-repeat: repeat-y;</code>。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">	<span class="attribute">background-repeat</span>: repeat-x; 水平平铺</span><br><span class="line">	<span class="attribute">background-repeat</span>: repeat-y； 垂直平铺</span><br><span class="line">	backgrount-repeat:no-repeat; 无平铺</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="background-position-背景图像的位置。"><a href="#background-position-背景图像的位置。" class="headerlink" title="background-position 背景图像的位置。"></a>background-position 背景图像的位置。</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">把背景图片放在右上角：</span><br><span class="line"><span class="selector-tag">body</span>&#123; </span><br><span class="line"><span class="attribute">background-position</span>: right top;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="background-attachment-滚动还是固定"><a href="#background-attachment-滚动还是固定" class="headerlink" title="background-attachment 滚动还是固定"></a>background-attachment 滚动还是固定</h4><p><code>background-attachment</code> 属性指定背景图像是应该滚动还是固定的（不会随页面的其余部分一起滚动）：</p>
<p>fixed和scroll</p>
<p>默认为滚动的</p>
<p>指定应该固定背景图像：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;tree.png&quot;</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>: right top;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>指定背景图像应随页面的其余部分一起滚动：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;tree.png&quot;</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>: right top;</span><br><span class="line">  <span class="attribute">background-attachment</span>: scroll;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="简写形式"><a href="#简写形式" class="headerlink" title="简写形式"></a>简写形式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;tree.png&quot;</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>: right top;</span><br><span class="line">&#125;</span><br><span class="line">简写为</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffffff</span> <span class="built_in">url</span>(<span class="string">&quot;tree.png&quot;</span>) no-repeat right top</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">没有特定顺序要求</span><br><span class="line">属性值之一缺失并不要紧，只要按照此顺序设置其他值即可。请注意，在上面的例子中，我们没有使用 background-attachment 属性，因为它没有值。</span><br></pre></td></tr></table></figure>

<h4 id="background-clip-规定背景的绘制区域。"><a href="#background-clip-规定背景的绘制区域。" class="headerlink" title="background-clip 规定背景的绘制区域。"></a>background-clip 规定背景的绘制区域。</h4><table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
<th align="left">测试</th>
</tr>
</thead>
<tbody><tr>
<td align="left">border-box</td>
<td align="left">背景被裁剪到边框盒。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/c.asp?f=css_background-clip">测试</a></td>
</tr>
<tr>
<td align="left">padding-box</td>
<td align="left">背景被裁剪到内边距框。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/c.asp?f=css_background-clip&p=2">测试</a></td>
</tr>
<tr>
<td align="left">content-box</td>
<td align="left">背景被裁剪到内容框。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/c.asp?f=css_background-clip&p=3">测试</a></td>
</tr>
</tbody></table>
<h4 id="background-origin属性规定-background-position-属性相对于什么位置来定位。"><a href="#background-origin属性规定-background-position-属性相对于什么位置来定位。" class="headerlink" title="background-origin属性规定 background-position 属性相对于什么位置来定位。"></a>background-origin属性规定 background-position 属性相对于什么位置来定位。</h4><table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
<th align="left">测试</th>
</tr>
</thead>
<tbody><tr>
<td align="left">padding-box</td>
<td align="left">背景图像相对于内边距框来定位。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/c.asp?f=css_background-origin">测试</a></td>
</tr>
<tr>
<td align="left">border-box</td>
<td align="left">背景图像相对于边框盒来定位。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/c.asp?f=css_background-origin&p=2">测试</a></td>
</tr>
<tr>
<td align="left">content-box</td>
<td align="left">背景图像相对于内容框来定位。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/c.asp?f=css_background-origin&p=3">测试</a></td>
</tr>
</tbody></table>
<h3 id="边框border"><a href="#边框border" class="headerlink" title="边框border"></a>边框border</h3><p>CSS <code>border</code> 属性允许您指定元素边框的样式、宽度和颜色。</p>
<h4 id="边框样式border-style"><a href="#边框样式border-style" class="headerlink" title="边框样式border-style"></a>边框样式border-style</h4><p><code>border-style</code> 属性指定要显示的边框类型。</p>
<p>允许以下值：</p>
<ul>
<li><code>dotted</code> - 定义点线边框</li>
<li><code>dashed</code> - 定义虚线边框</li>
<li><code>solid</code> - 定义实线边框</li>
<li><code>double</code> - 定义双边框</li>
<li><code>groove</code> - 定义 3D 坡口边框。效果取决于 border-color 值</li>
<li><code>ridge</code> - 定义 3D 脊线边框。效果取决于 border-color 值</li>
<li><code>inset</code> - 定义 3D inset 边框。效果取决于 border-color 值</li>
<li><code>outset</code> - 定义 3D outset 边框。效果取决于 border-color 值</li>
<li><code>none</code> - 定义无边框</li>
<li><code>hidden</code> - 定义隐藏边框</li>
</ul>
<p>一个值时：四边相同</p>
<p>二个值时：前上下后左右</p>
<p>三个值时：一 上 、二左右 、三下</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">1px</span> pink;</span><br><span class="line">      <span class="attribute">border-style</span>: solid dotted dashed;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="边框颜色border-color"><a href="#边框颜色border-color" class="headerlink" title="边框颜色border-color"></a>边框颜色border-color</h4><p><code>border-color</code> 属性用于设置四个边框的颜色。</p>
<p>可以通过以下方式设置颜色：</p>
<ul>
<li>name - 指定颜色名，比如 “red”</li>
<li>HEX - 指定十六进制值，比如 “#ff0000”</li>
<li>RGB - 指定 RGB 值，比如 “rgb(255,0,0)”</li>
<li>HSL - 指定 HSL 值，比如 “hsl(0, 100%, 50%)”</li>
<li>transparent透明</li>
</ul>
<p><strong>注释：</strong>如果未设置 <code>border-color</code>，则它将继承元素的颜色。</p>
<p>特定边框的颜色<br>border-color 属性可以设置一到四个值（用于上边框、右边框、下边框和左边框）。</p>
<p>实例</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-class">.one</span> &#123;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-color</span>: red green blue yellow; <span class="comment">/* 上红、右绿、下蓝、左黄 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="边框宽度border-width"><a href="#边框宽度border-width" class="headerlink" title="边框宽度border-width"></a>边框宽度border-width</h4><p>可以将宽度设置为特定大小（以 px、pt、cm、em 计），也可以使用以下三个预定义值之一：thin、medium 或 thick：</p>
<p>特定边的宽度</p>
<p><code>border-width</code> 属性可以设置一到四个值（用于上边框、右边框、下边框和左边框）</p>
<p>一个值时：四边相同</p>
<p>二个值时：前上下后左右</p>
<p>三个值时：一 上 、二左右 、三下</p>
<h4 id="简写"><a href="#简写" class="headerlink" title="简写"></a>简写</h4><p><code>border</code> 属性是以下各个边框属性的简写属性：</p>
<ul>
<li><code>border-width</code></li>
<li><code>border-style</code>（必需）</li>
<li><code>border-color</code></li>
</ul>
<h4 id="圆角边框border-radius"><a href="#圆角边框border-radius" class="headerlink" title="圆角边框border-radius"></a>圆角边框border-radius</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以是四个值三个值</p>
<h3 id="外边距margin"><a href="#外边距margin" class="headerlink" title="外边距margin"></a>外边距margin</h3><p>CSS <code>margin</code> 属性用于在任何定义的边框之外，为元素周围创建空间</p>
<p>CSS 拥有用于为元素的每一侧指定外边距的属性：</p>
<ul>
<li><code>margin-top</code></li>
<li><code>margin-right</code></li>
<li><code>margin-bottom</code></li>
<li><code>margin-left</code></li>
</ul>
<p>所有外边距属性都可以设置以下值：</p>
<ul>
<li>auto - 浏览器来计算外边距</li>
<li><em>length</em> - 以 px、pt、cm 等单位指定外边距</li>
<li>% - 指定以包含元素宽度的百分比计的外边距</li>
<li>inherit - 指定应从父元素继承外边距</li>
</ul>
<p><code>提示：允许负值。</code></p>
<p><code>注意：行内元素设置上下margin无效</code></p>
<h4 id="简写-1"><a href="#简写-1" class="headerlink" title="简写"></a>简写</h4><p>可以在一个属性中指定所有外边距属性。</p>
<p>如果 <code>margin</code> 属性有四个值：</p>
<ul>
<li><p>margin: 25px 50px 75px 100px;</p>
</li>
<li><ul>
<li>上外边距是 25px</li>
<li>右外边距是 50px</li>
<li>下外边距是 75px</li>
<li>左外边距是 100px</li>
</ul>
</li>
</ul>
<p>如果 <code>margin</code> 属性设置三个值：</p>
<ul>
<li><p>margin: 25px 50px 75px;</p>
</li>
<li><ul>
<li>上外边距是 25px</li>
<li>右和左外边距是 50px</li>
<li>下外边距是 75px</li>
</ul>
</li>
</ul>
<p>如果 <code>margin</code> 属性设置两个值：</p>
<ul>
<li><p>margin: 25px 50px;</p>
</li>
<li><ul>
<li>上和下外边距是 25px</li>
<li>右和左外边距是 50px</li>
</ul>
</li>
</ul>
<h4 id="auto-值"><a href="#auto-值" class="headerlink" title="auto 值"></a>auto 值</h4><p>您可以将 margin 属性设置为 <code>auto</code>，以使元素在其容器中水平居中。</p>
<p>然后，该元素将占据指定的宽度，并且剩余空间将在左右边界之间平均分配。</p>
<p><code>auto对行元素无效</code></p>
<h4 id="元素居中问题"><a href="#元素居中问题" class="headerlink" title="元素居中问题"></a>元素居中问题</h4><img src="/html-css/image-20220608153821897-1676560993603482.png" alt="image-20220608153821897" style="zoom:50%;">

<h4 id="inherit-值"><a href="#inherit-值" class="headerlink" title="inherit 值"></a>inherit 值</h4><p>本例使 </p><p class="ex1"> 元素的左外边距继承自父元素（<div>）：</div></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.ex1</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="外边距合并"><a href="#外边距合并" class="headerlink" title="外边距合并"></a>外边距合并</h4><p>外边距合并是指，当两个垂直外边距相遇时，它们将形成一个外边距。</p>
<p>合并后的外边距的高度等于两个发生合并的外边距的高度中的较大者</p>
<h5 id="外边距合并-1"><a href="#外边距合并-1" class="headerlink" title="外边距合并"></a>外边距合并</h5><h6 id="上下关系的盒子"><a href="#上下关系的盒子" class="headerlink" title="上下关系的盒子"></a>上下关系的盒子</h6><img src="/html-css/image-20220607192416240-1676560993603483.png" alt="image-20220607192416240" style="zoom: 80%;">

<h6 id="包含关系的合并"><a href="#包含关系的合并" class="headerlink" title="包含关系的合并"></a>包含关系的合并</h6><img src="/html-css/image-20220607193618250-1676560993604484.png" alt="image-20220607193618250" style="zoom:80%;">



<h6 id="空元素情况"><a href="#空元素情况" class="headerlink" title="空元素情况"></a>空元素情况</h6><p><img src="/html-css/image-20220607195134521-1676560993604485.png" alt="image-20220607195134521"></p>
<p><img src="/html-css/image-20220607195325057-1676560993604486.png" alt="image-20220607195325057"></p>
<h6 id="段落间紧凑的原因"><a href="#段落间紧凑的原因" class="headerlink" title="段落间紧凑的原因"></a>段落间紧凑的原因</h6><p><img src="/html-css/image-20220607200009468-1676560993604487.png" alt="image-20220607200009468"></p>
<h4 id="解决合并的方法"><a href="#解决合并的方法" class="headerlink" title="解决合并的方法"></a>解决合并的方法</h4><img src="/html-css/image-20220608155233968-1676560993604488.png" alt="image-20220608155233968" style="zoom:67%;">

<p><img src="/html-css/image-20220608155724698-1676560993604489.png" alt="image-20220608155724698"></p>
<p><img src="/html-css/image-20230202175303248-1676560993604490.png" alt="image-20230202175303248"></p>
<h3 id="内边距padding"><a href="#内边距padding" class="headerlink" title="内边距padding"></a>内边距padding</h3><p>通过 CSS，您可以完全控制内边距（填充）。有一些属性可以为元素的每一侧（上、右、下和左侧）设置内边距。</p>
<h4 id="Padding-单独的边"><a href="#Padding-单独的边" class="headerlink" title="Padding - 单独的边"></a>Padding - 单独的边</h4><p>CSS 拥有用于为元素的每一侧指定内边距的属性：</p>
<ul>
<li><code>padding-top</code></li>
<li><code>padding-right</code></li>
<li><code>padding-bottom</code></li>
<li><code>padding-left</code></li>
</ul>
<p>所有内边距属性都可以设置以下值：</p>
<ul>
<li><em>length</em> - 以 px、pt、cm 等单位指定内边距</li>
<li>% - 指定以包含元素宽度的百分比计的内边距</li>
<li>inherit - 指定应从父元素继承内边距</li>
</ul>
<p><code>提示：不允许负值。</code></p>
<p>简写方式与外边距<code>margin</code>一样</p>
<p><img src="/html-css/image-20220608152530801-1676560993604491.png" alt="image-20220608152530801"></p>
<h4 id="内边和元素宽度"><a href="#内边和元素宽度" class="headerlink" title="内边和元素宽度"></a>内边和元素宽度</h4><p>CSS <code>width</code> 属性指定<code>元素内容区域的宽度</code>。内容区域是元素（盒模型）的内边距、边框和外边距内的部分。</p>
<p>因此，如果元素拥有指定的宽度，则添加到该元素的内边距会添加到元素的总宽度中。这通常是不希望的结果</p>
<p><strong>即padding会撑大盒子</strong></p>
<p>解决盒子会被撑大的解决方法box-sizing</p>
<p>box-sizing设置盒子的大小将属性值设为border-box</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">content-box</td>
<td align="left">这是由 CSS2.1 规定的宽度高度行为。宽度和高度分别应用到元素的内容框。在宽度和高度之外绘制元素的内边距和边框。</td>
</tr>
<tr>
<td align="left">border-box</td>
<td align="left"><code>为元素设定的宽度和高度决定了元素的边框盒。</code>就是说，为元素指定的任何内边距和边框都将在已设定的宽度和高度内进行绘制。通过从已设定的宽度和高度分别减去边框和内边距才能得到内容的宽度和高度。</td>
</tr>
<tr>
<td align="left">inherit</td>
<td align="left"><code>规定应从父元素继承 box-sizing 属性的值。</code></td>
</tr>
</tbody></table>
<p>若要将宽度保持为 300px，无论填充量如何，那么您可以使用 <code>box-sizing</code> 属性。这将导致元素保持其宽度。如果增加内边距，则可用的内容空间会减少。</p>
<h3 id="css高度和宽度height-x2F-width"><a href="#css高度和宽度height-x2F-width" class="headerlink" title="css高度和宽度height&#x2F;width"></a>css高度和宽度height&#x2F;width</h3><p>height 和 width 属性<code>不包括内边距、边框或外边距。</code> <code>它设置的是元素内边距、边框以及外边距内的区域的高度或宽度</code>（简单说就是元素内部的内容高度和宽度）</p>
<p>属性值如下：</p>
<ul>
<li><code>auto</code> - 默认。浏览器计算高度和宽度。</li>
<li><code>*length*</code> - 以 px、cm 等定义高度&#x2F;宽度。（常用）</li>
<li><code>%</code> - 以包含块的百分比定义高度&#x2F;宽度。（常用）</li>
<li><code>initial</code> - 将高度&#x2F;宽度设置为默认值。</li>
<li><code>inherit</code> - 从其父值继承高度&#x2F;宽度。</li>
</ul>
<h4 id="设置最大宽度max-width"><a href="#设置最大宽度max-width" class="headerlink" title="设置最大宽度max-width"></a>设置最大宽度max-width</h4><p>可以用长度值（例如 px、cm 等）或包含块的百分比（％）来指定 max-width（最大宽度），也可以将其设置为 none（默认值。意味着没有最大宽度）</p>
<p>设置这个可适配不同大小屏幕的显示</p>
<h4 id="设置-CSS-尺寸属性"><a href="#设置-CSS-尺寸属性" class="headerlink" title="设置 CSS 尺寸属性"></a>设置 CSS 尺寸属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_dim_height.asp">height</a></td>
<td align="left">设置元素的高度。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_dim_max-height.asp">max-height</a></td>
<td align="left">设置元素的最大高度。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_dim_max-width.asp">max-width</a></td>
<td align="left">设置元素的最大宽度。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_dim_min-height.asp">min-height</a></td>
<td align="left">设置元素的最小高度。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_dim_min-width.asp">min-width</a></td>
<td align="left">设置元素的最小宽度。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_dim_width.asp">width</a></td>
<td align="left">设置元素的宽度。</td>
</tr>
</tbody></table>
<h3 id="框模型"><a href="#框模型" class="headerlink" title="框模型"></a>框模型</h3><p><img src="/html-css/image-20220607205307515-1676560993604492.png" alt="image-20220607205307515"></p>
<p>对不同部分的说明：</p>
<ul>
<li><em>内容</em> - 框的内容，其中显示文本和图像。</li>
<li><em>内边距</em> - 清除内容周围的区域。内边距是透明的。</li>
<li><em>边框</em> - 围绕内边距和内容的边框。</li>
<li><em>外边距</em> - 清除边界外的区域。外边距是透明的。</li>
</ul>
<h3 id="轮廓outline"><a href="#轮廓outline" class="headerlink" title="轮廓outline"></a>轮廓outline</h3><p>轮廓是在元素周围绘制的一条线，在边框之外，以凸显元素。</p>
<p>CSS 拥有如下轮廓属性：</p>
<ul>
<li><code>outline-style</code></li>
<li><code>outline-color</code></li>
<li><code>outline-width</code></li>
<li><code>outline-offset</code></li>
<li><code>outline</code></li>
</ul>
<p><strong>注意：</strong>轮廓与<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/css/css_border.asp">边框</a>不同！不同之处在于：轮廓是在元素边框之外绘制的，并且可能与其他内容重叠。同样，轮廓也不是元素尺寸的一部分；元素的总宽度和高度不受轮廓线宽度的影响。</p>
<h4 id="CSS-轮廓样式outline-style"><a href="#CSS-轮廓样式outline-style" class="headerlink" title="CSS 轮廓样式outline-style"></a>CSS 轮廓样式outline-style</h4><p>outline-style 属性指定轮廓的样式，并可设置如下值：</p>
<ul>
<li><code>dotted</code> - 定义点状的轮廓。</li>
<li><code>dashed</code> - 定义虚线的轮廓。</li>
<li><code>solid</code> - 定义实线的轮廓。</li>
<li><code>double</code> - 定义双线的轮廓。</li>
<li><code>groove</code> - 定义 3D 凹槽轮廓。</li>
<li><code>ridge</code> - 定义 3D 凸槽轮廓。</li>
<li><code>inset</code> - 定义 3D 凹边轮廓。</li>
<li><code>outset</code> - 定义 3D 凸边轮廓。</li>
<li><code>none</code> - 定义无轮廓。</li>
<li><code>hidden</code> - 定义隐藏的轮廓。</li>
</ul>
<p><strong>注意：</strong>除非设置了 <code>outline-style</code> 属性，否则其他轮廓属性（在下一章中将详细介绍）都不会有任何作用！</p>
<h4 id="轮廓宽度outline-width"><a href="#轮廓宽度outline-width" class="headerlink" title="轮廓宽度outline-width"></a>轮廓宽度outline-width</h4><p><code>outline-width</code> 属性指定轮廓的宽度，并可设置如下值之一：</p>
<ul>
<li>thin（通常为 1px）</li>
<li>medium（通常为 3px）</li>
<li>thick （通常为 5px）</li>
<li>特定尺寸（以 px、pt、cm、em 计）</li>
</ul>
<h4 id="轮廓颜色outline-color"><a href="#轮廓颜色outline-color" class="headerlink" title="轮廓颜色outline-color"></a>轮廓颜色outline-color</h4><p><code>outline-color</code> 属性用于设置轮廓的颜色。</p>
<p>可以通过以下方式设置颜色：</p>
<ul>
<li><em>name</em> - 指定颜色名，比如 “red”</li>
<li>HEX - 指定十六进制值，比如 “#ff0000”</li>
<li>RGB - 指定 RGB 值，比如 “rgb(255,0,0)”</li>
<li>HSL - 指定 HSL 值，比如 “hsl(0, 100%, 50%)”</li>
<li>invert - 执行颜色反转（确保轮廓可见，无论是什么颜色背景）</li>
</ul>
<p>简写方式同边框一样</p>
<h4 id="轮廓偏移量outline-offset"><a href="#轮廓偏移量outline-offset" class="headerlink" title="轮廓偏移量outline-offset"></a>轮廓偏移量outline-offset</h4><p><code>outline-offset</code> 属性在元素的轮廓与边框之间添加空间。元素及其轮廓之间的空间是透明的。</p>
<h4 id="所有-CSS-轮廓属性"><a href="#所有-CSS-轮廓属性" class="headerlink" title="所有 CSS 轮廓属性"></a>所有 CSS 轮廓属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_outline.asp">outline</a></td>
<td align="left">简写属性，在一条声明中设置 outline-width、outline-style 以及 outline-color。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_outline-color.asp">outline-color</a></td>
<td align="left">设置轮廓的颜色。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_outline-offset.asp">outline-offset</a></td>
<td align="left">指定轮廓与元素的边缘或边框之间的空间。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_outline-style.asp">outline-style</a></td>
<td align="left">设置轮廓的样式。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_outline-width.asp">outline-width</a></td>
<td align="left">设置轮廓的宽度。</td>
</tr>
</tbody></table>
<h3 id="盒子阴影box-shadow"><a href="#盒子阴影box-shadow" class="headerlink" title="盒子阴影box-shadow"></a>盒子阴影box-shadow</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box-shadow: x轴  y轴 实虚影子大小 颜色 内外阴影(默认为外)</span><br></pre></td></tr></table></figure>

<p><img src="/html-css/image-20220608195625105-1676560993604493.png" alt="image-20220608195625105"></p>
<p><img src="/html-css/image-20220608210557721-1676560993604494.png" alt="image-20220608210557721"></p>
<h3 id="三角形盒子"><a href="#三角形盒子" class="headerlink" title="三角形盒子"></a>三角形盒子</h3><h1 id="CSS中级教程"><a href="#CSS中级教程" class="headerlink" title="CSS中级教程"></a>CSS中级教程</h1><h2 id="CSS布局display"><a href="#CSS布局display" class="headerlink" title="CSS布局display"></a>CSS布局display</h2><p>display属性是用于控制布局最重要的CSS属性</p>
<p>display属性规定是否&#x2F;如何显示元素</p>
<p>每个html元素都有一个默认的display值</p>
<p><strong>注意：</strong>设置元素的 display 属性仅会更改<em>元素的显示方式</em>，而不会更改元素的种类。因此，带有 <code>display: block;</code> 的行内元素不允许在其中包含其他块元素。</p>
<p><code>visibility:hidden;</code> 也可以隐藏元素。</p>
<p>但是，该元素仍将<code>占用与之前相同的空间</code>。元素将被隐藏，但仍会影响布局：</p>
<p>可能的值</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">none</td>
<td align="left">此元素不会被显示。</td>
</tr>
<tr>
<td align="left">block</td>
<td align="left">此元素将显示为块级元素，此元素前后会带有换行符。</td>
</tr>
<tr>
<td align="left">inline</td>
<td align="left">默认。此元素会被显示为内联元素，元素前后没有换行符。</td>
</tr>
<tr>
<td align="left">inline-block</td>
<td align="left">行内块元素。（CSS2.1 新增的值）</td>
</tr>
<tr>
<td align="left">list-item</td>
<td align="left">此元素会作为列表显示。</td>
</tr>
<tr>
<td align="left">run-in</td>
<td align="left">此元素会根据上下文作为块级元素或内联元素显示。</td>
</tr>
<tr>
<td align="left">compact</td>
<td align="left">CSS 中有值 compact，不过由于缺乏广泛支持，已经从 CSS2.1 中删除。</td>
</tr>
<tr>
<td align="left">marker</td>
<td align="left">CSS 中有值 marker，不过由于缺乏广泛支持，已经从 CSS2.1 中删除。</td>
</tr>
<tr>
<td align="left">table</td>
<td align="left">此元素会作为块级表格来显示（类似 <table>），表格前后带有换行符。</table></td>
</tr>
<tr>
<td align="left">inline-table</td>
<td align="left">此元素会作为内联表格来显示（类似 <table>），表格前后没有换行符。</table></td>
</tr>
<tr>
<td align="left">table-row-group</td>
<td align="left">此元素会作为一个或多个行的分组来显示（类似 <tbody>）。</tbody></td>
</tr>
<tr>
<td align="left">table-header-group</td>
<td align="left">此元素会作为一个或多个行的分组来显示（类似 <thead>）。</thead></td>
</tr>
<tr>
<td align="left">table-footer-group</td>
<td align="left">此元素会作为一个或多个行的分组来显示（类似 <tfoot>）。</tfoot></td>
</tr>
<tr>
<td align="left">table-row</td>
<td align="left">此元素会作为一个表格行显示（类似 </td></tr><tr>）。
</tr>
<tr>
<td align="left">table-column-group</td>
<td align="left">此元素会作为一个或多个列的分组来显示（类似 <colgroup>）。</colgroup></td>
</tr>
<tr>
<td align="left">table-column</td>
<td align="left">此元素会作为一个单元格列显示（类似 <col>）</td>
</tr>
<tr>
<td align="left">table-cell</td>
<td align="left">此元素会作为一个表格单元格显示（类似 </td><td> 和 <th>）</th></td>
</tr>
<tr>
<td align="left">table-caption</td>
<td align="left">此元素会作为一个表格标题显示（类似 <caption>）</caption></td>
</tr>
<tr>
<td align="left">inherit</td>
<td align="left">规定应该从父元素继承 display 属性的值。</td>
</tr>
</tbody></table>
<h3 id="CSS-Display-x2F-Visibility-属性"><a href="#CSS-Display-x2F-Visibility-属性" class="headerlink" title="CSS Display&#x2F;Visibility 属性"></a>CSS Display&#x2F;Visibility 属性</h3><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_class_display.asp">display</a></td>
<td align="left">指定应如何显示元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_class_visibility.asp">visibility</a></td>
<td align="left">指定元素是否应该可见。</td>
</tr>
</tbody></table>
<h2 id="浮动float"><a href="#浮动float" class="headerlink" title="浮动float"></a>浮动float</h2><p><img src="/html-css/image-20220608212310568-1676560993604495.png" alt="image-20220608212310568"></p>
<p><code>元素在添加浮动后会自动具有行内块元素的特点</code></p>
<img src="/html-css/image-20220608214750696-1676560993605496.png" alt="image-20220608214750696" style="zoom:80%;">

<img src="/html-css/image-20220608215004578-1676560993605497.png" alt="image-20220608215004578" style="zoom:80%;">



<h3 id="浮动布局的注意点"><a href="#浮动布局的注意点" class="headerlink" title="浮动布局的注意点"></a>浮动布局的注意点</h3><p><img src="/html-css/image-20220608225939250-1676560993605498.png" alt="image-20220608225939250"></p>
<h2 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h2><p><img src="/html-css/image-20220608232043603-1676560993605499.png" alt="image-20220608232043603"></p>
<img src="/html-css/image-20220608232159920-1676560993605500.png" alt="image-20220608232159920" style="zoom:50%;">



<img src="/html-css/image-20220608234902112-1676560993605501.png" alt="image-20220608234902112" style="zoom:50%;">



<h3 id="方法一加空标签"><a href="#方法一加空标签" class="headerlink" title="方法一加空标签"></a>方法一加空标签</h3><p>&lt;img src&#x3D;”html+css.assets&#x2F;image-20220608232228591.png” alt&#x3D;”image-20220608232228591” style&#x3D;”zoom:50%;” &#x2F;</p>
<p><img src="/html-css/image-20220608233510104-1676560993605502.png" alt="image-20220608233510104"></p>
<p>需要清除两侧的浮动只在最后加空标签无效</p>
<p><code>注意该空元素不能是行级元素块级和行内块都行</code></p>
<h3 id="方法二使用overflow"><a href="#方法二使用overflow" class="headerlink" title="方法二使用overflow"></a>方法二使用overflow</h3><img src="/html-css/image-20220608234247834-1676560993605503.png" alt="image-20220608234247834" style="zoom:50%;">



<h4 id="方法三使用伪元素法-after"><a href="#方法三使用伪元素法-after" class="headerlink" title="方法三使用伪元素法:after"></a>方法三使用伪元素法:after</h4><img src="/html-css/image-20220608234609724-1676560993605504.png" alt="image-20220608234609724" style="zoom:50%;">



<h4 id="方法三双伪元素方法"><a href="#方法三双伪元素方法" class="headerlink" title="方法三双伪元素方法"></a>方法三双伪元素方法</h4><img src="/html-css/image-20220608234710557-1676560993606505.png" alt="image-20220608234710557" style="zoom:50%;">

<h3 id="css布局-position属性定位"><a href="#css布局-position属性定位" class="headerlink" title="css布局-position属性定位"></a>css布局-position属性定位</h3><p>position属性规定应用于元素的定位方法的类型</p>
<ul>
<li>static</li>
<li>relative</li>
<li>fixed</li>
<li>absolute</li>
<li>sticky</li>
</ul>
<p>元素其实是使用 top、bottom、left 和 right 属性定位的。但是，除非首先设置了 position 属性，否则这些属性将不起作用。根据不同的 position 值，它们的工作方式也不同。</p>
<h4 id="static静态定位"><a href="#static静态定位" class="headerlink" title="static静态定位"></a>static静态定位</h4><p>HTML 元素默认情况下的定位方式为 static（静态）。</p>
<p><code>静态定位的元素不受 top、bottom、left 和 right 属性的影响。</code></p>
<h4 id="relative相对定位"><a href="#relative相对定位" class="headerlink" title="relative相对定位\"></a>relative相对定位\</h4><p><code>position:relative</code>的元素相对其正常位置进行定位的（即relative是以自己作为参考点的）</p>
<p>设置相对定位的元素的top\left\right\bottom属性将会导致其偏离正常的位置，不过会占着原有的位置不会占调整后的位置</p>
<p><code>当期与其他元素重叠时可能会被盖住</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.one</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tow</span> &#123;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: antiquewhite;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;one&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tow&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/html-css/image-20220609005202442-1676560993606506.png" alt="image-20220609005202442"></p>
<h4 id="fixed固定定位"><a href="#fixed固定定位" class="headerlink" title="fixed固定定位"></a>fixed固定定位</h4><p><code>position:fixed</code>的元素是相对于视口来定位的，这意味着即使页面滚动他也会不会动</p>
<p>固定定位的元素不会在页面中通常应放置的位置上留出空隙。</p>
<h4 id="absolute绝对定位"><a href="#absolute绝对定位" class="headerlink" title="absolute绝对定位"></a>absolute绝对定位</h4><p><code>position:absolute</code>的元素相对最近的<code>定位祖元素进行定位</code>，（不是视口，<code>但也不一定时父元素是具有定位的祖元素</code>）</p>
<p>然而，如果绝对定位的元素没有祖先，它将使用文档主体（body），并随页面滚动一起移动。</p>
<p><strong>注意：</strong>“被定位的”元素是其位置除 <code>static</code> 以外的任何元素。</p>
<p>不会占用位置</p>
<p>使用时一般按照<code>子绝父相</code>的方式来使用</p>
<h4 id="sticky粘性定位"><a href="#sticky粘性定位" class="headerlink" title="sticky粘性定位"></a>sticky粘性定位</h4><p><code>(新增的具有一定的兼容性问题)</code></p>
<p><code>position: sticky;</code> 的元素根据用户的滚动位置进行定位。</p>
<p>粘性元素根据滚动位置在相对（<code>relative</code>）和固定（<code>fixed</code>）之间切换。起先它会被相对定位，直到在视口中遇到给定的偏移位置为止 - 然后将其“粘贴”在适当的位置（比如 position:fixed）</p>
<p><strong>注意：</strong>Internet Explorer、Edge 15 以及更早的版本不支持粘性定位。 Safari 需要 -webkit- 前缀（请参见下面的实例）。您还必须至少指定 <code>top</code>、<code>right</code>、<code>bottom</code> 或 <code>left</code> 之一，以便粘性定位起作用</p>
<h4 id="重叠元素z-index"><a href="#重叠元素z-index" class="headerlink" title="重叠元素z-index"></a>重叠元素z-index</h4><p>在对元素进行定位时，它们可以与其他元素重叠。</p>
<p><code>z-index</code> 属性指定元素的堆栈顺序（哪个元素应放置在其他元素的前面或后面）。</p>
<p>元素可以设置正或负的堆叠顺序：</p>
<p>具有较高堆叠顺序的元素始终位于具有较低堆叠顺序的元素之前。</p>
<p><strong>注意：</strong>如果两个定位的元素重叠而未指定 <code>z-index</code>，则位于 HTML 代码中最后的元素将显示在顶部。</p>
<p>即在未设置叠放顺序时，按书写顺序后写的在上</p>
<p>数值可以是正整数，负整数或0,默认为auto,数值越大盒子越靠上</p>
<p><code>数值后不能带单位</code></p>
<p>只有定位的盒子有z-index属性</p>
<h4 id="所有-CSS-定位属性"><a href="#所有-CSS-定位属性" class="headerlink" title="所有 CSS 定位属性"></a>所有 CSS 定位属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_pos_bottom.asp">bottom</a></td>
<td align="left">设置定位框的底部外边距边缘。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_pos_clip.asp">clip</a></td>
<td align="left">剪裁绝对定位的元素。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_pos_left.asp">left</a></td>
<td align="left">设置定位框的左侧外边距边缘。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_class_position.asp">position</a></td>
<td align="left">规定元素的定位类型。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_pos_right.asp">right</a></td>
<td align="left">设置定位框的右侧外边距边缘。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_pos_top.asp">top</a></td>
<td align="left">设置定位框的顶部外边距边缘。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_pos_z-index.asp">z-index</a></td>
<td align="left">设置元素的堆叠顺序。</td>
</tr>
</tbody></table>
<h5 id="clip"><a href="#clip" class="headerlink" title="clip"></a>clip</h5><p>clip 属性剪裁绝对定位元素。</p>
<p>这个属性用于定义一个剪裁矩形。对于一个绝对定义元素，在这个矩形内的内容才可见。出了这个剪裁区域的内容会根据 overflow 的值来处理。剪裁区域可能比元素的内容区大，也可能比内容区小</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em>shape</em></td>
<td align="left">设置元素的形状。唯一合法的形状值是：rect (<em>top</em>, <em>right</em>, <em>bottom</em>, <em>left</em>)</td>
</tr>
<tr>
<td align="left">auto</td>
<td align="left">默认值。不应用任何剪裁。</td>
</tr>
<tr>
<td align="left">inherit</td>
<td align="left">规定应该从父元素继承 clip 属性的值。</td>
</tr>
</tbody></table>
<h3 id="溢出overflow"><a href="#溢出overflow" class="headerlink" title="溢出overflow"></a>溢出overflow</h3><p>overflow:属性指定在元素的内容太大而无法放入指定区域时是剪裁内容还是添加滚动条</p>
<p><code>overflow</code> 属性可设置以下值：</p>
<ul>
<li><code>visible</code> - 默认。溢出没有被剪裁。内容在元素框外渲染</li>
<li><code>hidden</code> - 溢出被剪裁，其余内容将不可见</li>
<li><code>scroll</code> - 溢出被剪裁，同时添加滚动条以查看其余内容</li>
<li><code>auto</code> - 与 <code>scroll</code> 类似，但仅在必要时添加滚动条</li>
</ul>
<p><strong>注释：</strong><code>overflow</code> 属性仅适用于具有指定高度的块元素。</p>
<h4 id="visible可见"><a href="#visible可见" class="headerlink" title="visible可见"></a>visible可见</h4><p>默认情况下溢出是可见的（visible），这意味着他不会被裁剪,而是在元素框外渲染</p>
<h4 id="hidden隐藏"><a href="#hidden隐藏" class="headerlink" title="hidden隐藏"></a>hidden隐藏</h4><p>hidden将溢出部分进行剪裁将其隐藏起来</p>
<h4 id="scroll添加滚动条"><a href="#scroll添加滚动条" class="headerlink" title="scroll添加滚动条"></a>scroll添加滚动条</h4><p>scroll将溢出部分进行剪裁，并添加滚动条以便显示被剪裁的部分</p>
<p><code>注意：这个属性会在水平和垂直的位置都添加上滚动条，不管需不需要始终都有</code></p>
<h4 id="auto自动的添加滚动条"><a href="#auto自动的添加滚动条" class="headerlink" title="auto自动的添加滚动条"></a>auto自动的添加滚动条</h4><p>auto类似与srcoll，但只在需要时添加滚动条(即水平或垂直方存在溢出时才会溢出的方向上添加滚动条)</p>
<h4 id="overflow-x和overflow-y"><a href="#overflow-x和overflow-y" class="headerlink" title="overflow-x和overflow-y"></a>overflow-x和overflow-y</h4><p><code>overflow-x</code> 和 <code>overflow-y</code> 属性规定是仅水平还是垂直地（或同时）更改内容的溢出：</p>
<ul>
<li><code>overflow-x</code> 指定如何处理内容的左&#x2F;右边缘。</li>
<li><code>overflow-y</code> 指定如何处理内容的上&#x2F;下边缘。</li>
</ul>
<h3 id="布局-水平和垂直对齐"><a href="#布局-水平和垂直对齐" class="headerlink" title="布局-水平和垂直对齐"></a>布局-水平和垂直对齐</h3><h4 id="居中对齐元素"><a href="#居中对齐元素" class="headerlink" title="居中对齐元素"></a>居中对齐元素</h4><p>要使块元素（例如 <div> ）水平居中，请使用 <code>margin: auto;</code>。</div></p>
<p>设置元素的宽度将防止其延伸到容器的边缘。</p>
<p>然后，元素将占用指定的宽度，剩余空间将在两个外边距之间平均分配</p>
<p><strong>注意：</strong>如果未设置 <code>width</code> 属性（或将其设置为 100％），则居中对齐无效</p>
<h4 id="居中对齐文本"><a href="#居中对齐文本" class="headerlink" title="居中对齐文本"></a>居中对齐文本</h4><p>如果仅需在元素内居中文本，请使用 <code>text-align: center;</code>：</p>
<h4 id="左和右对齐-使用-position"><a href="#左和右对齐-使用-position" class="headerlink" title="左和右对齐 - 使用 position"></a>左和右对齐 - 使用 position</h4><p>对齐元素的一种方法是使用 <code>position: absolute;</code> :</p>
<p><strong>注意：</strong>绝对定位的元素将从正常流中删除，并可能出现元素重叠</p>
<h4 id="左和右对齐-使用-float"><a href="#左和右对齐-使用-float" class="headerlink" title="左和右对齐 - 使用 float"></a>左和右对齐 - 使用 float</h4><p>对齐元素的另一种方法是使用 <code>float</code> 属性：</p>
<p><strong>注意：</strong>如果一个元素比包含它的元素高，并且它是浮动的，它将溢出其容器。您可以使用 <em>clearfix hack</em> 来解决此问题（请看下面的例子）。</p>
<h4 id="垂直对齐-使用-padding"><a href="#垂直对齐-使用-padding" class="headerlink" title="垂直对齐 - 使用 padding"></a>垂直对齐 - 使用 padding</h4><p>有很多方法可以在 CSS 中垂直对齐元素。一个简单的解决方案是使用上下内边距：</p>
<p>如需同时垂直和水平对齐，请使用 <code>padding</code> 和 <code>text-align: center;</code>：</p>
<h4 id="垂直对齐-使用-line-height"><a href="#垂直对齐-使用-line-height" class="headerlink" title="垂直对齐 - 使用 line-height"></a>垂直对齐 - 使用 line-height</h4><p>另一个技巧是使用<em>其值</em>等于 <code>height</code> 属性值的 <code>line-height</code> 属性：</p>
<h4 id="垂直对齐-使用-Flexbox"><a href="#垂直对齐-使用-Flexbox" class="headerlink" title="垂直对齐 - 使用 Flexbox"></a>垂直对齐 - 使用 Flexbox</h4><p>您还可以使用 flexbox 将内容居中。请注意，IE10 以及更早的版本不支持 flexbox：</p>
<h3 id="opacity透明度"><a href="#opacity透明度" class="headerlink" title="opacity透明度"></a>opacity透明度</h3><p><code>opacity</code> 属性的取值范围为 0.0-1.0。值越低，越透明：</p>
<p>使用 <code>opacity</code> 属性为元素的背景添加透明度时，<code>其所有子元素都继承相同的透明度</code>。这可能会使完全透明的元素内的文本难以阅读：</p>
<p>解决的方法是使用rgba()来实现子元素中文字的透明问题</p>
<h3 id="精灵图"><a href="#精灵图" class="headerlink" title="精灵图"></a>精灵图</h3><p>先添加背景图片在调整背景图片的位置background-position</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.one</span>&#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">58px</span>;</span><br><span class="line">            <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">../images/sprites.png</span>) ;</span><br><span class="line">            <span class="attribute">background-position</span>:-<span class="number">180px</span> <span class="number">0px</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="表单-1"><a href="#表单-1" class="headerlink" title="表单"></a>表单</h3><p>如果只想设置特定输入类型的样式，则可以使用属性选择器：</p>
<ul>
<li><code>input[type=text]</code> - 将仅选择文本字段</li>
<li><code>input[type=password]</code> - 将仅选择密码字段</li>
<li><code>input[type=number]</code> - 将仅选择数字字段</li>
<li>等等…</li>
</ul>
<h4 id="填充输入框"><a href="#填充输入框" class="headerlink" title="填充输入框"></a>填充输入框</h4><p>使用 <code>padding</code> 属性在文本字段内添加空间。</p>
<p><strong>提示：</strong>若有很多输入，那么您可能还需要添加外边距，以便在它们之外添加更多空间：</p>
<h4 id="带边框的输入框"><a href="#带边框的输入框" class="headerlink" title="带边框的输入框"></a>带边框的输入框</h4><p>请使用 <code>border</code> 属性更改边框的粗细和颜色，并使用 <code>border-radius</code> 属性添加圆角：</p>
<h4 id="获得焦点的输入框"><a href="#获得焦点的输入框" class="headerlink" title="获得焦点的输入框"></a>获得焦点的输入框</h4><p>默认情况下，某些浏览器在获得焦点（单击）时会在输入框周围添加蓝色轮廓。您可以通过向输入添加 <code>outline: none;</code> 来消除此行为。</p>
<h4 id="带有图标-x2F-图像的输入框"><a href="#带有图标-x2F-图像的输入框" class="headerlink" title="带有图标&#x2F;图像的输入框"></a>带有图标&#x2F;图像的输入框</h4><p>如果希望在输入框中包含图标，请使用 <code>background-image</code> 属性，并将其与 <code>background-position</code> 属性一起设置。还要注意，我们添加了一个较大的左内边距（padding-left）来留出图标的空间：</p>
<h4 id="设置文本域的样式"><a href="#设置文本域的样式" class="headerlink" title="设置文本域的样式"></a>设置文本域的样式</h4><p><strong>提示：</strong>使用 <code>resize</code> 属性可防止对 textareas 调整大小（禁用右下角的“抓取器”）：</p>
<h3 id="css计数器"><a href="#css计数器" class="headerlink" title="css计数器"></a>css计数器</h3><p>CSS 计数器是由 CSS 保持的“变量”，其值可以通过 CSS 规则递增（以跟踪其使用次数）。</p>
<p>计数器使您可以根据内容在文档中的位置来调整其外观。</p>
<h4 id="带计数器的自动编号"><a href="#带计数器的自动编号" class="headerlink" title="带计数器的自动编号"></a>带计数器的自动编号</h4><p>CSS 计数器就像“变量”。变量值可以通过 CSS 规则递增（将跟踪它们的使用次数）。</p>
<p>如需使用 CSS 计数器，我们将使用以下属性：</p>
<ul>
<li><code>counter-reset</code> - 创建或重置计数器</li>
<li><code>counter-increment</code> - 递增计数器值</li>
<li><code>content</code> - 插入生成的内容</li>
<li><code>counter()</code> 或 <code>counters()</code> 函数 - 将计数器的值添加到元素</li>
</ul>
<p>如需使用 CSS 计数器，必须首先使用 <code>counter-reset</code> 创建它。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h2</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">counter-increment</span>: section;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;Section &quot;</span> <span class="built_in">counter</span>(section) <span class="string">&quot;: &quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将值插入h2内容的前面面</p>
<h3 id="CSS单位"><a href="#CSS单位" class="headerlink" title="CSS单位"></a>CSS单位</h3><p>CSS 有几种表示长度的不同单位。</p>
<p>许多 CSS 属性接受“长度”值，诸如 <code>width</code>、<code>margin</code>、<code>padding</code>、<code>font-size</code> 等。</p>
<p>长度是一个后面跟着长度单位的数字，诸如 <code>10px</code>、<code>2em</code> 等。</p>
<p><code>数字和单位之间不能出现空格。但是，如果值为 0，则可以省略单位</code>。</p>
<p>对于<code>某些 CSS 属性</code>，允许使用负的长度。</p>
<p>长度单位有两种类型：<em>绝对单位</em>和<em>相对单位</em>。</p>
<h4 id="绝对长度"><a href="#绝对长度" class="headerlink" title="绝对长度"></a>绝对长度</h4><p>绝对长度单位是固定的，用任何一个绝对长度表示的长度都将恰好显示为这个尺寸。</p>
<p>不建议在屏幕上使用绝对长度单位，因为屏幕尺寸变化很大。但是，如果已知输出介质，则可以使用它们，例如用于打印布局（print layout）。</p>
<table>
<thead>
<tr>
<th align="left">单位</th>
<th align="left">描述</th>
<th align="left">TIY</th>
</tr>
</thead>
<tbody><tr>
<td align="left">cm</td>
<td align="left">厘米</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_cm">试一试</a></td>
</tr>
<tr>
<td align="left">mm</td>
<td align="left">毫米</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_mm">试一试</a></td>
</tr>
<tr>
<td align="left">in</td>
<td align="left">英寸 (1in &#x3D; 96px &#x3D; 2.54cm)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_in">试一试</a></td>
</tr>
<tr>
<td align="left">px *</td>
<td align="left">像素 (1px &#x3D; 1&#x2F;96th of 1in)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_px">试一试</a></td>
</tr>
<tr>
<td align="left">pt</td>
<td align="left">点 (1pt &#x3D; 1&#x2F;72 of 1in)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_pt">试一试</a></td>
</tr>
<tr>
<td align="left">pc</td>
<td align="left">派卡 (1pc &#x3D; 12 pt)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_pc">试一试</a></td>
</tr>
</tbody></table>
<p>***** 像素（px）是相对于观看设备的。对于低 dpi 的设备，1px 是显示器的一个设备像素（点）。对于打印机和高分辨率屏幕，1px 表示多个设备像素。</p>
<h4 id="相对长度"><a href="#相对长度" class="headerlink" title="相对长度"></a>相对长度</h4><p>相对长度单位规定相对于另一个长度属性的长度。相对长度单位在不同渲染介质之间缩放表现得更好。</p>
<table>
<thead>
<tr>
<th align="left">单位</th>
<th align="left">描述</th>
<th align="left">TIY</th>
</tr>
</thead>
<tbody><tr>
<td align="left">em</td>
<td align="left">相对于元素的字体大小（font-size）（2em 表示当前字体大小的 2 倍）用在段落缩进中</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_em">试一试</a></td>
</tr>
<tr>
<td align="left">ex</td>
<td align="left">相对于当前字体的 x-height(极少使用)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_ex">试一试</a></td>
</tr>
<tr>
<td align="left">ch</td>
<td align="left">相对于 “0”（零）的宽度</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_ch">试一试</a></td>
</tr>
<tr>
<td align="left">rem</td>
<td align="left">相对于根元素的字体大小（font-size）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_rem">试一试</a></td>
</tr>
<tr>
<td align="left">vw</td>
<td align="left">相对于视口*宽度的 1%</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_vw">试一试</a></td>
</tr>
<tr>
<td align="left">vh</td>
<td align="left">相对于视口*高度的 1%</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_vh">试一试</a></td>
</tr>
<tr>
<td align="left">vmin</td>
<td align="left">相对于视口*较小尺寸的 1％</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_vmin">试一试</a></td>
</tr>
<tr>
<td align="left">vmax</td>
<td align="left">相对于视口*较大尺寸的 1％</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_vmax">试一试</a></td>
</tr>
<tr>
<td align="left">%</td>
<td align="left">相对于父元素</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/t.asp?f=cssref_unit_percentage">试一试</a></td>
</tr>
</tbody></table>
<p><strong>提示：</strong>em 和 rem 单元可用于创建完美的可扩展布局！</p>
<p>***** 视口（Viewport）&#x3D; 浏览器窗口的尺寸。如果视口为 50 厘米宽，则 1vw &#x3D; 0.5 厘米。</p>
<h4 id="嵌套计数器"><a href="#嵌套计数器" class="headerlink" title="嵌套计数器"></a>嵌套计数器</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">counter-reset</span>: section;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">counter-reset</span>: subsection;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">counter-increment</span>: section;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">content</span>: <span class="string">&quot;Section &quot;</span> <span class="built_in">counter</span>(section) <span class="string">&quot;. &quot;</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h2</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">counter-increment</span>: subsection;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">content</span>: <span class="built_in">counter</span>(section) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(subsection) <span class="string">&quot; &quot;</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>HTML 教程：<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>HTML 教程<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>CSS 教程<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Scripting 教程:<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>VBScript<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>XML 教程：<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>XML<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>XSL<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">ol</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">counter-reset</span>: section;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">list-style-type</span>: none;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">li</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">counter-increment</span>: section;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">content</span>: <span class="built_in">counters</span>(section,<span class="string">&quot;.&quot;</span>) <span class="string">&quot; &quot;</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>item   </span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item</span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="CSS-计数器属性"><a href="#CSS-计数器属性" class="headerlink" title="CSS 计数器属性"></a>CSS 计数器属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_gen_content.asp">content</a></td>
<td align="left">与 ::before 和 ::after 伪元素一同使用，来插入生成的内容。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_gen_counter-increment.asp">counter-increment</a></td>
<td align="left">递增一个或多个计数器值。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_gen_counter-reset.asp">counter-reset</a></td>
<td align="left">创建或重置一个或多个计数器。</td>
</tr>
</tbody></table>
<h3 id="书写顺序的建议"><a href="#书写顺序的建议" class="headerlink" title="书写顺序的建议"></a>书写顺序的建议</h3><p><img src="/html-css/image-20220609095011136-1676560993606507.png" alt="image-20220609095011136"></p>
<h1 id="CSS高级教程"><a href="#CSS高级教程" class="headerlink" title="CSS高级教程"></a>CSS高级教程</h1><h3 id="css边框图像"><a href="#css边框图像" class="headerlink" title="css边框图像"></a>css边框图像</h3><p>border-image 属性可以通过一些简单的规则，将一副图像划分为 9 个单独的部分，浏览器会自动使用相应的部分来替换边框的默认样式。border-image 属性是五个 border-image-* 属性的简写，其语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">border-image：border-image-source || border-image-slice [ / border-image-width | / border-image-width ? / border-image-outset ]? || border-image-repeat</span><br></pre></td></tr></table></figure>

<p>通过语法可以看出 border-image 是 border-image-source、border-image-slice、border-image-width、border-image-outset 和 border-image-repeat 属性的简写，其中：</p>
<ul>
<li>border-image-source：定义边框图像的路径；</li>
<li>border-image-slice：定义边框图像从什么位置开始分割；</li>
<li>border-image-width：定义边框图像的厚度（宽度）；</li>
<li>border-image-outset：定义边框图像的外延尺寸（边框图像区域超出边框的量）；</li>
<li>border-image-repeat：定义边框图像的平铺方式。</li>
</ul>
<h4 id="border-image-source"><a href="#border-image-source" class="headerlink" title="border-image-source"></a>border-image-source</h4><p>border-image-source 属性用来定义边框要使用的图像，通过该属性可以指定一个图像来替换边框的默认样式，当 border-image-source 属性的值为 none 或者指定的图像不可用时，则会显示边框默认的样式。</p>
<p>另外，border-image-source 属性除了可以使用图像来替换边框的默认样式外，您还可以使用渐变来定义边框样式，属性的语法格式如下：</p>
<p><code>border-image-source：none | &lt;image&gt;</code></p>
<p>其中，none 为 border-image-source 属性的默认值，表示不使用图像来替换边框的默认样式；<image> 为使用 url() 函数指定的图像路径或者<code>使用 linear-gradient() 函数定义的渐变色</code>，用来替换默认的边框样式。</image></p>
<p>通过 border-image-source 属性使用图像来替换默认的边框样式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">27px</span> solid;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-image-source</span>: <span class="built_in">url</span>(<span class="string">./border.png</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>使用图片替换默认边框<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/html-css/image-20220610012448274-1676560993606508.png" alt="image-20220610012448274" style="zoom:50%;">

<h4 id="border-image-slice"><a href="#border-image-slice" class="headerlink" title="border-image-slice"></a>border-image-slice</h4><p>border-image-slice 属性用来分割通过 border-image-source 属性加载的图像，属性的语法格式如下：</p>
<p>border-image-slice：[ <number> | <percentage> ]{1,4} &amp;&amp; fill?</percentage></number></p>
<p>border-image-slice 属性可以接收三种类型的值：</p>
<ul>
<li><number>：数值，用具体数值指定图像分割的位置，数值代表图像的像素位置或向量坐标，不允许负值；</number></li>
<li><percentage>：百分比，相对于图像尺寸的百分比，图像的宽度影响水平方向，高度影响垂直方向；</percentage></li>
<li>fill：保留边框图像的中间部分。</li>
</ul>
<p>border-image-slice 属性可以指定上、下、左、右四个方位来分割图像，并将图像分成 4 个角、4条边和中间区域等 9 个部份，中间区域始终是透明的（即没图像填充），除非加上关键字 fill，如下图所示：</p>
<img src="/html-css/15324912F-2-1676560993607509.gif" alt="img" style="zoom:80%;">


<p>除 fill 关键字外，border-image-slice 属性可以接受 1~4 个参数值：</p>
<ul>
<li>如果提供全部四个参数值，那么将按上、右、下、左的顺序对图像进行分割；</li>
<li>如果提供三个参数，那么第一个参数用于上方，第二个参数用于左、右两侧，第三个参数用于下方；</li>
<li>如果提供两个参数，那么第一个参数用于上方和下方，第二个参数用于左、右两个；</li>
<li>如果只提供一个参数，那么上、右、下、左都将使用该值进行分割。</li>
</ul>
<p><img src="/html-css/241f95cad1c8a786fa8afe6f6109c93d70cf502a-1676560993607510.gif" alt="img"> </p>
<p>根据图示，切割完 border 的背景切片后，并且也已经设置了 border 的宽度（重要）。将相应的切片填充到 border 的相应位置。</p>
<p>需要注意的是：不论 border 的宽度设置的多大，后面切割的参数都是根据 border-image 引入图片的尺寸设置的参数, 或者说是根据引入图片大小设置的切割参数。</p>
<p>切割后的四周的八个切片，四个角根据 border 设置的大小全尺寸自动缩放显示到 border 对应的四个角。</p>
<p>除四个角外的其他中间切片（上中，右中间，下中，左中间），可以根据设置做拉伸或重复的设置操作显示到对应的 border 位置。</p>
<h4 id="border-image-width"><a href="#border-image-width" class="headerlink" title="border-image-width"></a>border-image-width</h4><p>border-image-width 属性用来设置通过 border-image-source 属性加载的图像厚度（宽度），属性的语法格式如下：</p>
<p>border-image-width：[ <length> | <percentage> | <number> | auto ]{1,4}</number></percentage></length></p>
<p>语法说明如下：</p>
<ul>
<li><length>：使用数值加单位的形式指定图像边框的宽度，不允许为负值；</length></li>
<li><percentage>：用百分比的形式指定图像边框的宽度，参照图像边框区域的宽和高进行换算，不允许负值；</percentage></li>
<li><number>：使用浮点数指定图像边框的宽度，该值对应 border-width 的倍数，例如值为 2，则参数的实际值为 2 * border-width，不允许负值；</number></li>
<li>auto：由浏览器自动设定，当 border-image-width 设置为 auto 时，它的实际值与 border-image-slice 相同的值。</li>
</ul>
<p>提示：border-image-width 属性的默认值为 1，也就是说当我们省略 border-image-width 属性的值时，该属性的值会被设置为 1 * border-width，相当于会直接使用 border-width 的值。</p>
<p>border-image-width 属性同样可以接受 1~4 个参数值：</p>
<ul>
<li>如果提供全部四个参数值，那么将按照上、右、下、左的顺序设置图像边框四个方向上的宽度；</li>
<li>如果提供三个参数，那么第一个参数用于上边框，第二个参数用于左、右两个边框，第三个参数用于下边框；</li>
<li>如果提供两个参数，那么第一个参数用于上、下两个边框，第二个参数用于左、右两个边框；</li>
<li>如果只提供一个参数，那么上、右、下、左都将使用该值设置图像边框的宽度。</li>
</ul>
<h4 id="border-image-outset"><a href="#border-image-outset" class="headerlink" title="border-image-outset"></a>border-image-outset</h4><p>border-image-outset 属性用来定义图像边框相对于边框边界向外偏移的距离（使图像边框延伸到盒子模型以外），该属性的语法格式如下：</p>
<p>border-image-outset：[ <length> | <number> ]{1,4}</number></length></p>
<p>语法说明如下：</p>
<ul>
<li><length>：用具体的数值加单位的形式指定图像边框向外偏移的距离，不允许为负值；</length></li>
<li><number>：用浮点数指定图像边框向外偏移的距离，该值表示 border-width 的倍数，例如值为 2，则表示偏移量为 2 * border-width，不允许为负值。</number></li>
</ul>
<p>border-image-outset 属性同样可以接受 1~4 个参数值：</p>
<ul>
<li>如果提供全部四个参数值，那么将按上、右、下、左的顺序作用于四边；</li>
<li>如果提供三个参数值，那么第一个参数将用于上边框，第二个参数将用于左、右两个边框，第三个参数将用于下边框；</li>
<li>如果提供两个参数，那么第一个参数将用于上、下两个边框，第二个参数将用于左、右两个边框；</li>
<li>如果只提供一个参数，那么该参数将同时作用于四边。</li>
</ul>
<h4 id="border-image-repeat"><a href="#border-image-repeat" class="headerlink" title="border-image-repeat"></a>border-image-repeat</h4><p>border-image-repeat 属性用来设置如何填充使用 border-image-slice 属性分割的图像边框，例如平铺、拉伸等等，该属性的语法格式如下：</p>
<p>border-image-repeat：[ stretch | repeat | round | space ]{1,2}</p>
<p>语法说明如下：</p>
<ul>
<li>stretch：将被分割的图像使用拉伸的方式来填充满边框区域；</li>
<li>repeat：将被分割的图像使用重复平铺的方式来填充满边框区域，当图像碰到边界时，超出的部分会被截断；</li>
<li>round：与 repeat 关键字类似，不同之处在于，当背景图像不能以整数次平铺时，会根据情况缩放图像；</li>
<li>space：与 repeat 关键字类似，不同之处在于，当背景图像不能以整数次平铺时，会用空白间隙填充在图像周围。</li>
</ul>
<p>border-image-repeat 属性能够接受 1~2 个参数值：</p>
<ul>
<li>如果提供两个参数，那么第一个参数将用于水平方向，第二个将用于垂直方向；</li>
<li>如果只提供一个参数，那么将在水平和垂直方向都应用该值。</li>
</ul>
<h3 id="多重背景"><a href="#多重背景" class="headerlink" title="多重背景"></a>多重背景</h3><h4 id="CSS-多重背景"><a href="#CSS-多重背景" class="headerlink" title="CSS 多重背景"></a>CSS 多重背景</h4><p>CSS 允许您通过 <code>background-image</code> 属性为一个元素添加多幅背景图像。</p>
<p>不同的背景图像用逗号隔开，并且图像会彼此堆叠，其中的第一幅图像最靠近观看者。</p>
<p>下面的例子有两幅背景图像，第一幅图像是花朵（与底部和右侧对齐），第二幅图像是纸张背景（与左上角对齐）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#example1</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">flower.gif</span>), <span class="built_in">url</span>(<span class="string">paper.gif</span>);</span><br><span class="line">  <span class="attribute">background-position</span>: right bottom, left top;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat, repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>多重背景图像可以使用单独的背景属性（如上所述）或 <code>background</code> 简写属性来指定。</p>
<p>下面的例子使用 <code>background</code> 简写属性（结果与上例相同）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#example1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">flower.gif</span>) right bottom no-repeat, <span class="built_in">url</span>(<span class="string">paper.gif</span>) left top repeat; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="CSS-背景尺寸"><a href="#CSS-背景尺寸" class="headerlink" title="CSS 背景尺寸"></a>CSS 背景尺寸</h4><p>CSS <code>background-size</code> 属性允许您指定背景图像的大小。</p>
<p>可以通过长度、百分比或使用以下两个关键字之一来指定背景图像的大小：<code>contain</code> 或 <code>cover</code>。</p>
<p><code>background-size</code> 的其他两个可能的值是 <code>contain</code> 和 <code>cover</code>。</p>
<p><code>contain</code> 关键字将背景图像缩放为尽可能大的尺寸（但其宽度和高度都必须适合内容区域）。这样，取决于背景图像和背景定位区域的比例，可能存在一些未被背景图像覆盖的背景区域。</p>
<p><code>cover</code> 关键字会缩放背景图像，以使内容区域完全被背景图像覆盖（其宽度和高度均等于或超过内容区域）。这样，背景图像的某些部分可能在背景定位区域中不可见。</p>
<h4 id="全尺寸背景图像"><a href="#全尺寸背景图像" class="headerlink" title="全尺寸背景图像"></a>全尺寸背景图像</h4><p>现在，我们希望网站上的背景图像始终覆盖整个浏览器窗口。</p>
<p>具体要求如下：</p>
<ul>
<li>用图像填充整个页面（无空白）</li>
<li>根据需要缩放图像</li>
<li>在页面上居中图像</li>
<li>不引发滚动条</li>
</ul>
<p>下面的例子显示了如何实现它：使用 <html> 元素（<html> 元素始终至少是浏览器窗口的高度）。然后在其上设置固定且居中的背景。最后使用 background-size 属性调整其大小：</html></html></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">img_man.jpg</span>) no-repeat center fixed; </span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="CSS-background-origin-属性"><a href="#CSS-background-origin-属性" class="headerlink" title="CSS background-origin 属性"></a>CSS background-origin 属性</h4><p>CSS <code>background-origin</code> 属性指定背景图像的位置。</p>
<p>该属性接受三个不同的值：</p>
<ul>
<li>border-box - 背景图片从边框的左上角开始</li>
<li>padding-box -背景图像从内边距边缘的左上角开始（默认）</li>
<li>content-box - 背景图片从内容的左上角开始</li>
</ul>
<h4 id="CSS-background-clip-属性"><a href="#CSS-background-clip-属性" class="headerlink" title="CSS background-clip 属性"></a>CSS background-clip 属性</h4><p>CSS <code>background-clip</code> 属性指定背景的绘制区域。</p>
<p>该属性接受三个不同的值：</p>
<ul>
<li>border-box - 背景绘制到边框的外部边缘（默认）</li>
<li>padding-box - 背景绘制到内边距的外边缘</li>
<li>content-box - 在内容框中绘制背景</li>
</ul>
<h4 id="CSS-高级背景属性"><a href="#CSS-高级背景属性" class="headerlink" title="CSS 高级背景属性"></a>CSS 高级背景属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_background.asp">background</a></td>
<td align="left">用于在一条声明中设置所有背景属性的简写属性。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_background-clip.asp">background-clip</a></td>
<td align="left">规定背景的绘制区域。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_background-image.asp">background-image</a></td>
<td align="left">为一个元素指定一幅或多幅背景图像。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_background-origin.asp">background-origin</a></td>
<td align="left">规定背景图像的放置位置。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_background-size.asp">background-size</a></td>
<td align="left">规定背景图像的大小。</td>
</tr>
</tbody></table>
<h3 id="CSS渐变色linear-gradient"><a href="#CSS渐变色linear-gradient" class="headerlink" title="CSS渐变色linear-gradient()"></a>CSS渐变色linear-gradient()</h3><p>通过背景图片设置</p>
<p>CSS 定义了两种渐变类型：</p>
<ul>
<li><em>线性渐变</em>（向下&#x2F;向上&#x2F;向左&#x2F;向右&#x2F;对角线）</li>
<li><em>径向渐变</em>（由其中心定义）</li>
</ul>
<h4 id="CSS-线性渐变"><a href="#CSS-线性渐变" class="headerlink" title="CSS 线性渐变"></a>CSS 线性渐变</h4><p>如需创建线性渐变，您必须定义至少两个色标。色标是您要呈现平滑过渡的颜色。您还可以设置起点和方向（或角度）以及渐变效果。</p>
<h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-image: linear-gradient(direction, color-stop1, color-stop2, ...);</span><br></pre></td></tr></table></figure>

<h5 id="渐变方向"><a href="#渐变方向" class="headerlink" title="渐变方向"></a>渐变方向</h5><h6 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h6><p>线性渐变 - 从上到下（默认）</p>
<p>设置从左到右</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, red , yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="角度deg"><a href="#角度deg" class="headerlink" title="角度deg"></a>角度deg</h6><p>如果希望对渐变角度做更多的控制，您可以定义一个角度，来取代预定义的方向（向下、向上、向右、向左、向右下等等）。值 0deg 等于向上（to top）。值 90deg 等于向右（to right）。值 180deg 等于向下（to bottom）。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">180deg</span>, color-stop1, color-stop2);</span><br></pre></td></tr></table></figure>

<h5 id="使用透明度"><a href="#使用透明度" class="headerlink" title="使用透明度"></a>使用透明度</h5><p>CSS 渐变还支持透明度，也可用于创建渐变效果。</p>
<p>如需添加透明度，我们使用 rgba() 函数来定义色标。 rgba() 函数中的最后一个参数可以是 0 到 1 的值，它定义颜色的透明度：0 表示全透明，1 表示全彩色（无透明）。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>), <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="重复线性渐变repeating-linear-gradient"><a href="#重复线性渐变repeating-linear-gradient" class="headerlink" title="重复线性渐变repeating-linear-gradient()"></a>重复线性渐变repeating-linear-gradient()</h4><h5 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background: repeating-linear-gradient(angle | to side-or-corner, color-stop1, color-stop2, ...);</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">Value</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em>angle</em></td>
<td align="left">定义渐变的角度方向。从 0deg 到 360deg，默认为 180deg。</td>
</tr>
<tr>
<td align="left"><em>side-or-corner</em></td>
<td align="left">指定线性渐变的起始位置。由两个关键字组成：第一个为指定水平位置(left 或 right)，第二个为指定垂直位置（top 或bottom）。 顺序是随意的，每个关键字都是可选的。</td>
</tr>
<tr>
<td align="left"><em>color-stop1, color-stop2,…</em></td>
<td align="left">指定渐变的起止颜色，由颜色值、停止位置（可选，使用百分比指定）组成。</td>
</tr>
</tbody></table>
<h3 id="CSS-径向渐变"><a href="#CSS-径向渐变" class="headerlink" title="CSS 径向渐变"></a>CSS 径向渐变</h3><p>径向渐变由其中心定义。</p>
<p>如需创建径向渐变，您还必须定义至少两个色标。</p>
<h4 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-image: radial-gradient(shape size at position, start-color, ..., last-color);</span><br></pre></td></tr></table></figure>

<p>默认地，<em>shape</em> 为椭圆形，<em>size</em> 为最远角，<em>position</em> 为中心。</p>
<h4 id="径向渐变-不同间距的色标"><a href="#径向渐变-不同间距的色标" class="headerlink" title="径向渐变-不同间距的色标"></a>径向渐变-不同间距的色标</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(red <span class="number">5%</span>, yellow <span class="number">15%</span>, green <span class="number">60%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="设置形状"><a href="#设置形状" class="headerlink" title="设置形状"></a>设置形状</h4><p><em>shape</em> 参数定义形状。它可接受 circle 或 ellipse 值。<code>默认值为 ellipse（椭圆）</code>。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(circle, red, yellow, green);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用大小不同的关键字"><a href="#使用大小不同的关键字" class="headerlink" title="使用大小不同的关键字"></a>使用大小不同的关键字</h4><p><em>size</em> 参数定义渐变的大小。它可接受四个值：</p>
<ul>
<li><em>closest-side</em></li>
<li><em>farthest-side</em></li>
<li><em>closest-corner</em></li>
<li><em>farthest-corner</em></li>
</ul>
<h3 id="重复径向渐变"><a href="#重复径向渐变" class="headerlink" title="重复径向渐变"></a>重复径向渐变</h3><p><code>repeating-radial-gradient()</code> 函数用于重复径向渐变：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">repeating-radial-gradient</span>(red, yellow <span class="number">10%</span>, green <span class="number">15%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="CSS文本效果"><a href="#CSS文本效果" class="headerlink" title="CSS文本效果"></a>CSS文本效果</h3><h4 id="CSS-文本溢出、整字换行、换行规则以及书写模式"><a href="#CSS-文本溢出、整字换行、换行规则以及书写模式" class="headerlink" title="CSS 文本溢出、整字换行、换行规则以及书写模式"></a>CSS 文本溢出、整字换行、换行规则以及书写模式</h4><p>在本章中，您将学习如下属性：</p>
<ul>
<li><code>text-overflow</code></li>
<li><code>word-wrap</code></li>
<li><code>word-break</code></li>
<li><code>writing-mode</code></li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">white-space</span>: nowrap; // 使其单行显示</span><br></pre></td></tr></table></figure>

<h4 id="CSS-文字溢出"><a href="#CSS-文字溢出" class="headerlink" title="CSS 文字溢出"></a>CSS 文字溢出</h4><p>CSS <code>text-overflow</code> 属性规定应如何向用户呈现未显示的溢出内容。</p>
<p>可以被裁剪：</p>
<p>这是一些无法容纳在框中的长文本。这是一些无法容纳在框中的长文本</p>
<p>也可以将其呈现为省略号（…）：</p>
<p>这是一些无法容纳在框中的长文本。这是一些无法</p>
<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text-overflow: clip|ellipsis|string;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
<th align="left">测试</th>
</tr>
</thead>
<tbody><tr>
<td align="left">clip</td>
<td align="left">修剪文本。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/c.asp?f=css_text-overflow">测试</a></td>
</tr>
<tr>
<td align="left">ellipsis</td>
<td align="left">显示省略符号来代表被修剪的文本。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tiy/c.asp?f=css_text-overflow&p=2">测试</a></td>
</tr>
<tr>
<td align="left"><em>string</em></td>
<td align="left">使用给定的字符串来代表被修剪的文本。</td>
<td align="left"></td>
</tr>
</tbody></table>
<h4 id="CSS-字换行（word-wrap）"><a href="#CSS-字换行（word-wrap）" class="headerlink" title="CSS 字换行（word-wrap）"></a>CSS 字换行（word-wrap）</h4><p>CSS <code>word-wrap</code> 属性使长文字能够被折断并换到下一行。</p>
<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">word-wrap: normal|break-word;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">normal</td>
<td align="left">只在允许的断字点换行（浏览器保持默认处理）。</td>
</tr>
<tr>
<td align="left">break-word</td>
<td align="left">在长单词或 URL 地址内部进行换行。</td>
</tr>
</tbody></table>
<h4 id="CSS-换行规则word-break"><a href="#CSS-换行规则word-break" class="headerlink" title="CSS 换行规则word-break"></a>CSS 换行规则word-break</h4><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">word-break: normal|break-all|keep-all;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">normal</td>
<td align="left">使用浏览器默认的换行规则。</td>
</tr>
<tr>
<td align="left">break-all</td>
<td align="left">允许在单词内换行。</td>
</tr>
<tr>
<td align="left">keep-all</td>
<td align="left">只能在半角空格或连字符处换行。</td>
</tr>
</tbody></table>
<h4 id="CSS-书写模式"><a href="#CSS-书写模式" class="headerlink" title="CSS 书写模式"></a>CSS 书写模式</h4><p>CSS <code>writing-mode</code> 属性规定文本行是水平放置还是垂直放置。</p>
<p><img src="/html-css/image-20220610140406013-1676560993607511.png" alt="image-20220610140406013"></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writing-mode: horizontal-tb|vertical-rl|vertical-lr;</span><br></pre></td></tr></table></figure>

<p>属性值</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">horizontal-tb</td>
<td align="left">让内容从左到右水平流动，从上到下垂直流动。</td>
</tr>
<tr>
<td align="left">vertical-rl</td>
<td align="left">让内容从上到下垂直流动，从右到左水平流动。</td>
</tr>
<tr>
<td align="left">vertical-lr</td>
<td align="left">让内容从上到下垂直流动，从左到右水平流动。</td>
</tr>
</tbody></table>
<h3 id="2D转换方法"><a href="#2D转换方法" class="headerlink" title="2D转换方法"></a>2D转换方法</h3><p>通过使用 CSS <code>transform</code> 属性，您可以利用以下 2D 转换方法：</p>
<ul>
<li><code>translate()</code>移动</li>
<li><code>rotate()</code>旋转</li>
<li><code>scaleX()</code></li>
<li><code>scaleY()</code></li>
<li><code>scale()</code>缩放</li>
<li><code>skewX()</code></li>
<li><code>skewY()</code></li>
<li><code>skew()</code></li>
<li><code>matrix()</code></li>
</ul>
<h4 id="translate移动"><a href="#translate移动" class="headerlink" title="translate移动"></a>translate移动</h4><p>translste类似定位</p>
<p>语法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">translate</span>(x,y)</span><br><span class="line">transform:<span class="built_in">translateX</span>(x)</span><br><span class="line">transform:<span class="built_in">translateY</span>(y)</span><br></pre></td></tr></table></figure>

<p>优点：不会影响其他元素的位置</p>
<p><code>对行内标签无效</code>自对块级和行内块有效</p>
<p>以左上角为原点</p>
<h4 id="rotate旋转"><a href="#rotate旋转" class="headerlink" title="rotate旋转"></a>rotate旋转</h4><p>语法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">rotate</span>()</span><br></pre></td></tr></table></figure>

<p>单位deg</p>
<p>默认以中心为原点</p>
<p>正顺负逆</p>
<h4 id="设置旋转点transform-origin"><a href="#设置旋转点transform-origin" class="headerlink" title="设置旋转点transform-origin"></a>设置旋转点transform-origin</h4><p>语法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform-origin</span>:x y； 空格隔开</span><br></pre></td></tr></table></figure>

<p>单位为px或%也可以是名词关键字top conter bottom left right</p>
<h4 id="缩放scale"><a href="#缩放scale" class="headerlink" title="缩放scale"></a>缩放scale</h4><p>语法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">scale</span>(x,y)</span><br><span class="line">transform：<span class="built_in">scale</span>(n)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="skew倾斜"><a href="#skew倾斜" class="headerlink" title="skew倾斜"></a>skew倾斜</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">skewX</span>(x)； //沿 X 轴倾斜给定角度</span><br><span class="line">transform:<span class="built_in">skewY</span>(y); //沿 y 轴倾斜给定角度</span><br><span class="line"><span class="attribute">transform</span>:<span class="built_in">skew</span>();</span><br></pre></td></tr></table></figure>



<h4 id="matrix方法"><a href="#matrix方法" class="headerlink" title="matrix方法"></a>matrix方法</h4><p>将所有2D变换方法组合为一个（即简写方法）</p>
<p><code>matrix()</code> 方法可接受六个参数，其中包括数学函数，这些参数使您可以旋转、缩放、移动（平移）和倾斜元素。</p>
<p>参数如下：matrix(scaleX(),skewY(),skewX(),scaleY(),translateX(),translateY())</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">matrix</span>(<span class="number">1</span>, -<span class="number">0.3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="CSS-转换属性"><a href="#CSS-转换属性" class="headerlink" title="CSS 转换属性"></a>CSS 转换属性</h4><p>下表列出了所有 2D 变换属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transform.asp">transform</a></td>
<td align="left">向元素应用 2D 或 3D 转换。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transform-origin.asp">transform-origin</a></td>
<td align="left">允许你改变被转换元素的位置。</td>
</tr>
</tbody></table>
<h4 id="CSS-2D-转换方法"><a href="#CSS-2D-转换方法" class="headerlink" title="CSS 2D 转换方法"></a>CSS 2D 转换方法</h4><table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">matrix(<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>)</td>
<td align="left">定义 2D 转换，使用六个值的矩阵。</td>
</tr>
<tr>
<td align="left">translate(<em>x</em>,<em>y</em>)</td>
<td align="left">定义 2D 转换，沿着 X 和 Y 轴移动元素。</td>
</tr>
<tr>
<td align="left">translateX(<em>n</em>)</td>
<td align="left">定义 2D 转换，沿着 X 轴移动元素。</td>
</tr>
<tr>
<td align="left">translateY(<em>n</em>)</td>
<td align="left">定义 2D 转换，沿着 Y 轴移动元素。</td>
</tr>
<tr>
<td align="left">scale(<em>x</em>,<em>y</em>)</td>
<td align="left">定义 2D 缩放转换，改变元素的宽度和高度。</td>
</tr>
<tr>
<td align="left">scaleX(<em>n</em>)</td>
<td align="left">定义 2D 缩放转换，改变元素的宽度。</td>
</tr>
<tr>
<td align="left">scaleY(<em>n</em>)</td>
<td align="left">定义 2D 缩放转换，改变元素的高度。</td>
</tr>
<tr>
<td align="left">rotate(<em>angle</em>)</td>
<td align="left">定义 2D 旋转，在参数中规定角度。</td>
</tr>
<tr>
<td align="left">skew(<em>x-angle</em>,<em>y-angle</em>)</td>
<td align="left">定义 2D 倾斜转换，沿着 X 和 Y 轴。</td>
</tr>
<tr>
<td align="left">skewX(<em>angle</em>)</td>
<td align="left">定义 2D 倾斜转换，沿着 X 轴。</td>
</tr>
<tr>
<td align="left">skewY(<em>angle</em>)</td>
<td align="left">定义 2D 倾斜转换，沿着 Y 轴。</td>
</tr>
</tbody></table>
<h3 id="3D转换方法"><a href="#3D转换方法" class="headerlink" title="3D转换方法"></a>3D转换方法</h3><p>perspec</p>
<p>通过 CSS <code>transform</code> 属性，您可以使用以下 3D 转换方法：</p>
<p><img src="/html-css/3d_axes-1676560993607512.png" alt="3D变换坐标图解 张鑫旭-鑫空间-鑫生活"></p>
<h4 id="3d旋转"><a href="#3d旋转" class="headerlink" title="3d旋转"></a>3d旋转</h4><p>rotate3d(x,y,z,dey)；xyz是转轴的矢量</p>
<ul>
<li><code>rotateX()</code></li>
<li><code>rotateY()</code></li>
<li><code>rotateZ()</code></li>
</ul>
<h4 id="tranform-style"><a href="#tranform-style" class="headerlink" title="tranform-style"></a>tranform-style</h4><p>控制子元素是否为3d空间</p>
<p>默认false不开启</p>
<p>preserve-3d开启</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">flat</td>
<td align="left">子元素将不保留其 3D 位置。</td>
</tr>
<tr>
<td align="left">preserve-3d</td>
<td align="left">子元素将保留其 3D 位置。</td>
</tr>
</tbody></table>
<h4 id="tranform-origin"><a href="#tranform-origin" class="headerlink" title="tranform-origin"></a>tranform-origin</h4><p>属性允许您改变被转换元素的位置。</p>
<p>2D 转换元素能够改变元素 x 和 y 轴。3D 转换元素还能改变其 Z 轴。</p>
<p>为了更好地理解 transform-origin 属性，请查看这个<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/example/css3/demo_css3_transform-origin.html">演示</a>。</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">x-axis</td>
<td align="left">定义视图被置于 X 轴的何处。可能的值：leftcenterright<em>length</em><em>%</em></td>
</tr>
<tr>
<td align="left">y-axis</td>
<td align="left">定义视图被置于 Y 轴的何处。可能的值：topcenterbottom<em>length</em><em>%</em></td>
</tr>
<tr>
<td align="left">z-axis</td>
<td align="left">定义视图被置于 Z 轴的何处。可能的值：<em>length</em></td>
</tr>
</tbody></table>
<h4 id="perspective透视"><a href="#perspective透视" class="headerlink" title="perspective透视"></a>perspective透视</h4><p>透视也称为视距：就是人的眼睛到屏幕的距离</p>
<p>写在被观察元素的父盒子上</p>
<p><img src="/html-css/image-20220610164004610-1676560993607513.png" alt="image-20220610164004610"></p>
<p>d是视距；x就是物体到屏幕的距离</p>
<h4 id="backface-visibility-属性"><a href="#backface-visibility-属性" class="headerlink" title="backface-visibility 属性"></a>backface-visibility 属性</h4><p>定义当元素不面向屏幕时是否可见</p>
<p>如果在旋转元素不希望看到其背面时，该属性很有用。</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">visible</td>
<td align="left">背面是可见的。</td>
</tr>
<tr>
<td align="left">hidden</td>
<td align="left">背面是不可见的。</td>
</tr>
</tbody></table>
<h4 id="下表列出了所有-3D-变换属性："><a href="#下表列出了所有-3D-变换属性：" class="headerlink" title="下表列出了所有 3D 变换属性："></a>下表列出了所有 3D 变换属性：</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transform.asp">transform</a></td>
<td align="left">向元素应用 2D 或 3D 转换。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transform-origin.asp">transform-origin</a></td>
<td align="left">允许你改变被转换元素的位置。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transform-style.asp">transform-style</a></td>
<td align="left">规定被嵌套元素如何在 3D 空间中显示。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_perspective.asp">perspective</a></td>
<td align="left">规定 3D 元素的透视效果。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_perspective-origin.asp">perspective-origin</a></td>
<td align="left">规定 3D 元素的底部位置。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_backface-visibility.asp">backface-visibility</a></td>
<td align="left">定义元素在不面对屏幕时是否可见。</td>
</tr>
</tbody></table>
<h4 id="CSS-3D-转换方法"><a href="#CSS-3D-转换方法" class="headerlink" title="CSS 3D 转换方法"></a>CSS 3D 转换方法</h4><table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">matrix3d(<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>, <em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>)</td>
<td align="left">定义 3D 转换，使用 16 个值的 4x4 矩阵。</td>
</tr>
<tr>
<td align="left">translate3d(<em>x</em>,<em>y</em>,<em>z</em>)</td>
<td align="left">定义 3D 转化。</td>
</tr>
<tr>
<td align="left">translateX(<em>x</em>)</td>
<td align="left">定义 3D 转化，仅使用用于 X 轴的值。</td>
</tr>
<tr>
<td align="left">translateY(<em>y</em>)</td>
<td align="left">定义 3D 转化，仅使用用于 Y 轴的值。</td>
</tr>
<tr>
<td align="left">translateZ(<em>z</em>)</td>
<td align="left">定义 3D 转化，仅使用用于 Z 轴的值。</td>
</tr>
<tr>
<td align="left">scale3d(<em>x</em>,<em>y</em>,<em>z</em>)</td>
<td align="left">定义 3D 缩放转换。</td>
</tr>
<tr>
<td align="left">scaleX(<em>x</em>)</td>
<td align="left">定义 3D 缩放转换，通过给定一个 X 轴的值。</td>
</tr>
<tr>
<td align="left">scaleY(<em>y</em>)</td>
<td align="left">定义 3D 缩放转换，通过给定一个 Y 轴的值。</td>
</tr>
<tr>
<td align="left">scaleZ(<em>z</em>)</td>
<td align="left">定义 3D 缩放转换，通过给定一个 Z 轴的值。</td>
</tr>
<tr>
<td align="left">rotate3d(<em>x</em>,<em>y</em>,<em>z</em>,<em>angle</em>)</td>
<td align="left">定义 3D 旋转。</td>
</tr>
<tr>
<td align="left">rotateX(<em>angle</em>)</td>
<td align="left">定义沿 X 轴的 3D 旋转。</td>
</tr>
<tr>
<td align="left">rotateY(<em>angle</em>)</td>
<td align="left">定义沿 Y 轴的 3D 旋转。</td>
</tr>
<tr>
<td align="left">rotateZ(<em>angle</em>)</td>
<td align="left">定义沿 Z 轴的 3D 旋转。</td>
</tr>
<tr>
<td align="left">perspective(<em>n</em>)</td>
<td align="left">定义 3D 转换元素的透视视图。</td>
</tr>
</tbody></table>
<h3 id="过渡transition"><a href="#过渡transition" class="headerlink" title="过渡transition"></a>过渡transition</h3><h4 id="CSS-过渡允许您在给定的时间内平滑地改变属性值。"><a href="#CSS-过渡允许您在给定的时间内平滑地改变属性值。" class="headerlink" title="CSS 过渡允许您在给定的时间内平滑地改变属性值。"></a>CSS 过渡允许您在给定的时间内平滑地改变属性值。</h4><p>如需创建过渡效果，必须明确两件事：</p>
<ul>
<li>您要添加效果的 CSS 属性</li>
<li>效果的持续时间</li>
</ul>
<p><strong>注意：</strong>如果未规定持续时间部分，则过渡不会有效果，因为默认值为 0。</p>
<h4 id="改变若干属性值"><a href="#改变若干属性值" class="headerlink" title="改变若干属性值"></a>改变若干属性值</h4><p>下面的例子为 width 和 height 属性都添加了过渡效果，width 是 2 秒，height 是 4 秒：</p>
<p>过多可以使用all即所有属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: width <span class="number">2s</span>, height <span class="number">4s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="指定过渡的速度曲线"><a href="#指定过渡的速度曲线" class="headerlink" title="指定过渡的速度曲线"></a>指定过渡的速度曲线</h4><p><code>transition-timing-function</code> 属性规定过渡效果的速度曲线。</p>
<p>transition-timing-function 属性可接受以下值：</p>
<ul>
<li><code>ease</code> - 规定过渡效果，先缓慢地开始，然后加速，然后缓慢地结束（默认）</li>
<li><code>linear</code> - 规定从开始到结束具有相同速度的过渡效果</li>
<li><code>ease-in</code> -规定缓慢开始的过渡效果</li>
<li><code>ease-out</code> - 规定缓慢结束的过渡效果</li>
<li><code>ease-in-out</code> - 规定开始和结束较慢的过渡效果</li>
<li><code>cubic-bezier(n,n,n,n)</code> - 允许您在三次贝塞尔函数中定义自己的值</li>
</ul>
<h4 id="延迟过渡效果"><a href="#延迟过渡效果" class="headerlink" title="延迟过渡效果"></a>延迟过渡效果</h4><p><code>transition-delay</code> 属性规定过渡效果的延迟（以秒计）。</p>
<h4 id="CSS-过渡属性"><a href="#CSS-过渡属性" class="headerlink" title="CSS 过渡属性"></a>CSS 过渡属性</h4><p>下表列出了所有 CSS 过渡属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transition.asp">transition</a></td>
<td align="left">简写属性，用于将四个过渡属性设置为单一属性。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transition-delay.asp">transition-delay</a></td>
<td align="left">规定过渡效果的延迟（以秒计）。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transition-duration.asp">transition-duration</a></td>
<td align="left">规定过渡效果要持续多少秒或毫秒。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transition-property.asp">transition-property</a></td>
<td align="left">规定过渡效果所针对的 CSS 属性的名称。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_transition-timing-function.asp">transition-timing-function</a></td>
<td align="left">规定过渡效果的速度曲线。</td>
</tr>
</tbody></table>
<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><p>在本章中，您将学习如下属性：</p>
<ul>
<li><code>@keyframes</code>定义</li>
<li><code>animation-name</code>调用</li>
<li><code>animation-duration</code>持续时间</li>
<li><code>animation-delay</code></li>
<li><code>animation-iteration-count</code></li>
<li><code>animation-direction</code></li>
<li><code>animation-timing-function</code></li>
<li><code>animation-fill-mode</code></li>
<li><code>animation</code>简写</li>
</ul>
<p>动画使元素逐渐从一种样式变为另一种样式。</p>
<p>您可以随意更改任意数量的 CSS 属性。</p>
<p>如需使用 CSS 动画，您必须首先为动画指定一些关键帧。</p>
<p>关键帧包含元素在特定时间所拥有的样式。</p>
<h4 id="keyframes-规则"><a href="#keyframes-规则" class="headerlink" title="@keyframes 规则"></a>@keyframes 规则</h4><p>如果您在 <code>@keyframes</code> 规则中指定了 CSS 样式，动画将在特定时间逐渐从当前样式更改为新样式。</p>
<p>要使动画生效，必须将动画绑定到某个元素。</p>
<p>下面的例子将 “example” 动画绑定到 <div> 元素。动画将持续 4 秒钟，同时将 <div> 元素的背景颜色从 “red” 逐渐改为 “yellow”：</div></div></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 动画代码 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> example &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;<span class="attribute">background-color</span>: red;&#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;<span class="attribute">background-color</span>: yellow;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 向此元素应用动画效果 */</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">  <span class="attribute">animation-name</span>: example;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">4s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过使用关键字 “from” 和 “to”（代表 0％（开始）和 100％（完成）），我们设置了样式何时改变。</p>
<p>您也可以使用百分比值。通过使用百分比，您可以根据需要添加任意多个样式更改。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 动画代码 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> example &#123;</span><br><span class="line">  <span class="number">0%</span>   &#123;<span class="attribute">background-color</span>: red;&#125;</span><br><span class="line">  <span class="number">25%</span>  &#123;<span class="attribute">background-color</span>: yellow;&#125;</span><br><span class="line">  <span class="number">50%</span>  &#123;<span class="attribute">background-color</span>: blue;&#125;</span><br><span class="line">  <span class="number">100%</span> &#123;<span class="attribute">background-color</span>: green;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 应用动画的元素 */</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">  <span class="attribute">animation-name</span>: example;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">4s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="animation-duration-属性定义需要多长时间才能完成动画。"><a href="#animation-duration-属性定义需要多长时间才能完成动画。" class="headerlink" title="animation-duration 属性定义需要多长时间才能完成动画。"></a><code>animation-duration</code> 属性定义需要多长时间才能完成动画。</h4><h4 id="animation-delay-属性规定动画开始的延迟时间。"><a href="#animation-delay-属性规定动画开始的延迟时间。" class="headerlink" title="animation-delay 属性规定动画开始的延迟时间。"></a><code>animation-delay</code> 属性规定动画开始的延迟时间。</h4><p>负值也是允许的。如果使用负值，则动画将开始播放，如同已播放 N 秒。</p>
<h4 id="设置动画应运行多少次"><a href="#设置动画应运行多少次" class="headerlink" title="设置动画应运行多少次"></a>设置动画应运行多少次</h4><p><code>animation-iteration-count</code> 属性指定动画应运行的次数。</p>
<p>默认是一次</p>
<p>可以是指指定次数</p>
<p>无数次：设置为infinite </p>
<h4 id="反向或交替运行动画"><a href="#反向或交替运行动画" class="headerlink" title="反向或交替运行动画"></a>反向或交替运行动画</h4><p><code>animation-direction</code> 属性指定是向前播放、向后播放还是交替播放动画。</p>
<p><code>animation-direction</code> 属性可接受以下值：</p>
<ul>
<li><code>normal</code> - 动画正常播放（向前）。默认值</li>
<li><code>reverse</code> - 动画以反方向播放（向后）</li>
<li><code>alternate</code> - 动画先向前播放，然后向后</li>
<li><code>alternate-reverse</code> - 动画先向后播放，然后向前</li>
</ul>
<h4 id="指定动画的速度曲线"><a href="#指定动画的速度曲线" class="headerlink" title="指定动画的速度曲线"></a>指定动画的速度曲线</h4><p><code>animation-timing-function</code> 属性规定动画的速度曲线。</p>
<p><code>animation-timing-function</code> 属性可接受以下值：</p>
<ul>
<li><code>ease</code> - 指定从慢速开始，然后加快，然后缓慢结束的动画（默认）</li>
<li><code>linear</code> - 规定从开始到结束的速度相同的动画</li>
<li><code>ease-in</code> - 规定慢速开始的动画</li>
<li><code>ease-out</code> - 规定慢速结束的动画</li>
<li><code>ease-in-out</code> - 指定开始和结束较慢的动画</li>
<li><code>cubic-bezier(*n*,*n*,*n*,*n*)</code> - 运行您在三次贝塞尔函数中定义自己的值</li>
</ul>
<h4 id="animation-fill-mode-属性规定动画在播放之前或之后。"><a href="#animation-fill-mode-属性规定动画在播放之前或之后。" class="headerlink" title="animation-fill-mode 属性规定动画在播放之前或之后。"></a>animation-fill-mode 属性规定动画在播放之前或之后。</h4><p>animation-fill-mode 属性规定动画在播放之前或之后，其动画效果是否可见。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">animation-fill-mode : none | forwards | backwards | both;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">none</td>
<td align="left">不改变默认行为。</td>
</tr>
<tr>
<td align="left">forwards</td>
<td align="left">当动画完成后，保持最后一个属性值（在最后一个关键帧中定义）。</td>
</tr>
<tr>
<td align="left">backwards</td>
<td align="left">在 animation-delay 所指定的一段时间内，在动画显示之前，应用开始属性值（在第一个关键帧中定义）。</td>
</tr>
<tr>
<td align="left">both</td>
<td align="left">向前和向后填充模式都被应用。</td>
</tr>
</tbody></table>
<h4 id="复合写法"><a href="#复合写法" class="headerlink" title="复合写法"></a>复合写法</h4><p>animation:动画名称，持续时间、运动曲线、何时开始、播放次数、是否反向、不播放时的样式</p>
<h4 id="CSS-动画属性"><a href="#CSS-动画属性" class="headerlink" title="CSS 动画属性"></a>CSS 动画属性</h4><p>下表列出了 @keyframes 规则和所有 CSS 动画属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_keyframes.asp">@keyframes</a></td>
<td align="left">规定动画模式。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation.asp">animation</a></td>
<td align="left">设置所有动画属性的简写属性。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation-delay.asp">animation-delay</a></td>
<td align="left">规定动画开始的延迟。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation-direction.asp">animation-direction</a></td>
<td align="left">定动画是向前播放、向后播放还是交替播放。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation-duration.asp">animation-duration</a></td>
<td align="left">规定动画完成一个周期应花费的时间。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation-fill-mode.asp">animation-fill-mode</a></td>
<td align="left">规定元素在不播放动画时的样式（在开始前、结束后，或两者同时）。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation-iteration-count.asp">animation-iteration-count</a></td>
<td align="left">规定动画应播放的次数。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation-name.asp">animation-name</a></td>
<td align="left">规定 @keyframes 动画的名称。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation-play-state.asp">animation-play-state</a></td>
<td align="left">规定动画是运行还是暂停。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/pr_animation-timing-function.asp">animation-timing-function</a></td>
<td align="left">规定动画的速度曲线。</td>
</tr>
</tbody></table>
<h3 id="弹性布局flex"><a href="#弹性布局flex" class="headerlink" title="弹性布局flex"></a>弹性布局flex</h3><p>pc端兼容性较差、移动端兼容性好</p>
<p>使用与任何标签</p>
<p><img src="/html-css/image-20220616234406811-1676560993607514.png" alt="image-20220616234406811"></p>
<h4 id="父级属性"><a href="#父级属性" class="headerlink" title="父级属性"></a>父级属性</h4><p><img src="/html-css/image-20220616234139629-1676560993607515.png" alt="image-20220616234139629"></p>
<h5 id="主轴方向"><a href="#主轴方向" class="headerlink" title="主轴方向"></a>主轴方向</h5><p><img src="/html-css/image-20220616234724972-1676560993607516.png" alt="image-20220616234724972"></p>
<p><img src="/html-css/image-20220616235312787-1676560993607517.png" alt="image-20220616235312787"></p>
<h5 id="侧轴的方向是根据主轴的方向来自动改变的"><a href="#侧轴的方向是根据主轴的方向来自动改变的" class="headerlink" title="侧轴的方向是根据主轴的方向来自动改变的"></a>侧轴的方向是根据主轴的方向来自动改变的</h5><h5 id="主轴的排列方式justify-content"><a href="#主轴的排列方式justify-content" class="headerlink" title="主轴的排列方式justify-content"></a>主轴的排列方式justify-content</h5><h5 id="侧轴单行排列方式align-items"><a href="#侧轴单行排列方式align-items" class="headerlink" title="侧轴单行排列方式align-items"></a>侧轴单行排列方式align-items</h5><p><img src="/html-css/image-20220617001334457-1676560993607518.png" alt="image-20220617001334457"></p>
<p><code>适用于单行的</code></p>
<p><code>要拉伸的话子盒子不能给高</code></p>
<h5 id="侧轴多行排列方align-content"><a href="#侧轴多行排列方align-content" class="headerlink" title="侧轴多行排列方align-content"></a>侧轴多行排列方align-content</h5><p><img src="/html-css/image-20220617004144792-1676560993607519.png" alt="image-20220617004144792"></p>
<h5 id="子元素是否换行flex-wrap"><a href="#子元素是否换行flex-wrap" class="headerlink" title="子元素是否换行flex-wrap"></a>子元素是否换行flex-wrap</h5><p><img src="/html-css/image-20220617001108490-1676560993608520.png" alt="image-20220616235312787"></p>
<h5 id="主轴和换行的和写方法flex-flow"><a href="#主轴和换行的和写方法flex-flow" class="headerlink" title="主轴和换行的和写方法flex-flow"></a>主轴和换行的和写方法flex-flow</h5><h4 id="子级属性"><a href="#子级属性" class="headerlink" title="子级属性"></a>子级属性</h4><p><img src="/html-css/image-20220617005756797-1676560993608521.png" alt="image-20220617005756797"></p>
<h5 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h5><p>分配剩余空间所占份数</p>
<h5 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h5><p><img src="/html-css/image-20220617111940010-1676560993608522.png" alt="image-20220617111940010"></p>
<h5 id="order"><a href="#order" class="headerlink" title="order"></a>order</h5><p><img src="/html-css/image-20220617112126287-1676560993608523.png" alt="image-20220617112126287"></p>
</div></p></table></table></div></div></h1></ol></ol></ol>
    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/html-css/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-es6入门教程" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/es6%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/">es6入门教程</a>
	
    </h1>
  


  
  
<a href="/es6%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" class="archive-article-date">
        <time datetime="2023-02-16T15:16:07.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h1><h2 id="let-和-const-命令"><a href="#let-和-const-命令" class="headerlink" title="let 和 const 命令"></a>let 和 const 命令</h2><h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><p>let 是<strong>es6</strong>新增的声明变量命令，它与var类似，但它是块作用域</p>
<p>for循环就很适合使用<code>let</code>命令</p>
<p>下面的代码如果使用<code>var</code>，最后输出的是<code>10</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  a[i] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>](); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，变量<code>i</code>是<code>var</code>命令声明的，在全局范围内都有效，所以全局只有一个变量<code>i</code>。每一次循环，变量<code>i</code>的值都会发生改变，而循环内被赋给数组<code>a</code>的函数内部的<code>console.log(i)</code>，里面的<code>i</code>指向的就是全局的<code>i</code>。也就是说，所有数组<code>a</code>的成员里面的<code>i</code>，指向的都是同一个<code>i</code>，导致运行时输出的是最后一轮的<code>i</code>的值，也就是 10。</p>
<p> 如果使用<code>let</code>，声明的变量仅在块级作用域内有效，最后输出的是 6。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  a[i] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>](); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<strong>变量<code>i</code>是<code>let</code>声明的，当前的<code>i</code>只在本轮循环有效，所以每一次循环的<code>i</code>其</strong></p>
<p><strong>实都是一个新的变量，所以最后输出的是<code>6</code>。</strong>你可能会问，如果每一轮循环的变量<code>i</code>都是</p>
<p>重新声明的，那它怎么知道上一轮循环的值，从而计算出本轮循环的值？这是因为 <strong>JavaScript 引擎内部会记住上一轮循环的值，初始化本轮的变量<code>i</code>时，就在上一轮循环的</strong></p>
<p><strong>基础上进行计算。</strong></p>
<p>另外，**<code>for</code>循环还有一个特别之处，就是设置循环变量的那部分是一个父作用域，而循环**</p>
<p><strong>体内部是一个单独的子作用域。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// abc</span></span><br><span class="line"><span class="comment">// abc</span></span><br><span class="line"><span class="comment">// abc</span></span><br></pre></td></tr></table></figure>

<p>上面代码正确运行，输出了 3 次<code>abc</code>。这表明函数内部的变量<code>i</code>与循环变量<code>i</code>不在同一个</p>
<p>作用域，有各自单独的作用域（同一个作用域不可使用 <code>let</code> 重复声明同一个变量）。</p>
<h4 id="暂时性死区"><a href="#暂时性死区" class="headerlink" title="暂时性死区"></a>暂时性死区</h4><p>只要块级作用域内存在<code>let</code>命令，它所声明的变量就“绑定”（binding）这个区域，不再受</p>
<p>外部的影响。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  tmp = <span class="string">&#x27;abc&#x27;</span>; <span class="comment">// ReferenceError</span></span><br><span class="line">  <span class="keyword">let</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中，存在全局变量<code>tmp</code>，但是块级作用域内<code>let</code>又声明了一个局部变量<code>tmp</code>，导</p>
<p>致后者绑定这个块级作用域，所以在<code>let</code>声明变量前，对<code>tmp</code>赋值会报错。</p>
<p><strong>ES6 明确规定，如果区块中存在<code>let</code>和<code>const</code>命令，这个区块对这些命令声明的变量，从</strong></p>
<p><strong>一开始就形成了封闭作用域。凡是在声明之前就使用这些变量，就会报错。</strong></p>
<p>总之，在代码块内，使用<code>let</code>命令声明变量之前，该变量都是不可用的。这在语法上，称</p>
<p>为“暂时性死区”（temporal dead zone，简称 TDZ）。</p>
<p>另外，下面的代码也会报错，与<code>var</code>的行为不同。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不报错</span></span><br><span class="line"><span class="keyword">var</span> x = x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">let</span> x = x;</span><br><span class="line"><span class="comment">// ReferenceError: x is not defined</span></span><br></pre></td></tr></table></figure>

<p>上面代码报错，也是因为暂时性死区。使用<code>let</code>声明变量时，只要变量在还没有声明完成</p>
<p>前使用，就会报错。上面这行就属于这个情况，在变量<code>x</code>的声明语句还没有执行完成前，</p>
<p>就去取<code>x</code>的值，导致报错”x 未定义“。</p>
<p>ES6 规定暂时性死区和<code>let</code>、<code>const</code>语句不出现变量提升，主要是为了减少运行时错误，防止在变量声明前就使用这个变量，从而导致意料之外的行为。这样的错误在 ES5 是很常见的，现在有了这种规定，避免此类错误就很容易了。</p>
<h3 id="不允许重复声明"><a href="#不允许重复声明" class="headerlink" title="不允许重复声明"></a>不允许重复声明</h3><p> let&#96;不允许在相同作用域内，重复声明同一个变量</p>
<h3 id="块级作用域"><a href="#块级作用域" class="headerlink" title="块级作用域"></a>块级作用域</h3><h4 id="为什么需要块级作用域？"><a href="#为什么需要块级作用域？" class="headerlink" title="为什么需要块级作用域？"></a>为什么需要块级作用域？</h4><p>ES5 只有全局作用域和函数作用域，没有块级作用域，这带来很多不合理的场景。</p>
<p>第一种场景，内层变量可能会覆盖外层变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(tmp);</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> tmp = <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>第二种场景，用来计数的循环变量泄露为全局变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; s.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，变量<code>i</code>只用来控制循环，但是循环结束后，它并没有消失，泄露成了全局变量。</p>
<h4 id="ES6-的块级作用域-§-⇧"><a href="#ES6-的块级作用域-§-⇧" class="headerlink" title="ES6 的块级作用域 § ⇧"></a>ES6 的块级作用域 <a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/#docs/let#ES6-%E7%9A%84%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F">§</a> <a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/#docs/let">⇧</a></h4><p><code>let</code>实际上为 JavaScript 新增了块级作用域。</p>
<p><strong>ES6 允许块级作用域的任意嵌套。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;&#123;&#123;</span><br><span class="line">  &#123;<span class="keyword">let</span> insane = <span class="string">&#x27;Hello World&#x27;</span>&#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(insane); <span class="comment">// 报错</span></span><br><span class="line">&#125;&#125;&#125;&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>上面代码使用了一个五层的块级作用域，每一层都是一个单独的作用域。第四层作用域无</strong></p>
<p><strong>法读取第五层作用域的内部变量。</strong></p>
<h4 id="块级作用域与函数声明"><a href="#块级作用域与函数声明" class="headerlink" title="块级作用域与函数声明"></a>块级作用域与函数声明</h4><p>函数能不能在块级作用域之中声明？这是一个相当令人混淆的问题。</p>
<p>ES5 规定，函数只能在顶层作用域和函数作用域之中声明，不能在块级作用域声明。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 情况一</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 情况二</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面两种函数声明，根据 ES5 的规定都是非法的。</p>
<p>但是，浏览器没有遵守这个规定，为了兼容以前的旧代码，还是支持在块级作用域之中声明函数，因此上面两种情况实际都能运行，不会报错。</p>
<blockquote>
<h4 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h4></blockquote>
<p>函数能不能在块级作用域之中声明？这是一个相当令人混淆的问题。</p>
<p>ES5 规定，函数只能在顶层作用域和函数作用域之中声明，不能在块级作用域声明。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 情况一</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 情况二</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面两种函数声明，根据 ES5 的规定都是非法的。</p>
<p>但是，浏览器没有遵守这个规定，为了兼容以前的旧代码，还是支持在块级作用域之中声明</p>
<p>函数，因此上面两种情况实际都能运行，不会报错。</p>
<p>ES6 引入了块级作用域，明确允许在块级作用域之中声明函数。ES6 规定，块级作用域之</p>
<p>中，函数声明语句的行为类似于<code>let</code>，在块级作用域之外不可引用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am outside!&#x27;</span>); &#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="comment">// 重复声明一次函数f</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am inside!&#x27;</span>); &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">f</span>();</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>

<p>上面代码在 ES5 中运行，会得到“I am inside!”，因为在<code>if</code>内声明的函数<code>f</code>会被提升到函数头部，实际运行的代码如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5 环境</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am outside!&#x27;</span>); &#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am inside!&#x27;</span>); &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">f</span>();</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>

<p>ES6 就完全不一样了，理论上会得到“I am outside!”。因为块级作用域内声明的函数类似于<code>let</code>，对作用域之外没有影响。但是，如果你真的在 ES6 浏览器中运行一下上面的代码，是会报错的，这是为什么呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 浏览器的 ES6 环境</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am outside!&#x27;</span>); &#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="comment">// 重复声明一次函数f</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am inside!&#x27;</span>); &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">f</span>();</span><br><span class="line">&#125;());</span><br><span class="line"><span class="comment">// Uncaught TypeError: f is not a function</span></span><br></pre></td></tr></table></figure>

<p>上面的代码在 ES6 浏览器中，都会报错。</p>
<p>原来，如果改变了块级作用域内声明的函数的处理规则，显然会对老代码产生很大影响。为了减轻因此产生的不兼容问题，ES6 在<a target="_blank" rel="noopener" href="https://www.ecma-international.org/ecma-262/6.0/index.html#sec-block-level-function-declarations-web-legacy-compatibility-semantics">附录 B</a>里面规定，浏览器的实现可以不遵守上面的规定，有自己的<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/31419897/what-are-the-precise-semantics-of-block-level-functions-in-es6">行为方式</a>。</p>
<ul>
<li>允许在块级作用域内声明函数。</li>
<li><strong>函数声明类似于<code>var</code>，即会提升到全局作用域或函数作用域的头部。</strong></li>
<li><strong>同时，函数声明还会提升到所在的块级作用域的头部。</strong></li>
</ul>
<p>后两条会同时发生</p>
<p>注意，上面三条规则只对 ES6 的浏览器实现有效，其他环境的实现不用遵守，还是将块级</p>
<p>作用域的函数声明当作<code>let</code>处理。</p>
<p>根据这三条规则，浏览器的 ES6 环境中，块级作用域内声明的函数，行为类似于<code>var</code>声明的变量。上面的例子实际运行的代码如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 浏览器的 ES6 环境</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am outside!&#x27;</span>); &#125;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> f = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am inside!&#x27;</span>); &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">f</span>();</span><br><span class="line">&#125;());</span><br><span class="line"><span class="comment">// Uncaught TypeError: f is not a function</span></span><br></pre></td></tr></table></figure>



<p>严格模式下，函数只能声明在当前作用域的顶层。</p>
<h3 id="const命令"><a href="#const命令" class="headerlink" title="const命令"></a>const命令</h3><p><code>const</code>声明一个只读的常量。一旦声明，常量的值就不能改变。</p>
<h3 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h3><p><strong><code>const</code>实际上保证的，并不是变量的值不得改动，而是变量指向的那个内存地址所保存的数据不得改动。</strong>对于简单类型的数据（数值、字符串、布尔值），值就保存在变量指向的那个内存地址，因此等同于常量。但对于复合类型的数据（主要是对象和数组），变量指向的内存地址，保存的只是一个指向实际数据的指针，<code>const</code>只能保证这个指针是固定的（即总是指向另一个固定的地址），至于它指向的数据结构是不是可变的，就完全不能控制了。因此，将一个对象声明为常量必须非常小心。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为 foo 添加一个属性，可以成功</span></span><br><span class="line">foo.<span class="property">prop</span> = <span class="number">123</span>;</span><br><span class="line">foo.<span class="property">prop</span> <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 foo 指向另一个对象，就会报错</span></span><br><span class="line">foo = &#123;&#125;; <span class="comment">// TypeError: &quot;foo&quot; is read-only</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，常量<code>foo</code>储存的是一个地址，这个地址指向一个对象。不可变的只是这个地址，即不能把<code>foo</code>指向另一个地址，但对象本身是可变的，所以依然可以为其添加新属性。</p>
<p><strong>如果真的想将对象冻结，应该使用<code>Object.freeze</code>方法。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="title class_">Object</span>.<span class="title function_">freeze</span>(&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常规模式时，下面一行不起作用；</span></span><br><span class="line"><span class="comment">// 严格模式时，该行会报错</span></span><br><span class="line">foo.<span class="property">prop</span> = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>

<p>上面代码中，常量<code>foo</code>指向一个冻结的对象，所以添加新属性不起作用，严格模式时还会报错。</p>
<h3 id="let与const不存在变量提升"><a href="#let与const不存在变量提升" class="headerlink" title="let与const不存在变量提升"></a>let与const不存在变量提升</h3><p><code>var</code>命令会发生“变量提升”现象，即变量可以在声明之前使用，值为<code>undefined</code>。这种现象多多少少是有些奇怪的，按照一般的逻辑，变量应该在声明语句之后才可以使用。</p>
<p>为了纠正这种现象，<code>let</code>命令改变了语法行为，它所声明的变量一定要在声明后使用，否则报错。</p>
<h3 id="顶层对象属性"><a href="#顶层对象属性" class="headerlink" title="顶层对象属性"></a>顶层对象属性</h3><p>顶层对象，在浏览器环境指的是<code>window</code>对象，在 Node 指的是<code>global</code>对象。ES5 之中，</p>
<p>顶层对象的属性与全局变量是等价的。</p>
<p><code>let</code>命令、<code>const</code>命令、<code>class</code>命令声明的全局变量，不属于顶层对象的属性。</p>
<h3 id="globalThis对象"><a href="#globalThis对象" class="headerlink" title="globalThis对象"></a>globalThis对象</h3><p>JavaScript 语言存在一个顶层对象，它提供全局环境（即全局作用域），所有代码都是在这个环境中运行。但是，顶层对象在各种实现里面是不统一的。</p>
<ul>
<li>浏览器里面，顶层对象是<code>window</code>，但 Node 和 Web Worker 没有<code>window</code>。</li>
<li>浏览器和 Web Worker 里面，<code>self</code>也指向顶层对象，但是 Node 没有<code>self</code>。</li>
<li>Node 里面，顶层对象是<code>global</code>，但其他环境都不支持。</li>
</ul>
<p>同一段代码为了能够在各种环境，都能取到顶层对象，现在一般是使用<code>this</code>关键字，但是有局限性。</p>
<ul>
<li>全局环境中，<code>this</code>会返回顶层对象。但是，Node.js 模块中<code>this</code>返回的是当前模块，ES6 模块中<code>this</code>返回的是<code>undefined</code>。</li>
<li>函数里面的<code>this</code>，如果函数不是作为对象的方法运行，而是单纯作为函数运行，<code>this</code>会指向顶层对象。但是，严格模式下，这时<code>this</code>会返回<code>undefined</code>。</li>
<li>不管是严格模式，还是普通模式，<code>new Function(&#39;return this&#39;)()</code>，总是会返回全局对象。但是，如果浏览器用了 CSP（Content Security Policy，内容安全策略），那么<code>eval</code>、<code>new Function</code>这些方法都可能无法使用。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/tc39/proposal-global">ES2020</a> 在语言标准的层面，引入<code>globalThis</code>作为顶层对象。也就是说，任何环境下，<code>globalThis</code>都是存在的，都可以从它拿到顶层对象，指向全局环境下的<code>this</code>。</p>
<p>垫片库<a target="_blank" rel="noopener" href="https://github.com/ungap/global-this"><code>global-this</code></a>模拟了这个提案，可以在所有环境拿到<code>globalThis</code>。</p>
<h2 id="变量的解构"><a href="#变量的解构" class="headerlink" title="变量的解构"></a>变量的解构</h2><h3 id="数组解构"><a href="#数组解构" class="headerlink" title="数组解构"></a>数组解构</h3><h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><p>ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。</p>
<p>ES6 允许写成下面这样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>

<p>上面代码表示，可以从数组中提取值，按照对应位置，对变量赋值。</p>
<p><strong>本质上，这种写法属于“模式匹配”，</strong>只要等号两边的模式相同，左边的变量就会被赋予对应的值。</p>
<p>如果解构不成功，变量的值就等于<code>undefined</code>。</p>
<p>如果等号的右边不是数组（或者严格地说，不是可遍历的结构，参见《Iterator》一章），</p>
<p>那么将会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="title class_">NaN</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>上面的语句都会报错，因为等号右边的值，要么转为对象以后不具备 Iterator 接口（前五个</p>
<p>表达式），要么本身就不具备 Iterator 接口（最后一个表达式）。</p>
<p>对于 Set 结构，也可以使用数组的解构赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y, z] = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]);</span><br><span class="line">x <span class="comment">// &quot;a&quot;</span></span><br></pre></td></tr></table></figure>

<p>事实上，只要某种数据结构具有 Iterator 接口，都可以采用数组形式的解构赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">fibs</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> a;</span><br><span class="line">    [a, b] = [b, a + b];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [first, second, third, fourth, fifth, sixth] = <span class="title function_">fibs</span>();</span><br><span class="line">sixth <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>fibs</code>是一个 Generator 函数（参见《Generator 函数》一章），原生具有 </p>
<p>Iterator 接口。解构赋值会依次从这个接口获取值。</p>
<h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><p>解构赋值允许指定默认值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo = <span class="literal">true</span>] = [];</span><br><span class="line">foo <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">&#x27;b&#x27;</span>] = [<span class="string">&#x27;a&#x27;</span>]; <span class="comment">// x=&#x27;a&#x27;, y=&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">&#x27;b&#x27;</span>] = [<span class="string">&#x27;a&#x27;</span>, <span class="literal">undefined</span>]; <span class="comment">// x=&#x27;a&#x27;, y=&#x27;b&#x27;</span></span><br></pre></td></tr></table></figure>

<p>注意，ES6 内部使用严格相等运算符（**&#x3D;&#x3D;&#x3D;**），判断一个位置是否有值。</p>
<p>所以，<strong>只有当一个数组成员严格等于<code>undefined</code>，默认值才会生效。</strong></p>
<p>如果默认值是一个表达式，那么这个表达式是惰性求值的，即只有在用到的时候，才会求</p>
<p>值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aaa&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x = <span class="title function_">f</span>()] = [<span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<p>上面代码中，因为<code>x</code>能取到值，所以函数<code>f</code>根本不会执行。</p>
<h3 id="对象的解构赋值"><a href="#对象的解构赋值" class="headerlink" title="对象的解构赋值"></a>对象的解构赋值</h3><p>解构不仅可以用于数组，还可以用于对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">bar</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line">foo <span class="comment">// &quot;aaa&quot;</span></span><br><span class="line">bar <span class="comment">// &quot;bbb&quot;</span></span><br></pre></td></tr></table></figure>

<p>对象的解构与数组有一个重要的不同。<code>数组的元素是按次序排列的，变量的取值由它的位置决定</code>；<strong>而对象的属性没有次序，变量必须与属性同名，才能取到正确的值。</strong></p>
<p>如果变量名与属性名不一致，必须写成下面这样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">bar</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line">baz <span class="comment">// &quot;aaa&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">first</span>: <span class="string">&#x27;hello&#x27;</span>, <span class="attr">last</span>: <span class="string">&#x27;world&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">first</span>: f, <span class="attr">last</span>: l &#125; = obj;</span><br><span class="line">f <span class="comment">// &#x27;hello&#x27;</span></span><br><span class="line">l <span class="comment">// &#x27;world&#x27;</span></span><br></pre></td></tr></table></figure>

<p>也就是说，对象的解构赋值的内部机制，是先找到同名属性，然后再赋给对应的变量。真正被赋值的是后者，而不是前者。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">bar</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line">baz <span class="comment">// &quot;aaa&quot;</span></span><br><span class="line">foo <span class="comment">// error: foo is not defined</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，**<code>foo</code>是匹配的模式，<code>baz</code>才是变量。真正被赋值的是变量<code>baz</code>，而不是模**</p>
<p><strong>式<code>foo</code>。</strong></p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/es6%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-css模块化及CSSModules使用" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/">css模块化及CSSModules使用</a>
	
    </h1>
  


  
  
<a href="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/" class="archive-article-date">
        <time datetime="2023-02-16T15:15:41.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="css、sass、lessmodule-样式模块化"><a href="#css、sass、lessmodule-样式模块化" class="headerlink" title="css、sass、lessmodule 样式模块化"></a>css、sass、lessmodule 样式模块化</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_36359516/article/details/107975037?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-2-107975037-blog-121479696.pc_relevant_multi_platform_whitelistv3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-2-107975037-blog-121479696.pc_relevant_multi_platform_whitelistv3&utm_relevant_index=5">参考</a></p>
<p>话不多说，以sass为例，咱们先来看看区别</p>
<p>首先，目录结构如下</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813105357758.png" alt="在这里插入图片描述"></p>
<h2 id="一、正常书写"><a href="#一、正常书写" class="headerlink" title="一、正常书写"></a>一、正常书写</h2><p>这里就称为三部曲吧，<br>1、写页面（不用多说，相信大家都会了）；<br>2、写正常样式（相信大家也会了）<br>3、导入样式</p>
<p>1、全局<br>login中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./login.scss&#x27;</span>;<span class="comment">//导入样式</span></span><br></pre></td></tr></table></figure>

<div classname="wrap">
    <div classname="title">登录页</div>
    <div classname="content">global</div>
</div>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>登录页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;content&quot;</span>&gt;</span>global<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">wrap</span>&#123;</span><br><span class="line">    <span class="attr">color</span>: red;<span class="comment">//这里是登录页写的样式</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>home中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./home.scss&#x27;</span>;<span class="comment">//导入样式</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>这是首页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;content&quot;</span>&gt;</span>global<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/2020081312453584.png" alt="在这里插入图片描述"></p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813124607190.png" alt="在这里插入图片描述"></p>
<p>这里我们注意到，我只给login加了字体颜色的样式，但是home中字体颜色也变了，这说明：常规写法中（即后缀为.scss），className&#x3D;”wrap”是应用于全局的，也就是说，在这个项目中，不管在哪个页面，只要类名为wrap，字体颜色都会变成红色</p>
<p>有人就想说，我想让login页的字体为红色，home页的字体为金色，那我给home页设个金色不就行了，我们来看看</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./home.scss&#x27;</span>;<span class="comment">//导入样式</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>这是首页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;content&quot;</span>&gt;</span>global<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.wrap&#123;</span><br><span class="line">    color: gold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813130013344.png" alt="在这里插入图片描述"></p>
<p>呀，一看，home页果然变成了金色，开心得不行，先等等，我们再来看一下login页，</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813130127798.png" alt="在这里插入图片描述"></p>
<p>哟，不行，login页也变成了金色，百思不得其解啊，为什么呢？接下来我们看看原因：</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813130317930.png" alt="在这里插入图片描述"></p>
<p>控制台看了一下，首先，我们是给login页加了红色，但是，在给home页加了金色时，把原来得红色覆盖掉了，这就很好的说明了常规写法下，className&#x3D;”wrap”这样写样式作用于全局，全局得意思呢就是：该项目里，只要类名为wrap的样式公用。</p>
<p>回到上面的问题，怎么做才能让login页红色，home页金色呢？<br>有人说，你起两个不同的类名不就可以了吗？好的，咱们来看看，把home页类名改成wraphome</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./home.scss&#x27;</span>;<span class="comment">//导入样式</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;wraphome&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>这是首页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;content&quot;</span>&gt;</span>global<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: gold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813133331340.png" alt="在这里插入图片描述"></p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813133403829.png" alt="在这里插入图片描述"></p>
<p>确实已经达到了想要的样子，但是如果项目比较大，页面复杂时，咱们是不可能保证写出来的类名完全不一样的（这里有人会质疑脸，毕竟小编本人在最初学习时就是这种想法，现在想想还是太年轻啊），比如title，很多页面都会用到，还要一边写一边记这个类名我有没有写过真的是太烧脑细胞啦</p>
<p>2、局部（有效）<br>其实，大家的想法就是，我只想让login.scss的样式应用于login页面，home.scss的样式应用于home页面，那怎么去解决这个问题呢？<br>好了，这里最开始有一个方法，小编当初就是这么写的，还自认为没啥问题，（当项目再大到一定程度时，好像又出问题了）不管，咱先来看看<br>首先，每个页面最外面一个div的类名，就以页面名来命名，页面其他内容都在这个div的内部，写样式时也一样，最外面先裹一层该页面最外层的类名，其他样式写在该类名内部，如下：<br>home页</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813135833989.png" alt="在这里插入图片描述"></p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813135754104.png" alt="在这里插入图片描述"></p>
<p>login页</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813135947188.png" alt="在这里插入图片描述"></p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813140006500.png" alt="在这里插入图片描述"></p>
<p>效果</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813140033325.png" alt="在这里插入图片描述"></p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813140111921.png" alt="在这里插入图片描述"></p>
<p>喏，各样式就互不干扰啦，而且一个页面中控制类名不重复就比刚刚容易多了；<br>这种方法只要保证每个页面最外层的div类名不重复就可以了！</p>
<p>但是随着项目的增大，将会带来新的问题，比如一个项目几百个页面，控制类名不重复就会又麻烦起来，有什么方法能够方便快速的解决这个问题呢？</p>
<p>这里我们引入模块化的概念</p>
<h2 id="二、module模块化"><a href="#二、module模块化" class="headerlink" title="二、module模块化"></a>二、module模块化</h2><p>概念这里不再赘述，很多博客都有讲到（小编自己上来就看概念是真的没能理解，不知道大家感觉怎么样）</p>
<h3 id="1、模块化的基本使用"><a href="#1、模块化的基本使用" class="headerlink" title="1、模块化的基本使用"></a>1、模块化的基本使用</h3><p>！！！！样式命名必须要是xxx.module.scss才能被引用<br>login页</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sass中的模块化--样式命名必须要是xxx.module.scss才能被引用</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Modules</span> <span class="keyword">from</span> <span class="string">&#x27;./login.module.scss&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;Modules.wrap&#125;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>登录页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;content&quot;</span>&gt;</span>global<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>home页</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Modules</span> <span class="keyword">from</span> <span class="string">&#x27;./home.module.scss&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;Modules.wrap&#125;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>这是首页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;content&quot;</span>&gt;</span>global<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: cyan;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813141940103.png" alt="在这里插入图片描述"></p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813142009952.png" alt="在这里插入图片描述"></p>
<p>诺，随心所欲，个页面样式互不干扰啦，而且注意到，我们每个页面最外层的div类名都一样，只是引入不同的样式表就可以啦（其实这个说法不正确的，构建工具会将类名style.title编译成一个哈希字符串，类名其实不一样的，可以打印出来看看）<br>这是home页实际的类名</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813142911505.png" alt="在这里插入图片描述"></p>
<p>这是login页实际的类名</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813142946115.png" alt="在这里插入图片描述"></p>
<h3 id="2、引入global"><a href="#2、引入global" class="headerlink" title="2、引入global"></a>2、引入global</h3><p>css中写成</p>
<p>:global(.title) {} 而sass中可以写成: global { .title{} }</p>
<blockquote>
<p>在sass中可以将所有需要全局应用的写在一个:global选择器中</p>
</blockquote>
<p>你不是说随心所欲嘛，我怎么给title加样式他不奏效呢？<br>效果</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813153646707.png" alt="在这里插入图片描述"></p>
<p>我们来看看怎么加的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Modules</span> <span class="keyword">from</span> <span class="string">&#x27;./login.module.scss&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;Modules.wrap&#125;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>登录页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;content&quot;</span>&gt;</span>global<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span>&#123;</span><br><span class="line">   <span class="selector-class">.title</span>&#123;</span><br><span class="line">       <span class="attribute">color</span>: lawngreen;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个问题其实还是概念问题啦，看到这里，再去研究概念应该就比较舒服了。</p>
<p>！！！简而言之一句话，只要写成className&#x3D;”title”这样的，都是使用全局样式，写成className&#x3D;{xxx.title}才是模块样式。</p>
<p>1、有效写法（模块化）<br>出现上面现象的原因呢就是，你最外层已经wrap设定为模块样式（局部样式了）,那他内部的类名肯定都是模块样式了，所以，应该写成className&#x3D;{Module.title},<br>如下</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813151919316.png" alt="在这里插入图片描述"></p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813152606909.png" alt="在这里插入图片描述"></p>
<p>这样才会奏效，<br>看下效果</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813152510698.png" alt="在这里插入图片描述"></p>
<p>这样写多麻烦啊，你想啊，每个类名都得给他加上{Module.xxx}太累了，因此，我们引出了global这个概念（大家去百度吧或者看其他博客，顺便把local也看一下，方便大家深入理解，我们这里就只告诉大家怎么用的了）</p>
<p>2、最佳写法（global全局化）</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813152222361.png" alt="在这里插入图片描述"></p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813152310686.png" alt="在这里插入图片描述"></p>
<p>OK！这样写就搞定啦 不放心？看下效果</p>
<p><img src="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/20200813152424695.png" alt="在这里插入图片描述"></p>
<h1 id="css模块化及CSS-Modules使用详解"><a href="#css模块化及CSS-Modules使用详解" class="headerlink" title="css模块化及CSS Modules使用详解"></a>css模块化及CSS Modules使用详解</h1><h2 id="什么是css模块化？"><a href="#什么是css模块化？" class="headerlink" title="什么是css模块化？"></a>什么是css模块化？</h2><p>为了理解css模块化思想，我们首先了解下，什么是模块化，在百度百科上的解释是，在系统的结构中，模块是可组合、分解和更换的单元。模块化是一种处理复杂系统分解成为更好的可管理模块的方式。它可以通过在不同组件设定不同的功能，把一个问题分解成多个小的独立、互相作用的组件，来处理复杂、大型的软件。看完模块化，是不是有种拼图的即视感，可以把大图分成各个小图，然后把小图拼成大图，分与合的艺术感。那么css模块化思想，也就是在css编写环境中，用上模块化的思想，把一个大的项目，分解成独立的组件，不同的组件负责不同的功能，最后把模块组装，就成了我们要完成的项目了。</p>
<h2 id="css模块化有什么好处？"><a href="#css模块化有什么好处？" class="headerlink" title="css模块化有什么好处？"></a>css模块化有什么好处？</h2><p>当做一个大项目，几个人团队合作开发，结果看不懂彼此的代码，怎么办，当面对前人已经写好代码，需要修改，可是无处下手，怎么办.当代码耦合，修改费时费力，怎么办，当需要迭代，面对庞大的代码，牵一发动全身的悲催时刻，怎么办，这个时候，模块化思想就是救星了。css写法特别的灵活，也因为灵活，所以容易耦合在一起，这时候就需要进行模块化的分离。那么css模块化的好处多多，列举了一些如下：</p>
<ul>
<li>　　　　提高代码重用率</li>
<li>　　　　提高开发效率、减少沟通成本</li>
<li>　　　　提高页面容错</li>
<li>　　　　降低耦合</li>
<li>　　　　降低发布风险</li>
<li>　　　　减少Bug定位时间和Fix成本</li>
<li>　　　　更好的实现快速迭代</li>
<li>　　　　便于代码维护</li>
</ul>
<p>CSS 模块化的解决方案有很多，但主要有两类。一类是彻底抛弃 CSS，使用 JS 或 JSON 来写样式。<a target="_blank" rel="noopener" href="https://github.com/FormidableLabs/radium">Radium</a>，<a target="_blank" rel="noopener" href="https://github.com/petehunt/jsxstyle">jsxstyle</a>，<a target="_blank" rel="noopener" href="https://github.com/js-next/react-style">react-style</a> 属于这一类。优点是能给 CSS 提供 JS 同样强大的模块化能力；缺点是不能利用成熟的 CSS 预处理器（或后处理器） Sass&#x2F;Less&#x2F;PostCSS，<code>:hover</code> 和 <code>:active</code> 伪类处理起来复杂。另一类是依旧使用 CSS，但使用 JS 来管理样式依赖，代表是 <a target="_blank" rel="noopener" href="https://github.com/css-modules/css-modules">CSS Modules</a>。CSS Modules 能最大化地结合现有 CSS 生态和 JS 模块化能力，API 简洁到几乎零学习成本。发布时依旧编译出单独的 JS 和 CSS。它并不依赖于 React，只要你使用 Webpack，可以在 Vue&#x2F;Angular&#x2F;jQuery 中使用。是我认为目前最好的 CSS 模块化解决方案。近期在项目中大量使用，下面具体分享下实践中的细节和想法。</p>
<h2 id="CSS-模块化遇到了哪些问题？"><a href="#CSS-模块化遇到了哪些问题？" class="headerlink" title="CSS 模块化遇到了哪些问题？"></a>CSS 模块化遇到了哪些问题？</h2><p>CSS 模块化重要的是要解决好两个问题：CSS 样式的导入和导出。灵活按需导入以便复用代码；导出时要能够隐藏内部作用域，以免造成全局污染。Sass&#x2F;Less&#x2F;PostCSS 等前仆后继试图解决 CSS 编程能力弱的问题，结果它们做的也确实优秀，但这并没有解决模块化最重要的问题。Facebook 工程师 <a target="_blank" rel="noopener" href="https://github.com/vjeux">Vjeux</a> 首先抛出了 React 开发中遇到的一系列 CSS 相关问题。加上我个人的看法，总结如下：</p>
<ol>
<li>全局污染<br>CSS 使用全局选择器机制来设置样式，优点是方便重写样式。缺点是所有的样式都是全局生效，样式可能被错误覆盖，因此产生了非常丑陋的 <code>!important</code>，甚至 inline <code>!important</code> 和复杂的<a target="_blank" rel="noopener" href="https://www.w3.org/TR/selectors/#specificity">选择器权重计数表</a>，提高犯错概率和使用成本。Web Components 标准中的 Shadow DOM 能彻底解决这个问题，但它的做法有点极端，样式彻底局部化，造成外部无法重写样式，损失了灵活性。</li>
<li>命名混乱 由于全局污染的问题，多人协同开发时为了避免样式冲突，选择器越来越复杂，容易形成不同的命名风格，很难统一。样式变多后，命名将更加混乱。</li>
<li>依赖管理不彻底<br>组件应该相互独立，引入一个组件时，应该只引入它所需要的 CSS 样式。但现在的做法是除了要引入 JS，还要再引入它的 CSS，而且 Saas&#x2F;Less 很难实现对每个组件都编译出单独的 CSS，引入所有模块的 CSS 又造成浪费。JS 的模块化已经非常成熟，如果能让 JS 来管理 CSS 依赖是很好的解决办法。Webpack 的 <code>css-loader</code> 提供了这种能力。</li>
<li>无法共享变量 复杂组件要使用 JS 和 CSS 来共同处理样式，就会造成有些变量在 JS 和 CSS 中冗余，Sass&#x2F;PostCSS&#x2F;CSS 等都不提供跨 JS 和 CSS 共享变量这种能力。</li>
<li>代码压缩不彻底 由于移动端网络的不确定性，现在对 CSS 压缩已经到了变态的程度。很多压缩工具为了节省一个字节会把 ‘16px’ 转成 ‘1pc’。但对非常长的 class 名却无能为力，力没有用到刀刃上。</li>
</ol>
<p>上面的问题如果只凭 CSS 自身是无法解决的，如果是通过 JS 来管理 CSS 就很好解决，因此 Vjuex 给出的解决方案是完全的 <a target="_blank" rel="noopener" href="http://blog.vjeux.com/2014/javascript/react-css-in-js-nationjs.html">CSS in JS</a>，但这相当于完全抛弃 CSS，在 JS 中以 Object 语法来写 CSS，估计刚看到的小伙伴都受惊了。直到出现了 CSS Modules。</p>
<h2 id="CSS-Modules-模块化方案"><a href="#CSS-Modules-模块化方案" class="headerlink" title="CSS Modules 模块化方案"></a>CSS Modules 模块化方案</h2><p>CSS Modules 内部通过 <a target="_blank" rel="noopener" href="https://github.com/css-modules/icss">ICSS</a> 来解决样式导入和导出这两个问题。分别对应 <code>:import</code> 和 <code>:export</code> 两个新增的伪类。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">:<span class="built_in">import</span>(<span class="string">&quot;path/to/dep.css&quot;</span>) &#123;</span><br><span class="line">  localAlias: keyFromDep;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br><span class="line">:export &#123;</span><br><span class="line">  exportedKey: exportedValue;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但直接使用这两个关键字编程太麻烦，实际项目中很少会直接使用它们，我们需要的是用 JS 来管理 CSS 的能力。结合 Webpack 的 <code>css-loader</code> 后，就可以在 CSS 中定义样式，在 JS 中导入。</p>
<h3 id="启用-CSS-Modules"><a href="#启用-CSS-Modules" class="headerlink" title="启用 CSS Modules"></a>启用 CSS Modules</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* components/Button.module.css */</span></span><br><span class="line">.<span class="property">normal</span> &#123; <span class="comment">/* normal 相关的所有样式 */</span> &#125;</span><br><span class="line">.<span class="property">disabled</span> &#123; <span class="comment">/* disabled 相关的所有样式 */</span> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* components/Button.module.css */</span></span><br><span class="line">.<span class="property">normal</span> &#123; <span class="comment">/* normal 相关的所有样式 */</span> &#125;</span><br><span class="line">.<span class="property">disabled</span> &#123; <span class="comment">/* disabled 相关的所有样式 */</span> &#125;</span><br></pre></td></tr></table></figure>

<p>生成的 HTML 是</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;button--normal-abc53&quot;</span>&gt;</span> Processing... <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意到 <code>button--normal-abc5436</code> 是 CSS Modules 按照 <code>localIdentName</code> 自动生成的 class 名。其中的 <code>abc5436</code> 是按照给定算法生成的序列码。经过这样混淆处理后，class 名基本就是唯一的，大大降低了项目中样式覆盖的几率。同时在生产环境下修改规则，生成更短的 class 名，可以提高 CSS 的压缩率。</p>
<p>上例中 console 打印的结果是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span> &#123;</span><br><span class="line">  <span class="attr">normal</span>: <span class="string">&#x27;button--normal-abc546&#x27;</span>,</span><br><span class="line">  <span class="attr">disabled</span>: <span class="string">&#x27;button--disabled-def884&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CSS Modules 对 CSS 中的 class 名都做了处理，使用对象来保存原 class 和混淆后 class 的对应关系。</p>
<p>通过这些简单的处理，CSS Modules 实现了以下几点：</p>
<ul>
<li>所有样式都是 local 的，解决了命名冲突和全局污染问题</li>
<li>class 名生成规则配置灵活，可以此来压缩 class 名</li>
<li>只需引用组件的 JS 就能搞定组件所有的 JS 和 CSS</li>
<li>依然是 CSS，几乎 0 学习成本</li>
</ul>
<h3 id="样式默认局部"><a href="#样式默认局部" class="headerlink" title="样式默认局部"></a>样式默认局部</h3><p>使用了 CSS Modules 后，就相当于给每个 class 名外加加了一个 <code>:local</code>，以此来实现样式的局部化，如果你想切换到全局模式，使用对应的 <code>:global</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.normal</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* 以上与下面等价 */</span></span><br><span class="line">:<span class="built_in">local</span>(.normal) &#123;</span><br><span class="line">  <span class="attribute">color</span>: green; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* 定义全局样式 */</span></span><br><span class="line">:<span class="built_in">global</span>(.btn) &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* 定义多个全局样式 */</span></span><br><span class="line">:global &#123;</span><br><span class="line">  <span class="selector-class">.link</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: yellow;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Compose-来组合样式"><a href="#Compose-来组合样式" class="headerlink" title="Compose 来组合样式"></a>Compose 来组合样式</h3><p>对于样式复用，CSS Modules 只提供了唯一的方式来处理：<code>composes</code> 组</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* components/Button.css */</span></span><br><span class="line"><span class="selector-class">.base</span> &#123; <span class="comment">/* 所有通用的样式 */</span> &#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.normal</span> &#123;</span><br><span class="line">  composes: base;</span><br><span class="line">  <span class="comment">/* normal 其它样式 */</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.disabled</span> &#123;</span><br><span class="line">  composes: base;</span><br><span class="line">  <span class="comment">/* disabled 其它样式 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./Button.css&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">buttonElem.<span class="property">outerHTML</span> = <span class="string">`&lt;button class=<span class="subst">$&#123;styles.normal&#125;</span>&gt;Submit&lt;/button&gt;`</span></span><br></pre></td></tr></table></figure>

<p>生成的 HTML 变为</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;button--base-abc53 button--normal-abc53&quot;</span>&gt;</span> Processing... <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>由于在 <code>.normal</code> 中 composes 了 <code>.base</code>，编译后会 normal 会变成两个 class。</p>
<p>composes 还可以组合外部文件中的样式。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* settings.css */</span></span><br><span class="line"><span class="selector-class">.primary-color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f40</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* components/Button.css */</span></span><br><span class="line"><span class="selector-class">.base</span> &#123; <span class="comment">/* 所有通用的样式 */</span> &#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.primary</span> &#123;</span><br><span class="line">  composes: base;</span><br><span class="line">  composes: $primary-color from <span class="string">&#x27;./settings.css&#x27;</span>;</span><br><span class="line">  <span class="comment">/* primary 其它样式 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于大多数项目，有了 <code>composes</code> 后已经不再需要 Sass&#x2F;Less&#x2F;PostCSS。但如果你想用的话，由于 <code>composes</code> 不是标准的 CSS 语法，编译时会报错。就只能使用预处理器自己的语法来做样式复用了。</p>
<h3 id="class-命名技巧"><a href="#class-命名技巧" class="headerlink" title="class 命名技巧"></a>class 命名技巧</h3><p>CSS Modules 的命名规范是从 BEM 扩展而来。BEM 把样式名分为 3 个级别，分别是：</p>
<ul>
<li>Block：对应模块名，如 Dialog</li>
<li>Element：对应模块中的节点名 Confirm Button</li>
<li>Modifier：对应节点相关的状态，如 disabled、highlight</li>
</ul>
<p>综上，BEM 最终得到的 class 名为 <code>dialog__confirm-button--highlight</code>。使用双符号 <code>__</code> 和 <code>--</code> 是为了和区块内单词间的分隔符区分开来。虽然看起来有点奇怪，但 BEM 被非常多的大型项目和团队采用。我们实践下来也很认可这种命名方法。</p>
<p>CSS Modules 中 CSS 文件名恰好对应 Block 名，只需要再考虑 Element 和 Modifier。BEM 对应到 CSS Modules 的做法是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/* .dialog.css */</span><br><span class="line">.ConfirmButton--disabled &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你也可以不遵循完整的命名规范，使用 camelCase 的写法把 Block 和 Modifier 放到一起：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* .dialog.css */</span></span><br><span class="line"><span class="selector-class">.disabledConfirmButton</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="如何实现CSS，JS变量共享"><a href="#如何实现CSS，JS变量共享" class="headerlink" title="如何实现CSS，JS变量共享"></a>如何实现CSS，JS变量共享</h3><p>上面提到的 <code>:export</code> 关键字可以把 CSS 中的 变量输出到 JS 中。下面演示如何在 JS 中读取 Sass 变量：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* config.scss */</span></span><br><span class="line">$primary-<span class="attribute">color</span>: <span class="number">#f40</span>;</span><br><span class="line"> </span><br><span class="line">:export &#123;</span><br><span class="line">  primaryColor: $primary-color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* app.js */</span></span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">&#x27;config.scss&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 会输出 #F40</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(style.<span class="property">primaryColor</span>);</span><br></pre></td></tr></table></figure>

<h2 id="CSS-Modules-使用技巧"><a href="#CSS-Modules-使用技巧" class="headerlink" title="CSS Modules 使用技巧"></a>CSS Modules 使用技巧</h2><p>CSS Modules 是对现有的 CSS 做减法。为了追求<strong>简单可控</strong>，作者建议遵循如下原则：</p>
<ul>
<li>不使用选择器，只使用 class 名来定义样式</li>
<li>不层叠多个 class，只使用一个 class 把所有样式定义好</li>
<li>所有样式通过 <code>composes</code> 组合来实现复用</li>
<li>不嵌套</li>
</ul>
<p>上面两条原则相当于削弱了样式中最灵活的部分，初使用者很难接受。第一条实践起来难度不大，但第二条如果模块状态过多时，class 数量将成倍上升。</p>
<p>一定要知道，上面之所以称为建议，是因为 CSS Modules 并不强制你一定要这么做。听起来有些矛盾，由于多数 CSS 项目存在深厚的历史遗留问题，过多的限制就意味着增加迁移成本和与外部合作的成本。初期使用中肯定需要一些折衷。幸运的是，CSS Modules 这点做的很好：</p>
<p><strong>如果我对一个元素使用多个 class 呢？</strong></p>
<p>没问题，样式照样生效。</p>
<p><strong>如何我在一个 style 文件中使用同名 class 呢？</strong></p>
<p>没问题，这些同名 class 编译后虽然可能是随机码，但仍是同名的。</p>
<p><strong>如果我在 style 文件中使用了 id 选择器，伪类，标签选择器等呢？</strong><br>没问题，所有这些选择器将不被转换，原封不动的出现在编译后的 css 中。也就是说 CSS Modules 只会转换 class 名相关样式。</p>
<p>但注意，上面 3 个“如果”尽量不要发生。</p>
<h2 id="CSS-Modules-结合-React-实践"><a href="#CSS-Modules-结合-React-实践" class="headerlink" title="CSS Modules 结合 React 实践"></a>CSS Modules 结合 React 实践</h2><p>在 <code>className</code> 处直接使用 css 中 <code>class</code> 名即可。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* dialog.css */</span></span><br><span class="line"><span class="selector-class">.root</span> &#123;&#125;</span><br><span class="line"><span class="selector-class">.confirm</span> &#123;&#125;</span><br><span class="line"><span class="selector-class">.disabledConfirm</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./dialog.css&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Dialog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> cx = <span class="title function_">classNames</span>(&#123;</span><br><span class="line">      [styles.<span class="property">confirm</span>]: !<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">disabled</span>,</span><br><span class="line">      [styles.<span class="property">disabledConfirm</span>]: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">disabled</span></span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.root&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">className</span>=<span class="string">&#123;cx&#125;</span>&gt;</span>Confirm<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ...</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，一般把组件最外层节点对应的 class 名称为 <code>root</code>。这里使用了 <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/classnames">classnames</a> 库来操作 class 名。<br>如果你不想频繁的输入 <code>styles.**</code>，可以试一下 <a target="_blank" rel="noopener" href="https://github.com/gajus/react-css-modules">react-css-modules</a>，它通过高阶函数的形式来避免重复输入 <code>styles.**</code>。</p>
<h2 id="CSS-Modules-结合历史遗留项目实践"><a href="#CSS-Modules-结合历史遗留项目实践" class="headerlink" title="CSS Modules 结合历史遗留项目实践"></a>CSS Modules 结合历史遗留项目实践</h2><p>好的技术方案除了功能强大炫酷，还要能做到现有项目能平滑迁移。CSS Modules 在这一点上表现的非常灵活。</p>
<h3 id="外部如何覆盖局部样式"><a href="#外部如何覆盖局部样式" class="headerlink" title="外部如何覆盖局部样式"></a>外部如何覆盖局部样式</h3><p>当生成混淆的 class 名后，可以解决命名冲突，但因为无法预知最终 class 名，不能通过一般选择器覆盖。我们现在项目中的实践是可以给组件关键节点加上 <code>data-role</code> 属性，然后通过属性选择器来覆盖样式。</p>
<p>如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// dialog.js</span><br><span class="line">  return <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.root&#125;</span> <span class="attr">data-role</span>=<span class="string">&#x27;dialog-root&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">className</span>=<span class="string">&#123;styles.disabledConfirm&#125;</span> <span class="attr">data-role</span>=<span class="string">&#x27;dialog-confirm-btn&#x27;</span>&gt;</span>Confirm<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// dialog<span class="selector-class">.css</span></span><br><span class="line"><span class="selector-attr">[data-role=<span class="string">&quot;dialog-root&quot;</span>]</span> &#123;</span><br><span class="line">  // override style</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>因为 CSS Modules 只会转变类选择器，所以这里的属性选择器不需要添加 <code>:global</code>。</p>
<h3 id="如何与全局样式共存"><a href="#如何与全局样式共存" class="headerlink" title="如何与全局样式共存"></a>如何与全局样式共存</h3><p>前端项目不可避免会引入 normalize.css 或其它一类全局 css 文件。使用 Webpack 可以让全局样式和 CSS Modules 的局部样式和谐共存。下面是我们项目中使用的 webpack 部分配置代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">loaders</span>: [&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;babel&#x27;</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">    <span class="attr">exclude</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src/styles&#x27;</span>),</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;style!css?modules&amp;localIdentName=[name]__[local]!sass?sourceMap=true&#x27;</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">    <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src/styles&#x27;</span>),</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;style!css!sass?sourceMap=true&#x27;</span></span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>目录结构如下：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">src</span></span><br><span class="line">├── app<span class="selector-class">.js</span></span><br><span class="line">├── styles</span><br><span class="line">│   ├── app<span class="selector-class">.scss</span></span><br><span class="line">│   └── normalize<span class="selector-class">.scss</span></span><br><span class="line">└── views</span><br><span class="line">    ├── Component<span class="selector-class">.js</span></span><br><span class="line">    └── Component<span class="selector-class">.scss</span></span><br></pre></td></tr></table></figure>

<p>这样所有全局的样式都放到 <code>src/styles/app.scss</code> 中引入就可以了。其它所有目录包括 <code>src/views</code> 中的样式都是局部的。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>CSS Modules 很好的解决了 CSS 目前面临的模块化难题。支持与 Sass&#x2F;Less&#x2F;PostCSS 等搭配使用，能充分利用现有技术积累。同时也能和全局样式灵活搭配，便于项目中逐步迁移至 CSS Modules。CSS Modules 的实现也属轻量级，未来有标准解决方案后可以低成本迁移。如果你的产品中正好遇到类似问题，非常值得一试。</p>
<p>本文参照了：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/WebShare-hilda/p/4686067.html">http://www.cnblogs.com/WebShare-hilda/p/4686067.html</a></p>
<p>​          				<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000004300065">https://segmentfault.com/a/1190000004300065</a></p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/css%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8ACSSModules%E4%BD%BF%E7%94%A8/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-移动端" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端</a>
	
    </h1>
  


  
  
<a href="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" class="archive-article-date">
        <time datetime="2023-02-16T15:14:42.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="移动端特点"><a href="#移动端特点" class="headerlink" title="移动端特点"></a>移动端特点</h1><h2 id="移动端和PC端网页的不同点"><a href="#移动端和PC端网页的不同点" class="headerlink" title="移动端和PC端网页的不同点"></a>移动端和PC端网页的不同点</h2><ul>
<li><p>PC端网页和移动端网页的有什么不同？</p>
<ul>
<li>PC屏幕大，网页固定版心</li>
<li>手机屏幕小， 网页宽度多数为100%</li>
</ul>
</li>
<li><p>如何在电脑里面边写代码边调试移动端网页效果？</p>
<ul>
<li>谷歌模拟器</li>
</ul>
</li>
</ul>
<h2 id="谷歌模拟器"><a href="#谷歌模拟器" class="headerlink" title="谷歌模拟器"></a>谷歌模拟器</h2><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210110807387.png" alt="image-20230210110807387"></p>
<h2 id="屏幕尺寸"><a href="#屏幕尺寸" class="headerlink" title="屏幕尺寸"></a>屏幕尺寸</h2><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210111654609.png" alt="image-20230210111654609"></p>
<h2 id="分辨率"><a href="#分辨率" class="headerlink" title="分辨率"></a>分辨率</h2><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210111730335.png" alt="image-20230210111730335"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210111744444.png" alt="image-20230210111744444"></p>
<p>按逻辑分辨率来编写代码</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210112928796.png" alt="image-20230210112928796"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210112940279.png" alt="image-20230210112940279"></p>
<h2 id="视口"><a href="#视口" class="headerlink" title="视口"></a>视口</h2><p>使用meta标签设置视口宽度，制作不同设备宽度的网页</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210113647101.png" alt="image-20230210113647101"><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210114742515.png" alt="image-20230210114742515"></p>
<p>实现网页宽度和设备宽度（即逻辑分辨率）是一样的（不设置时为980）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">viewport视口</span><br><span class="line">width=device-width视口宽度等于设备宽度</span><br><span class="line">initial-scale=1.0缩放</span><br></pre></td></tr></table></figure>





<h2 id="二倍图"><a href="#二倍图" class="headerlink" title="二倍图"></a>二倍图</h2><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210123627221.png" alt="image-20230210123627221"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210123638229.png" alt="image-20230210123638229"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210123655881.png" alt="image-20230210123655881"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210121825026.png" alt="image-20230210121825026"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230210123540470.png" alt="image-20230210123540470"></p>
<h1 id="百分百比布局"><a href="#百分百比布局" class="headerlink" title="百分百比布局"></a>百分百比布局</h1><p>百分百比布局又称为流式布局</p>
<p>即宽度100%,高度固定</p>
<h1 id="flex布局"><a href="#flex布局" class="headerlink" title="flex布局"></a>flex布局</h1><p>Flex布局&#x2F;弹性布局：</p>
<ul>
<li>是一种浏览器提倡的布局模型</li>
</ul>
<ul>
<li>布局网页更简单、灵活</li>
<li>避免浮动脱标的问题</li>
</ul>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173258328.png" alt="image-20230211173258328"></p>
<h2 id="略解"><a href="#略解" class="headerlink" title="略解"></a>略解</h2><h3 id="justify-content主轴对齐方式"><a href="#justify-content主轴对齐方式" class="headerlink" title="justify-content主轴对齐方式"></a>justify-content主轴对齐方式</h3><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173309097.png" alt="image-20230211173309097"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173319498.png" alt="image-20230211173319498"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173450191.png" alt="image-20230211173450191"></p>
<h3 id="align-items侧轴对齐方式"><a href="#align-items侧轴对齐方式" class="headerlink" title="align-items侧轴对齐方式"></a>align-items侧轴对齐方式</h3><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173509402.png" alt="image-20230211173509402"></p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173517941.png" alt="image-20230211173517941"></p>
<h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h3><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173617731.png" alt="image-20230211173617731"></p>
<h3 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h3><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173655013.png" alt="image-20230211173655013"><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173702764.png" alt="image-20230211173702764"></p>
<h3 id="弹性盒子换行flex-wrap"><a href="#弹性盒子换行flex-wrap" class="headerlink" title="弹性盒子换行flex-wrap"></a>弹性盒子换行flex-wrap</h3><p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/image-20230211173714185.png" alt="image-20230211173714185"></p>
<p>网页布局（layout）是 CSS 的一个重点应用。</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071001.gif" alt="img"></p>
<p>布局的传统解决方案，基于<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/box_model">盒状模型</a>，依赖 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/display"><code>display</code></a> 属性 + <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/position"><code>position</code></a>属性 + <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/float"><code>float</code></a>属性。它对于那些特殊布局非常不方便，比如，<a target="_blank" rel="noopener" href="https://css-tricks.com/centering-css-complete-guide/">垂直居中</a>就不容易实现。</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071002.png" alt="img"></p>
<p>2009年，W3C 提出了一种新的方案—-Flex 布局，可以简便、完整、响应式地实现各种页面布局。目前，它已经得到了所有浏览器的支持，这意味着，现在就能很安全地使用这项功能。</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071003.jpg" alt="img"></p>
<p>Flex 布局将成为未来布局的首选方案。本文介绍它的语法，<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2015/07/flex-examples.html">下一篇文章</a>给出常见布局的 Flex 写法。网友 <a target="_blank" rel="noopener" href="http://vgee.cn/">JailBreak</a> 为本文的所有示例制作了 <a target="_blank" rel="noopener" href="http://static.vgee.cn/static/index.html">Demo</a>，也可以参考。</p>
<p>以下内容主要参考了下面两篇文章：<a target="_blank" rel="noopener" href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">A Complete Guide to Flexbox</a> 和 <a target="_blank" rel="noopener" href="https://scotch.io/tutorials/a-visual-guide-to-css3-flexbox-properties">A Visual Guide to CSS3 Flexbox Properties</a>。</p>
<h2 id="一、Flex-布局是什么？"><a href="#一、Flex-布局是什么？" class="headerlink" title="一、Flex 布局是什么？"></a>一、Flex 布局是什么？</h2><p>Flex 是 Flexible Box 的缩写，意为”弹性布局”，用来为盒状模型提供最大的灵活性。</p>
<p>任何一个容器都可以指定为 Flex 布局。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>行内元素也可以使用 Flex 布局。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line"><span class="attribute">display</span>: inline-flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>Webkit 内核的浏览器，必须加上<code>-webkit</code>前缀。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line"><span class="attribute">display</span>: -webkit-flex; <span class="comment">/* Safari */</span></span><br><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>注意，设为 Flex 布局以后，子元素的<code>float</code>、<code>clear</code>和<code>vertical-align</code>属性将失效。</p>
<h2 id="二、基本概念"><a href="#二、基本概念" class="headerlink" title="二、基本概念"></a>二、基本概念</h2><p>采用 Flex 布局的元素，称为 Flex 容器（flex container），简称”容器”。它的所有子元素自动成为容器成员，称为 Flex 项目（flex item），简称”项目”。</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071004.png" alt="img"></p>
<p>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。主轴的开始位置（与边框的交叉点）叫做<code>main start</code>，结束位置叫做<code>main end</code>；交叉轴的开始位置叫做<code>cross start</code>，结束位置叫做<code>cross end</code>。</p>
<p>项目默认沿主轴排列。单个项目占据的主轴空间叫做<code>main size</code>，占据的交叉轴空间叫做<code>cross size</code>。</p>
<h2 id="三、容器的属性"><a href="#三、容器的属性" class="headerlink" title="三、容器的属性"></a>三、容器的属性</h2><p>以下6个属性设置在容器上。</p>
<blockquote>
<ul>
<li>flex-direction</li>
<li>flex-wrap</li>
<li>flex-flow</li>
<li>justify-content</li>
<li>align-items</li>
<li>align-content</li>
</ul>
</blockquote>
<h3 id="3-1-flex-direction属性"><a href="#3-1-flex-direction属性" class="headerlink" title="3.1 flex-direction属性"></a>3.1 flex-direction属性</h3><p><code>flex-direction</code>属性决定主轴的方向（即项目的排列方向）。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071005.png" alt="img"></p>
<p>它可能有4个值。</p>
<blockquote>
<ul>
<li><code>row</code>（默认值）：主轴为水平方向，起点在左端。</li>
<li><code>row-reverse</code>：主轴为水平方向，起点在右端。</li>
<li><code>column</code>：主轴为垂直方向，起点在上沿。</li>
<li><code>column-reverse</code>：主轴为垂直方向，起点在下沿。</li>
</ul>
</blockquote>
<h3 id="3-2-flex-wrap属性"><a href="#3-2-flex-wrap属性" class="headerlink" title="3.2 flex-wrap属性"></a>3.2 flex-wrap属性</h3><p>默认情况下，项目都排在一条线（又称”轴线”）上。<code>flex-wrap</code>属性定义，如果一条轴线排不下，如何换行。</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071006.png" alt="img"></p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line"><span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>它可能取三个值。</p>
<p>（1）<code>nowrap</code>（默认）：不换行。</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071007.png" alt="img"></p>
<p>（2）<code>wrap</code>：换行，第一行在上方。</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071008.jpg" alt="img"></p>
<p>（3）<code>wrap-reverse</code>：换行，第一行在下方。</p>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071009.jpg" alt="img"></p>
<h3 id="3-3-flex-flow"><a href="#3-3-flex-flow" class="headerlink" title="3.3 flex-flow"></a>3.3 flex-flow</h3><p><code>flex-flow</code>属性是<code>flex-direction</code>属性和<code>flex-wrap</code>属性的简写形式，默认值为<code>row nowrap</code>。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">flex-flow</span>: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-4-justify-content属性"><a href="#3-4-justify-content属性" class="headerlink" title="3.4 justify-content属性"></a>3.4 justify-content属性</h3><p><code>justify-content</code>属性定义了项目在主轴上的对齐方式。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">justify-content</span>: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071010.png" alt="img"></p>
<p>它可能取5个值，具体对齐方式与轴的方向有关。下面假设主轴为从左到右。</p>
<blockquote>
<ul>
<li><code>flex-start</code>（默认值）：左对齐</li>
<li><code>flex-end</code>：右对齐</li>
<li><code>center</code>： 居中</li>
<li><code>space-between</code>：两端对齐，项目之间的间隔都相等。</li>
<li><code>space-around</code>：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍。</li>
</ul>
</blockquote>
<h3 id="3-5-align-items属性"><a href="#3-5-align-items属性" class="headerlink" title="3.5 align-items属性"></a>3.5 align-items属性</h3><p><code>align-items</code>属性定义项目在交叉轴上如何对齐。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">align-items</span>: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071011.png" alt="img"></p>
<p>它可能取5个值。具体的对齐方式与交叉轴的方向有关，下面假设交叉轴从上到下。</p>
<blockquote>
<ul>
<li><code>flex-start</code>：交叉轴的起点对齐。</li>
<li><code>flex-end</code>：交叉轴的终点对齐。</li>
<li><code>center</code>：交叉轴的中点对齐。</li>
<li><code>baseline</code>: 项目的第一行文字的基线对齐。</li>
<li><code>stretch</code>（默认值）：如果项目未设置高度或设为auto，将占满整个容器的高度。</li>
</ul>
</blockquote>
<h3 id="3-6-align-content属性"><a href="#3-6-align-content属性" class="headerlink" title="3.6 align-content属性"></a>3.6 align-content属性</h3><p><code>align-content</code>属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">align-content</span>: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071012.png" alt="img"></p>
<p>该属性可能取6个值。</p>
<blockquote>
<ul>
<li><code>flex-start</code>：与交叉轴的起点对齐。</li>
<li><code>flex-end</code>：与交叉轴的终点对齐。</li>
<li><code>center</code>：与交叉轴的中点对齐。</li>
<li><code>space-between</code>：与交叉轴两端对齐，轴线之间的间隔平均分布。</li>
<li><code>space-around</code>：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。</li>
<li><code>stretch</code>（默认值）：轴线占满整个交叉轴。</li>
</ul>
</blockquote>
<h3 id="四、项目的属性"><a href="#四、项目的属性" class="headerlink" title="四、项目的属性"></a>四、项目的属性</h3><p>以下6个属性设置在项目上。</p>
<blockquote>
<ul>
<li><code>order</code></li>
<li><code>flex-grow</code></li>
<li><code>flex-shrink</code></li>
<li><code>flex-basis</code></li>
<li><code>flex</code></li>
<li><code>align-self</code></li>
</ul>
</blockquote>
<h3 id="4-1-order属性"><a href="#4-1-order属性" class="headerlink" title="4.1 order属性"></a>4.1 order属性</h3><p><code>order</code>属性定义项目的排列顺序。数值越小，排列越靠前，默认为0。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">order</span>: &lt;integer&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071013.png" alt="img"></p>
<h3 id="4-2-flex-grow属性"><a href="#4-2-flex-grow属性" class="headerlink" title="4.2 flex-grow属性"></a>4.2 flex-grow属性</h3><p><code>flex-grow</code>属性定义项目的放大比例，默认为<code>0</code>，即如果存在剩余空间，也不放大。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">flex-grow</span>: &lt;number&gt;; <span class="comment">/* default 0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071014.png" alt="img"></p>
<p>如果所有项目的<code>flex-grow</code>属性都为1，则它们将等分剩余空间（如果有的话）。如果一个项目的<code>flex-grow</code>属性为2，其他项目都为1，则前者占据的剩余空间将比其他项多一倍。</p>
<h3 id="4-3-flex-shrink属性"><a href="#4-3-flex-shrink属性" class="headerlink" title="4.3 flex-shrink属性"></a>4.3 flex-shrink属性</h3><p><code>flex-shrink</code>属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">flex-shrink</span>: &lt;number&gt;; <span class="comment">/* default 1 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071015.jpg" alt="img"></p>
<p>如果所有项目的<code>flex-shrink</code>属性都为1，当空间不足时，都将等比例缩小。如果一个项目的<code>flex-shrink</code>属性为0，其他项目都为1，则空间不足时，前者不缩小。</p>
<p>负值对该属性无效。</p>
<h3 id="4-4-flex-basis属性"><a href="#4-4-flex-basis属性" class="headerlink" title="4.4 flex-basis属性"></a>4.4 flex-basis属性</h3><p><code>flex-basis</code>属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为<code>auto</code>，即项目的本来大小。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">flex-basis</span>: &lt;length&gt; | auto; <span class="comment">/* default auto */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>它可以设为跟<code>width</code>或<code>height</code>属性一样的值（比如350px），则项目将占据固定空间。</p>
<h3 id="4-5-flex属性"><a href="#4-5-flex属性" class="headerlink" title="4.5 flex属性"></a>4.5 flex属性</h3><p><code>flex</code>属性是<code>flex-grow</code>, <code>flex-shrink</code> 和 <code>flex-basis</code>的简写，默认值为<code>0 1 auto</code>。后两个属性可选。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">flex</span>: none | [ &lt;<span class="string">&#x27;flex-grow&#x27;</span>&gt; &lt;<span class="string">&#x27;flex-shrink&#x27;</span>&gt;? || &lt;<span class="string">&#x27;flex-basis&#x27;</span>&gt; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>该属性有两个快捷值：<code>auto</code> (<code>1 1 auto</code>) 和 none (<code>0 0 auto</code>)。</p>
<p>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值。</p>
<h3 id="4-6-align-self属性"><a href="#4-6-align-self属性" class="headerlink" title="4.6 align-self属性"></a>4.6 align-self属性</h3><p><code>align-self</code>属性允许单个项目有与其他项目不一样的对齐方式，可覆盖<code>align-items</code>属性。默认值为<code>auto</code>，表示继承父元素的<code>align-items</code>属性，如果没有父元素，则等同于<code>stretch</code>。</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">align-self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/bg2015071016.png" alt="img"></p>
<p>该属性可能取6个值，除了auto，其他都与align-items属性完全一致。</p>
<p>（完）</p>
<h2 id="flex布局文字溢出显示省略号失效的解决方法"><a href="#flex布局文字溢出显示省略号失效的解决方法" class="headerlink" title="flex布局文字溢出显示省略号失效的解决方法"></a>flex布局文字溢出显示省略号失效的解决方法</h2><p>css单行文字溢出省略</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">white-space</span>: nowrap;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100px</span>;</span><br></pre></td></tr></table></figure>

<p>css多行文字溢出省略：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">word-break</span>: break-word;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line">-webkit-box-orient: vertical;</span><br><span class="line">-webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>但是如果是<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=flex&spm=1001.2101.3001.7020">flex</a>布局，省略就会不起作用：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;name&quot;&gt;我超出不能显示省略号&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line"><span class="selector-class">.name</span> &#123;</span><br><span class="line"> <span class="attribute">display</span>: flex;</span><br><span class="line"> <span class="attribute">overflow</span>: hidden;</span><br><span class="line"> <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"> <span class="attribute">white-space</span>: nowrap;</span><br><span class="line"> <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/20200505194012859.png" alt="在这里插入图片描述"></p>
<p>其实只要为文字套上一层span问题就迎刃而解啦</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;name&quot;&gt;</span><br><span class="line">  &lt;<span class="selector-tag">span</span>&gt;我超出可以显示省略号&lt;/<span class="selector-tag">span</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line"><span class="selector-class">.name</span> &#123;</span><br><span class="line"> <span class="attribute">display</span>: flex;</span><br><span class="line">   &amp; <span class="selector-tag">span</span> &#123;</span><br><span class="line">     <span class="attribute">overflow</span>: hidden;</span><br><span class="line">     <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">     <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">     <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者设置宽度为0、不换行、溢出隐藏、溢出部分显示为… \ flex占剩余空间就行</p>
<h1 id="移动适配"><a href="#移动适配" class="headerlink" title="移动适配"></a>移动适配</h1><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ul>
<li>rem 目前多数企业在用</li>
<li>vw&#x2F;vh 未来的解决方案</li>
</ul>
<h2 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><ul>
<li>相对单位，相对于HTML标签字号计算尺寸</li>
<li>1rem &#x3D; IHTML标签字号</li>
</ul>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ol>
<li>给HTML标签添加字号</li>
<li>设置元素尺寸为rem单位</li>
</ol>
<h2 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a><code>媒体查询</code></h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span> : <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">401px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">25px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">428px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">26.75px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">481px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">30px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">569px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">35px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">641px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>













<h2 id="vw-x2F-vh"><a href="#vw-x2F-vh" class="headerlink" title="vw&#x2F;vh"></a>vw&#x2F;vh</h2><p>相对单位</p>
<p>相对于<strong>视口尺寸</strong>计算结果</p>
<ul>
<li><p>vw : viewport Width</p>
<ul>
<li>1vw &#x3D; 1 &#x2F; 100 视口宽度</li>
</ul>
</li>
<li><p>vh : viewport height</p>
<ul>
<li>1vh &#x3D; 1 &#x2F; 100 视口高度</li>
</ul>
</li>
</ul>
<p>n px &#x2F; 3.75vw</p>
<blockquote>
<p>不建议vh、vw混用，全面屏问题</p>
<p>在两部设备中宽度一致高度不一致时</p>
<p>两台设备显示宽度一样但高度不一样</p>
</blockquote>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-js高级程序设计" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/js%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">js高级程序设计</a>
	
    </h1>
  


  
  
<a href="/js%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" class="archive-article-date">
        <time datetime="2023-02-16T15:14:18.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="js高级程序设计"><a href="#js高级程序设计" class="headerlink" title="js高级程序设计"></a>js高级程序设计</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">关键字</span><br><span class="line">break、</span><br><span class="line">else、</span><br><span class="line">new、</span><br><span class="line">var、</span><br><span class="line">case、</span><br><span class="line">finally、</span><br><span class="line">return、</span><br><span class="line">void、</span><br><span class="line">catch、</span><br><span class="line">for、</span><br><span class="line">switch、</span><br><span class="line">while、</span><br><span class="line">continue、</span><br><span class="line">function、</span><br><span class="line">this、</span><br><span class="line">with、</span><br><span class="line">default、</span><br><span class="line">if、</span><br><span class="line">throw、</span><br><span class="line">delete、</span><br><span class="line">in、</span><br><span class="line">try、</span><br><span class="line">do、</span><br><span class="line">instranceof、</span><br><span class="line">typeof。</span><br></pre></td></tr></table></figure>



<h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><blockquote>
<p>1、区分大小写</p>
<p>2、标识符由数字、美元符、下滑线、字符组成，数字不能为开头</p>
<p>3、书写时标识符建议使用小驼峰命名法</p>
<p>4、注释<br>单行   &#x2F;&#x2F;</p>
<p>​	多行 &#x2F;*  *&#x2F;</p>
<p>5、严格模式 use script</p>
<p>6、语句建议加上分号<strong>（以免压缩代码时出现语法错误）</strong></p>
</blockquote>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>一、var 关键字</p>
<blockquote>
<p>1、var为函数作用域</p>
<p>2、去掉 var 直接写 为全局变量 （不建议使用,在局部定义的全局变量很难维护）</p>
<p>3、var 声明提升  代码在执行会进行预处理</p>
<p>​	只会提升声明不会提升赋值</p>
<p>4、在函数内定义的局部变量在函数退出时会被销毁</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注意：定义多个变量</span><br><span class="line">let a = 1, b = 10;  =&gt; let a = 1; let  b = 10;</span><br><span class="line">let a = b = c = 10 ;  =&gt; let a = 10; b = 10; c = 10 ; b与c为全局变量</span><br></pre></td></tr></table></figure>



<p>二、let 关键字</p>
<blockquote>
<p>1、let是ES6新增的,采用的是块级作用域</p>
<p>2、let 不允许同一块级作用域中出现冗余声明(即重复声明)</p>
<p>3、js引擎也会对let声明的变量进行预解析（不能声明提升）</p>
<p>​	但在此之前不能以任何方式来引用未声明的变量</p>
<p>​	let声明执行之前的瞬间被称为暂时性死区</p>
<p>4、</p>
</blockquote>
<p>三、let 与 var 的区别</p>
<blockquote>
<p>1、var 可以提升声明 而let反之</p>
<p>2、var可以重复声明但let不能</p>
<p>3、var声明的全局变量会成为window的属性,而let声明的全局变量不会</p>
<p>4、在for循环中var声明的会渗透到外部,而let不会，</p>
<p>​		<em>在使用let声明迭代变量时，js引擎会在后台为每个迭代循环声明一个新的迭代变量</em></p>
</blockquote>
<p>四、const声明</p>
<p>与let基本一样 (建议标识符全大写)</p>
<blockquote>
<p>1、声明时必须进行初始化</p>
<p>2、不能重新赋值</p>
<ul>
<li>该限制只适用于它指向的变量的引用，如果const变量引用的是一个对象，那么修改这个对象内部的属性并不违反const的限制</li>
</ul>
<p>3、不能用于声明迭代变量</p>
<p>420221197710230453</p>
</blockquote>
<ul>
<li>&#96;&#96;&#96;js<br>for (const i &#x3D; 1; i &lt; 10; i++){}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  五、声明风格</span><br><span class="line"></span><br><span class="line">&gt;const &gt; let &gt; var</span><br><span class="line"></span><br><span class="line">### 原始值与引用值</span><br><span class="line"></span><br><span class="line">原始值就是简单数据类型即String、Number、Boolean、null、undefined、Symbol</span><br><span class="line"></span><br><span class="line">引用类型：object。里面包含的 function、Array、Date。</span><br><span class="line"></span><br><span class="line">原始值不能有属性，尽管尝试给原始值添加属性才不会报错（无效）</span><br><span class="line"></span><br><span class="line">原始值能使用属性和方法的原因时在使用时会进行包装将其转换为对象,在使用结束后在销毁对象还原</span><br><span class="line"></span><br><span class="line">### 执行上下文与作用域</span><br><span class="line"></span><br><span class="line">#### 执行上下文</span><br><span class="line"></span><br><span class="line">&gt;执行上下文就是当前代码的执行环境，每当js代码在运行的时候，它都是在执行上下文中运行</span><br><span class="line"></span><br><span class="line">#### 执行上下文栈</span><br><span class="line"></span><br><span class="line">执行栈就是其他语言中的调用栈，是一种LIFO数据结构的栈，它被用来存储代码运行时创建的执行上下文。</span><br><span class="line"></span><br><span class="line">`当js引擎第一次遇到要执行的代码的时候，首先会创建一个全局的执行上下文并压入当前执行栈，每当引擎遇到一个函数调用，它会为该函数创建一个新的执行上下文并压入栈顶，js引擎执行栈顶的函数，当该函数执行完毕，执行上下文从栈中弹出，控制流程到达下一个上下文。`</span><br><span class="line"></span><br><span class="line">----</span><br><span class="line"></span><br><span class="line">#### 执行上下文的三种类型</span><br><span class="line"></span><br><span class="line">![01decc8a9e37445a8dfdd8601a4756df_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0](js高级程序设计/01decc8a9e37445a8dfdd8601a4756df_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.webp)</span><br><span class="line"></span><br><span class="line">+ **全局执行上下文**</span><br><span class="line">  js引擎解析js代码最开始遇到的就是全局代码，初始化的时候会向调用栈中压入一个全局执行的上下文，只有当整个应用程序结束的时候才会清空执行栈，栈底永远都是全局执行上下文。</span><br><span class="line">  全局执行上下文只有一个，全局执行环境是最外围的一个执行环境，在浏览器的全局对象是 window, this指向这个对象。</span><br><span class="line"></span><br><span class="line">  ` 在浏览器中，全局上下文就是window对象，因此所有var定义的全局变量核函数都会成为window对象的属性和方法。使用let和const的顶级声明不会定义在全局上下文中，但在作用链上的效果一样`</span><br><span class="line"></span><br><span class="line">+ **函数执行上下文**</span><br><span class="line">  可以有无数个，函数被调用的时候才会被创建。每次调用函数都会创建一个新的执行上下文。</span><br><span class="line"></span><br><span class="line">+ **eval和with执行上下文**</span><br><span class="line"></span><br><span class="line">  很少使用</span><br><span class="line"></span><br><span class="line">  `eval()` 函数会将传入的字符串当做 JavaScript 代码进行执行。</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![67baeccb1265446d96fdd43791ffd1c0_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0](js高级程序设计/67baeccb1265446d96fdd43791ffd1c0_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.webp)</span><br><span class="line"></span><br><span class="line">变量对象：</span><br><span class="line"> 每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中。我们编写的代码无法访问，只有解析器在处理数据时在后台使用。</span><br><span class="line"> 在执行上下文中用**活动对象**表示变量对象，只有当进入一个执行环境时，这个执行上下文的变量对象才会被激活，此时成为活动对象，**只有活动对象上的属性才能被访问**。</span><br><span class="line"></span><br><span class="line">作用域链：</span><br><span class="line"> 当代码在一个环境中执行时，会创建变量对象的一个作用域链。 作用域链的用途，是保证对执行环境有权访问的所有变量和函数的有序访问。</span><br><span class="line"></span><br><span class="line">#### 执行上下文的生命周期</span><br><span class="line"></span><br><span class="line">![image.png](js高级程序设计/3f1dddfa90aa4a1aaeb96ec1df97ca46tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.webp)</span><br><span class="line"></span><br><span class="line">**创建阶段**： </span><br><span class="line"> a. 创建变量对象： 初始化函数参数 -&gt; 函数声明 -&gt; 变量声明 </span><br><span class="line"> b. 创建作用域链： **函数的作用域在函数定义的时候就确定了**。作用域链本身包含变量对象，当查找变量时，会先从当前上下文中的变量对象中查找，如果没有找到，就会从父级执行上下文的变量对象中查找，一直找到全局执行上下文的变量对象 </span><br><span class="line"> c. 确定this的指向</span><br><span class="line"></span><br><span class="line">**执行阶段**： </span><br><span class="line"> 执行变量赋值，代码执行。</span><br><span class="line"></span><br><span class="line">**回收阶段**： </span><br><span class="line"> 执行上下文出栈被垃圾回收机制进行回收。</span><br><span class="line"></span><br><span class="line">## typeof 操作符</span><br><span class="line"></span><br></pre></td></tr></table></figure>
语法<br>let  a &#x3D; ‘’<br>console.log(typeof a)  &#x2F;&#x2F; String</li>
</ul>
<p>注意因为typeof是一个操作符不是一个函数不需要参数(但可以使用参数)<br>typeof(‘1’) Number<br>对未声明的变量只能执行一个有用的操作，就是对它调用typeof<br>（调用delete也不会报错但这个操作没有用，再严格模式下还会报错）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">返回的结果</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>‘undefined’ 未初始化与未声明<br>‘boolean’表示布尔值<br>‘string’表示字符串<br>‘number’表示数值<br>‘object’表示对象或null或数组<br>‘function’表示函数<br>‘symbol’表示值为符号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">严格来说函数在ECMScript中被认为是对象,并不代表一种数据类型。可是，函数也有自己特殊的属性。为此，就有必要通过typeof来区分函数与其他对象</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line"></span><br><span class="line">&gt;1、null返回为Object</span><br><span class="line">&gt;</span><br><span class="line">&gt;2、Array返回为Object</span><br><span class="line">&gt;</span><br><span class="line">&gt;3、未初始化与未声明的都返回undefined</span><br><span class="line"></span><br><span class="line">## 确定类型</span><br><span class="line"></span><br><span class="line">&gt; typeof是判断变量是不是字符串、布尔值、数值、undefined最好方式，如果是对象和null都返回Object</span><br><span class="line"></span><br><span class="line">### instanceof</span><br><span class="line"></span><br><span class="line">&gt; 用于检测构造函数的 `prototype` 属性是否出现在某个实例对象的原型链上</span><br><span class="line">&gt;</span><br><span class="line">&gt; 判断一个对象是不是构造函数的实例化对象</span><br><span class="line"></span><br><span class="line">&gt;语法</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>object instanceof constructor</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;参数</span><br><span class="line"></span><br><span class="line">&gt;- `object`</span><br><span class="line"></span><br><span class="line">某个实例对象</span><br><span class="line"></span><br><span class="line">&gt;- `constructor`</span><br><span class="line"></span><br><span class="line">某个构造函数</span><br><span class="line"></span><br><span class="line">&gt;`instanceof` 运算符用来检测 `constructor.prototype `是否存在于参数 `object` 的原型链上。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">let obj = &#123;&#125;; // object</span><br><span class="line">let arr = []; //Array</span><br><span class="line">console.log(obj instanceof object); // true</span><br><span class="line">console.log(arr instanceof object); // false</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><blockquote>
<p>类的构造函数</p>
<p>指向实例化对象的构造函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;; <span class="comment">// object</span></span><br><span class="line"><span class="keyword">let</span> arr = []; <span class="comment">//Array</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">constructor</span>); <span class="comment">//Object()</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">constructor</span>); <span class="comment">// Array()</span></span><br></pre></td></tr></table></figure>



<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>es6有6种简单类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">数字 Number =&gt; Infinity无穷 （最大值Math.MAX_VALUE） 负无穷最小值同理</span><br><span class="line">字符串 String</span><br><span class="line">布尔值 Boolean</span><br><span class="line">空 Null</span><br><span class="line">定义未初始化 undefined</span><br><span class="line">符号型 symbol   		es6新增的</span><br></pre></td></tr></table></figure>

<h3 id><a href="#" class="headerlink" title></a></h3><h3 id="Undefined类型"><a href="#Undefined类型" class="headerlink" title="Undefined类型"></a>Undefined类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">默认情况下，任何未初始化的变量的会取得undefined值</span><br><span class="line">一般不要显示设置变量为undefined</span><br><span class="line">在声明变量时同时进行初始化，这样就可以通过typrof知道变量是否声明了</span><br></pre></td></tr></table></figure>

<h3 id="Null"><a href="#Null" class="headerlink" title="Null"></a>Null</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、用等于操作符（==）比较null与undefined 返回true</span><br><span class="line">	建议使用 全等 ===</span><br></pre></td></tr></table></figure>

<h3 id="Boolean类型"><a href="#Boolean类型" class="headerlink" title="Boolean类型"></a>Boolean类型</h3><blockquote>
<p>1、false  \ “” \ 0 \ null \ NaN \  undefined  均为  false</p>
<p>2、 true 、非空字符串、非零数字*(包括负数和无穷)* 、任意非null对象、*[] 、{}* 、‘0’均为true</p>
</blockquote>
<h3 id="Number类型"><a href="#Number类型" class="headerlink" title="Number类型"></a>Number类型</h3><blockquote>
<p>1、进制<br>八进制<br>0o开头或以0开头且数字中无大于7的数，但在严格模式下只能是以0o开头的</p>
<p>十六进制</p>
<p>​	0x开头</p>
</blockquote>
<h4 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在小数点后的数没有数值或均为零时，数值就会变为整数</span><br></pre></td></tr></table></figure>

<h4 id="值的范围"><a href="#值的范围" class="headerlink" title="值的范围"></a>值的范围</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Number.MAX_VALUE最大值 超过 后为 Infinity (无穷) 是数值</span><br><span class="line">Number.MIN_VALUE最小值 超过 后为 -Infinity （负无穷）是数值</span><br></pre></td></tr></table></figure>

<h4 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0、+0、-0相除为NaN</span><br><span class="line">isNaN 隐式转化后不是数字的均返回true</span><br></pre></td></tr></table></figure>



<h4 id="转化为数值"><a href="#转化为数值" class="headerlink" title="转化为数值"></a>转化为数值</h4><blockquote>
<p>Number可以用于任何数据类型</p>
<p>布尔值：true转为1，false转为0。<br>数字：不转换还是为自身。<br>null：转为0。<br>undefined：转为NaN。<br>字符串：会忽略前面的0和空格直到找到第一个数字然后一直找到非数字字符为止。<br>字符串为数字：转为对应的数值。<br>字符串中有一个小数点：转为对应的浮点数值。如果有第二个小数点则截取第二个小数点之前的数值片段。<br>字符串中有0x：转为十六进制对应的十进制数值。<br><em><strong>字符串为空：转为0。</strong></em><br>字符串为非空非数字非0x：转为NaN。<br>字符串中有科学计数法e：字符e(后面加number) 转为科学计数法计算后到结果</p>
</blockquote>
<blockquote>
<p>parseInt(‘’)注重数值 </p>
<p>​	主要用于字符串类型</p>
<ol>
<li>字符串最前面的空格会被忽略，从第一个非空格字符开始</li>
<li>如果第一个字符不是数字也不是加号减号均返回NaN，空字符串也会返回NaN</li>
<li>parseInt()也可以识别不同进制的整数格式,不同数值格式很容易弄混，因此接受第二个参数作为底数，以便解析</li>
<li>如parseInt(‘0o17’,8) \ parseInt(‘0o17’,16) </li>
<li>parseInt(‘10’,2) &#x3D;&gt;2  parseInt(‘10’,8) &#x3D;&gt;8 parseInt(‘10’,10)&#x3D;&gt;10 parseInt(‘10’,16) &#x3D;&gt;16 </li>
<li>如果字符串以“0x”开头会解释成为十六进制数，ES5开始规范不再允许 <code>parseInt</code> 函数的实现环境把以 <code>0</code> 字符开始的字符串作为八进制数值</li>
</ol>
</blockquote>
<blockquote>
<p>parseFloat(‘’)</p>
<p>主要用于字符串类型</p>
<p>与parseInt类似他也是在监测到第一个不是数值的字符处结束</p>
<p>第一个小数点有效第二个小数点无效，此时剩余的字符都将被忽略</p>
<p>只解析十进制值无第二个参数</p>
</blockquote>
<h3 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h3><blockquote>
<ol>
<li>转义序列表示是一个字符</li>
<li>如果字符串中包括双字节字符，那么length属性的值可能不准确</li>
<li>字符串是不可变的，改变会销毁原来的字符串</li>
</ol>
</blockquote>
<h4 id="显示转化为字符串"><a href="#显示转化为字符串" class="headerlink" title="显示转化为字符串"></a>显示转化为字符串</h4><blockquote>
<p>toString()</p>
<ol>
<li>null与undefined无toString()方法其余均有toString()方法</li>
<li>多数情况下，toString()不接受第二个参数。不过，在对数值调用这个方法是，toString()可以接受一个底数参数</li>
</ol>
</blockquote>
<p>语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">12</span></span><br><span class="line"><span class="keyword">let</span> str =  num.<span class="title function_">toString</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str)  <span class="comment">// &quot;12&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>String()</p>
<ol>
<li>在不确定值是不是null与undefined时使用String()</li>
<li>使用规则</li>
<li>如果值有toSring()方法就调用该方法</li>
<li>如果是null或undefined就返回”null”或”undefined”</li>
</ol>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法</span><br><span class="line"><span class="keyword">let</span> num = <span class="number">12</span></span><br><span class="line"><span class="keyword">let</span> str =  <span class="title class_">String</span>(num)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str)  <span class="comment">// &quot;12&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="模板字符串-96-96"><a href="#模板字符串-96-96" class="headerlink" title="模板字符串&#96;&#96;"></a>模板字符串&#96;&#96;</h4><blockquote>
<p>1、可以跨行定义字符串</p>
<p>2、可以通过${}来插值和执行表达式（即进行计算和调用函数）</p>
<p>3、所有插入的值都会执行toString()强行转换为字符串</p>
</blockquote>
<h5 id="支持标签函数"><a href="#支持标签函数" class="headerlink" title="支持标签函数"></a>支持标签函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">9</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">simpleTap</span>(<span class="params">strings,a,b,c</span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(strings);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> untaggedResult = <span class="string">`<span class="subst">$&#123;a&#125;</span>+<span class="subst">$&#123;b&#125;</span>=<span class="subst">$&#123;a+b&#125;</span>`</span></span><br><span class="line">    <span class="comment">// [&#x27;&#x27;, &#x27;+&#x27;, &#x27;=&#x27;, &#x27;&#x27;]</span></span><br><span class="line">    <span class="comment">// 6</span></span><br><span class="line">    <span class="comment">// 9</span></span><br><span class="line">    <span class="comment">//  15</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h5 id="原始字符串"><a href="#原始字符串" class="headerlink" title="原始字符串"></a>原始字符串</h5><blockquote>
<p>使用String.raw`str&#96;可以获得为转移的原始字符串</p>
</blockquote>
<h3 id="Symbol类型"><a href="#Symbol类型" class="headerlink" title="Symbol类型"></a>Symbol类型</h3><h3 id="object类型"><a href="#object类型" class="headerlink" title="object类型"></a>object类型</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><blockquote>
<p>1、开发者可以通过创建Object类型的实例来创建自己的对象，然后再给对象添加属性和方法</p>
<p>2、如果没有参数可以省略但不推荐</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1   =  <span class="keyword">new</span> <span class="title function_">object</span>();</span><br><span class="line"><span class="keyword">let</span> obj =<span class="keyword">new</span>  <span class="title class_">Object</span> ; <span class="comment">// 合法，但不推荐</span></span><br></pre></td></tr></table></figure>

<h4 id="每个object实例对象都有的属性和方法"><a href="#每个object实例对象都有的属性和方法" class="headerlink" title="每个object实例对象都有的属性和方法"></a>每个object实例对象都有的属性和方法</h4><h5 id="constructor"><a href="#constructor" class="headerlink" title="constructor:"></a>constructor:</h5><blockquote>
<p>1、属性返回 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object</code></a> 的构造函数（用于创建实例对象）。注意，此属性的值是对函数本身的引用，而不是一个包含函数名称的字符串。</p>
<p>2、在类里面是用于创建类的构造函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">constructor</span>); <span class="comment">// Object()</span></span><br></pre></td></tr></table></figure>

<h5 id="hasOwnProperty-NaN"><a href="#hasOwnProperty-NaN" class="headerlink" title="hasOwnProperty()"></a>hasOwnProperty()</h5><blockquote>
<p><code>hasOwnProperty()</code> 方法会返回一个布尔值，指示对象自身属性中是否具有指定的属性（也就是，是否有指定的键）。</p>
<p>用于判断自身(不包括原型)是否有指定的成员(必须是字符串)返回布尔值</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">uname</span>:<span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;uname&quot;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h5 id="isPropertypeof"><a href="#isPropertypeof" class="headerlink" title="isPropertypeof()"></a>isPropertypeof()</h5><blockquote>
<p><code>isPrototypeOf()</code> 方法用于测试一个对象是否存在于另一个对象的原型链上。</p>
<p>isPrototypeOf()会在传入对象的[[prototype]]指向调用者时返回true</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// prototypeObj.isPrototypeOf(object)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Foo</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Bar</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Baz</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Bar</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>);  <span class="comment">// 方法用于创建一个新对象，使用现有的对象来作为新创建对象的原型</span></span><br><span class="line"><span class="title class_">Baz</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Bar</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> baz = <span class="keyword">new</span> <span class="title class_">Baz</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Baz</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(baz)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Bar</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(baz)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(baz)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(baz)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h5 id="getPropertypeof"><a href="#getPropertypeof" class="headerlink" title="getPropertypeof()"></a>getPropertypeof()</h5><blockquote>
<p><code>Object.getPrototypeOf()</code> 方法返回指定对象的原型（内部<code>[[Prototype]]</code>属性的值）</p>
</blockquote>
<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.getPrototypeOf(object)</span><br></pre></td></tr></table></figure>

<p>参数</p>
<p>obj</p>
<p>要返回其原型的对象。</p>
<p>返回值</p>
<p>给定对象的原型。如果没有继承属性，则返回 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/null"><code>null</code></a> 。</p>
<h5 id="setPropertypeof"><a href="#setPropertypeof" class="headerlink" title="setPropertypeof()"></a>setPropertypeof()</h5><blockquote>
</blockquote>
<h5 id="PropertyIsEnumerable"><a href="#PropertyIsEnumerable" class="headerlink" title="PropertyIsEnumerable()"></a>PropertyIsEnumerable()</h5><blockquote>
<p>1、<code>propertyIsEnumerable()</code> 方法返回一个布尔值，表示指定的属性是否可枚举。</p>
<p>2、用于判定给定的属性是否可以使用for-in语句枚举，属性名必须是字符串</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object1 = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> array1 = [];</span><br><span class="line">object1.<span class="property">property1</span> = <span class="number">42</span>;</span><br><span class="line">array1[<span class="number">0</span>] = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object1.<span class="title function_">propertyIsEnumerable</span>(<span class="string">&#x27;property1&#x27;</span>));</span><br><span class="line"><span class="comment">// expected output: true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1.<span class="title function_">propertyIsEnumerable</span>(<span class="number">0</span>));</span><br><span class="line"><span class="comment">// expected output: true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1.<span class="title function_">propertyIsEnumerable</span>(<span class="string">&#x27;length&#x27;</span>));</span><br><span class="line"><span class="comment">// expected output: false</span></span><br></pre></td></tr></table></figure>



<h5 id="toLocaleString-NaN"><a href="#toLocaleString-NaN" class="headerlink" title="toLocaleString()"></a>toLocaleString()</h5><blockquote>
<p><code>toLocaleString()</code> 方法返回这个数字在特定语言环境下的表示字符串。</p>
<p>返回对象字符串表示，该字符串反应对象所在的本地化执行环境</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// numObj.toLocaleString([locales [, options]])</span></span><br></pre></td></tr></table></figure>



<h5 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h5><blockquote>
<p>返回对象的字符串表示</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">toString</span>()) <span class="comment">// [object Object]</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>每个对象都有一个 <code>toString()</code> 方法，当该对象被表示为一个文本值时，或者一个对象以预期的字符串方式引用时自动调用。</p>
<p>默认情况下，<code>toString()</code> 方法被每个 <code>Object</code> 对象继承。如果此方法在自定义对象中未被覆盖，<code>toString()</code> 返回 “[object <em>type</em>]”，其中 <code>type</code> 是对象的类型。</p>
</blockquote>
<h5 id="valueOf-NaN"><a href="#valueOf-NaN" class="headerlink" title="valueOf()"></a>valueOf()</h5><blockquote>
<p>返回原始值</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">toString</span>()) <span class="comment">// [object Object]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">valueOf</span>()) <span class="comment">// &#123;&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><blockquote>
<p>操作符，在应用给对象时，通常会调用toString()和&#x2F;或valueOf()方法来取得可以计算的值</p>
</blockquote>
<h3 id="一元操作符"><a href="#一元操作符" class="headerlink" title="一元操作符"></a>一元操作符</h3><h4 id="递增（-）递减（–）"><a href="#递增（-）递减（–）" class="headerlink" title="递增（++）递减（–）"></a>递增（++）递减（–）</h4><blockquote>
<ul>
<li>对于字符串可以转换为数值型的，则转为数字在运算，不能转为字符串的返回NaN</li>
<li>对于布尔值转换为对应数值后再参加运算（true -&gt; 1 false -&gt; 0）</li>
<li>对于对象先调用valueOf()取得之后按上面的要求参与转换后返回结果</li>
</ul>
</blockquote>
<h4 id="加（-）减（-）"><a href="#加（-）减（-）" class="headerlink" title="加（+）减（-）"></a>加（+）减（-）</h4><blockquote>
<p>应用到非数值类型上时会自动调用Number进行转换后在参与运算</p>
</blockquote>
<h4 id="取反（-）"><a href="#取反（-）" class="headerlink" title="取反（!）"></a>取反（!）</h4><p>隐式的调用Boolean()进行转换后取反</p>
<h3 id="位操作符"><a href="#位操作符" class="headerlink" title="位操作符"></a>位操作符</h3><blockquote>
<p>正数位二进制</p>
<p>负数为二补数（即先写出绝对值的二进制数后取反在加一）</p>
</blockquote>
<h4 id="按位非（-）"><a href="#按位非（-）" class="headerlink" title="按位非（~）"></a>按位非（~）</h4><blockquote>
<p>0 -&gt;1</p>
<p>1-&gt;0</p>
</blockquote>
<h4 id="按位与（-amp-）"><a href="#按位与（-amp-）" class="headerlink" title="按位与（&amp;）"></a>按位与（&amp;）</h4><blockquote>
<p>0		0  &#x3D; 》 0</p>
<p>0		1 &#x3D; 》 0</p>
<p>1		1 &#x3D; 》 1</p>
<p>1		0 &#x3D;》 0</p>
</blockquote>
<h4 id="按位或（-）"><a href="#按位或（-）" class="headerlink" title="按位或（|）"></a>按位或（|）</h4><blockquote>
<p>0		0  &#x3D; 》 0</p>
<p>0		1 &#x3D; 》 1</p>
<p>1		1 &#x3D; 》 1</p>
<p>1		0 &#x3D;》 1</p>
</blockquote>
<h4 id="按位异或（-）"><a href="#按位异或（-）" class="headerlink" title="按位异或（^）"></a>按位异或（^）</h4><blockquote>
<p>0		0  &#x3D; 》 0</p>
<p>0		1 &#x3D; 》 1</p>
<p>1		1 &#x3D; 》 1</p>
<p>1		0 &#x3D;》 0</p>
</blockquote>
<h4 id="左移（-lt-lt-）"><a href="#左移（-lt-lt-）" class="headerlink" title="左移（&lt;&lt;）"></a>左移（&lt;&lt;）</h4><blockquote>
<p>二进制数向左移动右边空出的补零</p>
<p>1111 左移两位 &#x3D;》 1100</p>
<p>有符号左移相同最高位不参与（最高为符号位）</p>
</blockquote>
<h4 id="右移-gt-gt"><a href="#右移-gt-gt" class="headerlink" title="右移(&gt;&gt;)"></a>右移(&gt;&gt;)</h4><blockquote>
<p>二进制数向右移动左边空出的补零</p>
<p>1111 右移两位 &#x3D;》 0011</p>
<p>有符号右移相同最高位不参与（最高为符号位）</p>
</blockquote>
<h3 id="布尔操作符"><a href="#布尔操作符" class="headerlink" title="布尔操作符"></a>布尔操作符</h3><blockquote>
<p>非 !&gt;与 &amp;&amp; &gt; 或  ||</p>
<p>非布尔类型自动调用Boolean()在参与运算 （或 （true）、与（false） 为 短路操作符）</p>
</blockquote>
<h3 id="其他运算操作符"><a href="#其他运算操作符" class="headerlink" title="其他运算操作符"></a>其他运算操作符</h3><h4 id="乘法"><a href="#乘法" class="headerlink" title="乘法 *"></a>乘法 *</h4><blockquote>
<p>Infinity * 0 &#x3D;》 NaN</p>
<p>Infinity * 非零 &#x3D;》 Infinity 或 -Infinity</p>
<p>如果不是数字先自动调用Number()进行转换后在参与运算</p>
</blockquote>
<h4 id="除法-x2F"><a href="#除法-x2F" class="headerlink" title="除法&#x2F;"></a>除法&#x2F;</h4><blockquote>
</blockquote>
<h4 id="取模"><a href="#取模" class="headerlink" title="取模%"></a>取模%</h4><blockquote>
</blockquote>
<h4 id="指数运算"><a href="#指数运算" class="headerlink" title="指数运算"></a>指数运算</h4><blockquote>
<p>指数运算 m ** n（m的n次方）相当于 Math.pow(m,n)</p>
</blockquote>
<h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><h3 id="for-in"><a href="#for-in" class="headerlink" title="for-in"></a>for-in</h3><blockquote>
<p><strong><code>for...in</code>语句</strong>以任意顺序迭代一个对象的除<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>以外的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties">可枚举</a>属性，包括继承的可枚举属性。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>:<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(obj[key])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="for-of"><a href="#for-of" class="headerlink" title="for-of"></a>for-of</h3><blockquote>
<p><strong><code>for...of</code>语句</strong>在<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols">可迭代对象</a>（包括 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map"><code>Map</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set"><code>Set</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/arguments">arguments</a> 对象等等）上创建一个迭代循环，调用自定义迭代钩子，并为每个不同属性的值执行语句.</p>
<p>但不能迭代对象obj，因为obj不自带迭代函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Array</span></span><br><span class="line"><span class="keyword">let</span> iterable = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    value += <span class="number">1</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 11</span></span><br><span class="line"><span class="comment">// 21</span></span><br><span class="line"><span class="comment">// 31</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Map</span></span><br><span class="line"><span class="keyword">let</span> iterable = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="string">&quot;a&quot;</span>, <span class="number">1</span>], [<span class="string">&quot;b&quot;</span>, <span class="number">2</span>], [<span class="string">&quot;c&quot;</span>, <span class="number">3</span>]]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(entry);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [&quot;a&quot;, 1]</span></span><br><span class="line"><span class="comment">// [&quot;b&quot;, 2]</span></span><br><span class="line"><span class="comment">// [&quot;c&quot;, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><blockquote>
<p>with 语句 扩展一个语句的作用域链。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> (expression) &#123;</span><br><span class="line">    statement</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>expression</code></p>
<p>将给定的表达式添加到在评估语句时使用的作用域链上。表达式周围的括号是必需的。</p>
</li>
<li><p><code>statement</code></p>
<p>任何语句。要执行多个语句，请使用一个<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/block">块</a>语句 ({ … }) 对这些语句进行分组。</p>
</li>
</ul>
<p><code>严格模式下不能使用</code></p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>通过function来定义</p>
<blockquote>
<p>所有函数的参数都是按值传递的，这意味着函数外部的值会被复制到函数的参数中，就像从一个变量赋值给另一个变量</p>
</blockquote>
<blockquote>
<p>在按值传递时，值会被复制带一个局部变量</p>
<p>在按引用传递参数时，值在内存中的位置会被保存在一个局部变量，这意味着对本地变量的修改会反映到函数外部</p>
</blockquote>
<h2 id="基本引用类型"><a href="#基本引用类型" class="headerlink" title="基本引用类型"></a>基本引用类型</h2><blockquote>
<p>引用值（或对象）是某个特定<code>引用类型</code>的实例</p>
</blockquote>
<h3 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h3><blockquote>
<p>在不给Date构造函数参数的情况下，创建的对象保存当前的日期和时间。</p>
<p>要基于其他日期和时间创建的日期对象，必须传入其毫秒表示</p>
<p>ECMA为此提供了两个辅助方法Date.parse()和Date.UTC()</p>
</blockquote>
<h4 id="Date-parse"><a href="#Date-parse" class="headerlink" title="Date.parse()"></a>Date.parse()</h4><blockquote>
<p>传入日期参数转为时间戳</p>
<p>如果传入的不是日期就会返回NaN</p>
<p>日期格式：</p>
<p>月&#x2F;日&#x2F;年</p>
<p>月名 日,年</p>
<p>周几 月名 日 年 时：分：秒 时区</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Date</span>.<span class="title function_">parse</span>(<span class="string">&quot;6/20/2022&quot;</span>))</span><br><span class="line"><span class="comment">// 1655654400000</span></span><br><span class="line"><span class="keyword">let</span> now1 = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;6/20/2022&quot;</span>)</span><br><span class="line"><span class="comment">// 上面两种方法等价</span></span><br><span class="line"><span class="comment">// 在直接把日期传给Date时会自动调用Date.parse()</span></span><br></pre></td></tr></table></figure>

<h3 id="Date-UTC"><a href="#Date-UTC" class="headerlink" title="Date.UTC()"></a>Date.UTC()</h3><blockquote>
<p><code>Date.UTC()</code> 方法接受的参数同日期构造函数接受最多参数时一样，返回从 1970-1-1 00:00:00 UTC 到指定日期的的毫秒数。</p>
</blockquote>
<h3 id="获取时间戳"><a href="#获取时间戳" class="headerlink" title="获取时间戳"></a>获取时间戳</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line"><span class="keyword">let</span> sjc1 = date.<span class="title function_">getTime</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sjc2 = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sjc3 = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="原始值包装类型"><a href="#原始值包装类型" class="headerlink" title="原始值包装类型"></a>原始值包装类型</h2><p>ECMA提供了三种特殊的引用类型:String\Number\Boolean</p>
<p><code>每当用到某个原始值的方法或属性时，后台都会创建一个原始包装类型的对象</code>，在访问的代码结束销毁并还原</p>
<p>注意：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> falseObje = <span class="keyword">new</span> <span class="title class_">Boolean</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">let</span> re = falseObje &amp;&amp; <span class="literal">true</span> <span class="comment">// falseObje是对象隐式转化为true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(re) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Boolean对象是Boolean的实例，在使用instaceof操作符时返回true，而原始值返回false</p>
<p>数值类型也存在上述问题</p>
</blockquote>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="字符串的方法"><a href="#字符串的方法" class="headerlink" title="字符串的方法"></a>字符串的方法</h3><h4 id="concat"><a href="#concat" class="headerlink" title="concat"></a><strong>concat</strong></h4><p>将两个或多个字符的文本<strong>组合</strong>起来，返回一个新的字符串。</p>
<blockquote>
<p>var a &#x3D; “hello”;</p>
<p>var b &#x3D; “,world”;</p>
<p>var c &#x3D; a.concat(b);</p>
<p>alert(c);</p>
<p>&#x2F;&#x2F;c &#x3D; “hello,world”</p>
</blockquote>
<h4 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a><strong>indexOf</strong></h4><p>返回字符串中一个子串第一处出现的<strong>索引</strong>（从左到右搜索）。如果没有匹配项，返回 -1 。</p>
<blockquote>
<p>var index1 &#x3D; a.indexOf(“l”);</p>
<p>&#x2F;&#x2F;index1 &#x3D; 2</p>
<p>var index2 &#x3D; a.indexOf(“l”,3);</p>
<p>&#x2F;&#x2F;index2 &#x3D; 3</p>
</blockquote>
<h4 id="charAt"><a href="#charAt" class="headerlink" title="charAt"></a>charAt</h4><p>返回<strong>指定位置的字符</strong>。</p>
<blockquote>
<p>var get_char &#x3D; a.charAt(0);</p>
<p>&#x2F;&#x2F;get_char &#x3D; “h”</p>
</blockquote>
<h4 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf"></a><strong>lastIndexOf</strong></h4><p>返回字符串中一个子串<strong>最后一处出现的索引</strong>（从右到左搜索），如果没有匹配项，返回 -1 。</p>
<blockquote>
<p>var index1 &#x3D; lastIndexOf(‘l’);</p>
<p>&#x2F;&#x2F;index1 &#x3D; 3</p>
<p>var index2 &#x3D; lastIndexOf(‘l’,2)</p>
<p>&#x2F;&#x2F;index2 &#x3D; 2</p>
</blockquote>
<h4 id="match"><a href="#match" class="headerlink" title="match"></a>match</h4><p>检查一个字符串<strong>匹配一个正则表达式</strong>内容，如果没有匹配返回 null。</p>
<blockquote>
<p>var re &#x3D; new RegExp(&#x2F;^\w+$&#x2F;);</p>
<p>var is_alpha1 &#x3D; a.match(re);</p>
<p>&#x2F;&#x2F;is_alpha1 &#x3D; “hello”</p>
<p>var is_alpha2 &#x3D; b.match(re);</p>
<p>&#x2F;&#x2F;is_alpha2 &#x3D; null </p>
</blockquote>
<h4 id="substring"><a href="#substring" class="headerlink" title="substring"></a>substring</h4><p>返回字符串的一个子串，传入参数是<strong>起始位置和结束位置</strong>。</p>
<blockquote>
<p>var sub_string1 &#x3D; a.substring(1);</p>
<p>&#x2F;&#x2F;sub_string1 &#x3D; “ello”</p>
<p>var sub_string2 &#x3D; a.substring(1,4);</p>
<p>&#x2F;&#x2F;sub_string2 &#x3D; “ell”</p>
</blockquote>
<h4 id="substr"><a href="#substr" class="headerlink" title="substr"></a>substr</h4><p>返回字符串的一个子串，传入参数是起始位置和长度</p>
<blockquote>
<p>var sub_string1 &#x3D; a.substr(1);</p>
<p>&#x2F;&#x2F;sub_string1 &#x3D; “ello”</p>
<p>var sub_string2 &#x3D; a.substr(1,4);</p>
<p>&#x2F;&#x2F;sub_string2 &#x3D; “ello”</p>
</blockquote>
<h4 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h4><p>用来查找匹配一个<strong>正则表达式的字符串</strong>，然后使用新字符串代替匹配的字符串。</p>
<blockquote>
<p>var result1 &#x3D; a.replace(re,”Hello”);</p>
<p>&#x2F;&#x2F;result1 &#x3D; “Hello”</p>
<p>var result2 &#x3D; b.replace(re,”Hello”);</p>
<p>&#x2F;&#x2F;result2 &#x3D; “,world”</p>
</blockquote>
<h4 id="search"><a href="#search" class="headerlink" title="search"></a>search</h4><p>执行一个正则表达式匹配查找。如果查找成功，返回字符串中匹配的索引值。否则返回 -1 。</p>
<blockquote>
<p>var index1 &#x3D; a.search(re);</p>
<p>&#x2F;&#x2F;index1 &#x3D; 0</p>
<p>var index2 &#x3D; b.search(re);</p>
<p>&#x2F;&#x2F;index2 &#x3D; -1</p>
</blockquote>
<h4 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h4><p>提取字符串的一部分，并返回一个新字符串（与 substring 相同）。</p>
<blockquote>
<p>var sub_string1 &#x3D; a.slice(1);</p>
<p>&#x2F;&#x2F;sub_string1 &#x3D; “ello”</p>
<p>var sub_string2 &#x3D; a.slice(1,4);</p>
<p>&#x2F;&#x2F;sub_string2 &#x3D; “ell”</p>
</blockquote>
<h4 id="split"><a href="#split" class="headerlink" title="split"></a>split</h4><p>通过将字符串划分成子串，将一个字符串做成一个字符串数组。</p>
<blockquote>
<p>var arr1 &#x3D; a.split(“”);</p>
<p>&#x2F;&#x2F;arr1 &#x3D; [h,e,l,l,o]</p>
</blockquote>
<h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><p>返回字符串的长度，所谓字符串的长度是指其包含的字符的个数。</p>
<blockquote>
<p>var len &#x3D; a.length();</p>
<p>&#x2F;&#x2F;len &#x3D; 5</p>
</blockquote>
<h4 id="toLowerCase"><a href="#toLowerCase" class="headerlink" title="toLowerCase"></a>toLowerCase</h4><p>将整个字符串转成小写字母。</p>
<blockquote>
<p>var lower_string &#x3D; a.toLowerCase();</p>
<p>&#x2F;&#x2F;lower_string &#x3D; “hello”</p>
</blockquote>
<h4 id="toUpperCase"><a href="#toUpperCase" class="headerlink" title="toUpperCase"></a>toUpperCase</h4><p>将整个字符串转成大写字母。</p>
<blockquote>
<p>var upper_string &#x3D; a.toUpperCase();</p>
<p>&#x2F;&#x2F;upper_string &#x3D; “HELLO”</p>
</blockquote>
<h3 id="字符串迭代与解构"><a href="#字符串迭代与解构" class="headerlink" title="字符串迭代与解构"></a>字符串迭代与解构</h3><blockquote>
<p>字符串的原型上暴露了一个@@iterator方法，表示可以迭代字符串的每一个字符。可以向下面一样手动使用迭代器</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;abc&quot;</span></span><br><span class="line">    str = str[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">next</span>()); <span class="comment">// &#123;done: false,value: &quot;a&quot;&#125;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">next</span>()); <span class="comment">//&#123;done: false,value: &quot;b&quot;&#125;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">next</span>()); <span class="comment">//&#123;done: false,value: &quot;c&quot;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>有了这个迭代器，字符串就可以使用解构操作符来解构</p>
</blockquote>
<h3 id="Global内置对象"><a href="#Global内置对象" class="headerlink" title="Global内置对象"></a>Global内置对象</h3><blockquote>
<p>ecma中最特别的对象,代码不会显示的访问它</p>
<p>实际上不存在全局变量或全局函数这种东西，在全局作用域中定义的变量和函数都会变成Clobal的属性方法。</p>
<p>但浏览器将window对象实现为Global对象的代理，因此所有全局作用域声明的变量和函数都变成了window的属性</p>
</blockquote>
<p>获取Clobal的方法</p>
<blockquote>
<p>当一个函数在没有明确指定this值的情况下执行时this值等于Clobal对象</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable language_">global</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="数组的创建方法"><a href="#数组的创建方法" class="headerlink" title="数组的创建方法"></a>数组的创建方法</h3><h4 id="构造函数Array"><a href="#构造函数Array" class="headerlink" title="构造函数Array"></a>构造函数Array</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个空数组</span></span><br><span class="line"><span class="keyword">let</span> arr1 = <span class="keyword">new</span> <span class="title class_">Array</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个长度为3的数组</span></span><br><span class="line"><span class="comment">// 只有一个参数并且为数字时为创建指定长度的数组</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="keyword">new</span> <span class="title class_">Array</span>()</span><br><span class="line"><span class="comment">// new 可以省略不写</span></span><br><span class="line"><span class="comment">// 注意</span></span><br><span class="line"><span class="keyword">let</span> arr3 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>); <span class="comment">//[3,1,2,3]</span></span><br></pre></td></tr></table></figure>

<h3 id="字面量方法"><a href="#字面量方法" class="headerlink" title="字面量方法"></a>字面量方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [] </span><br></pre></td></tr></table></figure>

<p>注意：</p>
<blockquote>
<p>与对象一样在，使用字面量创建时不会调用Array构造函数</p>
</blockquote>
<h3 id="静态方法创建数组"><a href="#静态方法创建数组" class="headerlink" title="静态方法创建数组"></a>静态方法创建数组</h3><p>1、Array.from</p>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from#%E8%AF%AD%E6%B3%95">语法</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Array.from(arrayLike[, mapFn[, thisArg]])</span><br></pre></td></tr></table></figure>

<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from#%E5%8F%82%E6%95%B0">参数</a></h4><ul>
<li><p><code>arrayLike</code></p>
<p>想要转换成数组的伪数组对象或可迭代对象。</p>
</li>
<li><p><code>mapFn</code> 可选</p>
<p>如果指定了该参数，新数组中的每个元素会执行该回调函数。</p>
</li>
<li><p><code>thisArg</code> 可选</p>
<p>可选参数，执行回调函数 <code>mapFn</code> 时 <code>this</code> 对象。</p>
</li>
</ul>
<blockquote>
<ul>
<li><p>from可以使有length属性的对象和可迭代的对象转化为数组</p>
</li>
<li><p>from可以对现有数组进行浅拷贝</p>
</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 具有length的伪数组</span></span><br><span class="line"><span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line"> <span class="title class_">Array</span>.<span class="title function_">from</span>(div)</span><br><span class="line"><span class="comment">//浅拷贝</span></span><br><span class="line"><span class="keyword">const</span> a1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> a2 = <span class="title class_">Array</span>.<span class="title function_">from</span>(a1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1 === a2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以使用任何迭代对象</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> iter = &#123;</span><br><span class="line">  *[symbol.<span class="property">iterator</span>]()&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(iter); <span class="comment">//[1,2,3] </span></span><br></pre></td></tr></table></figure>

<p>也可用from自定义对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = &#123;</span><br><span class="line">  <span class="number">0</span>:<span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>:<span class="number">2</span>,</span><br><span class="line">  <span class="number">3</span>:<span class="number">3</span>,</span><br><span class="line">  <span class="attr">length</span>:<span class="number">3</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、Array.of</p>
<blockquote>
<p>接受一组参数将其转化为数组</p>
</blockquote>
<h3 id="数组的空位"><a href="#数组的空位" class="headerlink" title="数组的空位"></a>数组的空位</h3><p>空位的值为undefined</p>
<p>map会逃过空位</p>
<p><code>map()</code> 方法创建一个新数组，这个新数组由原数组中的每个元素都调用一次提供的函数后的返回值组成</p>
<p>join会当成空字符串</p>
<p>join将数组转为字符串</p>
<h3 id="数组的length"><a href="#数组的length" class="headerlink" title="数组的length"></a>数组的length</h3><blockquote>
<p>length是可读写的</p>
</blockquote>
<p><code>将其该小后后面的值会被删除</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr.<span class="property">length</span> = <span class="number">2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">2</span>]); <span class="comment">// undefined</span></span><br><span class="line">arr.<span class="property">length</span> = <span class="number">3</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">2</span>]); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="判断是否数组的方法"><a href="#判断是否数组的方法" class="headerlink" title="判断是否数组的方法"></a>判断是否数组的方法</h3><blockquote>
<p>1、arr instanceof Array</p>
<p>2、Array.isArray(arr)</p>
<p>3、arr.constructor &#x3D;&#x3D;&#x3D; Array</p>
</blockquote>
<h3 id="数组的迭代"><a href="#数组的迭代" class="headerlink" title="数组的迭代"></a>数组的迭代</h3><h4 id="keys"><a href="#keys" class="headerlink" title="keys()"></a>keys()</h4><blockquote>
<p>返回数组的所有索引</p>
</blockquote>
<h4 id="values"><a href="#values" class="headerlink" title="values()"></a>values()</h4><blockquote>
<p>返回数组的所有值</p>
</blockquote>
<h4 id="entries"><a href="#entries" class="headerlink" title="entries()"></a>entries()</h4><blockquote>
<p><code>entries()</code> 方法返回一个新的<strong>Array Iterator</strong>对象，该对象包含数组中每个索引的键&#x2F;值对。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iterator1 = array1.<span class="title function_">entries</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator1.<span class="title function_">next</span>().<span class="property">value</span>);</span><br><span class="line"><span class="comment">// expected output: Array [0, &quot;a&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator1.<span class="title function_">next</span>().<span class="property">value</span>);</span><br><span class="line"><span class="comment">// expected output: Array [1, &quot;b&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="数组的复制与填充方法"><a href="#数组的复制与填充方法" class="headerlink" title="数组的复制与填充方法"></a>数组的复制与填充方法</h3><h4 id="fill-填充"><a href="#fill-填充" class="headerlink" title="fill()填充"></a>fill()填充</h4><blockquote>
<p><strong><code>fill()</code></strong> 方法用一个固定值填充一个数组中从起始索引到终止索引内的全部元素。不包括终止索引。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// fill with 0 from position 2 until position 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1.<span class="title function_">fill</span>(<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: [1, 2, 0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fill with 5 from position 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1.<span class="title function_">fill</span>(<span class="number">5</span>, <span class="number">1</span>));</span><br><span class="line"><span class="comment">// expected output: [1, 5, 5, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1.<span class="title function_">fill</span>(<span class="number">6</span>));</span><br><span class="line"><span class="comment">// expected output: [6, 6, 6, 6]</span></span><br></pre></td></tr></table></figure>

<h5 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h5><blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;arr.<span class="title function_">fill</span>(value[, start[, end]])</span><br></pre></td></tr></table></figure>

<ul>
<li><code>value</code></li>
</ul>
<p>用来填充数组元素的值。</p>
<ul>
<li><code>start</code> 可选</li>
</ul>
<p>起始索引，默认值为 0。</p>
<ul>
<li><code>end</code> 可选</li>
</ul>
<p>终止索引，默认值为 <code>this.length</code>。</p>
<p>返回值</p>
<p>修改原数组。</p>
</blockquote>
<h4 id="copyWithin复制"><a href="#copyWithin复制" class="headerlink" title="copyWithin复制"></a>copyWithin复制</h4><p><code>copyWithin()</code> 方法浅复制数组的一部分到同一数组中的另一个位置，并返回它，不会改变原数组的长度。</p>
<p>返回新数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// copy to index 0 the element at index 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1.<span class="title function_">copyWithin</span>(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: Array [&quot;d&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// copy to index 1 all elements from index 3 to the end</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1.<span class="title function_">copyWithin</span>(<span class="number">1</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment">// expected output: Array [&quot;d&quot;, &quot;d&quot;, &quot;e&quot;, &quot;d&quot;, &quot;e&quot;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">copyWithin</span>(target[, start[, end]])</span><br></pre></td></tr></table></figure>

<p>target(插入位置)</p>
<p>0 为基底的索引，复制序列到该位置。如果是负数，<code>target</code> 将从末尾开始计算。如果 <code>target</code> 大于等于 <code>arr.length</code>，将不会发生拷贝。如果 <code>target</code> 在 <code>start</code> 之后，复制的序列将被修改以符合 <code>arr.length</code>。</p>
<h3 id="数组增删改查方法"><a href="#数组增删改查方法" class="headerlink" title="数组增删改查方法"></a>数组增删改查方法</h3><h4 id="pop删尾"><a href="#pop删尾" class="headerlink" title="pop删尾"></a>pop删尾</h4><blockquote>
<p>弹出最后一个元素，并返回删除的值</p>
</blockquote>
<h4 id="push尾加"><a href="#push尾加" class="headerlink" title="push尾加"></a>push尾加</h4><blockquote>
<p>在尾部添加元素，返回长度（多）</p>
</blockquote>
<h4 id="shift为头部删除"><a href="#shift为头部删除" class="headerlink" title="shift为头部删除"></a>shift为头部删除</h4><blockquote>
<p>删除最前面的一个元素，并返回值</p>
</blockquote>
<h4 id="unshift头加"><a href="#unshift头加" class="headerlink" title="unshift头加"></a>unshift头加</h4><blockquote>
<p>最前面的添加元素，并返回值（多）</p>
</blockquote>
<h4 id="concat拼接"><a href="#concat拼接" class="headerlink" title="concat拼接"></a>concat拼接</h4><blockquote>
<p><code>concat()</code> 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组</p>
</blockquote>
<h4 id="替换删除splice"><a href="#替换删除splice" class="headerlink" title="替换删除splice"></a>替换删除splice</h4><blockquote>
<p><strong><code>splice()</code></strong> 方法通过删除或替换现有元素或者原地添加新的元素来修改数组，并以数组形式返回被修改的内容。此方法会改变原数组</p>
</blockquote>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;array.<span class="title function_">splice</span>(start[, deleteCount[, item1[, item2[, ...]]]])</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>start</code></p>
<p>指定修改的开始位置（从 0 计数）。如果超出了数组的长度，则从数组末尾开始添加内容；如果是负值，则表示从数组末位开始的第几位（从 -1 计数，这意味着 -n 是倒数第 n 个元素并且等价于 <code>array.length-n</code>）；如果负数的绝对值大于数组的长度，则表示开始位置为第 0 位。</p>
<p><code>deleteCount</code> 可选</p>
<p>整数，表示要移除的数组元素的个数。如果 <code>deleteCount</code> 大于 <code>start</code> 之后的元素的总数，则从 <code>start</code> 后面的元素都将被删除（含第 <code>start</code> 位）。如果 <code>deleteCount</code> 被省略了，或者它的值大于等于<code>array.length - start</code>(也就是说，如果它大于或者等于<code>start</code>之后的所有元素的数量)，那么<code>start</code>之后数组的所有元素都会被删除。如果 <code>deleteCount</code> 是 0 或者负数，则不移除元素。这种情况下，至少应添加一个新元素。</p>
<p><code>item1, item2, *...*</code> 可选</p>
<p>要添加进数组的元素，从<code>start</code> 位置开始。如果不指定，则 <code>splice()</code> 将只删除数组元素。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="reverse反转"><a href="#reverse反转" class="headerlink" title="reverse反转"></a>reverse反转</h4><blockquote>
<p>数组反向排列</p>
</blockquote>
<h4 id="sort排序"><a href="#sort排序" class="headerlink" title="sort排序"></a>sort排序</h4><blockquote>
<p>sort()会在每一项上调用String()函数，然后比较字符串，即使是数值（容易出行比较不正确）</p>
<p>为此sort()接受一个比较函数</p>
<p>比较函数返回值小于零参数1在前</p>
<p>​						大于零参数1在后</p>
</blockquote>
<blockquote>
<p><code>sort()</code> 方法用<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/In-place_algorithm">原地算法</a>对数组的元素进行排序，并返回数组。默认排序顺序是在将元素转换为字符串，然后比较它们的 UTF-16 代码单元值序列时构建的</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> months = [<span class="string">&#x27;March&#x27;</span>, <span class="string">&#x27;Jan&#x27;</span>, <span class="string">&#x27;Feb&#x27;</span>, <span class="string">&#x27;Dec&#x27;</span>];</span><br><span class="line">months.<span class="title function_">sort</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(months);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;Dec&quot;, &quot;Feb&quot;, &quot;Jan&quot;, &quot;March&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">21</span>, <span class="number">100000</span>];</span><br><span class="line">array1.<span class="title function_">sort</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array1);</span><br><span class="line"><span class="comment">// expected output: Array [1, 100000, 21, 30, 4]</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">compare</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (a &lt; b ) &#123;           <span class="comment">// 按某种排序标准进行比较，a 小于 b</span></span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (a &gt; b ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// a must be equal to b</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数组的遍历"><a href="#数组的遍历" class="headerlink" title="数组的遍历"></a>数组的遍历</h3><ol>
<li>some()<br>遍历数组，只要有一个以上的元素满足条件就返回 true，否则返回 false ，退出循环</li>
</ol>
<p>对数组中每个元素执行一次ok函数，知道某个元素返回true，则直接返回true。如果都返回false,则返回false</p>
<p>检查整个数组中是否有满足元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private <span class="title function_">some</span>(<span class="params">id: number</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = [</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">195</span>, <span class="attr">cityName</span>: <span class="string">&#x27;深圳&#x27;</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">196</span>, <span class="attr">cityName</span>: <span class="string">&#x27;北京&#x27;</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">198</span>, <span class="attr">cityName</span>: <span class="string">&#x27;上海&#x27;</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">  <span class="keyword">let</span> result = arr.<span class="title function_">some</span>(<span class="function">(<span class="params">item: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.<span class="property">cityId</span> === id</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`传入:<span class="subst">$&#123;id&#125;</span>,结果:<span class="subst">$&#123;result&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ol start="2">
<li>every()<br>遍历数组，每一个元素都满足条件 则返回 true，否则返回 false</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private <span class="title function_">every</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">  <span class="keyword">let</span> result = arr.<span class="title function_">every</span>(<span class="function">(<span class="params">item: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item &gt; <span class="number">10</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`结果:<span class="subst">$&#123;result&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ol start="3">
<li><p>forEach()<br> <br><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=forEach&spm=1001.2101.3001.7020">forEach</a>() 方法对数组的每个元素执行一次提供的函数。总是返回undefined；</p>
<p>每个元素执行一次给定的函数(操作item不改变原数组,也不生成新数组,但操作数组就会引用类型)</p>
<p>数组里的元素个数有几个，该方法里的回调就会执行几次<br> 第一个参数是数组里的当前元素，第二个参数为数组里当前元素的索引值，第三个参数则是它自己<br> 没有返回值，本质上等同于 for 循环，对每一项执行 function 函数。</p>
<p>不改变原数组，无返回值<br>数组自带的遍历方法，虽然使用频率略高，但是性能仍然比普通循环略低</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">private <span class="title function_">forEach</span>(<span class="params"></span>) &#123;</span><br><span class="line">  type itemType = &#123;</span><br><span class="line">    <span class="attr">cityId</span>: number,</span><br><span class="line">    <span class="attr">cityName</span>: string</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> arr = [</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">195</span>, <span class="attr">cityName</span>: <span class="string">&#x27;深圳&#x27;</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">196</span>, <span class="attr">cityName</span>: <span class="string">&#x27;北京&#x27;</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">197</span>, <span class="attr">cityName</span>: <span class="string">&#x27;上海&#x27;</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">  arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item: itemType, index: number, arr: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`index:<span class="subst">$&#123;index&#125;</span>，item:<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(item)&#125;</span>，arr:<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(arr)&#125;</span>`</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>map()<br>map() 方法返回一个新数组，数组中的元素为原始数组元素调用函数处理后的值。<br>map() 方法按照原始数组元素顺序依次处理元素。<br>使用比较广泛，但其性能还不如 forEach<br>不会改变原始数组。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">  <span class="keyword">let</span> newArr = arr.<span class="title function_">map</span>(<span class="function">(<span class="params">item: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item * item</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newArr)</span><br></pre></td></tr></table></figure>

</li>
<li><p>filter()<br>方法创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的所有元素。<br>不会改变原始数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">private <span class="title function_">filter</span>(<span class="attr">id</span>: number): string &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = [</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">195</span>, <span class="attr">cityName</span>: <span class="string">&#x27;深圳&#x27;</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">196</span>, <span class="attr">cityName</span>: <span class="string">&#x27;北京&#x27;</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">cityId</span>: <span class="number">197</span>, <span class="attr">cityName</span>: <span class="string">&#x27;上海&#x27;</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">name</span>: string = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">item: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(item.<span class="property">cityId</span> === id) &#123;</span><br><span class="line">      name = item.<span class="property">cityName</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`传入:<span class="subst">$&#123;id&#125;</span>，结果:<span class="subst">$&#123;name&#125;</span>`</span>)</span><br><span class="line">  <span class="keyword">return</span> name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>find()<br>遍历数组，返回符合条件的第一个元素，如果没有符合条件的元素则返回 undefined</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="keyword">let</span> num = arr.<span class="title function_">find</span>(<span class="function">(<span class="params">item:any</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> item === <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num)</span><br></pre></td></tr></table></figure>



<ol start="7">
<li>findIndex()<br>遍历数组，返回符合条件的第一个元素的索引，如果没有符合条件的元素则返回 -1</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="keyword">let</span> num = arr.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">item:any</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> item === <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num)</span><br></pre></td></tr></table></figure>



<h3 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h3><h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><p>ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。</p>
<p>以前，为变量赋值，只能直接指定值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>ES6 允许写成下面这样。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>

<p>上面代码表示，可以从数组中提取值，按照对应位置，对变量赋值。</p>
<p>本质上，这种写法属于“模式匹配”，只要等号两边的模式相同，左边的变量就会被赋予对应的值。下面是一些使用嵌套数组进行解构的例子。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo, [[bar], baz]] = [<span class="number">1</span>, [[<span class="number">2</span>], <span class="number">3</span>]];</span><br><span class="line">foo <span class="comment">// 1</span></span><br><span class="line">bar <span class="comment">// 2</span></span><br><span class="line">baz <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">let</span> [ , , third] = [<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;baz&quot;</span>];</span><br><span class="line">third <span class="comment">// &quot;baz&quot;</span></span><br><span class="line"><span class="keyword">let</span> [x, , y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">let</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">head <span class="comment">// 1</span></span><br><span class="line">tail <span class="comment">// [2, 3, 4]</span></span><br><span class="line"><span class="keyword">let</span> [x, y, ...z] = [<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">x <span class="comment">// &quot;a&quot;</span></span><br><span class="line">y <span class="comment">// undefined</span></span><br><span class="line">z <span class="comment">// []</span></span><br></pre></td></tr></table></figure>

<p>如果解构不成功，变量的值就等于<code>undefined</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo] = [];</span><br><span class="line"><span class="keyword">let</span> [bar, foo] = [<span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<p>以上两种情况都属于解构不成功，<code>foo</code>的值都会等于<code>undefined</code>。</p>
<p>另一种情况是不完全解构，即等号左边的模式，只匹配一部分的等号右边的数组。这种情况下，解构依然可以成功。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">let</span> [a, [b], d] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>];</span><br><span class="line">a <span class="comment">// 1</span></span><br><span class="line">b <span class="comment">// 2</span></span><br><span class="line">d <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<p>上面两个例子，都属于不完全解构，但是可以成功。</p>
<p>如果等号的右边不是数组（或者严格地说，不是可遍历的结构，参见《Iterator》一章），那么将会报错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="title class_">NaN</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>上面的语句都会报错，因为等号右边的值，要么转为对象以后不具备 Iterator 接口（前五个表达式），要么本身就不具备 Iterator 接口（最后一个表达式）。</p>
<p>对于 Set 结构，也可以使用数组的解构赋值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y, z] = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]);</span><br><span class="line">x <span class="comment">// &quot;a&quot;</span></span><br></pre></td></tr></table></figure>

<p>事实上，只要某种数据结构具有 Iterator 接口，都可以采用数组形式的解构赋值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">fibs</span>(<span class="params"></span>) &#123;  <span class="keyword">let</span> a = <span class="number">0</span>;  <span class="keyword">let</span> b = <span class="number">1</span>; </span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>) &#123;    </span><br><span class="line">		<span class="keyword">yield</span> a;    </span><br><span class="line">		[a, b] = [b, a + b];  </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [first, second, third, fourth, fifth, sixth] = <span class="title function_">fibs</span>();</span><br><span class="line">sixth <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>fibs</code>是一个 Generator 函数（参见《Generator 函数》一章），原生具有 Iterator 接口。解构赋值会依次从这个接口获取值。</p>
<h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><p>解构赋值允许指定默认值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo = <span class="literal">true</span>] = [];</span><br><span class="line">foo <span class="comment">// true</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">&#x27;b&#x27;</span>] = [<span class="string">&#x27;a&#x27;</span>]; </span><br><span class="line"><span class="comment">// x=&#x27;a&#x27;, y=&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">&#x27;b&#x27;</span>] = [<span class="string">&#x27;a&#x27;</span>, <span class="literal">undefined</span>]; </span><br><span class="line"><span class="comment">// x=&#x27;a&#x27;, y=&#x27;b&#x27;</span></span><br></pre></td></tr></table></figure>

<p>注意，ES6 内部使用严格相等运算符（<code>===</code>），判断一个位置是否有值。所以，只有当一个数组成员严格等于<code>undefined</code>，默认值才会生效。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">undefined</span>];</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">null</span>];</span><br><span class="line">x <span class="comment">// null</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，如果一个数组成员是<code>null</code>，默认值就不会生效，因为<code>null</code>不严格等于<code>undefined</code>。</p>
<p>如果默认值是一个表达式，那么这个表达式是惰性求值的，即只有在用到的时候，才会求值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aaa&#x27;</span>);&#125;</span><br><span class="line"><span class="keyword">let</span> [x = <span class="title function_">f</span>()] = [<span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<p>上面代码中，因为<code>x</code>能取到值，所以函数<code>f</code>根本不会执行。上面的代码其实等价于下面的代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x;</span><br><span class="line"><span class="keyword">if</span> ([<span class="number">1</span>][<span class="number">0</span>] === <span class="literal">undefined</span>) &#123;  x = <span class="title function_">f</span>();&#125; <span class="keyword">else</span> &#123;  x = [<span class="number">1</span>][<span class="number">0</span>];&#125;</span><br></pre></td></tr></table></figure>

<p>默认值可以引用解构赋值的其他变量，但该变量必须已经声明。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = [];</span><br><span class="line"><span class="comment">// x=1;y=1</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = [<span class="number">2</span>];</span><br><span class="line"><span class="comment">// x=2; y=2</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = [<span class="number">1</span>, <span class="number">2</span>]; </span><br><span class="line"><span class="comment">// x=1; y=2</span></span><br><span class="line"><span class="keyword">let</span> [x = y, y = <span class="number">1</span>] = [];</span><br><span class="line"><span class="comment">// ReferenceError: y is not defined</span></span><br></pre></td></tr></table></figure>

<p>上面最后一个表达式之所以会报错，是因为<code>x</code>用<code>y</code>做默认值时，<code>y</code>还没有声明。</p>
<h2 id="定型数组"><a href="#定型数组" class="headerlink" title="定型数组"></a>定型数组</h2><p>定型数组是一种用于处理数值类型(正如其名，不是所有类型)数据的专用数组，最早是在WebGL中使用的，WebGL是OpenGL ES 2.0的移植版，在Web 页面中通过 <canvas> 元素来呈现它。定型数组也被一同移植而来，其可为JS提供快速的按位运算。本文将详细介绍ES6定型数组</canvas></p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>　　在JS中，数字是以64位浮点格式存储的，并按需转换为32位整数，所以算术运算非常慢，无法满足WebGL的需求。因此在ES6中引入定型数组来解决这个问题，并提供更高性能的算术运算。所谓定型数组，就是将任何数字转换为一个包含数字比特的数组，随后就可以通过我们熟悉的JS数组方法来进一步处理</p>
<p>　　ES6采用定型数组作为语言的正式格式来确保更好的跨JS引擎兼容性以及与JS数组的互操作性。尽管ES6版本的定型数组与WebGL中的不一样，但是仍保留了足够的相似之处，这使得ES6版本可以基于WebGL版本演化而不至于走向完全分化</p>
<p>【数值数据类型】</p>
<p>　　JS数字按照IEEE 754标准定义的格式存储，也就是用64个比特来存储一个浮点形式的数字。这个格式用于表示JS中的整数及浮点数，两种格式间经常伴随着数字改变发生相互转换。定型数组支持存储和操作以下8种不同的数值类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">有符号的8位整数(int8)</span><br><span class="line">无符号的8位整数(uint8)</span><br><span class="line">有符号的16位整数(int16)</span><br><span class="line">无符号的16位整数(uint16)</span><br><span class="line">有符号的32位整数(int32)</span><br><span class="line">无符号的32位整数(uint32)</span><br><span class="line">32位浮点数(float32)</span><br><span class="line">64位浮点数(float64)</span><br></pre></td></tr></table></figure>

<p>　　如果用普通的JS数字来存储8位整数，会浪费整整56个比特，这些比特原本可以存储其他8位整数或小于56比特的数字。这也正是定型数组的一个实际用例，即更有效地利用比特</p>
<p>　　所有与定型数组有关的操作和对象都集中在这8个数据类型上，但是在使用它们之前，需要创建一个数组缓冲区存储这些数据</p>
<p>【数组缓冲区】</p>
<p>　　数组缓冲区是所有定型数组的根基，它是一段可以包含特定数量字节的内存地址。创建数组缓冲区的过程类似于在C语言中调用malloc()来分配内存，只是不需指明内存块所包含的数据类型。可以通过ArrayBuffer构造函数来创建数组缓冲区</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let buffer = New ArrayBuffer(10) // 分配10字节</span><br></pre></td></tr></table></figure>

<p>　　调用构造函数时传入数组缓冲区应含的比特数量即可，此示例中的这条语句创建了一个10字节长度的数组缓冲区。创建完成后，可以通过byteLength属性查看缓冲区中的比特数量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let buffer = new ArrayBuffer(10); // 分配了 10 个字节</span><br><span class="line">console.log(buffer.byteLength); // 10</span><br></pre></td></tr></table></figure>

<p>　　可以通过slice()方法分割已有数组缓冲区来创建一个新的，这个slice()方法与数组上的slice()方法很像：传入开始索引和结束索引作为参数，然后返回一个新的ArrayBuffer实例，新实例由原始数组缓冲区的切片组成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let buffer = new ArrayBuffer(10); // 分配了 10 个字节</span><br><span class="line">let buffer2 = buffer.slice(4, 6);</span><br><span class="line">console.log(buffer2.byteLength); // 2</span><br></pre></td></tr></table></figure>

<p>　　在这段代码中，buffer2创建从索引4和索引5提取的字节，此处slice()方法的调用与数组版本的类似，传入的第二个参数不包含在最终结果中</p>
<p>　　当然，仅创建存储单元用途不大，除非能够将数据写到那个单元中，还需要创建一个视图来实现写入的功能</p>
<p>　　[注意]数组缓冲区包含的实际字节数量在创建时就已确定，可以修改缓冲区内的数据，但是不能改变缓冲区的尺寸大小</p>
<h3 id="视图操作"><a href="#视图操作" class="headerlink" title="视图操作"></a>视图操作</h3><p>　　数组缓冲区是内存中的一段地址，视图是用来操作内存的接口。视图可以操作数组缓冲区或缓冲区字节的子集，并按照其中一种数值型数据类型来读取和写入数据。DataView类型是一种通用的数组缓冲区视图，其支持所有8种数值型数据类型</p>
<p>　　要使用DataView，首先要创建一个ArrayBuffer实例，然后用这个实例来创建新的Dataview</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">10</span>),</span><br><span class="line">    view = <span class="keyword">new</span> <span class="title class_">DataView</span>(buffer);</span><br></pre></td></tr></table></figure>

<p>　　在此示例中的view对象可以访问缓冲区中所有10字节。如果提供一个表示比特偏移量的数值，那么可以基于缓冲区的其中一部分来创建视图，DataView将默认选取从偏移值开始到缓冲区末尾的所有比特。如果额外提供一个表示选取比特数量的可选参数，DataView则从偏移位置后选取该数量的比特</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let buffer = new ArrayBuffer(10),</span><br><span class="line">    view = new DataView(buffer, 5, 2); // 包含位置 5 与位置 6 的字节</span><br></pre></td></tr></table></figure>

<p>　　这里的view只能操作位于索引5和索引6的字节。通过这种方法，可以基于同一个数组缓冲区创建多个view，因而可以为应用申请一整块独立的内存地址，而不是当需要空间时再动态分配</p>
<p>【获取视图信息】</p>
<p>　　可以通过以下几种只读属性来获取视图的信息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">buffer 视图绑定的数组缓冲区</span><br><span class="line">byteOffset <span class="title class_">DataView</span>构造函数的第二个参数，默认是<span class="number">0</span>，只有传入参数时才有值</span><br><span class="line">byteLength <span class="title class_">DataView</span>构造函数的第三个参数，默认是缓冲区的长度byteLength</span><br></pre></td></tr></table></figure>

<p>　　通过这些属性，可以查看视图正在操作缓冲区的哪一部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let buffer = new ArrayBuffer(10),</span><br><span class="line">view1 = new DataView(buffer), // 包含所有字节</span><br><span class="line">view2 = new DataView(buffer, 5, 2); // 包含位置 5 与位置 6 的字节</span><br><span class="line">console.log(view1.buffer === buffer); // true</span><br><span class="line">console.log(view2.buffer === buffer); // true</span><br><span class="line">console.log(view1.byteOffset); // 0</span><br><span class="line">console.log(view2.byteOffset); // 5</span><br><span class="line">console.log(view1.byteLength); // 10</span><br><span class="line">console.log(view2.byteLength); // 2</span><br></pre></td></tr></table></figure>

<p>　　这段代码一共创建了两个视图，view1覆盖了整个数组缓冲区，view2只操作其中的一小部分。由于这些视图都是基于相同的数组缓冲区创建的，因此它们具有相同的buffer属性，但每个视图的byteOffset和byteLength属性又互不相同，这两个属性的值取决于视图操作数组缓冲区的哪一部分</p>
<p>　　当然，只从内存读取信息不是很有用，需要同时在内存中读写数据才能物尽其用</p>
<p>【读取和写入数据】</p>
<p>　　JS有8种数值型数据类型，对于其中的每一种，都能在DataView的原型上找到相应的在数组缓冲区中写入数据和读取数据的方法。这些方法名都以set或get打头，紧跟着的是每一种数据类型的缩写。例如，以下这个列表是用于读取和写入int8和unit8类型数据的方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getInt8(byteOffset,littleEndian)读取位于byteOffset后的int8类型数据</span><br><span class="line">setInt8(byteOffset, value, littleEndian) 在byteOffset 处写入int8类型数据</span><br><span class="line">getUint8(byteOffset, littleEndian) 读取位于byteOffset 后的uint8类型数据</span><br><span class="line">setUint8(byteOffset, value, littleEndian) 在byteOffset 处写入uint8类型数据</span><br></pre></td></tr></table></figure>

<p>　　get方法接受两个参数：读取数据时偏移的字节数量和一个可选的布尔值，表示是否按照小端序进行读取(小端序是指最低有效字节位于字节0的字节顺序)。set方法接受三个参数：写入数据时偏移的比特数量、写入的值和一个可选的布尔值，表示是否按照小端序格式存储。尽管这里只展示了用于8位值的方法，但是有一些相同的方法也可用于操作16或32位的值，只需将每一个方法名中的8替换为16或32即可。除所有整数方法外，DataView同样支持以下读取和写入浮点数的方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getFloat32(byteOffset, littleEndian) 读取位于byteOffset后的float32类型数据</span><br><span class="line">setFloat32(byteOffset,value,littleEndian) 在byteOffset处写入float32类型数据</span><br><span class="line">getFloat64(byteOffset,littleEndian) 读取位于byteOffset后的float64类型数据</span><br><span class="line">setFloat64(byteOffset,value,littleEndian) 在byteOffset处写入float64类型数据</span><br></pre></td></tr></table></figure>

<p>　　以下示例分别展示了set和get方法的实际运用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let buffer = new ArrayBuffer(2),</span><br><span class="line">    view = new DataView(buffer);</span><br><span class="line">view.setInt8(0, 5);</span><br><span class="line">view.setInt8(1, -1);</span><br><span class="line">console.log(view.getInt8(0)); // 5</span><br><span class="line">console.log(view.getInt8(1)); // -1</span><br></pre></td></tr></table></figure>

<p>　　这段代码使用两字节数组缓冲器来存储两个int8类型的值，分别位于偏移0和1，每个值都横跨一整个字节(8个比特)随后通过getlnt8()方法将这些值从它们所在的位置提取出来</p>
<p>　　视图是独立的，无论数据之前是通过何种方式存储的，都可在任意时刻读取或写入任意格式的数据。举个例子，写入两个int8类型的值，然后使用int16类型的方法也可以从缓冲区中读出这些值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let buffer = new ArrayBuffer(2),</span><br><span class="line">    view = new DataView(buffer);</span><br><span class="line">view.setInt8(0, 5);</span><br><span class="line">view.setInt8(1, -1);</span><br><span class="line">console.log(view.getInt16(0)); // 1535</span><br><span class="line">console.log(view.getInt8(0)); // 5</span><br><span class="line">console.log(view.getInt8(1)); // -1</span><br></pre></td></tr></table></figure>

<p>　　调用view.getInt16(0)时会读取视图中的所有字节并将其解释为数字1535。如下所示，由每一行的setInt8()方法执行后数组缓冲区的变化，可以理解为何会得到这个结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new ArrayBuffer(2)   0000000000000000</span><br><span class="line">view.setInt8(0, 5);  0000010100000000</span><br><span class="line">view.setInt8(1, -1); 0000010111111111</span><br></pre></td></tr></table></figure>

<p>　　起初，数组缓冲区所有16个比特的值都是0，通过setInt8()方法将数字5写入第一个字节，其中两个数字0会变为数字1(8比特表示下的5是00000101)将-1写入第二个字节，所有比特都会变为1，这也是-1的二进制补码表示。第一次调用setInt8()后，数组缓冲区共包含16个比特，getInt16()会将这些比特读作一个16位整型数字，也就是十进制的1535</p>
<p>　　当混合使用不同数据类型时，DataView对象是一个完美的选择，然而，如果只使用某个特定的数据类型，那么特定类型的视图则是更好的选择</p>
<p>【定型数组是视图】</p>
<p>　　ES6定型数组实际上是用于数组缓冲区的特定类型的视图，可以强制使用特定的数据类型，而不是使用通用的DataView对象来操作数组缓冲区。8个特定类型的视图对应于8种数值型数据类型，uint8的值还有其他选择</p>
<p><img src="/js%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/740839-20170731084445646-1433289504.png"></p>
<p>　　“构造器名称”一列列举了几个定型数组的构造函数，其他列描述了每一个定型数组可包含的数据。Uint8ClampedArray与uint8Array大致相同，唯一的区别在于数组缓冲区中的值如果小于0或大于255，uint8ClampedArray会分别将其转换为0或255，例如，-1会变为0，300会变为255</p>
<p>　　定型数组操作只能在特定的数据类型上进行，例如，所有Int8Array的操作都使用int8类型的值。定型数组中元素的尺寸也取决于数组的类型，Int8Array中的元素占一个字节，而Float64Array中的每个元素占8字节。所幸的是，可以像正常数组一样通过数值型索引来访问元素，从而避免了调用DataView的set和get方法时的尴尬场面</p>
<p>【创建特定类型的视图】</p>
<p>　　定型数组构造函数可以接受多种类型的参数，所以可以通过多种方法来创建定型数组。首先，可以传入DataView构造函数可接受的参数来创建新的定型数组，分别是数组缓冲区、可选的比特偏移量、可选的长度值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let buffer = new ArrayBuffer(10),</span><br><span class="line">    view1 = new Int8Array(buffer),</span><br><span class="line">    view2 = new Int8Array(buffer, 5, 2);</span><br><span class="line">console.log(view1.buffer === buffer); // true</span><br><span class="line">console.log(view2.buffer === buffer); // true</span><br><span class="line">console.log(view1.byteOffset); // 0</span><br><span class="line">console.log(view2.byteOffset); // 5</span><br><span class="line">console.log(view1.byteLength); // 10</span><br><span class="line">console.log(view2.byteLength); // 2</span><br></pre></td></tr></table></figure>

<p>　　在这段代码中，两个视图均是通过buffer生成的Int8Array实例,view1和view2有相同的buffer、byteOffset和byteLength属性，DataView的实例包含这三种属性。当你使用DataView时，只要希望只处理一种数值类型，总是很容易切换到相应的定型数组</p>
<p>　　创建定型数组的第二种方法是调用构造函数时传入一个数字。这个数字表示分配给数组的元素数量(不是比特数量)，构造函数将创建一个新的缓冲区，并按照数组元素的数量来分配合理的比特数量，通过length属性可以访问数组中的元素数量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array(2),</span><br><span class="line">    floats = new Float32Array(5);</span><br><span class="line">console.log(ints.byteLength); // 4</span><br><span class="line">console.log(ints.length); // 2</span><br><span class="line">console.log(floats.byteLength); // 20</span><br><span class="line">console.log(floats.length); // 5</span><br></pre></td></tr></table></figure>

<p>　　ints数组创建时含有两个空元素，每个16比特整型值需要两个字节，因而分配了4字节给该数组；floats数组创建时含有5个空元素，每个元素占4字节，所以共需要20字节。在这两种情况下，如果要访问新创建的缓冲区，则可以通过buffer属性来实现</p>
<p>　　[注意]调用定型数组的构造函数时如果不传参数，会按照传入0来处理，这样由于缓冲区没有分配到任何比特，因而创建的定型数组不能用来保存数据</p>
<p>　　第三种创建定型数组的方法是调用构造函数时，将以下任一对象作为唯一的参数传入</p>
<p>　　1、一个定型数组</p>
<p>　　该数组中的每个元素会作为新的元素被复制到新的定型数组中。例如，如果将一个int8数组传入到Int16Array构造函数中，int8的值会被复制到一个新的int16数组中，新的定型数组使用新的数组缓冲区</p>
<p>　　2、一个可迭代对象</p>
<p>　　对象的迭代器会被调用，通过检索所有条目来选取插入到定型数组的元素，如果所有元素都是不适用于该视图类型的无效类型，构造函数将会抛出一个错误</p>
<p>　　3、一个数组</p>
<p>　　数组中的元素会被复制到一个新的定型数组中，如果所有元素都是不适用于该视图类型的无效类型，构造函数将会抛出一个错误</p>
<p>　　4、一个类数组对象</p>
<p>　　与传入数组的行为一致</p>
<p>　　在每个示例中，新创建的定型数组的数据均取自源对象，这在用一些值初始化定型数组时尤为有用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let ints1 = new Int16Array([25, 50]),</span><br><span class="line">    ints2 = new Int32Array(ints1);</span><br><span class="line">console.log(ints1.buffer === ints2.buffer); // false</span><br><span class="line">console.log(ints1.byteLength); // 4</span><br><span class="line">console.log(ints1.length); // 2</span><br><span class="line">console.log(ints1[0]); // 25</span><br><span class="line">console.log(ints1[1]); // 50</span><br><span class="line">console.log(ints2.byteLength); // 8</span><br><span class="line">console.log(ints2.length); // 2</span><br><span class="line">console.log(ints2[0]); // 25</span><br><span class="line">console.log(ints2[1]); // 50</span><br></pre></td></tr></table></figure>

<p>　　在此示例中创建了一个Int16Array并用含两个值的数组进行初始化，然后用Int16Array作为参数创建一个Int32Arpay，由于两个定型数组的缓冲区完全独立，因此值25和50从ints1被复制到了ints2。在两个定型数组中有相同的数字，只是ints2用8字节来表示数据，而ints1只用4字节</p>
<h3 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h3><p>　　定型数组和普通数组有几个相似之处，在许多情况下可以按照普通数组的使用方式去使用定型数组。例如，通过length属性可以查看定型数组中含有的元素数量，通过数值型索引可以直接访问定型数组中的元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array([25, 50]);</span><br><span class="line">console.log(ints.length); // 2</span><br><span class="line">console.log(ints[0]); // 25</span><br><span class="line">console.log(ints[1]); // 50</span><br><span class="line">ints[0] = 1;</span><br><span class="line">ints[1] = 2;</span><br><span class="line">console.log(ints[0]); // 1</span><br><span class="line">console.log(ints[1]); // 2</span><br></pre></td></tr></table></figure>

<p>　　在这段代码中，新创建的Int16Array中有两个元素，这些元素均通过数值型索引来被读取和写入，那些值会自动储存并转换成int16类型的值。当然，定型数组与普通数组还有其他相似之处</p>
<p>　　[注意]可以修改length属性来改变普通数组的大小，而定型数组的length属性是一个不可写属性，所以不能修改定型数组的大小，如果尝试修改这个值，在非严格模式下会直接忽略该操作，在严格模式下会抛出错误</p>
<p>【通用方法】</p>
<p>　　定型数组也包括许多在功能上与普通数组方法等效的方法，以下方法均可用于定型数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">copyWithin()</span><br><span class="line">entries()</span><br><span class="line">fill()</span><br><span class="line">filter()</span><br><span class="line">find()</span><br><span class="line">findIndex()</span><br><span class="line">forEach()</span><br><span class="line">indexOf()</span><br><span class="line">join()</span><br><span class="line">keys()</span><br><span class="line">lastIndexOf()</span><br><span class="line">map()</span><br><span class="line">reduce()</span><br><span class="line">reduceRight()</span><br><span class="line">reverse()</span><br><span class="line">slice()</span><br><span class="line">some()</span><br><span class="line">sort()</span><br><span class="line">values()</span><br></pre></td></tr></table></figure>

<p>　　尽管这些方法与Array.prototype中的很像，但并非完全一致，定型数组中的方法会额外检查数值类型是否安全，也会通过Symbol.species确认方法的返回值是定型数组而非普通数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array([25, 50]),</span><br><span class="line">    mapped = ints.map(v =&gt; v * 2);</span><br><span class="line">console.log(mapped.length); // 2</span><br><span class="line">console.log(mapped[0]); // 50</span><br><span class="line">console.log(mapped[1]); // 100</span><br><span class="line">console.log(mapped instanceof Int16Array); // true</span><br></pre></td></tr></table></figure>

<p>　　这段代码使用map()方法创建一个存放整数的新数组，并通过map()方法将数组中的每个值乘以2，最后返回一个新的Int16Array类型的数组</p>
<p>【相同的迭代器】</p>
<p>　　定型数组与普通数组有3个相同的迭代器，分别是entries()方法、keys()方法和values()方法，这意味着可以把定型数组当作普通数组一样来使用展开运算符、for-of循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array([25, 50]),</span><br><span class="line">    intsArray = [...ints];</span><br><span class="line">console.log(intsArray instanceof Array); // true</span><br><span class="line">console.log(intsArray[0]); // 25</span><br><span class="line">console.log(intsArray[1]); // 50</span><br></pre></td></tr></table></figure>

<p>　　这段代码创建了一个名为intsArray的新数组，包含与定型数组ints相同的数据。展开运算符能够将可迭代对象转换为普通数组，也能将定型数组转换为普通数组</p>
<p>【of()方法和from()方法】</p>
<p>　　所有定型数组都含有静态of()方法和from()方法，运行效果分别与Array.of()方法和Array.from()方法相似，区别是定型数组的方法返回定型数组，而普通数组的方法返回普通数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let ints = Int16Array.of(25, 50),</span><br><span class="line">    floats = Float32Array.from([1.5, 2.5]);</span><br><span class="line">console.log(ints instanceof Int16Array); // true</span><br><span class="line">console.log(floats instanceof Float32Array); // true</span><br><span class="line">console.log(ints.length); // 2</span><br><span class="line">console.log(ints[0]); // 25</span><br><span class="line">console.log(ints[1]); // 50</span><br><span class="line">console.log(floats.length); // 2</span><br><span class="line">console.log(floats[0]); // 1.5</span><br><span class="line">console.log(floats[1]); // 2.5</span><br></pre></td></tr></table></figure>

<p>　　在此示例中，of()方法和from()方法分别创建Int16Array和Float32Array，通过这些方法可以确保定型数组的创建过程如普通数组一样简单</p>
<h3 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h3><p>　　定型数组与普通数组最重要的差别是：定型数组不是普通数组。它不继承自Array，通过Array.isArray()方法检查定型数组返回的是false</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array([25, 50]);</span><br><span class="line">console.log(ints instanceof Array); // false</span><br><span class="line">console.log(Array.isArray(ints)); // false</span><br></pre></td></tr></table></figure>

<p>　　由于变量ints是一个定型数组，因此它既不是Array的实例，也不能被认作是一个数组。做此区分很重要，因为尽管定型数组与普通数组相似，但二者在很多方面的行为并不相同</p>
<p>【行为差异】</p>
<p>　　当操作普通数组时，其可以变大变小，但定型数组却始终保持相同的尺寸。给定型数组中不存在的数值索引赋值会被忽略，而在普通数组中就可以</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array([25, 50]);</span><br><span class="line">console.log(ints.length); // 2</span><br><span class="line">console.log(ints[0]); // 25</span><br><span class="line">console.log(ints[1]); // 50</span><br><span class="line">ints[2] = 5;</span><br><span class="line">console.log(ints.length); // 2</span><br><span class="line">console.log(ints[2]); // undefined</span><br></pre></td></tr></table></figure>

<p>　　在这个示例中，尽管将数值索引2赋值为5，但ints数组尺寸并未增长，赋值被丢弃，length属性保持不变</p>
<p>　　定型数组同样会检查数据类型的合法性，0被用于代替所有非法值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array([&quot;hi&quot;]);</span><br><span class="line">console.log(ints.length); // 1</span><br><span class="line">console.log(ints[0]); // 0</span><br></pre></td></tr></table></figure>

<p>　　这段代码尝试向Int16Array数组中添加字符串值”hi”，字符串在定型数组中属于非法数据类型，所以该值被转换为0插入数组，数组的长度仍然为1，ints[0]包含的值为0</p>
<p>　　所有修改定型数组值的方法执行时都会受到相同限制，例如，如果给map()方法传入的函数返回非法值，则最终会用0来代替</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array([25, 50]),</span><br><span class="line">    mapped = ints.map(v =&gt; &quot;hi&quot;);</span><br><span class="line">console.log(mapped.length); // 2</span><br><span class="line">console.log(mapped[0]); // 0</span><br><span class="line">console.log(mapped[1]); // 0</span><br><span class="line">console.log(mapped instanceof Int16Array); // true</span><br><span class="line">console.log(mapped instanceof Array); // false</span><br></pre></td></tr></table></figure>

<p>　　这里的字符串”hi”不是16位整数，所以在结果数组中会用0来替代它。由于有了这种错误更正的特性，故非法数据将不会在数组中出现，即使混入非法数据也不会抛出错误</p>
<p>【缺失的方法】</p>
<p>　　尽管定型数组包含许多与普通数组相同的方法，但也缺失了几个。以下方法在定型数组中不可使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">concat()</span><br><span class="line">pop()</span><br><span class="line">push()</span><br><span class="line">shift()</span><br><span class="line">splice()</span><br><span class="line">unshift()</span><br></pre></td></tr></table></figure>

<p>　　除concat()方法外，这个列表中的方法都可以改变数组的尺寸，由于定型数组的尺寸不可更改，因而这些方法不适用于定型数组。定型数组不支持concat()方法是因为两个定型数组合并后的结果(尤其当两个数组分别处理不同数据类型时)会变得不确定，这直接违背了使用定型数组的初衷</p>
<p>【附加方法】</p>
<p>　　定型数组中还有两个没出现在普通数组中的方法set()和subarray()。这两个方法的功能相反，set()方法将其他数组复制到已有的定型数组，subarray()提取已有定型数组的一部分作为一个新的定型数组</p>
<p>　　set()方法接受两个参数：一个是数组(定型数组或普通数组都支持)；一个是可选的偏移量，表示开始插入数据的位置，如果什么都不传，默认的偏移量为0。合法数据从作为参数传入的数组复制至目标定型数组中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let ints = new Int16Array(4);</span><br><span class="line">ints.set([25, 50]);</span><br><span class="line">ints.set([75, 100], 2);</span><br><span class="line">console.log(ints.toString()); // 25,50,75,100</span><br></pre></td></tr></table></figure>

<p>　　这段代码创建了一个含有4个元素的数组Int16Array，先调用set()方法将两个值分别复制到前两个位置，再次调用set()方法并传入偏移量2，将另外两个值复制到数组的后两个位置</p>
<p>　　subarray()方法接受两个参数：一个是可选的开始位置，一个是可选的结束位置(与slice()方法的结束位置一样，不包含当前位置的数据)，最后返回一个新的定型数组。也可以省略这两个参数来克隆一个新的定型数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Int16Array</span>([<span class="number">25</span>, <span class="number">50</span>, <span class="number">75</span>, <span class="number">100</span>]),</span><br><span class="line">    subints1 = ints.<span class="title function_">subarray</span>(),</span><br><span class="line">    subints2 = ints.<span class="title function_">subarray</span>(<span class="number">2</span>),</span><br><span class="line">    subints3 = ints.<span class="title function_">subarray</span>(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(subints1.<span class="title function_">toString</span>()); <span class="comment">// 25,50,75,100</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(subints2.<span class="title function_">toString</span>()); <span class="comment">// 75,100</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(subints3.<span class="title function_">toString</span>()); <span class="comment">// 50,75</span></span><br></pre></td></tr></table></figure>

<p>　　以上示例中，分别通过原始数组ints创建了3个不同的定型数组。数组subints1是通过克隆ints得到的，故它们包含相同的信息；数组subints2从索引2开始复制数据，所以只包含数组ints的最后两个元素(75和100)；数组subints3由于调用subarray()方法时传入了起始和结束索引的位置，故subints3只包含数组ints中间的两个元素</p>
<h2 id="Map映射"><a href="#Map映射" class="headerlink" title="Map映射"></a>Map映射</h2><blockquote>
<p><code>Map可以有js的任何数据类型作为键</code></p>
<p>数组、数字、字符串、函数、对象都可以</p>
<p>采用严格对象相等的标准来检查键</p>
</blockquote>
<h3 id="创建映射"><a href="#创建映射" class="headerlink" title="创建映射"></a>创建映射</h3><h4 id="嵌套数组法"><a href="#嵌套数组法" class="headerlink" title="嵌套数组法"></a>嵌套数组法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">	[<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>]</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h4 id="自定义迭代创建"><a href="#自定义迭代创建" class="headerlink" title="自定义迭代创建"></a>自定义迭代创建</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span><br><span class="line">  *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]()&#123;</span><br><span class="line">    <span class="attr">yield</span>: [<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<p><img src="/js%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/image-20220803142130709.png" alt="image-20220803142130709"></p>
<h3 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h3><h4 id="set-增改"><a href="#set-增改" class="headerlink" title="set()增改"></a>set()增改</h4><p>增</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">	[<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>]</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;0&quot;</span>,<span class="string">&quot;1&quot;</span>).<span class="title function_">set</span>(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>) <span class="comment">// Map(3) &#123;&#x27;key&#x27; =&gt; &#x27;value&#x27;, &#x27;0&#x27; =&gt; &#x27;1&#x27;, &#x27;1&#x27; =&gt; &#x27;2&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<p>改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;10&quot;</span>) <span class="comment">//  Map(3) &#123;&#x27;key&#x27; =&gt; &#x27;10&#x27;, &#x27;0&#x27; =&gt; &#x27;1&#x27;, &#x27;1&#x27; =&gt; &#x27;2&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="顺序与迭代"><a href="#顺序与迭代" class="headerlink" title="顺序与迭代"></a>顺序与迭代</h3><blockquote>
<p>与object的一个主要差异是，Map实例会维护键值对的插入顺序，因此可以根据插入顺序进行迭代操作</p>
</blockquote>
<blockquote>
<p>映射实例可以提供一个迭代器(iterator),能以插入顺序生成[key,value]形式的数组。</p>
<p>可以通过entries()（或Symbol.iterator属性，它引用entries()）取得这个属性</p>
</blockquote>
<h3 id="Object与Map的选择"><a href="#Object与Map的选择" class="headerlink" title="Object与Map的选择"></a>Object与Map的选择</h3><p>1、内存上object优于Map</p>
<p>2、插入性能上Map优于object</p>
<p>3、查找上object优于Map</p>
<p>4、删除上Map优于Object</p>
<h3 id="弱映射WeakMap"><a href="#弱映射WeakMap" class="headerlink" title="弱映射WeakMap"></a>弱映射WeakMap</h3><blockquote>
<p><code>弱映射的键只能是object或继承资object的类型</code></p>
</blockquote>
<p>方法与Map一样但没有clear()、keys()、valuses()等方法</p>
<blockquote>
<p>weakMap中weak表示键<code>弱弱的拿着</code>这样不属于正式的引用，不会阻止垃圾机制的回收</p>
<p>弱映射的引用值可不是<code>弱弱的拿着</code>只要键存在，键值对就会存在于映射中，并被当做值引用，因此不会被当做垃圾回收</p>
</blockquote>
<p>不可进行迭代</p>
<p>可以实现私有变量</p>
<h2 id="集合Set"><a href="#集合Set" class="headerlink" title="集合Set"></a>集合Set</h2><h3 id="基本API"><a href="#基本API" class="headerlink" title="基本API"></a>基本API</h3><h4 id="创建Set"><a href="#创建Set" class="headerlink" title="创建Set"></a>创建Set</h4><p>迭代对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set) <span class="comment">//Set(5) &#123; 1, 2, 3, 4, 5 &#125;</span></span><br></pre></td></tr></table></figure>

<p>自定义迭代对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>(</span><br><span class="line">  &#123;</span><br><span class="line">    *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">      <span class="keyword">yield</span> <span class="number">1</span>,</span><br><span class="line">      <span class="keyword">yield</span> <span class="number">2</span>,</span><br><span class="line">      <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set);</span><br><span class="line"> <span class="comment">// Set(3) &#123; 1, 2, 3 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="增删改查-1"><a href="#增删改查-1" class="headerlink" title="增删改查"></a>增删改查</h3><h4 id="增add"><a href="#增add" class="headerlink" title="增add"></a>增add</h4><p>在尾部添加一个元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">set.<span class="title function_">add</span>(<span class="number">4</span>, <span class="number">5</span>) <span class="comment">// </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set) <span class="comment">//Set(3) &#123; 1, 2, 3, 4&#125;</span></span><br></pre></td></tr></table></figure>



<p>其余方法与Map一样</p>
<h4 id="entries-1"><a href="#entries-1" class="headerlink" title="entries"></a>entries</h4><blockquote>
<p>entries方法返回一个迭代器，可以按照插入的顺序产生包含两个元素的数组。这两个元素是集合中每个值的重复出现。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> set.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(val);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [ 1, 1 ]</span></span><br><span class="line"><span class="comment">// [ 2, 2 ]</span></span><br><span class="line"><span class="comment">// [ 3, 3 ]</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> set) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="定义正式集合操作"><a href="#定义正式集合操作" class="headerlink" title="定义正式集合操作"></a>定义正式集合操作</h3><h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><blockquote>
<p>迭代是按照顺序反复多次执行一段程序，通常会有明确的终止条件。</p>
<p>ESC6新增了迭代器和生成器</p>
</blockquote>
<h3 id="理解迭代"><a href="#理解迭代" class="headerlink" title="理解迭代"></a>理解迭代</h3><blockquote>
<p>循环是迭代的基础</p>
</blockquote>
<blockquote>
<p>迭代会在一个有序集合上进行（数组）</p>
</blockquote>
<p>循环遍历的缺点</p>
<blockquote>
<p>1、迭代之前需要事先知道如何使用数据结构</p>
<p>2、遍历顺序并不是数据固有的，（通过索引来访只适用于数组）</p>
<ul>
<li>虽然新增的forEach可以解决(但没办法标识迭代何时结束)</li>
</ul>
</blockquote>
<h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><blockquote>
<p>即可以把一些结构称为“可选迭代对象”，因为他们实现了正式的Iterable接口，而且可以通过迭代器（Iterator）来进行消费</p>
</blockquote>
<blockquote>
<p>可迭代对象是一种抽象的说法。简单理解为数组或集合这样的集合类型对象。（它们包含的元素都是有限的，而且都具有无歧义的迭代顺序）</p>
</blockquote>
<blockquote>
<p>迭代对象不一定是集合对象，也可以是仅仅类似数组行为的其他数据结构，</p>
<ul>
<li>比如计数循环,该循环中生成的值时暂时性的，但循环本身实在执行迭代。计数循环和数组都是具有可迭代对象的行为</li>
</ul>
</blockquote>
<blockquote>
<p>任何实现Iterable接口的数据都可以被实现Iterator接口的结构“消费”</p>
<p>迭代器是按需创建的一次性对象。每个迭代器都会关联一个可迭代的对象</p>
</blockquote>
<h3 id="可迭代协议（Iterable）"><a href="#可迭代协议（Iterable）" class="headerlink" title="可迭代协议（Iterable）"></a>可迭代协议（Iterable）</h3><p>实现Iterable接口（可迭代协议）要求同时具备两种能力：</p>
<pre><code>+ 支持迭代的自我识别能力
+ 创建实现Iterator接口的对象的能力
</code></pre>
<p>这意味着必须要暴露一个属性作为默认“迭代器”,而且这个属性的键必须使用特殊的Symbol.itertor作为键，<code>这个默认的迭代器属性必须引用一个的迭代器工厂函数，调用这个函数必须返回一个新的迭代器</code></p>
<blockquote>
<p>内置实现Iterator接口的类型有</p>
<ol>
<li>数组</li>
<li>字符串</li>
<li>映射</li>
<li>集合</li>
<li>NodeList节点集合</li>
<li>arguments对象</li>
</ol>
</blockquote>
<p>检测是否具有默认的Iterator接口</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">uname</span>:<span class="string">&quot;zhangsan&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]) <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>可以自动调用迭代器工厂函数并生成迭代器的原生结构的有</p>
<blockquote>
<ol>
<li>for-of循环</li>
<li>Array。from()</li>
<li>数组解构</li>
<li>扩展符…</li>
<li>创建映射</li>
<li>创建集合</li>
<li>Promise.all()接受由期约组成的迭代对象</li>
<li>Promise.race()接受由期约组成的迭代对象</li>
<li>yield*操作符，在生成器中使用</li>
</ol>
</blockquote>
<h4 id="迭代器协议"><a href="#迭代器协议" class="headerlink" title="迭代器协议"></a>迭代器协议</h4><blockquote>
<p>迭代器是一种一次性使用的对象。可迭代API使用next()方法在可迭代对象中遍历数据，每次成功调用都会返回一个IteratorResult对象，其中包括迭代器返回的下一个值。若不调用next()则无法知道迭代器的当前位置。</p>
</blockquote>
<blockquote>
<p>next()方法返回的迭代器对象包含两个属性：done和value。</p>
<p>done是一个布尔值，表示是否还可以返回再次调用next()取得下一个值；true为耗尽</p>
<p>value包含下次可迭代对象的值</p>
</blockquote>
<h4 id="自定义迭代器"><a href="#自定义迭代器" class="headerlink" title="自定义迭代器"></a>自定义迭代器</h4><blockquote>
<p>与Iterable接口类似，任何实现Iterator接口的对象都可以作为迭代器使用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cout</span>&#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">limit</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">limit</span> = limit</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">next</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">count</span> &lt;= <span class="variable language_">this</span>.<span class="property">limit</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">done</span>: <span class="literal">false</span>,<span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">count</span>++&#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">done</span>: <span class="literal">true</span>,<span class="attr">value</span>: <span class="literal">undefined</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> count = <span class="keyword">new</span> <span class="title class_">Cout</span>(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> count) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> count) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>该类型实现了Iterator接口但不理想因为它的每个实例都只能被迭代一次</p>
<blockquote>
<p>为了让一个可迭代对象能够创建多个迭代器，必须每创建一个迭代器就对应一个新的计数器</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cout</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">limit</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">limit</span> = limit</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> limit = <span class="variable language_">this</span>.<span class="property">limit</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (count &lt;= limit) &#123;</span><br><span class="line">          <span class="keyword">return</span> &#123; <span class="attr">done</span>: <span class="literal">false</span>, <span class="attr">value</span>: count++ &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> &#123; <span class="attr">done</span>: <span class="literal">true</span>, <span class="attr">value</span>: <span class="literal">undefined</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> count = <span class="keyword">new</span> <span class="title class_">Cout</span>(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> count) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> count) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="提前终止迭代器"><a href="#提前终止迭代器" class="headerlink" title="提前终止迭代器"></a>提前终止迭代器</h3><p>可选的return()方法用于指定在迭代器提前结束前关闭的执行的逻辑</p>
<p>执行迭代结构在想让迭代器知道他不想遍历到可迭代对象耗尽是，就可以“关闭”迭代器。</p>
<ul>
<li>for-of循环通过breck，continue、return或throw提前退出</li>
<li>结构操作并一定消费所有值</li>
</ul>
<p>return()方法必须返回一个有效的IteratorResult对象，简单情况下可以写</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/js%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-Less" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/Less/">Less</a>
	
    </h1>
  


  
  
<a href="/Less/" class="archive-article-date">
        <time datetime="2023-02-16T14:41:52.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h2 id="1-less-简介"><a href="#1-less-简介" class="headerlink" title="1. less 简介"></a>1. less 简介</h2><ol>
<li>less是CSS的预编译器，可以扩展CSS语言（当然也兼容CSS），可以定义变量、混合、函数等等，让CSS代码更易维护和扩展</li>
<li>less与传统写法相比：</li>
</ol>
<blockquote>
<ul>
<li>less后缀为” .less “</li>
<li>less中的注释有两种</li>
</ul>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 这种注释不会编译到CSS文件</span><br><span class="line"><span class="comment">/* 这种注释会编译到CSS文件*/</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>less需要编译成css才能使用</li>
</ol>
<blockquote>
<ul>
<li>使用编译工具，比如 <a href="https://link.juejin.cn/?target=http://koala-app.com/">Koala</a> 挺好用的（当然也有很多<a href="https://link.juejin.cn/?target=https://www.w3cschool.cn/tools/index?name=LESS">在线编译工具</a>）</li>
<li>在项目中使用（比如Vue，需要安装less-loader）</li>
<li>客户端调试（存在跨域问题，不推荐这种方式）</li>
</ul>
<blockquote>
<ul>
<li>使用link标签引用less.min.js（<a href="https://link.juejin.cn/?target=www.lesscss.cn">官网下载</a>），注意rel&#x3D;”stylesheet&#x2F;less”</li>
<li>这种方式不生成css文件，直接在浏览器查看</li>
</ul>
</blockquote>
</blockquote>
<hr>
<h2 id="2-嵌套规则"><a href="#2-嵌套规则" class="headerlink" title="2. 嵌套规则"></a>2. 嵌套规则</h2><h3 id="2-1-less的嵌套规则类似HTML的结构，使得CSS代码清晰"><a href="#2-1-less的嵌套规则类似HTML的结构，使得CSS代码清晰" class="headerlink" title="2.1 less的嵌套规则类似HTML的结构，使得CSS代码清晰"></a>2.1 less的嵌套规则类似HTML的结构，使得CSS代码清晰</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*css 写法*/</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line"> <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// less写法</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="selector-tag">a</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="2-2-父元素选择符-amp"><a href="#2-2-父元素选择符-amp" class="headerlink" title="2.2 父元素选择符 &amp;"></a>2.2 父元素选择符 &amp;</h3><ul>
<li>表示当前选择器的所有父选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//css写法</span><br><span class="line"><span class="selector-class">.bgcolor</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#888888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//less写法</span><br><span class="line"><span class="selector-class">.bgcolor</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>; </span><br><span class="line">  <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#888888</span>;      </span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="2-3-改变选择器的顺序"><a href="#2-3-改变选择器的顺序" class="headerlink" title="2.3 改变选择器的顺序"></a>2.3 改变选择器的顺序</h3><ul>
<li>将&amp;放到当前选择器之后，会将当前选择器移到最前面</li>
<li>只需记住 “&amp; 代表当前选择器的所有父选择器”</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="selector-class">.color</span> &amp;&#123;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//编译结果</span><br><span class="line"><span class="selector-class">.color</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="2-4-组合使用"><a href="#2-4-组合使用" class="headerlink" title="2.4 组合使用"></a>2.4 组合使用</h3><ul>
<li>将生成所有可能的选择器列表</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div1</span>, <span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  &amp; &amp; &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid blue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-class">.div1</span>, <span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div1</span> <span class="selector-class">.div2</span>,</span><br><span class="line"><span class="selector-class">.div2</span> <span class="selector-class">.div1</span>,</span><br><span class="line"><span class="selector-class">.div1</span> <span class="selector-class">.div1</span>,</span><br><span class="line"><span class="selector-class">.div2</span> <span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid blue;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<ol>
<li><strong>作为内层选择器表示对父选择器的引用。</strong>这里要注意在写less的嵌套的时候会有差异</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.demo &#123;</span><br><span class="line">  &amp;-title &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面这段代码会被编译成</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo-title</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的&amp;引用了<code>.demo</code>，注意这里虽然是嵌套的写法但仅代表选择器的引用而不是css的嵌套关系，和下面的代码有css层级的不同</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> &#123;</span><br><span class="line">  <span class="selector-class">.demo-title</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面这段代码会被编译成</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> <span class="selector-class">.demo-title</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>明显可以看出上面&amp;的写法少一个.demo的层级，这样就需要注意css的优先级问题。如果要使上面的写法得到和下面的一样的结果就需要增加一个&amp;的引用，即</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.demo &#123;</span><br><span class="line">  &amp; &amp;-title &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解析后则会增加一个.demo的层级</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> <span class="selector-class">.demo-title</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这说明在一个选择器中，&amp; 可以重复出现多次，这样，就可以多次引用父选择器而不必重复它的名字。比如</p>
<ul>
<li>&amp;&amp; 表示.demo.demo</li>
<li>&amp; &amp; 表示.demo .demo</li>
<li>&amp;, &amp; 表示.demo, .demo</li>
</ul>
<p>这样的写法需要注意的是它重复所有的祖先选择器，而不是仅仅重复最近的父选择器。例如：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> &#123;</span><br><span class="line">  <span class="selector-class">.demo-desc</span> &#123;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-tag">-font</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解析之后会变成</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> <span class="selector-class">.demo-desc-font</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>高级用法</p>
<p><strong>反转嵌套的顺序并且可以应用到多个类名上。</strong>上例子:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo-title</span> &#123;</span><br><span class="line">  <span class="selector-class">.demo</span> <span class="selector-tag">&amp;</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码解析后则会变成</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> <span class="selector-class">.demo-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>后面会持续更新。。。。</p>
<h2 id="3-变量"><a href="#3-变量" class="headerlink" title="3. 变量"></a>3. 变量</h2><h3 id="3-1-变量的定义和使用"><a href="#3-1-变量的定义和使用" class="headerlink" title="3.1 变量的定义和使用"></a>3.1 变量的定义和使用</h3><ul>
<li>定义：@name: value; （@black: #000;）</li>
<li>使用场合分3种：</li>
</ul>
<blockquote>
<ul>
<li>常规使用：@name</li>
<li>作为选择器或属性名：@{name}</li>
<li>作为URL：”@{name}”</li>
</ul>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 1.常规使用 */</span></span><br><span class="line"><span class="variable">@black:</span> <span class="number">#000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@black</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2.作用选择器和属性名 */</span></span><br><span class="line"><span class="variable">@selName:</span> container;</span><br><span class="line"><span class="variable">@proName:</span> width;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.@&#123;selName&#125;</span> &#123;</span><br><span class="line">  @&#123;proName&#125;: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 3.作为URL */</span></span><br><span class="line"><span class="variable">@imgUrl:</span> <span class="string">&quot;./images/logo.png&quot;</span></span><br><span class="line"></span><br><span class="line">div &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#FFF</span> url(<span class="string">&quot;@&#123;imgUrl&#125;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#FFF</span> url(<span class="string">&quot;./images/logo.png&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="3-2-注意事项"><a href="#3-2-注意事项" class="headerlink" title="3.2 注意事项"></a>3.2 注意事项</h3><ol>
<li>变量是延迟加载的，可以不预先声明</li>
</ol>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@black</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">@black:</span> <span class="number">#000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ol>
<li>变量的作用域</li>
</ol>
<blockquote>
<ul>
<li>less会从当前作用域没找到，将往上查找（类似js）</li>
<li>如果在某级作用域找到多个相同名称的变量，使用最后定义的那个（类似css）</li>
</ul>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@var:</span> <span class="number">0</span>;</span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">    <span class="variable">@var:</span> <span class="number">1</span>;</span><br><span class="line">    <span class="selector-class">.brass</span> &#123;</span><br><span class="line">        <span class="variable">@var:</span> <span class="number">2</span>;</span><br><span class="line">        three: @var;</span><br><span class="line">        <span class="variable">@var:</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    one: @var; <span class="comment">//类似js，无法访问.brass内部</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">    one: 1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class</span> <span class="selector-class">.brass</span> &#123;</span><br><span class="line">    three: 3;  <span class="comment">//使用最后定义的 @var: 3</span></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-混合（mixins）"><a href="#4-混合（mixins）" class="headerlink" title="4. 混合（mixins）"></a>4. 混合（mixins）</h2><ul>
<li>混合：一种将一系列属性从一个规则集引入（“混入”）到另一个规则集的方式</li>
<li>混合是非常重要的一个概念，内容也偏多，可以尝试多看几遍！</li>
</ul>
<h3 id="4-1-普通混合"><a href="#4-1-普通混合" class="headerlink" title="4.1 普通混合"></a>4.1 普通混合</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//混合</span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="selector-class">.border</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//编译结果</span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-2-不带参数的混合"><a href="#4-2-不带参数的混合" class="headerlink" title="4.2 不带参数的混合"></a>4.2 不带参数的混合</h3><ul>
<li>从上面的代码发现，混合也被编译输出了</li>
<li>在混合名字后加上括号，编译后不再输出</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加括号但不带参数的混合</span></span><br><span class="line"><span class="selector-class">.border</span>() &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="selector-class">.border</span>;  <span class="comment">//加不加括号都可以</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-3-带参数的混合"><a href="#4-3-带参数的混合" class="headerlink" title="4.3 带参数的混合"></a>4.3 带参数的混合</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//带参数的混合</span></span><br><span class="line"><span class="selector-class">.border</span>(<span class="variable">@color</span>) &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">#fff</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-4-带参数且有默认值的混合"><a href="#4-4-带参数且有默认值的混合" class="headerlink" title="4.4 带参数且有默认值的混合"></a>4.4 带参数且有默认值的混合</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//带参数且有默认值的混合</span></span><br><span class="line"><span class="selector-class">.border</span>(<span class="variable">@color</span>: <span class="number">#fff</span>) &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="selector-class">.border</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">#000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="number">#000000</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-5-带多个参数"><a href="#4-5-带多个参数" class="headerlink" title="4.5 带多个参数"></a>4.5 带多个参数</h3><ul>
<li>多个参数时，参数之间可以用分号或逗号分隔</li>
<li><strong>注意逗号分隔的是“各个参数”还是“某个列表类型的参数”</strong></li>
</ul>
<blockquote>
<ul>
<li>两个参数，并且每个参数都是逗号分隔的列表：.name(1,2,3; something, ele)</li>
<li>三个参数，并且每个参数都包含一个数字：.name(1,2,3)</li>
<li>使用分号，调用包含一个逗号分割的css列表（一个参数）： .name(1,2,3; )</li>
<li>逗号分割默认值（两个参数）：.name(@param1:red, blue)</li>
</ul>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//less编写</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>, <span class="variable">@padding</span>: xxx, <span class="variable">@margin</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: <span class="variable">@padding</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.div</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>; something, ele);  <span class="comment">//2个参数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);                  <span class="comment">//3个参数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>; );                <span class="comment">//1个参数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.div</span> &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: something, ele;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: xxx;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-6-定义多个相同名称的混合"><a href="#4-6-定义多个相同名称的混合" class="headerlink" title="4.6 定义多个相同名称的混合"></a>4.6 定义多个相同名称的混合</h3><ul>
<li>less会根据参数进行调用相应的混合</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>) &#123;</span><br><span class="line">  <span class="attribute">color-1</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>; <span class="variable">@padding</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>; <span class="variable">@padding</span>: <span class="number">3</span>; <span class="variable">@margin</span>) &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: <span class="variable">@padding</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#008000</span>); <span class="comment">//第二个mixins也被调用了，因为 @padding 有默认值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#008000</span>, <span class="number">5</span>); <span class="comment">//只有第二个mixins被调用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color-1</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-7-命名参数"><a href="#4-7-命名参数" class="headerlink" title="4.7 命名参数"></a>4.7 命名参数</h3><ul>
<li>引用mixin时可以通过参数名称而不是参数的位置来为mixin提供参数值，任何参数都通过名称来引用，这样就不必按照特定的顺序来使用参数</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>: black; <span class="variable">@margin</span>: <span class="number">10px</span>; <span class="variable">@padding</span>: <span class="number">20px</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="variable">@margin</span>:<span class="number">20</span>; <span class="variable">@color</span>: <span class="number">#33acfe</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#efca44</span>; <span class="variable">@padding</span>: <span class="number">40px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#33acfe</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#efca44</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-8-arguments变量"><a href="#4-8-arguments变量" class="headerlink" title="4.8 @arguments变量"></a>4.8 @arguments变量</h3><ul>
<li>@arguments表示所有可变参数</li>
<li>参数的先后顺序就是括号内的顺序 ，在赋值时，值的位置和个数也是一一对应的</li>
<li>只有一个值，把值赋给第一个，两个值，赋给第一个和第二个……</li>
<li>若想赋给第一个和第三个，必须把第二个参数的默认值写上</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.border</span>(<span class="variable">@x</span>: solid, <span class="variable">@c</span>: red) &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">21px</span> <span class="variable">@arguments</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="selector-class">.border</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="selector-class">.border</span>(solid, black)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">21px</span> solid <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">21px</span> solid <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-9-匹配模式"><a href="#4-9-匹配模式" class="headerlink" title="4.9 匹配模式"></a>4.9 匹配模式</h3><ul>
<li>自定义一个字符，使用时加上那个字符，就调用相应的规则</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.border</span>(all, <span class="variable">@w</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="variable">@w</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span>(t_l, <span class="variable">@w</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="variable">@w</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span>(b_l, <span class="variable">@w</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-bottom-left-radius</span>: <span class="variable">@w</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span>(b_r, <span class="variable">@w</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-bottom-right-radius</span>: <span class="variable">@w</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="selector-class">.border</span>(all, <span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4-10-得到混合中变量的返回值"><a href="#4-10-得到混合中变量的返回值" class="headerlink" title="4.10 得到混合中变量的返回值"></a>4.10 得到混合中变量的返回值</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.average</span>(<span class="variable">@x</span>, <span class="variable">@y</span>) &#123;</span><br><span class="line">  <span class="variable">@average</span>((<span class="variable">@x</span> + <span class="variable">@y</span>)/<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.average</span>(<span class="number">16px</span>, <span class="number">50px</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="variable">@average</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">33px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1、将16px 和 50px 赋值给混合 .average进行计算</span></span><br><span class="line"><span class="comment">2、计算结果赋值给变量 @average</span></span><br><span class="line"><span class="comment">3、然后在div中调用@average的值</span></span><br><span class="line"><span class="comment">4、编译后就得到了average的值33px</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-运算"><a href="#5-运算" class="headerlink" title="5. 运算"></a>5. 运算</h2><ul>
<li>任何数值、颜色值和变量都可以进行运算</li>
</ul>
<h3 id="5-1-数值类运算"><a href="#5-1-数值类运算" class="headerlink" title="5.1 数值类运算"></a>5.1 数值类运算</h3><ul>
<li>less会自动推算数值的单位，不必每个值都加上单位</li>
<li>运算符之间必须以空格分开，存在优先级问题时注意使用括号</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wp</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: (<span class="number">450px</span> - <span class="number">50</span>)*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.wp</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">900px</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="5-2-颜色值运算"><a href="#5-2-颜色值运算" class="headerlink" title="5.2 颜色值运算"></a>5.2 颜色值运算</h3><ul>
<li>先将颜色值转换为rgb模式，运算完后再转换为16进制的颜色值并返回</li>
<li>注意：取值为0-255，所以计算时不能超过这个区间，超过默认使用0或255</li>
<li>注意：不能使用颜色名直接运算</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span> + <span class="number">8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//rgb(0,0,0) + 8</span></span><br><span class="line"><span class="comment">//rgb(8,8,8)</span></span><br><span class="line"><span class="comment">//十六进制：#080808</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#080808</span>; </span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-命名空间"><a href="#6-命名空间" class="headerlink" title="6. 命名空间"></a>6. 命名空间</h2><ul>
<li>有时混合中嵌套了比较多的规则，而我们只需要其中一部分，可使用命名空间获取</li>
</ul>
<h3 id="6-1-使用-“-gt-”-符号"><a href="#6-1-使用-“-gt-”-符号" class="headerlink" title="6.1 使用 “&gt;” 符号"></a>6.1 使用 “&gt;” 符号</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//混合集</span></span><br><span class="line"><span class="selector-id">#bgcolor</span>() &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="selector-class">.a</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.b</span>() &#123;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bgcolor1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfee0</span>;</span><br><span class="line">  <span class="selector-id">#bgcolor</span>&gt;<span class="selector-class">.a</span>;     <span class="comment">//只使用.a()</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor2</span> &#123;</span><br><span class="line">  <span class="selector-id">#bgcolor</span>&gt;<span class="selector-class">.a</span>&gt;<span class="selector-class">.b</span>;  <span class="comment">//只使用.b()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.bgcolor1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfee0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor1</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="6-2-省略-“-gt-”，换成空格"><a href="#6-2-省略-“-gt-”，换成空格" class="headerlink" title="6.2 省略 “&gt;”，换成空格"></a>6.2 省略 “&gt;”，换成空格</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//混合集</span></span><br><span class="line"><span class="selector-id">#bgcolor</span>() &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="selector-class">.a</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.b</span>() &#123;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bgcolor1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfee0</span>;</span><br><span class="line">  <span class="selector-id">#bgcolor</span> <span class="selector-class">.a</span>;     <span class="comment">//只使用.a()</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor2</span> &#123;</span><br><span class="line">  <span class="selector-id">#bgcolor</span> <span class="selector-class">.a</span> <span class="selector-class">.b</span>;  <span class="comment">//只使用.b()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.bgcolor1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfee0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor1</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="7-引入"><a href="#7-引入" class="headerlink" title="7. 引入"></a>7. 引入</h2><ul>
<li>引入一个或多个文件，这些文件定义的规则可在当前less文件中使用</li>
<li>使用@import</li>
</ul>
<h3 id="7-1-引入less文件"><a href="#7-1-引入less文件" class="headerlink" title="7.1 引入less文件"></a>7.1 引入less文件</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.less</span></span><br><span class="line"><span class="variable">@wp:</span> <span class="number">960px</span>;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当前less文件</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;main&quot;</span>; <span class="comment">//可以不加后缀,必须加分号</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="7-2-引入css文件"><a href="#7-2-引入css文件" class="headerlink" title="7.2 引入css文件"></a>7.2 引入css文件</h3><ul>
<li>注意：不能混合css的规则到项目中，编译后原样输出“@import xxx.css”</li>
<li>并且引入时不能省略后缀名</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.css</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;main.css&quot;</span> ;<span class="comment">//必须加后缀</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;main.css&quot;</span>;  <span class="comment">//原样输出,但有效，css有这条语句</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="7-3-带参数的引入-import-“-x2F-…”"><a href="#7-3-带参数的引入-import-“-x2F-…”" class="headerlink" title="7.3 带参数的引入 @import () “..&#x2F;…”"></a>7.3 带参数的引入 @import () “..&#x2F;…”</h3><h4 id="once：默认，只引入一次"><a href="#once：默认，只引入一次" class="headerlink" title="once：默认，只引入一次"></a>once：默认，只引入一次</h4><h4 id="reference：使用less文件但不输出，注意对比上面的例子（-不使用会输出没有加括号的混合）"><a href="#reference：使用less文件但不输出，注意对比上面的例子（-不使用会输出没有加括号的混合）" class="headerlink" title="reference：使用less文件但不输出，注意对比上面的例子（ 不使用会输出没有加括号的混合）"></a>reference：使用less文件但不输出，注意对比上面的例子（ 不使用会输出没有加括号的混合）</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@wp:</span> <span class="number">960px</span>;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当前less文件</span></span><br><span class="line"><span class="keyword">@import</span> (reference) <span class="string">&quot;main&quot;</span>;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="inline：在输出中包含less文件但是不能操作"><a href="#inline：在输出中包含less文件但是不能操作" class="headerlink" title="inline：在输出中包含less文件但是不能操作"></a>inline：在输出中包含less文件但是不能操作</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@wp:</span> <span class="number">960px</span>;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当前less文件</span></span><br><span class="line"><span class="keyword">@import</span> (inline) <span class="string">&quot;main&quot;</span>; </span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="variable">@wp:</span> <span class="number">960px</span>;    <span class="comment">//报错，@wp未知</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="less：将文件作为less文件对象，无论什么文件扩展名"><a href="#less：将文件作为less文件对象，无论什么文件扩展名" class="headerlink" title="less：将文件作为less文件对象，无论什么文件扩展名"></a>less：将文件作为less文件对象，无论什么文件扩展名</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.css文件</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当前less</span></span><br><span class="line"><span class="keyword">@import</span> (less) <span class="string">&quot;main.css&quot;</span>;</span><br><span class="line">  <span class="selector-class">.content</span> &#123;</span><br><span class="line"><span class="selector-class">.color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="css：将文件作为css文件对象，无论什么文件扩展名"><a href="#css：将文件作为css文件对象，无论什么文件扩展名" class="headerlink" title="css：将文件作为css文件对象，无论什么文件扩展名"></a>css：将文件作为css文件对象，无论什么文件扩展名</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当前less文件</span></span><br><span class="line"><span class="keyword">@import</span> (css) <span class="string">&quot;main.less&quot;</span>;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;main.less&quot;</span>;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="multiple：允许引入多次相同文件名的文件"><a href="#multiple：允许引入多次相同文件名的文件" class="headerlink" title="multiple：允许引入多次相同文件名的文件"></a>multiple：允许引入多次相同文件名的文件</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当前less</span></span><br><span class="line"><span class="keyword">@import</span> (multiple) <span class="string">&quot;main.less&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> (multiple) <span class="string">&quot;main.less&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> (multiple) <span class="string">&quot;main.less&quot;</span>;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>



<h2 id="8-important"><a href="#8-important" class="headerlink" title="8. !important"></a>8. !important</h2><ul>
<li>提升权重优先级为最高（尽量避免使用）</li>
<li>在调用的混合集后面追加 !important 关键字，混合集中所有属性都继承 !important</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.foo</span>(<span class="variable">@bg</span>: <span class="number">#fdfdfd</span>, <span class="variable">@color</span>: <span class="number">#900</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">@bg</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="selector-class">.foo</span>() !important</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfdfd</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#990000</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="9-条件表达式"><a href="#9-条件表达式" class="headerlink" title="9. 条件表达式"></a>9. 条件表达式</h2><h3 id="9-1-带条件的混合"><a href="#9-1-带条件的混合" class="headerlink" title="9.1 带条件的混合"></a>9.1 带条件的混合</h3><ul>
<li>比较运算符：&gt;, &gt;&#x3D;, &#x3D;, &#x3D;&lt;, &lt;</li>
<li>格式：when() { }</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lightness() 是检测亮度的函数，用%度量</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span>(<span class="built_in">lightness</span>(<span class="variable">@a</span>) &gt;= <span class="number">50%</span> ) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span>(<span class="built_in">lightness</span>(<span class="variable">@a</span>) &lt; <span class="number">50%</span> ) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#ddd</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#555</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#dddddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555555</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="9-2-类型检测函数"><a href="#9-2-类型检测函数" class="headerlink" title="9.2 类型检测函数"></a>9.2 类型检测函数</h3><ul>
<li>检测值的类型</li>
</ul>
<blockquote>
<ul>
<li>iscolor</li>
<li>isnumber</li>
<li>isstring</li>
<li>iskeyword</li>
<li>isurl</li>
</ul>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>: <span class="number">#fff</span>; <span class="variable">@b</span>: <span class="number">0</span>) <span class="keyword">when</span>(<span class="built_in">isnumber</span>(<span class="variable">@b</span>)) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@a</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="variable">@b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>; <span class="variable">@b</span>: black) <span class="keyword">when</span>(<span class="built_in">iscolor</span>(<span class="variable">@b</span>)) &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="variable">@a</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@b</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="9-3-单位检测函数"><a href="#9-3-单位检测函数" class="headerlink" title="9.3 单位检测函数"></a>9.3 单位检测函数</h3><ul>
<li>检测一个值除了数字是否是一个特定的单位</li>
</ul>
<blockquote>
<ul>
<li>ispixel</li>
<li>ispercentage</li>
<li>isem</li>
<li>isunit</li>
</ul>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span>(<span class="built_in">ispixel</span>(<span class="variable">@a</span>)) &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span>(<span class="built_in">ispercentage</span>(<span class="variable">@a</span>)) &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">960px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">95%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="10-循环"><a href="#10-循环" class="headerlink" title="10. 循环"></a>10. 循环</h2><ul>
<li>混合可以调用自身，当一个混合递归调用自身就构成循环结构</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loop</span>(<span class="variable">@counter</span>) <span class="keyword">when</span>(<span class="variable">@counter</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="selector-class">.h</span><span class="variable">@&#123;counter&#125;</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: (<span class="number">10px</span>*<span class="variable">@counter</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.loop</span>((<span class="variable">@counter</span> - <span class="number">1</span>)); <span class="comment">//递归调用自身</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="selector-class">.loop</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h5</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h4</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h3</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h2</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h1</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="11-合并属性"><a href="#11-合并属性" class="headerlink" title="11. 合并属性"></a>11. 合并属性</h2><ul>
<li>将多条规则合并为一条</li>
</ul>
<h3 id="11-1-方式一"><a href="#11-1-方式一" class="headerlink" title="11.1 方式一"></a>11.1 方式一</h3><ul>
<li>在需要合并的属性的冒号之前加上 <strong>“+”</strong>，合并后用逗号分隔</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>+: inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>+: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#555</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> black; <span class="comment">//逗号分隔两个属性值</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="11-2-方式二"><a href="#11-2-方式二" class="headerlink" title="11.2 方式二"></a>11.2 方式二</h3><ul>
<li>在需要合并的属性的冒号之前加上 “+_”，合并用空格分隔</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="attribute">background</span>+_: <span class="number">#f66</span>;</span><br><span class="line">  <span class="attribute">background</span>+_: <span class="built_in">url</span>(<span class="string">&quot;/sss.jpg&quot;</span>) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译输出</span></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f66</span> <span class="built_in">url</span>(<span class="string">&quot;/sss.jpg&quot;</span>); <span class="comment">//空格分隔</span></span><br><span class="line">&#125; </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="11-3-两种方式结合"><a href="#11-3-两种方式结合" class="headerlink" title="11.3 两种方式结合"></a>11.3 两种方式结合</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="attribute">background</span>+_: <span class="number">#f66</span>;</span><br><span class="line">  <span class="attribute">background</span>+: <span class="built_in">url</span>(<span class="string">&quot;/sss.jpg&quot;</span>);</span><br><span class="line">  <span class="attribute">background</span>+_: no-repeat;</span><br><span class="line">  <span class="attribute">background</span>+: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//编译输出</span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f66</span>, <span class="built_in">url</span>(<span class="string">&quot;/sss.jpg&quot;</span>)  no-repeat, center;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="12-函数库"><a href="#12-函数库" class="headerlink" title="12. 函数库"></a>12. 函数库</h2><ul>
<li>less中封装了非常多函数库，例如颜色定义、颜色操作、颜色混合、字符串处理等等</li>
<li>例如color()：用于解析颜色，将代表颜色的字符串转换为颜色值</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">color</span>(<span class="string">&quot;#f60&quot;</span>);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">color</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//编译输出</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>例如convert()：将数字从一种类型（单位）转换为另一种类型</li>
</ul>
<blockquote>
<ul>
<li>长度单位：m, cm, mm, in, pt, px, pc</li>
<li>时间单位：s, ms</li>
<li>角度单位：rad(弧度), deg(度), grad(梯度), tum(圆)</li>
</ul>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">convert</span>(<span class="number">20cm</span>, px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//编译输出</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">755.90551181px</span>;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>更多函数<a href="https://link.juejin.cn/?target=http://lesscss.cn/functions/">前往官网</a>查看！</li>
</ul>
<h2 id="13-导出"><a href="#13-导出" class="headerlink" title="13.导出"></a>13.导出</h2><h4 id="导入less文件："><a href="#导入less文件：" class="headerlink" title="导入less文件："></a><strong>导入less文件：</strong></h4><p>第一种方法：<br>直接将所有的.less文件编译成的.css文件全部link引入到html中，但比较麻烦。</p>
<p>第二种方法：<br>在less文件中书写代码：<br>语法：@import “文件路径”;<br>less文件可以省略后缀名</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span>:<span class="string">&quot;base&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span>:<span class="string">&quot;common&quot;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="导出less文件：-控制当前Less文件导出路径"><a href="#导出less文件：-控制当前Less文件导出路径" class="headerlink" title="导出less文件：(控制当前Less文件导出路径)"></a><strong>导出less文件：(控制当前Less文件导出路径)</strong></h4><p><strong>在Less文件的第一行添加如下代码</strong>, <em>注意文件夹名称后面务必要加 &#x2F;</em><br><strong>如果没有css文件，会自动新建一个css文件，如果添加在了第二行，会当成注释解析。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// out:../css/</span><br></pre></td></tr></table></figure>

<p><strong>禁止导出less文件：</strong><br>在less文件第一行添加如下代码：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// out: false</span></span><br></pre></td></tr></table></figure>

<p>导出的第二种方法配置Easy less插件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;less.compile&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;out&quot;</span><span class="punctuation">:</span> <span class="string">&quot;../css/&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>


    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/Less/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-React" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/React/">React</a>
	
    </h1>
  


  
  
<a href="/React/" class="archive-article-date">
        <time datetime="2023-02-16T14:41:52.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/">中文官网</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/xzlaptt/React">参考笔记1</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/linjunc/react-study">参考笔记2</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/linjunc/react-study">参考笔记3</a></p>
<h2 id="React简介"><a href="#React简介" class="headerlink" title="React简介"></a>React简介</h2><p><strong>react是什么？</strong></p>
<p>React用于构建用户界面的JS库。是一个将数据渲染为HTML视图的开源JS库。</p>
<p><img src="/React/6JCTWHzQ5vCgtp7SBMrvzw.png" alt="img"></p>
<p><img src="/React/qrsGxg00swjEffJ9mZ7f6A.png" alt="img"></p>
<p><strong>为什么学？</strong></p>
<p>1.原生JS操作DOM繁琐，效率低</p>
<p>2.使用JS直接操作DOM,浏览器会进行大量的重绘重排</p>
<p>3.原生JS没有组件化编码方案，代码复用低</p>
<p>React的特点</p>
<p><img src="/React/Q5vwPzyDApdF0qwwVBVcVg.png" alt="img"></p>
<p><img src="/React/CIqpwKvZ7aheiVG3kJD2Ag.png" alt="img"></p>
<p><img src="/React/3-YqJtc6_B8wRAg1NX-wOw.png" alt="img"></p>
<p><img src="/React/_5FIjoAQSPZq3ADskCKWuw.png" alt="img"></p>
<p><img src="/React/qPKqlsQI9m98T2IWtgREnA.png" alt="img"></p>
<blockquote>
<p>在学习之前最好看一下关于npm的知识：下面是我在网上看见的一个写的还不错的npm的文章</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_25502269/article/details/79346545">npm</a></p>
</blockquote>
<h2 id="React入门"><a href="#React入门" class="headerlink" title="React入门"></a>React入门</h2><h3 id="React-基础案例"><a href="#React-基础案例" class="headerlink" title="React 基础案例"></a>React 基础案例</h3><p>1.先倒入三个包：</p>
<p>【先引入react.development.js，后引入react-dom.development.js】</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">react.<span class="property">development</span>.<span class="property">js</span> &lt;!-- 核心库 --&gt;</span><br><span class="line">react-dom.<span class="property">development</span>.<span class="property">js</span> &lt;!-- 扩展库 --&gt;</span><br><span class="line">babel.<span class="property">min</span>.<span class="property">js</span>  &lt;!-- 引入babel，用于将jsx转为js --&gt;</span><br></pre></td></tr></table></figure>

<p>2.创建一个容器</p>
<p>3.创建虚拟DOM，渲染到容器中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- 准备好容器 --&gt;</span><br><span class="line">    &lt;div id=&quot;test&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;!-- 引入依赖 ,引入的时候，必须就按照这个步骤--&gt;</span><br><span class="line">&lt;script src=&quot;../js/react.development.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;../js/react-dom.development.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/babel.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--这里使用了babel用来解析jsx语法--&gt;</span><br><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">        // 1.创建虚拟DOM</span><br><span class="line">        const VDOM = &lt;h1&gt;Hello&lt;/h1&gt;  //这个地方使用的是JSX语法，不需要加&quot;&quot;</span><br><span class="line">        // 2.渲染，如果有多个渲染同一个容器，后面的会将前面的覆盖掉</span><br><span class="line">        ReactDOM.render(VDOM,document.getElementById(&quot;test&quot;));        </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>这样，就会在页面中的这个div容器上添加这个h1。</p>
<p><img src="/React/1611196030416.png" alt="漂染结果"></p>
<h3 id="两种创建虚拟DOM的方式"><a href="#两种创建虚拟DOM的方式" class="headerlink" title="两种创建虚拟DOM的方式"></a>两种创建虚拟DOM的方式</h3><p><strong>1.使用JSX创建虚拟DOM</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">VDOM</span> = (</span><br><span class="line">    <span class="comment">//可以不加括号，加括号只是看起来像是一个整体</span></span><br><span class="line">           <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span> = <span class="string">&#123;MyId.toLocaleUpperCase()&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span> = <span class="string">&quot;sss&quot;</span> <span class="attr">style</span> = <span class="string">&#123;&#123;fontSize:</span>&#x27;<span class="attr">50px</span>&#x27;&#125;&#125;&gt;</span>sss<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">       )</span><br></pre></td></tr></table></figure>

<p>这个在上面的案例中已经表现了，下面看另外一种创建虚拟DOM的方式</p>
<p><strong>2.使用JS创建虚拟DOM</strong></p>
<p>这种写法不行，第三个参数为标签体内容</p>
<p><img src="/React/image-20221205013950522.png" alt="image-20221205013950522"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="comment">//1.创建虚拟DOM =&gt; React.createElement</span></span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">VDOM</span> = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>, &#123;<span class="attr">id</span>: <span class="string">&#x27;title&#x27;</span>&#125;, <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>, &#123;&#125;, <span class="string">&#x27;Hello,React&#x27;</span>))</span><br><span class="line"><span class="comment">//2.渲染虚拟DOM到页面</span></span><br><span class="line">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用JS和JSX都可以创建虚拟DOM，但是可以看出来JS创建虚拟DOM比比较繁琴，尤其是标签如果很多的情况下，所以还是比较推荐使用JSX。</p>
<h3 id="真实-x2F-虚拟DOM比较"><a href="#真实-x2F-虚拟DOM比较" class="headerlink" title="真实&#x2F;虚拟DOM比较"></a><strong>真实&#x2F;虚拟DOM比较</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;3_虚拟DOM与真实DOM&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- 准备好一个“容器” --&gt;</span><br><span class="line">&lt;div id=&quot;test&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;demo&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 引入react核心库 --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- 引入react-dom，用于支持react操作DOM --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- 引入babel，用于将jsx转为js --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot;&gt;/* 此处一定要写babel */</span><br><span class="line">//1.创建虚拟DOM</span><br><span class="line">const VDOM = (  /* 此处一定不要写引号，因为不是字符串 */</span><br><span class="line">    &lt;h1 id=&quot;title&quot;&gt;</span><br><span class="line">		&lt;span&gt;Hello,React&lt;/span&gt;</span><br><span class="line">	&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line">//2.渲染虚拟DOM到页面</span><br><span class="line">ReactDOM.render(VDOM, document.getElementById(&#x27;test&#x27;))</span><br><span class="line"></span><br><span class="line">const TDOM = document.getElementById(&#x27;demo&#x27;)</span><br><span class="line">console.log(&#x27;虚拟DOM&#x27;, VDOM);</span><br><span class="line">console.log(&#x27;真实DOM&#x27;, TDOM);</span><br><span class="line">debugger;</span><br><span class="line">// console.log(typeof VDOM);</span><br><span class="line">// console.log(VDOM instanceof Object);</span><br><span class="line">/*</span><br><span class="line">    关于虚拟DOM：</span><br><span class="line">       1.本质是Object类型的对象（一般对象）</span><br><span class="line">       2.虚拟DOM比较“轻”，真实DOM比较“重”，因为虚拟DOM是React内部在用，无需真实DOM上那么多的属性。</span><br><span class="line">       3.虚拟DOM最终会被React转化为真实DOM，呈现在页面上。</span><br><span class="line"> */</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="JSX基础语言法"><a href="#JSX基础语言法" class="headerlink" title="JSX基础语言法"></a>JSX基础语言法</h3><p><img src="/React/iXhbgWkTc6OEp7YhrqZT3w" alt="img"></p>
<p>1.定义虚拟DOM，不能使用引号，（加引号会识别成字符串，不能解析标签）</p>
<p>2.标签中混入JS表达式的时候使用{}</p>
<p>3.样式的类名指定不要使用class ，使用className</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span>.内联式要使用双大花括号包&#123;&#123;&#125;&#125;（即在标签内写）（注意加引号，不加引号读的是变量）</span><br><span class="line">style = &#123;&#123;fontSize:<span class="string">&#x27;50px&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>



<p>5.不能有多个根标签，只能有一个根标签</p>
<p>6.标签必须关闭合</p>
<p>7.标签首字母</p>
<p>​		（1）若以<strong>小写字母开头</strong>，则将改标签转化为html中同名元素，<strong>若html中无该对应的同名元素，则报错</strong></p>
<p>​		（2）若以大写字母开头，react就去渲染对应的组件，若组件没有定义，则报错</p>
<blockquote>
<p>关于JS表达式和JS语句：</p>
<p>JS表示达式：返回一个值，可以放在任何一个需要值的地方a a+b demo(a) arr.map() function text(){}</p>
<p>JS语句：if(){} for(){} while (){} swith(){} 不会返回一个值</p>
</blockquote>
<p>实例如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .sss&#123;</span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- 准备好容器 --&gt;</span><br><span class="line">    &lt;div id=&quot;test&quot;&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;!-- 引入依赖 ,引入的时候，必须就按照这个步骤--&gt;</span><br><span class="line">&lt;script src=&quot;../js/react.development.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;../js/react-dom.development.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--这里使用了js来创建虚拟DOM--&gt;</span><br><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">        const MyId = &quot;title&quot;;</span><br><span class="line">        const MyData = &quot;Cyk&quot;;</span><br><span class="line">        // 1.创建虚拟DOM</span><br><span class="line">        const VDOM = (</span><br><span class="line">            &lt;h1 id = &#123;MyId.toLocaleUpperCase()&#125;&gt;</span><br><span class="line">                &lt;span className = &quot;sss&quot; style = &#123;&#123;fontSize:&#x27;50px&#x27;&#125;&#125;&gt;sss&lt;/span&gt;</span><br><span class="line">            &lt;/h1&gt;</span><br><span class="line">        )</span><br><span class="line">        // 2.渲染，如果有多个渲染同一个容器，后面的会将前面的覆盖掉</span><br><span class="line">        ReactDOM.render(VDOM,document.getElementById(&quot;test&quot;));</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="jsx语法练习"><a href="#jsx语法练习" class="headerlink" title="jsx语法练习"></a><strong>jsx语法练习</strong></h3><p>注释写法</p>
<blockquote>
<p>使用花括号将内容转化为js代码在使用js的注释方法</p>
</blockquote>
<blockquote>
<p><strong>react默认会遍历数组,但是对象不能遍历报错如下</strong></p>
</blockquote>
<p><img src="/React/dYDuV1hKrgeWmuCQvzO0JA.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;!-- 核心库 --&gt;</span><br><span class="line">  &lt;script src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;!-- 扩展库 --&gt;</span><br><span class="line">  &lt;script src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;!-- 引入babel，用于将jsx转为js --&gt;</span><br><span class="line">  &lt;script src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">    // 数组类型默认可以遍历</span><br><span class="line">    let data = [&#x27;vue&#x27;, &#x27;react&#x27;, &#x27;angular&#x27;];</span><br><span class="line">    // 但对象默认不能遍历</span><br><span class="line">    let obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    let VDOM = (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;前端&lt;/h1&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &#123;</span><br><span class="line">            data.map((item, index, array) =&gt; &#123;//return 返回处理后的值</span><br><span class="line">              // </span><br><span class="line">              // return &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt;</span><br><span class="line">              // 下列均不行</span><br><span class="line">              // return &lt;li&gt;item&lt;/li&gt;</span><br><span class="line">              return &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt;;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          &#123;</span><br><span class="line">            data.forEach((item, index, array) =&gt; &#123;</span><br><span class="line">              array[index] = &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          &#123;</span><br><span class="line">            data</span><br><span class="line">          &#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(VDOM, document.getElementById(&#x27;root&#x27;));</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<p><strong>表达式vs语句</strong></p>
<p>可以写表达式不能写js语句</p>
<p><img src="/React/ROGIG3tYrZ49vgMb2GFADA.png" alt="img"></p>
<p><strong>唯一key</strong></p>
<p><img src="/React/UrsIlyWilqycNXiS6XQfKg.png" alt="img"></p>
<h3 id="模块组件化理解"><a href="#模块组件化理解" class="headerlink" title="模块组件化理解"></a><strong>模块组件化理解</strong></h3><p><img src="/React/c5r7PQA9yIGRsor8oQbh5Q.png" alt="img"></p>
<p><img src="/React/image-20221130175348994.png" alt="image-20221130175348994"></p>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><h3 id="创建函数式组件"><a href="#创建函数式组件" class="headerlink" title="创建函数式组件"></a><strong>创建函数式组件</strong></h3><p>适用于简单组件的构建,同时方法名称首字母必须大写,区分普通html标签</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误写法</span></span><br><span class="line">    <span class="comment">//创建函数式组件</span></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">let</span> <span class="title class_">Vdemo</span> =(</span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">     );</span><br><span class="line">     <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>适用于简单组件的定义<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 渲染组件到页面上</span></span><br><span class="line">   <span class="comment">// 函数不能作为react的节点去使用</span></span><br><span class="line"></span><br><span class="line">   <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(demo,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>函数不能作为react的节点去使用</p>
</blockquote>
<p><img src="/React/image-20221211181615403.png" alt="image-20221211181615403"></p>
<blockquote>
<p>正确写法</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  	//创建函数式组件</span><br><span class="line"> 	// 函数名和组件名要对应上</span><br><span class="line">// this为undefined，因为bable会自动开启严格模式</span><br><span class="line">function Demo()&#123;</span><br><span class="line">     return (</span><br><span class="line">         // 可以嵌套</span><br><span class="line">       &lt;div&gt;</span><br><span class="line">         &lt;h1&gt;适用于简单组件的定义&lt;/h1&gt;</span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">     )</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   // 渲染组件到页面上</span><br><span class="line">   // react会去调用函数</span><br><span class="line">   ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;root&#x27;));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>1.React解析组件标签，找到了MyComponent组件。<br>2.发现组件是使用函数定义的，随后调用该函数，</p>
<p>3、将返回的虚拟DOM转为真实DOM，随后呈现在页面中。</p>
</blockquote>
<h3 id="创建类式组件"><a href="#创建类式组件" class="headerlink" title="创建类式组件"></a>创建类式组件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">    <span class="comment">// 创建一个类组件，必须继承React.Component类</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Mycomponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">      <span class="comment">// 必须有render并且有返回值</span></span><br><span class="line">      <span class="comment">//render()放在Mycomponent的原型对象上，供Mycomponent实例对象使用的</span></span><br><span class="line">      <span class="comment">//render中的this是谁？—— MyComponent的实例对象 &lt;=&gt; MyComponent组件实例对象。</span></span><br><span class="line">      <span class="comment">//2.发现组件是使用类定义的，**随后new出来该类的实例，并通过该实例调用到原型上的render方法。**</span></span><br><span class="line">      <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>类定义组件，适用于复杂组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// React自动创建了实例对象</span></span><br><span class="line">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Mycomponent</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>1.React解析组件标签，找到了MyComponent组件。</p>
<p>2.发现组件是使用类定义的，<strong>随后new出来该类的实例，并通过该实例调用到原型上的render方法。</strong></p>
<p>3.将render返回的虚拟DOM转为真实DOM，随后呈现在页面中。</p>
</blockquote>
<h2 id="组件实例的三大属性"><a href="#组件实例的三大属性" class="headerlink" title="组件实例的三大属性"></a>组件实例的三大属性</h2><h3 id="状态state"><a href="#状态state" class="headerlink" title="状态state"></a>状态state</h3><blockquote>
<p>如果组件有状态(state)的则为复杂组件</p>
<p>如果没有状态则为简单组件</p>
</blockquote>
<blockquote>
<p>状态state中定义数据</p>
<p>组件实例对象上的</p>
</blockquote>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>state<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- 准备好一个“容器” --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- 引入react核心库 --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- 引入react-dom，用于支持react操作DOM --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- 引入babel，用于将jsx转为js --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//1.创建组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">class</span> <span class="title class_">Weather</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//构造器调用几次？ ———— 1次</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;constructor&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 必须调用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          	<span class="variable language_">super</span>(props)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//初始化状态</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="attr">isHot</span>: <span class="literal">false</span>, <span class="attr">wind</span>: <span class="string">&#x27;微风&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//解决changeWeather中this指向问题，方法一使用bind方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">changeWeather</span> = <span class="variable language_">this</span>.<span class="property">changeWeather</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//render调用几次？ ———— 1+n次 1是初始化的那次 n是状态更新的次数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;render&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//读取状态</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">const</span> &#123;isHot, wind&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeWeather&#125;</span>&gt;</span>今天天气很&#123;isHot ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;&#125;，&#123;wind&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            )</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//changeWeather调用几次？ ———— 点几次调几次</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">changeWeather</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//changeWeather放在哪里？ ———— Weather的原型对象上，供实例使用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//由于changeWeather是作为onClick的回调，所以不是通过实例调用的，是直接调用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//类中的方法默认开启了局部的严格模式，所以changeWeather中的this为undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;changeWeather&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//获取原来的isHot值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">const</span> isHot = <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">isHot</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//严重注意：状态必须通过setState进行更新,且更新是一种合并，不是替换。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 只是将setState中的对象于state中数据进行合并</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">isHot</span>: !isHot&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//严重注意：状态(state)不可直接更改，下面这行就是直接更改！！！</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//this.state.isHot = !isHot //这是错误的写法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//2.渲染组件到页面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Weather</span>/&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<h4 id="简写形式"><a href="#简写形式" class="headerlink" title="简写形式"></a>简写形式</h4><blockquote>
<p>类中可以直接写赋值语句，并且该变量最后会添加到实例对象上</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">	b =<span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="title function_">A</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); &#123;<span class="attr">b</span>:<span class="number">10</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>故简写形式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Mycomponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">      <span class="comment">// 初始化数据需要接受外部数据时必须写constructor</span></span><br><span class="line">      state = &#123;<span class="attr">str</span>:<span class="literal">false</span>&#125;</span><br><span class="line">    <span class="comment">// 函数写成箭头函数解决this指向问题</span></span><br><span class="line">      demo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> str;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(&#123; <span class="string">&quot;this.state.str&quot;</span>: !<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">str</span> &#125;);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">str</span>:!<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">str</span>&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.demo&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span> &gt;</span>今天天气很&#123;this.state.str ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>



<h4 id="注意项"><a href="#注意项" class="headerlink" title="注意项"></a>注意项</h4><blockquote>
<p>react中的标签事件于原生的不一样格式由oncick&#x3D;&gt;onClick(大写)</p>
<p>并且值不能是字符串必须是函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 onClick=&#123;demo&#125;&gt;&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p>但要注意react{}的使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这里是将函数的返回值给了onClick</span><br><span class="line">而且事件绑定无效</span><br><span class="line">&lt;h1 onClick=&#123;<span class="title function_">demo</span>()&#125;&gt;&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p>render 中的this为什么为组件实例对象而不是更其他类方法一样是undefined的</p>
<blockquote>
<p>1.React解析组件标签，找到了MyComponent组件。</p>
<p>2.发现组件是使用类定义的，<strong>随后new出来该类的实例，并通过该实例调用到原型上的render方法。</strong></p>
<p>3.将render返回的虚拟DOM转为真实DOM，随后呈现在页面中。</p>
</blockquote>
<h4 id="回顾"><a href="#回顾" class="headerlink" title="回顾"></a>回顾</h4><p>事件绑定</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;button id=<span class="string">&quot;btn1&quot;</span>&gt;按钮<span class="number">1</span>&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 标签内绑定事件在事件被触发时执行引号内的js代码</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;demo()&quot;</span>&gt;</span>按钮3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> btn1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn1&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">btn1.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">alert</span>(<span class="string">&#x27;按钮1被点击了&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> btn2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn2&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">btn2.<span class="property">onclick</span> = <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">alert</span>(<span class="string">&#x27;按钮2被点击了&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">alert</span>(<span class="string">&#x27;按钮3被点击了&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>类中this指向问题</p>
<blockquote>
<p><strong>类中方法this指向<br>防止this指向丢失才使用的赋值语句+箭头函数来实现</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">&gt;demo=<span class="function">()=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">&gt;&#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="comment">//study方法放在了哪里？——类的原型对象上，供实例使用</span></span><br><span class="line">            <span class="comment">//通过Person实例调用study时，study中的this就是Person实例</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;tom&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">	p1.<span class="title function_">study</span>() <span class="comment">//通过实例调用study方法</span></span><br><span class="line">    <span class="keyword">const</span> x = p1.<span class="property">study</span></span><br><span class="line">    <span class="title function_">x</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">demo01</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;this&#x27;</span>, <span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">demo02</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// &#x27;use strict&#x27;</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;this&#x27;</span>, <span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="title function_">demo01</span>()</span><br><span class="line"><span class="title function_">demo02</span>()</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/m_UjIk1HoT-NduGhTXeHRg.png" alt="img"></p>
<p><strong>解决类中this指向</strong></p>
<p>构造器中的this一定是类的实例对象,原型方法也一定是给实例调用的,实例调用方法那么方法中的this就是实例,类中方法都开启了局部严格模式所以this都是undefine</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解决changeWeather中this指向问题,其实就是改变this指向</span></span><br><span class="line"><span class="comment">// bind是改变函数中的this并返回一个新的函数</span></span><br><span class="line"> <span class="variable language_">this</span>.<span class="property">changeWeather</span> = <span class="variable language_">this</span>.<span class="property">changeWeather</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/image-20221212163556839.png" alt="image-20221212163556839"></p>
<h3 id="prop"><a href="#prop" class="headerlink" title="prop"></a>prop</h3><h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><blockquote>
<p>给组件传递数据,并将数据存放在组件实例对象的props属性上</p>
<p>可以通过this.props访问到</p>
</blockquote>
<blockquote>
<p>props是只读的</p>
<p>修改会报错</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class Mycomponent extends React.Component &#123;</span><br><span class="line">      render() &#123;</span><br><span class="line">		let &#123;name,sex,age&#125; = this.props;</span><br><span class="line">        return (</span><br><span class="line">          &lt;div &gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li&gt;姓名：&#123;name&#125;&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;年龄：&#123;age&#125;&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;性别：&#123;sex&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    var VDOM = (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Mycomponent name=&#x27;tom&#x27; sex=&#x27;女&#x27; age=&quot;18&quot; /&gt;</span><br><span class="line">        &lt;Mycomponent name=&#x27;tom2&#x27; sex=&#x27;男&#x27; age=&quot;18&quot; /&gt;</span><br><span class="line">        &lt;Mycomponent name=&#x27;tom3&#x27; sex=&#x27;女&#x27; age=&#x27;17&#x27; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">    // React自动创建了实例对象</span><br><span class="line">    ReactDOM.render(VDOM, document.getElementById(&#x27;root&#x27;));</span><br></pre></td></tr></table></figure>

<h4 id="简写形式-1"><a href="#简写形式-1" class="headerlink" title="简写形式"></a>简写形式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个类组件，必须继承React.Component类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mycomponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="comment">// 必须有render并且有返回值</span></span><br><span class="line">  <span class="comment">//render在Mycomponent的原型对象上，供Mycomponent实例对象使用的</span></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; name, age, sex &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>年龄：&#123;age&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="title class_">PropTypes</span>.<span class="property">number</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 制定限制</span></span><br><span class="line"><span class="comment">// Mycomponent.propTypes = &#123;</span></span><br><span class="line"><span class="comment">//   // 16版本使用PropTypes属性必须引入prop-type依赖文件</span></span><br><span class="line"><span class="comment">//   // string 限制类型 isRequired 必须填写项</span></span><br><span class="line"><span class="comment">//   name:PropTypes.string.isRequired,</span></span><br><span class="line"><span class="comment">//   sex:PropTypes.string,</span></span><br><span class="line"><span class="comment">//   age: PropTypes.string,</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//限制默认值</span></span><br><span class="line"><span class="comment">// Mycomponent.defaultProps = &#123;</span></span><br><span class="line"><span class="comment">//   set: &#x27;男&#x27;,</span></span><br><span class="line"><span class="comment">//   age: 18</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">VDOM</span> = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Mycomponent</span> <span class="attr">sex</span>=<span class="string">&#x27;男&#x27;</span> <span class="attr">age</span>=<span class="string">&#123;18&#125;</span> /&gt;</span></span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// React自动创建了实例对象</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br></pre></td></tr></table></figure>





<h4 id="展开运算符在react的特殊情况"><a href="#展开运算符在react的特殊情况" class="headerlink" title="展开运算符在react的特殊情况"></a>展开运算符在react的特殊情况</h4><blockquote>
<p>原生js中直接写 …p不加花括号为错误的</p>
<p>let  p &#x3D; {name&#x3D;’asd’};</p>
<p>…p （错误的写法）{…p}是对的</p>
<p>在babel加react时可以直接使用…p，但也只是在组件标签中写有用</p>
<p><strong>其他地方写不会报错但无效</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  class Mycomponent extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">let &#123;name,sex,age&#125; = this.props;</span><br><span class="line">      return (</span><br><span class="line">        &lt;div &gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">	  &lt;li&gt;姓名：&#123;name&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;年龄：&#123;age&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;性别：&#123;sex&#125;&lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  let p = &#123;name:&#x27;tom&#x27;,sex:&#x27;女&#x27;,age:20&#125;;</span><br><span class="line">  console.log(...p); // 无效</span><br><span class="line">  // 下面写在组件标签中的有效</span><br><span class="line">  // 前提是引入了racte和babel</span><br><span class="line">  var VDOM = (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Mycomponent &#123;...p&#125; /&gt;  </span><br><span class="line">      &lt;Mycomponent name=&#x27;tom2&#x27; sex=&#x27;男&#x27; age=&quot;18&quot; /&gt;</span><br><span class="line">      &lt;Mycomponent name=&#x27;tom3&#x27; sex=&#x27;女&#x27; age=&#x27;17&#x27; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">  // React自动创建了实例对象</span><br><span class="line">  ReactDOM.render(VDOM, document.getElementById(&#x27;root&#x27;));</span><br></pre></td></tr></table></figure>



<h4 id="对props进行限制"><a href="#对props进行限制" class="headerlink" title="对props进行限制"></a>对props进行限制</h4><p>使用propTypes制定规则</p>
<p>vue写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">	<span class="attr">name</span>:&#123;</span><br><span class="line">	<span class="attr">type</span>:<span class="title class_">String</span>, <span class="comment">//类型</span></span><br><span class="line">	<span class="attr">required</span>:<span class="literal">true</span>, <span class="comment">//必要性</span></span><br><span class="line">	<span class="attr">default</span>:<span class="string">&#x27;老王&#x27;</span> <span class="comment">//默认值</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>react写法</p>
<p>15.5即以前版本写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">类名.<span class="property">propTypes</span> =&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="title class_">React</span>.<span class="property">PropTypes</span>.<span class="property">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>16版本弃用了PropTypes属性写法</p>
<p>需要引入prop-types依赖包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;root&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;!-- 核心库 --&gt;</span><br><span class="line">  &lt;script src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;!-- 扩展库 --&gt;</span><br><span class="line">  &lt;script src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;!-- 引入babel，用于将jsx转为js --&gt;</span><br><span class="line">  &lt;script src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;../js/prop-types.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line"></span><br><span class="line">    // 创建一个类组件，必须继承React.Component类</span><br><span class="line">    class Mycomponent extends React.Component &#123;</span><br><span class="line">      // 必须有render并且有返回值</span><br><span class="line">      //render在Mycomponent的原型对象上，供Mycomponent实例对象使用的</span><br><span class="line">      render() &#123;</span><br><span class="line">        let &#123;name,age,sex&#125; = this.props;</span><br><span class="line">        return (</span><br><span class="line">          &lt;div &gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li&gt;姓名：&#123;name&#125;&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;年龄：&#123;age&#125;&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;性别：&#123;sex&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 制定限制</span><br><span class="line">    Mycomponent.propTypes = &#123;</span><br><span class="line">      // 16版本使用PropTypes属性必须引入prop-type依赖文件</span><br><span class="line">      // string 限制类型 isRequired 必须填写项</span><br><span class="line">      name:PropTypes.string.isRequired,</span><br><span class="line">      sex:PropTypes.string,</span><br><span class="line">      age: PropTypes.string,</span><br><span class="line">    &#125;</span><br><span class="line">    //限制默认值</span><br><span class="line">    Mycomponent.defaultProps = &#123;</span><br><span class="line">      set:&#x27;男&#x27;,</span><br><span class="line">      age:18</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // React自动创建了实例对象</span><br><span class="line">    ReactDOM.render(&lt;Mycomponent name=&#x27;tom&#x27; sex=&#x27;男&#x27; age=&quot;18&quot; /&gt;, </span><br><span class="line">    document.getElementById(&#x27;root&#x27;));</span><br><span class="line">    </span><br><span class="line">    // 这种限制配置写法在下列渲染方式无效</span><br><span class="line">    var VDOM = (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Mycomponent name=&#123;12&#125; sex=&#x27;男&#x27; age=&quot;18&quot; /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">	ReactDOM.render(&lt;Mycomponent name=&#x27;tom&#x27; sex=&#x27;男&#x27; age=&quot;18&quot; /&gt;, </span><br><span class="line">    document.getElementById(&#x27;root&#x27;));</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>限制类型</p>
<p>string 、number、object 不与js的关键字String、Number、Object冲突</p>
<p>但function不能写与js中的冲突了</p>
<p>故在react中使用<code>func</code>代替</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">类名.<span class="property">propTypes</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>, <span class="comment">// 限定为字符串，并且必传</span></span><br><span class="line">    <span class="attr">sex</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>, <span class="comment">// 限定为字符串类型</span></span><br><span class="line">	<span class="attr">age</span>:<span class="title class_">PropTypes</span>.<span class="property">number</span>, <span class="comment">// 限定为数值类型</span></span><br><span class="line">    <span class="attr">speack</span>:<span class="title class_">PropTypes</span>.<span class="property">func</span> <span class="comment">// 限定为函数类型</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 限制默认项</span></span><br><span class="line">类名.<span class="property">defaultProps</span> = &#123;</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="类中的构造器与props"><a href="#类中的构造器与props" class="headerlink" title="类中的构造器与props"></a>类中的构造器与props</h4><blockquote>
<p>在 React 组件挂载之前，会调用它的构造函数。在为 React.Component 子类实现构造函数时，应在其他语句之前调用 <code>super(props)</code>。否则，<code>this.props</code> 在构造函数中可能会出现未定义的 bug。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- 核心库 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 扩展库 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 引入babel，用于将jsx转为js --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/prop-types.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建一个类组件，必须继承React.Component类</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">class</span> <span class="title class_">Mycomponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 构造器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 不给也行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//构造器是否接收props，是否传递给super，取决于：是否希望在构造器中通过this访问props</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 构造器接受后可以直接通过参数prop访问数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">super</span>(props);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// this.state = &#123;&#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 必须有render并且有返回值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//render在Mycomponent的原型对象上，供Mycomponent实例对象使用的</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> &#123; name, age, sex &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> (</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> &gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>年龄：&#123;age&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      )</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// static propTypes = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   name: PropTypes.string.isRequired,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   age: PropTypes.number,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   sex: PropTypes.string</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// static defaultProps = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   sex: &#x27;男&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   age: 18</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 制定限制</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Mycomponent</span>.<span class="property">propTypes</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 16版本使用PropTypes属性必须引入prop-type依赖文件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// string 限制类型 isRequired 必须填写项</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">sex</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">age</span>: <span class="title class_">PropTypes</span>.<span class="property">number</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//限制默认值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Mycomponent</span>.<span class="property">defaultProps</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">set</span>: <span class="string">&#x27;男&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">age</span>: <span class="number">18</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> <span class="variable constant_">VDOM</span> = (</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">      <span class="tag">&lt;<span class="name">Mycomponent</span> <span class="attr">name</span>=<span class="string">&#x27;tom&#x27;</span> <span class="attr">sex</span>=<span class="string">&#x27;男&#x27;</span> <span class="attr">age</span>=<span class="string">&#123;18&#125;</span> /&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">      <span class="tag">&lt;<span class="name">Mycomponent</span> <span class="attr">name</span>=<span class="string">&#x27;tom&#x27;</span> <span class="attr">sex</span>=<span class="string">&#x27;男&#x27;</span> <span class="attr">age</span>=<span class="string">&#123;18&#125;</span> /&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  )</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// React自动创建了实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意</p>
<p><strong>避免将 props 的值复制给 state！这是一个常见的错误：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;constructor(props) &#123;</span><br><span class="line">&gt;super(props);</span><br><span class="line">&gt;// 不要这样做</span><br><span class="line">&gt;this.state = &#123; color: props.color &#125;;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>如此做毫无必要（你可以直接使用 <code>this.props.color</code>），同时还产生了 bug（更新 prop 中的 <code>color</code> 时，并不会影响 state）。</p>
<p><strong>只有在你刻意忽略 prop 更新的情况下使用。</strong>此时，应将 prop 重命名为 <code>initialColor</code> 或 <code>defaultColor</code>。必要时，你可以<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key">修改它的 <code>key</code></a>，以强制“重置”其内部 state。</p>
<p>请参阅关于<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html">避免派生状态的博文</a>，以了解出现 state 依赖 props 的情况该如何处理。</p>
</blockquote>
<h4 id="函数组件的props"><a href="#函数组件的props" class="headerlink" title="函数组件的props"></a>函数组件的props</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Mycomponent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; name, age, sex &#125; = props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;age&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 有效</span></span><br><span class="line">  <span class="title class_">Mycomponent</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">idRequired</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(&lt; <span class="title class_">Mycomponent</span>  age=&#123;<span class="number">18</span>&#125; sex=<span class="string">&#x27;男&#x27;</span> /&gt;, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><blockquote>
<p>相当与id属性,与vue类似</p>
</blockquote>
<blockquote>
<p>官网解释</p>
<p>React 支持一个特殊的、可以附加到任何组件上的 <code>ref</code> 属性。此属性可以是一个由 <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-api.html#reactcreateref"><code>React.createRef()</code> 函数</a>创建的对象、或者一个回调函数、或者一个字符串（遗留 API）。当 <code>ref</code> 属性是一个回调函数时，此函数会（根据元素的类型）接收底层 DOM 元素或 class 实例作为其参数。这能够让你直接访问 DOM 元素或组件实例。</p>
</blockquote>
<h4 id="字符串形式的ref（不推荐使用了不久后可能会被废弃）"><a href="#字符串形式的ref（不推荐使用了不久后可能会被废弃）" class="headerlink" title="字符串形式的ref（不推荐使用了不久后可能会被废弃）"></a>字符串形式的ref（不推荐使用了不久后可能会被废弃）</h4><blockquote>
<p><strong>过时 API：String 类型的 Refs</strong></p>
<p>如果你之前使用过 React，你可能了解过之前的 API 中的 string 类型的 ref 属性，例如 <code>&quot;textInput&quot;</code>。你可以通过 <code>this.refs.textInput</code> 来访问 DOM 节点。我们不建议使用它，因为 string 类型的 refs 存在 <a target="_blank" rel="noopener" href="https://github.com/facebook/react/pull/8333#issuecomment-271648615">一些问题</a>。它已过时并可能会在未来的版本被移除。</p>
</blockquote>
<blockquote>
<p>存在效率问题写多了后效率不高</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Preson</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    hint = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">// console.log(this.refs.input1)</span></span><br><span class="line">      <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">refs</span>.<span class="property">input1</span>.<span class="property">value</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    hint1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// console.log(this.refs.input1)</span></span><br><span class="line">      <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">refs</span>.<span class="property">input2</span>.<span class="property">value</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span> = <span class="string">&#x27;input1&#x27;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.hint&#125;</span>&gt;</span>点击提示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#x27;input2&#x27;</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.hint1&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Preson</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="回调函数形式的ref"><a href="#回调函数形式的ref" class="headerlink" title="回调函数形式的ref"></a>回调函数形式的ref</h4><blockquote>
<p>React 也支持另一种设置 refs 的方式，称为“回调 refs”。它能助你更精细地控制何时 refs 被设置和解除。</p>
<p>不同于传递 <code>createRef()</code> 创建的 <code>ref</code> 属性，你会传递一个函数。这个函数中接受 React <strong>组件实例或 HTML DOM 元素作为参数，</strong>以使它们能在其他地方被存储和访问。</p>
<p>下面的例子描述了一个通用的范例：使用 <code>ref</code> 回调函数，在实例的属性中存储对 DOM 节点的引用。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CustomTextInput</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textInput</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setTextInputRef</span> = <span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">textInput</span> = element;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">focusTextInput</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 使用原生 DOM API 使 text 输入框获得焦点</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">textInput</span>) <span class="variable language_">this</span>.<span class="property">textInput</span>.<span class="title function_">focus</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 组件挂载后，让文本框自动获得焦点</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">focusTextInput</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 使用 `ref` 的回调函数将 text 输入框 DOM 节点的引用存储到 React</span></span><br><span class="line">    <span class="comment">// 实例上（比如 this.textInput）</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">ref</span>=<span class="string">&#123;this.setTextInputRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&quot;Focus the text input&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;this.focusTextInput&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>react自动调用了ref中的回调函数，并接收一个参数</p>
<p>参数为当前DOM元素或组件实例对象</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Preson</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    hint = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">// console.log(this.refs.input1)</span></span><br><span class="line">      <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">input1</span>.<span class="property">value</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    hint1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// console.log(this.refs.input1)</span></span><br><span class="line">      <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">input2</span>.<span class="property">value</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span> = <span class="string">&#123;(c)</span>=&gt;</span>&#123;this.input1 = c&#125;&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.hint&#125;</span>&gt;</span>点击提示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;(c)</span>=&gt;</span>&#123;this.input2 = c&#125;&#125; onBlur=&#123;this.hint1&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Preson</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br></pre></td></tr></table></figure>



<h4 id="ref-的回调函数定义成-class-的绑定函数的方式"><a href="#ref-的回调函数定义成-class-的绑定函数的方式" class="headerlink" title="ref 的回调函数定义成 class 的绑定函数的方式"></a>ref 的回调函数定义成 class 的绑定函数的方式</h4><blockquote>
<p>class函数写法只在初始化的时候执行一次，数据更新时不会执行</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">    class Preson extends React.Component &#123;</span><br><span class="line">      state = &#123;</span><br><span class="line">        name:&quot;&quot;</span><br><span class="line">      &#125;</span><br><span class="line">      hint = () =&gt; &#123;</span><br><span class="line">        this.setState(&#123;name:&quot;preson&quot;&#125;);</span><br><span class="line">        alert(this.input1.value)</span><br><span class="line">      &#125;</span><br><span class="line">      refClass = (c)=&gt;&#123;</span><br><span class="line">        console.log(&quot;class函数写法&quot;,c)</span><br><span class="line">        this.input2 = c</span><br><span class="line">      &#125;</span><br><span class="line">      render() &#123;</span><br><span class="line">        return (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &#123;/* 内联函数写法 */ &#125;</span><br><span class="line">            &lt;input type=&quot;text&quot; ref=&#123;(c) =&gt; &#123; this.input1 = c; console.log(&quot;内联函数写法&quot;, c) &#125;&#125; /&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; ref=&#123;this.refClass&#125; /&gt;</span><br><span class="line">            &lt;button onClick=&#123;this.hint&#125;&gt;点击提示&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ReactDOM.render(&lt;Preson /&gt;, document.getElementById(&#x27;root&#x27;));</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/React/image-20221213113209674.png" alt="image-20221213113209674"></p>
<h4 id="createRef-形式的ref"><a href="#createRef-形式的ref" class="headerlink" title="createRef() 形式的ref"></a>createRef() 形式的ref</h4><blockquote>
<p>Refs 是使用 <code>React.createRef()</code> 创建的，并通过 <code>ref</code> 属性附加到 React 元素。在构造组件时，通常将 Refs 分配给实例属性，以便可以在整个组件中引用它们。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.myRef = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div ref=&#123;this.myRef&#125; /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> React.createRef调用后可以返回一个容器，该容器可以存储被ref所标识的节点,该容器是“专人专用”的只能存放一个ref标识的节点,容器名重名时后写的会代替前一个</p>
<p> 故一个节点要配置一个</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">  class Preson extends React.Component &#123;</span><br><span class="line">    input1 = React.createRef()</span><br><span class="line">    input2 = React.createRef()</span><br><span class="line">    showData = ()=&gt;&#123;</span><br><span class="line">      console.log(this.input1)</span><br><span class="line">        console.log(this.input1.current.value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">      return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">               &#123;// 这个会被下面使用同名的代替</span><br><span class="line">              &#125;</span><br><span class="line">          &lt;input type=&quot;text&quot; ref=&#123;this.input1&#125;/&gt;</span><br><span class="line">             </span><br><span class="line">              &lt;input type=&quot;text&quot; ref=&#123;this.input1&#125;/&gt;</span><br><span class="line">          &lt;input type=&quot;text&quot; ref=&#123;this.input2&#125; /&gt;</span><br><span class="line">          &lt;button onClick=&#123;this.showData&#125;&gt;打印ref数据&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ReactDOM.render(&lt;Preson /&gt;,document.getElementById(&quot;root&quot;));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/React/image-20221213131342346.png" alt="image-20221213131342346"></p>
<h4 id="注意项-1"><a href="#注意项-1" class="headerlink" title="注意项"></a>注意项</h4><blockquote>
<p><strong>关于回调 refs 的说明</strong></p>
<p>如果 <code>ref</code> 回调函数是以内联函数的方式定义的，在<strong>更新过程中它会被执行两次</strong>，第一次传入参数 <code>null</code>，然后第二次会传入参数 DOM 元素。这是<strong>因为在每次渲染时会创建一个<em>新的函数实例</em>，所以 React 清空旧的 ref 并且设置新的。</strong>通过将 <strong>ref 的回调函数定义成 class 的绑定函数的方式</strong>可以避免上述问题，但是大多数情况下它是无关紧要的。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Preson</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">      state = &#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">      hint = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">         <span class="comment">// 更改state使页面重新渲染并调用render</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">name</span>:<span class="string">&quot;preson&quot;</span>&#125;);</span><br><span class="line">        <span class="comment">// console.log(this.refs.input1)</span></span><br><span class="line">        <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">input1</span>.<span class="property">value</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;(c)</span> =&gt;</span> &#123; this.input1 = c; console.log(&quot;@&quot;, c) &#125;&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.hint&#125;</span>&gt;</span>点击提示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Preson</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p><img src="/React/image-20221213105028232.png" alt="image-20221213105028232"></p>
<h2 id="react事件处理"><a href="#react事件处理" class="headerlink" title="react事件处理"></a>react事件处理</h2><blockquote>
<ul>
<li>React 事件的命名采用小驼峰式（camelCase），而不是纯小写。</li>
<li>使用 JSX 语法时你需要<strong>传入一个函数作为事件处理函数，而不是一个字符串。</strong></li>
</ul>
</blockquote>
<blockquote>
<p>(1).通过onXxx属性指定事件处理函数(注意大小写)</p>
<p>​     a.React使用的是自定义(合成)事件, 而不是使用的原生DOM事件 —————— 为了更好的兼容性</p>
<p>​     b.React中的事件是通过事件委托方式处理的(委托给组件最外层的元素) ————————为了的高效</p>
<p>(2).通过event.target得到发生事件的DOM元素对象 ——————————不要过度使用ref</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">//创建组件</span><br><span class="line">    class Demo extends React.Component &#123;</span><br><span class="line">/* </span><br><span class="line">   (1).通过onXxx属性指定事件处理函数(注意大小写)</span><br><span class="line">      a.React使用的是自定义(合成)事件, 而不是使用的原生DOM事件 —————— 为了更好的兼容性</span><br><span class="line">      b.React中的事件是通过事件委托方式处理的(委托给组件最外层的元素) ————————为了的高效</span><br><span class="line">   (2).通过event.target得到发生事件的DOM元素对象 ——————————不要过度使用ref</span><br><span class="line">         */</span><br><span class="line">        //创建ref容器</span><br><span class="line">    myRef = React.createRef()</span><br><span class="line">	myRef2 = React.createRef()</span><br><span class="line"></span><br><span class="line">//展示左侧输入框的数据</span><br><span class="line">    showData = (event) =&gt; &#123;</span><br><span class="line">		console.log(event.target);</span><br><span class="line">		alert(this.myRef.current.value);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">//展示右侧输入框的数据</span><br><span class="line">    showData2 = (event) =&gt; &#123;</span><br><span class="line">		alert(event.target.value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;input ref=&#123;this.myRef&#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;&amp;nbsp;</span><br><span class="line">    &lt;button onClick=&#123;this.showData&#125;&gt;点我提示左侧的数据&lt;/button&gt;&amp;nbsp;</span><br><span class="line">    &lt;input onBlur=&#123;this.showData2&#125; type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;&amp;nbsp;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//渲染组件到页面</span><br><span class="line">    ReactDOM.render(&lt;Demo a=&quot;1&quot; b=&quot;2&quot;/&gt;, document.getElementById(&#x27;test&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="react收集表单数据"><a href="#react收集表单数据" class="headerlink" title="react收集表单数据"></a>react收集表单数据</h2><h3 id="受控组件"><a href="#受控组件" class="headerlink" title="受控组件"></a>受控组件</h3><blockquote>
<p>在 HTML 中，表单元素（如<code>&lt;input&gt;</code>、 <code>&lt;textarea&gt;</code> 和 <code>&lt;select&gt;</code>）通常自己维护 state，并根据用户输入进行更新。而在 React 中，可变状态（mutable state）通常保存在组件的 state 属性中，并且只能通过使用 <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#setstate"><code>setState()</code></a>来更新。</p>
<p>我们可以把两者结合起来，使 React 的 state 成为“唯一数据源”。渲染表单的 React 组件还控制着用户输入过程中表单发生的操作。被 React 以这种方式控制取值的表单输入元素就叫做“受控组件”。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">	//创建组件</span><br><span class="line">    class Login extends React.Component &#123;</span><br><span class="line"></span><br><span class="line">		//初始化状态</span><br><span class="line">        state = &#123;</span><br><span class="line">			username: &#x27;&#x27;, //用户名</span><br><span class="line">            password: &#x27;&#x27; //密码</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//保存用户名到状态中</span><br><span class="line">        saveUsername = (event) =&gt; &#123;</span><br><span class="line">			this.setState(&#123;username: event.target.value&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//保存密码到状态中</span><br><span class="line">        savePassword = (event) =&gt; &#123;</span><br><span class="line">			this.setState(&#123;password: event.target.value&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//表单提交的回调</span><br><span class="line">        handleSubmit = (event) =&gt; &#123;</span><br><span class="line">            event.preventDefault() //阻止表单提交</span><br><span class="line">            const &#123;username, password&#125; = this.state</span><br><span class="line">            alert(`你输入的用户名是：$&#123;username&#125;,你输入的密码是：$&#123;password&#125;`)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">	render() &#123;</span><br><span class="line">		return (</span><br><span class="line">			&lt;form onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">			用户名：&lt;input onChange=&#123;this.saveUsername&#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="line">			密码：&lt;input onChange=&#123;this.savePassword&#125; type=&quot;password&quot; name=&quot;password&quot;/&gt;</span><br><span class="line">				&lt;button&gt;登录&lt;/button&gt;</span><br><span class="line">			&lt;/form&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//渲染组件</span><br><span class="line">    ReactDOM.render(&lt;Login/&gt;, document.getElementById(&#x27;test&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h3 id="非受控组件"><a href="#非受控组件" class="headerlink" title="非受控组件"></a>非受控组件</h3><blockquote>
<p>在大多数情况下，我们推荐使用 <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/forms.html#controlled-components">受控组件</a> 来处理表单数据。在一个受控组件中，表单数据是由 React 组件来管理的。另一种替代方案是使用非受控组件，这时表单数据将交由 DOM 节点来处理。</p>
<p>要编写一个非受控组件，而不是为每个状态更新都编写数据处理函数，你可以 <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html">使用 ref</a> 来从 DOM 节点中获取表单数据。</p>
</blockquote>
<blockquote>
<p>　　<strong>非受控组件现用现取</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">//创建组件</span><br><span class="line">    class Login extends React.Component &#123;</span><br><span class="line">		handleSubmit = (event) =&gt; &#123;</span><br><span class="line">            event.preventDefault() //阻止表单提交</span><br><span class="line">            const &#123;username, password&#125; = this</span><br><span class="line">            // 现用现取</span><br><span class="line">            alert(`你输入的用户名是：$&#123;username.value&#125;,你输入的密码是：$&#123;password.value&#125;`)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		render() &#123;</span><br><span class="line">			return (</span><br><span class="line">				&lt;form onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">					用户名：&lt;input ref=&#123;c =&gt; this.username = c&#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="line">					密码：&lt;input ref=&#123;c =&gt; this.password = c&#125; type=&quot;password&quot; name=&quot;password&quot;/&gt;</span><br><span class="line">					&lt;button&gt;登录&lt;/button&gt;</span><br><span class="line">				&lt;/form&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//渲染组件</span><br><span class="line">    ReactDOM.render(&lt;Login/&gt;, document.getElementById(&#x27;test&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="绑定事件并传参数"><a href="#绑定事件并传参数" class="headerlink" title="绑定事件并传参数"></a>绑定事件并传参数</h3><h4 id="函数的柯里化与非柯里化写法"><a href="#函数的柯里化与非柯里化写法" class="headerlink" title="函数的柯里化与非柯里化写法"></a>函数的柯里化与非柯里化写法</h4><blockquote>
<p>​               高阶函数：如果一个函数符合下面2个规范中的任何一个，那该函数就是高阶函数。</p>
<p>​                           1.若A函数，接收的参数是一个函数，那么A就可以称之为高阶函数。</p>
<p>​                           2.若A函数，调用的返回值依然是一个函数，那么A就可以称之为高阶函数。</p>
<p>​                           常见的高阶函数有：Promise、setTimeout、arr.map()等等</p>
<p>​           函数的柯里化：通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">  class Preson extends React.Component &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">      username: &quot;&quot;,</span><br><span class="line">      password: &quot;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    // 柯里化写法</span><br><span class="line">    savFrom = (dataType) =&gt; &#123;</span><br><span class="line">      return (e) =&gt; &#123;</span><br><span class="line">        // this.state[dataType] = e.target.value;</span><br><span class="line">        // this.setState(this.state)</span><br><span class="line">        console.log(dataType);</span><br><span class="line">        this.setState(&#123; [dataType]: event.target.value &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 非柯里化写法</span><br><span class="line">    gatherForm = (&#123; dataType, event &#125;) =&gt; &#123;</span><br><span class="line">      this.setState(&#123; [dataType]: event.target.value &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">      return (</span><br><span class="line">        &lt;form&gt;</span><br><span class="line">          用户名：&lt;input type=&quot;text&quot; onChange=&#123;this.savFrom(&quot;username&quot;)&#125; /&gt;</span><br><span class="line">          密  码：&lt;input type=&quot;password&quot; onChange=&#123;(event) =&gt; &#123; this.gatherForm(&#123; event, dataType: &quot;password&quot; &#125;) &#125;&#125; /&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ReactDOM.render(&lt;Preson /&gt;, document.getElementById(&quot;root&quot;))</span><br></pre></td></tr></table></figure>



<h2 id="生命周期钩子"><a href="#生命周期钩子" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h2><blockquote>
<p><strong>效果</strong></p>
<p><strong>需求定义组件实现以下功能：</strong></p>
<p><strong>1.</strong> <strong>让指定的文本做显示</strong> <strong>&#x2F;</strong> <strong>隐藏的渐变动画</strong></p>
<p><strong>2.</strong> <strong>从完全可见，到彻底消失，耗时</strong> <strong>2S</strong></p>
<p><strong>3.</strong> <strong>点击“不活了”按钮从界面中卸载组件</strong></p>
<p><img src="file:////tmp/wps-mc/ksohtml/wpsgDIqi9.png" alt="img"></p>
</blockquote>
<p>硬写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Preson</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">      state = &#123;</span><br><span class="line">        <span class="attr">judge</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">opacity</span>: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// var v; </span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">judge</span>) &#123;</span><br><span class="line">          <span class="comment">// 这样写会发出警告</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">judge</span>: <span class="literal">false</span>&#125;);</span><br><span class="line">          <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> &#123; opacity &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">            opacity = opacity &lt;= <span class="number">0</span> ? <span class="number">1</span> : opacity - <span class="number">0.1</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; opacity&#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">hok</span>.<span class="property">style</span>.<span class="property">opacity</span> = opacity</span><br><span class="line">          &#125;, <span class="number">500</span>)</span><br><span class="line">          <span class="comment">// console.log(1)</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 	setTimeout(() =&gt; &#123;</span></span><br><span class="line">        <span class="comment">//   let &#123; opacity &#125; = this.state;</span></span><br><span class="line">        <span class="comment">//   opacity = opacity &lt;= 0 ? 1 : opacity - 0.1</span></span><br><span class="line">        <span class="comment">//   this.setState(&#123; opacity &#125;);</span></span><br><span class="line">        <span class="comment">//   this.hok.style.opacity = opacity</span></span><br><span class="line">        <span class="comment">//   console.log(1)</span></span><br><span class="line">        <span class="comment">// &#125;, 500)</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">opacity:</span> &quot;<span class="attr">1</span>&quot; &#125;&#125; <span class="attr">ref</span>=<span class="string">&#123;(c)</span> =&gt;</span> &#123; this.hok = c &#125;&#125;&gt;react生命周期钩子!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Preson</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>))</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="借助生函数钩子"><a href="#借助生函数钩子" class="headerlink" title="借助生函数钩子"></a>借助生函数钩子</h3><blockquote>
<p>卸载组件调用ReactDOM.unmuntComponentAtNode(document.getElementById(“”))</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">    class Preson extends React.Component &#123;</span><br><span class="line">      state = &#123;</span><br><span class="line">        opacity: 1</span><br><span class="line">      &#125;</span><br><span class="line">      // 注意卸了组件后定时器任然存在没有被销毁，会报错</span><br><span class="line">      // 在卸载组件前一定要销毁定时器</span><br><span class="line">      terval = &quot;&quot;;</span><br><span class="line">      // 在组件挂载后（插入 DOM 树中）立即调用</span><br><span class="line">      componentDidMount() &#123;</span><br><span class="line">        console.log(this.terval)</span><br><span class="line">        console.log(this)</span><br><span class="line">        this.terval = setInterval(() =&gt; &#123;</span><br><span class="line">          let &#123; opacity &#125; = this.state;</span><br><span class="line">          opacity = opacity &lt;= 0 ? 1 : opacity - 0.25</span><br><span class="line">          this.setState(&#123; opacity &#125;);</span><br><span class="line">          this.hok.style.opacity = opacity</span><br><span class="line">        &#125;, 500)</span><br><span class="line">      &#125;</span><br><span class="line">      render() &#123;</span><br><span class="line"></span><br><span class="line">        return (</span><br><span class="line"></span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;h1 style=&#123;&#123; opacity: &quot;1&quot; &#125;&#125; ref=&#123;(c) =&gt; &#123; this.hok = c &#125;&#125;&gt;react生命周期钩子!&lt;/h1&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; &#123; ReactDOM.unmountComponentAtNode(document.getElementById(&quot;root&quot;)) &#125;&#125;&gt;销毁组件&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ReactDOM.render(&lt;Preson /&gt;, document.getElementById(&quot;root&quot;))</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="生命周期流程图（旧）"><a href="#生命周期流程图（旧）" class="headerlink" title="生命周期流程图（旧）"></a>生命周期流程图（旧）</h3><blockquote>
<ol>
<li><p>组件从创建到死亡它会经历一些特定的阶段。</p>
</li>
<li><p>React组件中包含一系列勾子函数(生命周期回调函数), 会在特定的时刻调用。</p>
</li>
<li><p>我们在定义组件时，会在特定的生命周期回调函数中，做特定的工作。</p>
</li>
</ol>
</blockquote>
<p> <img src="/React/image-20221213220712071-16709404333269.png" alt="image-20221213220712071"></p>
<p>更新</p>
<p><img src="/React/image-20221213231857457.png" alt="image-20221213231857457"></p>
<blockquote>
<p>生命周期的三个阶段（旧）</p>
<p><strong>由ReactDOM.render()触发—初次渲染</strong></p>
<ol>
<li><p>constructor()</p>
</li>
<li><p>componentWillMount()</p>
</li>
<li><p>render()</p>
</li>
<li><p>componentDidMount()</p>
</li>
</ol>
<p><strong>由组件内部this.setSate()或父组件重新render触发</strong></p>
<ol>
<li><p>shouldComponentUpdate()</p>
</li>
<li><p>componentWillUpdate()</p>
</li>
<li><p>render()</p>
</li>
<li><p>componentDidUpdate()</p>
</li>
</ol>
<p><strong>卸载组件由ReactDOM.unmountComponentAtNode()触发</strong></p>
<ol>
<li>componentWillUnmount()</li>
</ol>
</blockquote>
<blockquote>
<p>一、初始化阶段：</p>
<p><strong>由ReactDOM.render()触发—初次渲染</strong></p>
<ul>
<li>getDefaultProps:获取实例的默认属性 getInitialState:获取每个实例的初始化状态</li>
<li>componentWillMount：组件即将被挂载、渲染到页面上</li>
<li>render:组件在这里生成虚拟的DOM节点</li>
<li>componentDidMount:组件真正在被挂载之后[AJAX请求]</li>
</ul>
<p>二、更新阶段：</p>
<p>​	<strong>由组件内部this.setSate()或父组件重新render触发</strong></p>
<ul>
<li>componentWillReceiveProps:组件将要接收到props属性的时候调用(第一次传的不算)</li>
<li>shouldComponentUpdate:组件接受到新属性或者新状态的时候（可以返回false，接收数据后不更新，阻止render调用，后面的函数不会被继续执行了）</li>
<li>调用强制更新forceUpdate()绕过了阀门，不需要数据发生更新就可以</li>
<li>componentWillUpdate:组件即将更新不能修改属性和状态</li>
<li>render:组件重新描绘</li>
<li>componentDidUpdate:组件已经更新</li>
</ul>
<p>三、销毁阶段：</p>
<p><strong>卸载组件由ReactDOM.unmountComponentAtNode()触发</strong></p>
<ul>
<li>componentWillUnmount:组件即将销毁</li>
</ul>
</blockquote>
<blockquote>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line"></span><br><span class="line">    //创建组件</span><br><span class="line">    class Count extends React.Component &#123;</span><br><span class="line">		//构造器</span><br><span class="line">        constructor(props) &#123;</span><br><span class="line">			console.log(&#x27;Count---constructor&#x27;);</span><br><span class="line">			super(props)</span><br><span class="line">			//初始化状态</span><br><span class="line">            this.state = &#123;count: 0&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//加1按钮的回调</span><br><span class="line">        add = () =&gt; &#123;</span><br><span class="line">			//获取原状态</span><br><span class="line">            const &#123;count&#125; = this.state</span><br><span class="line">            //更新状态</span><br><span class="line">            this.setState(&#123;count: count + 1&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//卸载组件按钮的回调</span><br><span class="line">        death = () =&gt; &#123;</span><br><span class="line">			ReactDOM.unmountComponentAtNode(document.getElementById(&#x27;test&#x27;))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//强制更新按钮的回调</span><br><span class="line">        force = () =&gt; &#123;</span><br><span class="line">            // 强制更新,绕过了阀门，不需要数据发生更新就可以</span><br><span class="line">			this.forceUpdate()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//组件将要挂载的钩子</span><br><span class="line">        componentWillMount() &#123;</span><br><span class="line">			console.log(&#x27;Count---componentWillMount&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//组件挂载完毕的钩子</span><br><span class="line">        componentDidMount() &#123;</span><br><span class="line">			console.log(&#x27;Count---componentDidMount&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//组件将要卸载的钩子</span><br><span class="line">        componentWillUnmount() &#123;</span><br><span class="line">			console.log(&#x27;Count---componentWillUnmount&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//控制组件更新的“阀门”</span><br><span class="line">        shouldComponentUpdate() &#123;</span><br><span class="line">			console.log(&#x27;Count---shouldComponentUpdate&#x27;);</span><br><span class="line">			return true</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//组件将要更新的钩子</span><br><span class="line">        componentWillUpdate() &#123;</span><br><span class="line">			console.log(&#x27;Count---componentWillUpdate&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//组件更新完毕的钩子</span><br><span class="line">        componentDidUpdate() &#123;</span><br><span class="line">			console.log(&#x27;Count---componentDidUpdate&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		render() &#123;</span><br><span class="line">			console.log(&#x27;Count---render&#x27;);</span><br><span class="line">			const &#123;count&#125; = this.state</span><br><span class="line">            return (</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;h2&gt;当前求和为：&#123;count&#125;&lt;/h2&gt;</span><br><span class="line">					&lt;button onClick=&#123;this.add&#125;&gt;点我+1&lt;/button&gt;</span><br><span class="line">                    &lt;button onClick=&#123;this.death&#125;&gt;卸载组件&lt;/button&gt;</span><br><span class="line">					&lt;button onClick=&#123;this.force&#125;&gt;不更改任何状态中的数据，强制更新一下&lt;/button&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//父组件A</span><br><span class="line">    class A extends React.Component &#123;</span><br><span class="line">		//初始化状态</span><br><span class="line">        state = &#123;carName: &#x27;奔驰&#x27;&#125;</span><br><span class="line">		// 更新数据</span><br><span class="line">		changeCar = () =&gt; &#123;</span><br><span class="line">			this.setState(&#123;carName: &#x27;奥拓&#x27;&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		render() &#123;</span><br><span class="line">			return (</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;div&gt;我是A组件&lt;/div&gt;</span><br><span class="line">					&lt;button onClick=&#123;this.changeCar&#125;&gt;换车&lt;/button&gt;</span><br><span class="line">                    &#123;// 传递数据给子组件</span><br><span class="line">                    &#125;</span><br><span class="line">					&lt;B carName=&#123;this.state.carName&#125;/&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">            &#125;</span><br><span class="line">    	&#125;</span><br><span class="line"></span><br><span class="line">	//子组件B</span><br><span class="line">    class B extends React.Component &#123;</span><br><span class="line">		//组件将要接收新的props的钩子</span><br><span class="line">        componentWillReceiveProps(props) &#123;</span><br><span class="line">			console.log(&#x27;B---componentWillReceiveProps&#x27;, props);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//控制组件更新的“阀门”</span><br><span class="line">        shouldComponentUpdate() &#123;</span><br><span class="line">			console.log(&#x27;B---shouldComponentUpdate&#x27;);</span><br><span class="line">			return true</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//组件将要更新的钩子</span><br><span class="line">        componentWillUpdate() &#123;</span><br><span class="line">			console.log(&#x27;B---componentWillUpdate&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//组件更新完毕的钩子</span><br><span class="line">        componentDidUpdate() &#123;</span><br><span class="line">			console.log(&#x27;B---componentDidUpdate&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		render() &#123;</span><br><span class="line">			console.log(&#x27;B---render&#x27;);</span><br><span class="line">			return (</span><br><span class="line">				&lt;div&gt;我是B组件，接收到的车是:&#123;this.props.carName&#125;&lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	//渲染组件</span><br><span class="line">    ReactDOM.render(&lt;Count/&gt;, document.getElementById(&#x27;test&#x27;))</span><br><span class="line">    ReactDOM.render(&lt;A /&gt;, document.getElementById(&#x27;test1&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h3 id="生命周期流程图（新）"><a href="#生命周期流程图（新）" class="headerlink" title="生命周期流程图（新）"></a>生命周期流程图（新）</h3><blockquote>
<p>兼容了旧版本但将要的钩子是会发出警告</p>
<p><img src="/React/image-20221214102230446.png" alt="image-20221214102230446"></p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/blog/2018/03/27/update-on-async-rendering.html">官网解释</a></p>
<blockquote>
<p>每个组件都包含 “生命周期方法”，你可以重写这些方法，以便于在运行过程中特定的阶段执行这些方法。<strong>你可以使用此<a target="_blank" rel="noopener" href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">生命周期图谱</a>作为速查表</strong>。在下述列表中，常用的生命周期方法会被加粗。其余生命周期函数的使用则相对罕见。</p>
<p>挂载</p>
<p>当组件实例被创建并插入 DOM 中时，其生命周期调用顺序如下：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#constructor"><strong><code>constructor()</code></strong></a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#static-getderivedstatefromprops"><code>static getDerivedStateFromProps()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#render"><strong><code>render()</code></strong></a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#componentdidmount"><strong><code>componentDidMount()</code></strong></a></li>
</ul>
<blockquote>
<p>注意:</p>
<p>下述生命周期方法即将过时，在新代码中应该<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/blog/2018/03/27/update-on-async-rendering.html">避免使用它们</a>：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#unsafe_componentwillmount"><code>UNSAFE_componentWillMount()</code></a></li>
</ul>
</blockquote>
<p>更新</p>
<p>当组件的 props 或 state 发生变化时会触发更新。组件更新的生命周期调用顺序如下：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#static-getderivedstatefromprops"><code>static getDerivedStateFromProps()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#shouldcomponentupdate"><code>shouldComponentUpdate()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#render"><strong><code>render()</code></strong></a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#getsnapshotbeforeupdate"><code>getSnapshotBeforeUpdate()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#componentdidupdate"><strong><code>componentDidUpdate()</code></strong></a></li>
</ul>
<blockquote>
<p>注意:</p>
<p>下述方法即将过时，在新代码中应该<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/blog/2018/03/27/update-on-async-rendering.html">避免使用它们</a>：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#unsafe_componentwillupdate"><code>UNSAFE_componentWillUpdate()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#unsafe_componentwillreceiveprops"><code>UNSAFE_componentWillReceiveProps()</code></a></li>
</ul>
</blockquote>
</blockquote>
<p>解决方法</p>
<blockquote>
<p>将下面的函数钩子名字改成UNSAFE_name</p>
<p><img src="/React/image-20221214102927220.png" alt="image-20221214102927220"></p>
<p>例如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UNSAFE_componentDidMunt()&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>逐步迁移路径</p>
<p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/blog/2016/02/19/new-versioning-scheme.html">React 遵循语义版本控制</a>，因此这种变化将是逐步的。我们目前的计划是：</p>
<ul>
<li><strong>16.3</strong>：为不安全的生命周期引入别名，<code>UNSAFE_componentWillMount</code>、<code>UNSAFE_componentWillReceiveProps</code> 和 <code>UNSAFE_componentWillUpdate</code>。（旧的生命周期名称和新的别名都可以在此版本中使用。）</li>
<li><strong>未来 16.x 版本</strong>：为 <code>componentWillMount</code>、<code>componentWillReceiveProps</code> 和 <code>componentWillUpdate</code> 启用废弃告警。（旧的生命周期名称和新的别名都将在这个版本中工作，但是旧的名称在开发模式下会产生一个警告。）</li>
<li><strong>17.0</strong>：删除 <code>componentWillMount</code>、<code>componentWillReceiveProps</code> 和 <code>componentWillUpdate</code>。（在此版本之后，只有新的 “UNSAFE_” 生命周期名称可以使用。）</li>
</ul>
<p><strong>注意，如果你是 React 应用程序开发人员，则无需对这些过时的方法执行任何操作。即将发布的 16.3 版本的主要目的是使开源项目维护人员能够在任何废弃警告之前更新他们的库。在未来的 16.x 版本发布之前，不会启用这些警告。</strong></p>
<p><img src="/React/image-20221213211607931-16709373691677.png" alt="image-20221213211607931"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lGQ29va2ll,size_16,color_FFFFFF,t_70.png" alt="新版生命周期图解"></p>
<p>尚硅谷</p>
<blockquote>
<p>生命周期的三个阶段（新）</p>
<p><strong>初始化阶段由ReactDOM.render()触发—初次渲染</strong></p>
<ol>
<li><p>constructor()</p>
</li>
<li><p>getDerivedStateFromProps</p>
</li>
<li><p>render()</p>
</li>
<li><p>componentDidMount()</p>
</li>
</ol>
<p><strong>由组件内部this.setSate()或父组件重新render触发或强制更新this.forceUpdate()</strong></p>
<ol>
<li><p>getDerivedStateFromProps</p>
</li>
<li><p>shouldComponentUpdate()决定是否更新的阀门返回true开，返回false关(默认返回true)</p>
</li>
<li><p>render()</p>
</li>
<li><p>getSnapshotBeforeUpdate</p>
</li>
<li><p>componentDidUpdate()</p>
</li>
</ol>
<p><strong>卸载组件 由ReactDOM.unmountComponentAtNode()触发</strong></p>
<ol>
<li>componentWillUnmount()</li>
</ol>
<p>	</p>
</blockquote>
<blockquote>
<ol>
<li>初始化阶段: 由ReactDOM.render()触发—初次渲染<br>1. constructor()<br>2. getDerivedStateFromProps<br>3. render()<br>4. componentDidMount() &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt; 常用<br><br>  一般在这个钩子中做一些初始化的事，例如：开启定时器、发送网络请求、订阅消息<ol start="2">
<li><p>更新阶段: 由组件内部this.setSate()或父组件重新render触发</p>
<ol>
<li>getDerivedStateFromProps</li>
<li>shouldComponentUpdate()</li>
<li>render()</li>
<li>getSnapshotBeforeUpdate</li>
<li>componentDidUpdate()</li>
</ol>
</li>
<li><p>卸载组件: 由ReactDOM.unmountComponentAtNode()触发</p>
<ol>
<li>componentWillUnmount()  &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt; 常用</li>
</ol>
<p>一般在这个钩子中做一些收尾的事，例如：关闭定时器、取消订阅消息</p>
</li>
</ol>
</li>
</ol>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#reference">参考</a></p>
<h4 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount"></a>componentDidMount</h4><blockquote>
<p><code>componentDidMount()</code> 会<strong>在组件挂载后（插入 DOM 树中）立即调用</strong>。依赖于 DOM 节点的初始化应该放在这里。<strong>如需通过网络请求获取数据，此处是实例化请求的好地方。</strong></p>
<p>这个方法是比较适合添加订阅的地方。如果添加了订阅，请不要忘记在 <code>componentWillUnmount()</code> 里取消订阅</p>
<p>你可以在 <code>componentDidMount()</code> 里<strong>直接调用 <code>setState()</code><strong>。它</strong>将触发额外渲染</strong>，<strong>但此渲染会发生在浏览器更新屏幕之前</strong>。如此保证了即使在 <code>render()</code> 两次调用的情况下，用户也不会看到中间状态。<strong>请谨慎使用该模式，因为它会导致性能问题。</strong>通常，你应该在 <code>constructor()</code> 中初始化 state。如果你的渲染依赖于 DOM 节点的大小或位置，比如实现 modals 和 tooltips 等情况下，你可以使用此方式处理</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">    class Preson extends React.Component &#123;</span><br><span class="line">      state = &#123;</span><br><span class="line">        opacity: 1</span><br><span class="line">      &#125;</span><br><span class="line">      // 注意卸了组件后定时器任然存在没有被销毁，会报错</span><br><span class="line">      // 在卸载组件前一定要销毁定时器</span><br><span class="line">      terval = &quot;&quot;;</span><br><span class="line">      // 在组件挂载后（插入 DOM 树中）立即调用</span><br><span class="line">      componentDidMount() &#123;</span><br><span class="line">        console.log(this.terval)</span><br><span class="line">        console.log(this)</span><br><span class="line">        this.terval = setInterval(() =&gt; &#123;</span><br><span class="line">          let &#123; opacity &#125; = this.state;</span><br><span class="line">          opacity = opacity &lt;= 0 ? 1 : opacity - 0.25</span><br><span class="line">          this.setState(&#123; opacity &#125;);</span><br><span class="line">          this.hok.style.opacity = opacity</span><br><span class="line">        &#125;, 500)</span><br><span class="line">      &#125;</span><br><span class="line">      // 销毁前调用</span><br><span class="line">      componentWillUnmount()&#123;</span><br><span class="line">        clearInterval(this.terval)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      render() &#123;</span><br><span class="line"></span><br><span class="line">        return (</span><br><span class="line"></span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;h1 style=&#123;&#123; opacity: &quot;1&quot; &#125;&#125; ref=&#123;(c) =&gt; &#123; this.hok = c &#125;&#125;&gt;react生命周期钩子!&lt;/h1&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; &#123; ReactDOM.unmountComponentAtNode(document.getElementById(&quot;root&quot;)) &#125;&#125;&gt;销毁组件&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ReactDOM.render(&lt;Preson /&gt;, document.getElementById(&quot;root&quot;))</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p><img src="/React/image-20221213213455075.png" alt="image-20221213213455075"></p>
<h4 id="getDerivedStateFromProps"><a href="#getDerivedStateFromProps" class="headerlink" title="getDerivedStateFromProps"></a>getDerivedStateFromProps</h4><blockquote>
<p>新的<strong>静态</strong> <code>getDerivedStateFromProps</code> 生命周期方法在组件实例化之后以及重新渲染之前调用。它可以返回一个对象来更新 <code>state</code>，或者返回 <code>null</code> 来表示新的 <code>props</code> 不需要任何 <code>state</code> 的更新。</p>
</blockquote>
<blockquote>
<p>必须使用static修饰，必须有返回值并且必须是状态对象(this.state)或null</p>
</blockquote>
<p>返回的对象会与this.state进行合并更新</p>
<p><img src="/React/image-20221214123041727.png" alt="image-20221214123041727"></p>
<p><img src="/React/image-20221214123026819.png" alt="image-20221214123026819"></p>
<blockquote>
<p>​		&#x2F;&#x2F; <strong>返回值</strong>与state中的<strong>数据进行合并更新</strong></p>
<p>​          &#x2F;&#x2F; <strong>注意这里的this为undefined的</strong></p>
<p>​    	&#x2F;&#x2F; 返回的值会更新state的值，返回null时无影响</p>
<p>​      	&#x2F;&#x2F; 与this.state中的重复的属性不是无效更新了只是<strong>一直被返回的数据代替了</strong>(更新在前)</p>
<p>​		 &#x2F;&#x2F; 默认会接受到prop数据和state中的数据(参数名随意)</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">    class Preson extends React.Component &#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">          opacity: 1</span><br><span class="line">        &#125;</span><br><span class="line">        // 默认会接受到prop数据和state中的数据(参数名随意)</span><br><span class="line">        static getDerivedStateFromProps(props,state)&#123;</span><br><span class="line">          // 返回值与state中的数据进行合并更新</span><br><span class="line">          // 注意这里的this为undefined的</span><br><span class="line">          // 与this.state中的重复的属性不是无效更新了只是一直被prop的数据代替了</span><br><span class="line">          console.log(props,state)</span><br><span class="line">          return null</span><br><span class="line">        &#125;</span><br><span class="line">        updated =()=&gt; &#123;</span><br><span class="line">          this.setState(&#123;opacity:this.state.opacity + 1&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        render() &#123;</span><br><span class="line">          return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;h1&gt;react生命周期钩子!&#123;this.state.opacity&#125;&lt;/h1&gt;</span><br><span class="line">              &lt;button onClick=&#123;this.updated&#125;&gt;更新&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      ReactDOM.render(&lt;Preson name=&#123;10&#125;/&gt;, document.getElementById(&quot;root&quot;))</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="componentDidUpdate"><a href="#componentDidUpdate" class="headerlink" title="componentDidUpdate()"></a>componentDidUpdate()</h4><blockquote>
<p>会在更新完成后会被立即调用。首次渲染不会执行此方法。</p>
</blockquote>
<blockquote>
<p>更新后触发</p>
<p>默认接收三个参数旧的props和旧的state以及getSnapshotBeforeUpdate的返回值</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">    class Preson extends React.Component &#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">          opacity: 1</span><br><span class="line">        &#125;</span><br><span class="line">        // 默认会接受到prop数据和state中的数据(参数名随意)</span><br><span class="line">        static getDerivedStateFromProps(props,state)&#123;</span><br><span class="line">          // 将props中的数据与state中的数据进行合并</span><br><span class="line">          // 注意这里的this为undefined的</span><br><span class="line">          // 与this.state中的重复的属性不是无效更新了只是一直被prop的数据代替了</span><br><span class="line">          // console.log(props,state)</span><br><span class="line">          return null</span><br><span class="line">        &#125;</span><br><span class="line">        componentDidUpdate(oldProps,oldState)&#123;</span><br><span class="line"></span><br><span class="line">          console.log(&quot;旧的数据&quot;,oldProps,oldState)</span><br><span class="line">          return null</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        updated =()=&gt; &#123;</span><br><span class="line">          this.setState(&#123;opacity:this.state.opacity + 1&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        render() &#123;</span><br><span class="line">          return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;h1&gt;react生命周期钩子!&#123;this.state.opacity&#125;&lt;/h1&gt;</span><br><span class="line">              &lt;button onClick=&#123;this.updated&#125;&gt;销毁组件&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      ReactDOM.render(&lt;Preson name=&#123;10&#125;/&gt;, document.getElementById(&quot;root&quot;))</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/React/image-20221214132342755.png" alt="image-20221214132342755"></p>
<h4 id="getSnapshotBeforeUpdate"><a href="#getSnapshotBeforeUpdate" class="headerlink" title="getSnapshotBeforeUpdate"></a>getSnapshotBeforeUpdate</h4><blockquote>
<p><code>getSnapshotBeforeUpdate()</code> 在最近一次渲染输出（提交到 DOM 节点）之前调用。它使得组件能在发生更改之前从 DOM 中捕获一些信息（例如，滚动位置）。此生命周期方法的<strong>任何返回值将作为参数传递给</strong> <code>componentDidUpdate()</code>(第三个参数)。</p>
</blockquote>
<blockquote>
<p>此用法并不常见，但它可能出现在 UI 处理中，如需要以特殊方式处理滚动位置的聊天线程等。</p>
<p>应返回 snapshot 的值（或 <code>null</code>）。 </p>
</blockquote>
<p>案例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;../js/17.0.1/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;../js/17.0.1/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;../js/17.0.1/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">  class News extends React.Component &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">      newList: []</span><br><span class="line">    &#125;</span><br><span class="line">      /* </span><br><span class="line">      1. 初始化阶段: 由ReactDOM.render()触发---初次渲染</span><br><span class="line">        1. constructor()</span><br><span class="line">        2. getDerivedStateFromProps </span><br><span class="line">        3. render()</span><br><span class="line">        4. componentDidMount() =====&gt; 常用</span><br><span class="line">          一般在这个钩子中做一些初始化的事，例如：开启定时器、发送网络请求、订阅消息</span><br><span class="line">      2. 更新阶段: 由组件内部this.setSate()或父组件重新render触发</span><br><span class="line">        1. getDerivedStateFromProps</span><br><span class="line">        2. shouldComponentUpdate()</span><br><span class="line">        3. render()</span><br><span class="line">        4. getSnapshotBeforeUpdate</span><br><span class="line">        5. componentDidUpdate()</span><br><span class="line">      3. 卸载组件: 由ReactDOM.unmountComponentAtNode()触发</span><br><span class="line">        1. componentWillUnmount()  =====&gt; 常用</span><br><span class="line">          一般在这个钩子中做一些收尾的事，例如：关闭定时器、取消订阅消息</span><br><span class="line">    */</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">      setInterval(() =&gt; &#123;</span><br><span class="line">        let &#123; newList &#125; = this.state</span><br><span class="line">        // console.log(newList)</span><br><span class="line">        let news = &#x27;新闻&#x27; + (newList.length + 1);</span><br><span class="line">        console.log(news)</span><br><span class="line">        this.setState(&#123; newList: [news, ...newList] &#125;);</span><br><span class="line">      &#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line">    getSnapshotBeforeUpdate() &#123;</span><br><span class="line">      return this.refs.list.scrollHeight</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    componentDidUpdate(oldProps, oldstate, date) &#123;</span><br><span class="line">      let h1 = this.refs.list.scrollHeight</span><br><span class="line">      this.refs.list.scrollTop += h1 - date</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">      return (</span><br><span class="line">        &lt;div className=&quot;list&quot; ref=&#x27;list&#x27;&gt;</span><br><span class="line">          &#123;</span><br><span class="line">            this.state.newList.map((val, index) =&gt; &#123;</span><br><span class="line">              return &lt;div className=&#x27;news&#x27; key=&#123;index&#125;&gt;&#123;val&#125;&lt;/div&gt;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ReactDOM.render(&lt;News /&gt;, document.getElementById(&quot;root&quot;));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>SourceURL:file:&#x2F;&#x2F;&#x2F;media&#x2F;mc&#x2F;F&#x2F;笔记&#x2F;02-课件资料&#x2F;React&#x2F;react全家桶资料&#x2F;01_课件&#x2F;尚硅谷react全家桶.docx</p>
<h3 id="重要的勾子"><a href="#重要的勾子" class="headerlink" title="重要的勾子"></a>重要的勾子</h3><ol>
<li><p>render：初始化渲染或更新渲染调用</p>
</li>
<li><p>componentDidMount：开启监听, 发送ajax请求</p>
</li>
<li><p>componentWillUnmount：做一些收尾工作, 如: 清理定时器</p>
</li>
</ol>
<h3 id="即将废弃的勾子"><a href="#即将废弃的勾子" class="headerlink" title="即将废弃的勾子"></a>即将废弃的勾子</h3><ol>
<li><p>componentWillMount</p>
</li>
<li><p>componentWillReceiveProps</p>
</li>
<li><p>componentWillUpdate</p>
</li>
</ol>
<h2 id="dom-diffing算法"><a href="#dom-diffing算法" class="headerlink" title="dom diffing算法"></a><strong>dom diffing算法</strong></h2><h3 id="验证dom-diffing算法"><a href="#验证dom-diffing算法" class="headerlink" title="验证dom diffing算法"></a><strong>验证dom diffing算法</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;验证diff算法&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- 准备好一个“容器” --&gt;</span><br><span class="line">&lt;div id=&quot;test&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 引入react核心库 --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/17.0.1/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- 引入react-dom，用于支持react操作DOM --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/17.0.1/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- 引入babel，用于将jsx转为js --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/17.0.1/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">class Time extends React.Component &#123;</span><br><span class="line">state = &#123;date: new Date()&#125;</span><br><span class="line"></span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">setInterval(() =&gt; &#123;</span><br><span class="line">this.setState(&#123;</span><br><span class="line">date: new Date()</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;, 1000)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line">return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;h1&gt;hello&lt;/h1&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot;/&gt;</span><br><span class="line">                    &lt;span&gt;</span><br><span class="line">现在是：&#123;this.state.date.toTimeString()&#125;</span><br><span class="line">                        &lt;input type=&quot;text&quot;/&gt;</span><br><span class="line">                  &lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;Time/&gt;, document.getElementById(&#x27;test&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="react实现"><a href="#react实现" class="headerlink" title="react实现"></a><strong>react实现</strong></h3><p><img src="/React/NkFbZibfdpVoNKU1iK-Fxw.png" alt="img"></p>
<p><img src="/React/7pxBiZJhYGbZU-OppYWfeA.png" alt="img"></p>
<p><img src="/React/OTQgZxw00HHo2OneZw3Tug.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;key的作用&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;test&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;!-- 引入react核心库 --&gt;</span><br><span class="line">  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;!-- 引入react-dom --&gt;</span><br><span class="line">  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;!-- 引入babel --&gt;</span><br><span class="line">  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">    /*</span><br><span class="line">       经典面试题:</span><br><span class="line">          1). react/vue中的key有什么作用？（key的内部原理是什么？）</span><br><span class="line">          2). 为什么遍历列表时，key最好不要用index?</span><br><span class="line">    </span><br><span class="line">                1. 虚拟DOM中key的作用：</span><br><span class="line">                        1). 简单的说: key是虚拟DOM对象的标识, 在更新显示时key起着极其重要的作用。</span><br><span class="line">    </span><br><span class="line">                        2). 详细的说: 当状态中的数据发生变化时，react会根据【新数据】生成【新的虚拟DOM】,</span><br><span class="line">                                                    随后React进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：</span><br><span class="line">    </span><br><span class="line">                                        a. 旧虚拟DOM中找到了与新虚拟DOM相同的key：</span><br><span class="line">                                                    (1).若虚拟DOM中内容没变, 直接使用之前的真实DOM</span><br><span class="line">                                                    (2).若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM</span><br><span class="line">    </span><br><span class="line">                                        b. 旧虚拟DOM中未找到与新虚拟DOM相同的key</span><br><span class="line">                                                    根据数据创建新的真实DOM，随后渲染到到页面</span><br><span class="line">    </span><br><span class="line">                2. 用index作为key可能会引发的问题：</span><br><span class="line">                                    1. 若对数据进行：逆序添加、逆序删除等破坏顺序操作:</span><br><span class="line">                                                    会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</span><br><span class="line">    </span><br><span class="line">                                    2. 如果结构中还包含输入类的DOM：</span><br><span class="line">                                                    会产生错误DOM更新 ==&gt; 界面有问题。</span><br><span class="line">    </span><br><span class="line">                                    3. 注意！如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，</span><br><span class="line">                                        仅用于渲染列表用于展示，使用index作为key是没有问题的。</span><br><span class="line">    </span><br><span class="line">                3. 开发中如何选择key?:</span><br><span class="line">                                    1.最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号、学号等唯一值。</span><br><span class="line">                                    2.如果确定只是简单的展示数据，用index也是可以的。</span><br><span class="line">       */</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        慢动作回放----使用index索引值作为key</span><br><span class="line"></span><br><span class="line">            初始数据：</span><br><span class="line">                    &#123;id:1,name:&#x27;小张&#x27;,age:18&#125;,</span><br><span class="line">                    &#123;id:2,name:&#x27;小李&#x27;,age:19&#125;,</span><br><span class="line">            初始的虚拟DOM：</span><br><span class="line">                    &lt;li key=0&gt;小张---18&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li key=1&gt;小李---19&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">            更新后的数据：</span><br><span class="line">                    &#123;id:3,name:&#x27;小王&#x27;,age:20&#125;,</span><br><span class="line">                    &#123;id:1,name:&#x27;小张&#x27;,age:18&#125;,</span><br><span class="line">                    &#123;id:2,name:&#x27;小李&#x27;,age:19&#125;,</span><br><span class="line">            更新数据后的虚拟DOM：</span><br><span class="line">                    &lt;li key=0&gt;小王---20&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li key=1&gt;小张---18&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li key=2&gt;小李---19&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">    -----------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">    慢动作回放----使用id唯一标识作为key</span><br><span class="line"></span><br><span class="line">            初始数据：</span><br><span class="line">                    &#123;id:1,name:&#x27;小张&#x27;,age:18&#125;,</span><br><span class="line">                    &#123;id:2,name:&#x27;小李&#x27;,age:19&#125;,</span><br><span class="line">            初始的虚拟DOM：</span><br><span class="line">                    &lt;li key=1&gt;小张---18&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li key=2&gt;小李---19&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">            更新后的数据：</span><br><span class="line">                    &#123;id:3,name:&#x27;小王&#x27;,age:20&#125;,</span><br><span class="line">                    &#123;id:1,name:&#x27;小张&#x27;,age:18&#125;,</span><br><span class="line">                    &#123;id:2,name:&#x27;小李&#x27;,age:19&#125;,</span><br><span class="line">            更新数据后的虚拟DOM：</span><br><span class="line">                    &lt;li key=3&gt;小王---20&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li key=1&gt;小张---18&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li key=2&gt;小李---19&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     */</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line"></span><br><span class="line">      state = &#123;</span><br><span class="line">        persons: [</span><br><span class="line">          &#123; id: 1, name: &#x27;小张&#x27;, age: 18 &#125;,</span><br><span class="line">          &#123; id: 2, name: &#x27;小李&#x27;, age: 19 &#125;,</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      add = () =&gt; &#123;</span><br><span class="line">        const &#123; persons &#125; = this.state</span><br><span class="line">        const p = &#123; id: persons.length + 1, name: &#x27;小王&#x27;, age: 20 &#125;</span><br><span class="line">        this.setState(&#123; persons: [p, ...persons] &#125;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      render() &#123;</span><br><span class="line">        return (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;h2&gt;展示人员信息&lt;/h2&gt;</span><br><span class="line">            &lt;button onClick=&#123;this.add&#125;&gt;添加一个小王&lt;/button&gt;</span><br><span class="line">            &lt;h3&gt;使用index（索引值）作为key&lt;/h3&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &#123;</span><br><span class="line">                this.state.persons.map((personObj, index) =&gt; &#123;</span><br><span class="line">                  return &lt;li key=&#123;index&#125;&gt;&#123;personObj.name&#125;---&#123;personObj.age&#125;&lt;input type=&quot;text&quot; key=&#123;personObj.id&#125; /&gt;&lt;/li&gt;</span><br><span class="line">                &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">            &lt;hr /&gt;</span><br><span class="line">            &lt;hr /&gt;</span><br><span class="line">            &lt;h3&gt;使用id（数据的唯一标识）作为key&lt;/h3&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &#123;</span><br><span class="line">                this.state.persons.map((personObj) =&gt; &#123;</span><br><span class="line">                  return &lt;li key=&#123;personObj.id&#125;&gt;&#123;personObj.name&#125;---&#123;personObj.age&#125;&lt;input type=&quot;text&quot; /&gt;&lt;/li&gt;</span><br><span class="line">                &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Person /&gt;, document.getElementById(&#x27;test&#x27;))</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>





<h2 id="脚手架"><a href="#脚手架" class="headerlink" title="脚手架"></a>脚手架</h2><h3 id="react脚手架"><a href="#react脚手架" class="headerlink" title="react脚手架"></a>react脚手架</h3><ol>
<li><p>xxx脚手架: 用来帮助程序员快速创建一个基于xxx库的模板项目</p>
<ol>
<li><p>包含了所有需要的配置（语法检查、jsx编译、devServer…）</p>
</li>
<li><p>下载好了所有相关的依赖</p>
</li>
<li><p>可以直接运行一个简单效果</p>
</li>
</ol>
</li>
<li><p>react提供了一个用于创建react项目的脚手架库: create-react-app</p>
</li>
<li><p>项目的整体技术架构为:  react + webpack + es6 + eslint</p>
</li>
<li><p>使用脚手架开发的项目的特点: 模块化, 组件化, 工程化</p>
</li>
</ol>
<h3 id="创建项目并启动"><a href="#创建项目并启动" class="headerlink" title="创建项目并启动"></a>创建项目并启动</h3><p>第一步，全局安装：npm i -g create-react-app</p>
<p>第二步，切换到想创项目的目录，使用命令：create-react-app hello-react  [–temlate] typescript</p>
<p>第三步，进入项目文件夹：cd hello-react</p>
<p>第四步，启动项目：npm start</p>
<p><img src="/React/image-20221214172651124.png" alt="image-20221214172651124"></p>
<p><img src="/React/image-20221214172423631.png" alt="image-20221214172423631"></p>
<blockquote>
<ol>
<li>npm start或yarn start 运行项目</li>
<li>npm run build 或 yarn build 打包项目</li>
<li>npm test 或 yarn test 测试项目的</li>
<li>npm run eject 或 yarn  eject 显示webpack的配置文件暴露出来，暴露后无法在隐藏了</li>
</ol>
</blockquote>
<h3 id="脚手架项目结构"><a href="#脚手架项目结构" class="headerlink" title="脚手架项目结构"></a>脚手架项目结构</h3><p>​	public —- 静态资源文件夹</p>
<p>​		favicon.icon —— 网站页签图标</p>
<p>​		index.html——–主页面</p>
<p>​		logo192.png ——- logo图</p>
<p>​		logo512.png ——- logo图</p>
<p>​		manifest.json —– 应用加壳的配置文件</p>
<p>​		robots.txt ——– 爬虫协议文件</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1wy4y1D7JT/?p=50&spm_id_from=pageDriver&vd_source=031f631a87cca114e71194f12ec3fc3f">加壳解释</a></p>
<p>src —- 源码文件夹</p>
<p>​		App.css ——– App组件的样式</p>
<p>​		App.js———App组件</p>
<p>​		App.test.js —- 用于给App做测试</p>
<p>​		index.css —— 样式</p>
<p>​		index.js——入口文件</p>
<p>​		logo.svg ——- logo图</p>
<p>​		reportWebVitals.js</p>
<p>​			— 页面性能分析文件(需要web-vitals库的支持)</p>
<p>​		setupTests.js</p>
<p>​			—- 组件单元测试的文件(需要jest-dom库的支持)</p>
<p>index.html解读</p>
<p><img src="/React/image-20221214180130269.png" alt="image-20221214180130269"></p>
<p><strong>theme-color</strong>兼容性不好</p>
<blockquote>
<p>React.StrictMode标签react脚手架自带的组件，检测后代组件中是否存在不合理的地方</p>
<p>可以不用</p>
</blockquote>
<blockquote>
<p>reportWebVitals();记录页面性能的</p>
</blockquote>
<h3 id="功能界面的组件化编码流程（通用）"><a href="#功能界面的组件化编码流程（通用）" class="headerlink" title="功能界面的组件化编码流程（通用）"></a>功能界面的组件化编码流程（通用）</h3><ol>
<li><p>拆分组件: 拆分界面,抽取组件</p>
</li>
<li><p>实现静态组件: 使用组件实现静态页面效果</p>
</li>
<li><p>实现动态组件</p>
</li>
</ol>
<p>​	3.1 动态显示初始化数据</p>
<p>​		3.1.1 数据类型</p>
<p>​		3.1.2 数据名称</p>
<p>​		3.1.2 保存在哪个组件?</p>
<p>​	3.2 交互(从绑定事件监听开始)</p>
<h3 id="入口文件写法"><a href="#入口文件写法" class="headerlink" title="入口文件写法"></a>入口文件写法</h3><blockquote>
<p>写法以直接引入react-dom文件</p>
<p>这种引用两者都可以使用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span>  <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span></span><br><span class="line"><span class="comment">// 写法一</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line"><span class="comment">// 写法二</span></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>写法二引入react-dom&#x2F;client文件</p>
<p>该方法使用直接使用ReactDOM.render会报错</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span>  <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>React中的不是解构赋值，而是同时使用了默认暴露和分别暴露(或统一暴露)</p>
</blockquote>
<p><img src="/React/image-20221214202137067-167102050147717.png" alt="image-20221214202137067"></p>
<p>组件后缀写成jsx</p>
<p><strong>在react脚手夹中引入.js与.jsx文件后缀可以不写</strong></p>
<h3 id="样式冲突"><a href="#样式冲突" class="headerlink" title="样式冲突"></a>样式冲突</h3><p>当组件逐渐增多起来的时候，我们发现，组件的样式也是越来越丰富，这样就很有可能产生两个组件中样式名称有可能会冲突，这样会根据引入App这个组件的先后顺序，后面的会覆盖前面的，</p>
<p>为了避免这样的样式冲突，我们采用下面的形式：</p>
<p>1.将css文件名修改： hello.css — &gt;hello.module.css</p>
<p>2.引入并使用的时候改变方式：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;<span class="title class_">Component</span>&#125;<span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> hello <span class="keyword">from</span> <span class="string">&#x27;./hello.module.css&#x27;</span>  <span class="comment">//引入的时候给一个名称</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Hello</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#123;hello.title&#125;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>   <span class="comment">//通过大括号进行调用</span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法二、CSS module</p>
<p><a target="_blank" rel="noopener" href="http://ruanyifeng.com/blog/2016/06/css_modules.html"> 阮一峰CSS Modules 用法教程</a></p>
<h3 id="react配置代理服务器"><a href="#react配置代理服务器" class="headerlink" title="react配置代理服务器"></a>react配置代理服务器</h3><h4 id="方法一package-json文件"><a href="#方法一package-json文件" class="headerlink" title="方法一package.json文件"></a>方法一package.json文件</h4><p>在package.json文件中添加proxy配置属性</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;proxy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:5000&quot;</span></span><br></pre></td></tr></table></figure>



<p>发请求时的端口地址要与脚手架的端口号一样</p>
<p><strong>配置服务时的端口与服务器的一样</strong>   不能写全链接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  getStudents = () =&gt; &#123;</span><br><span class="line">    console.log(&#x27;a&#x27;);</span><br><span class="line">     // 端口3000</span><br><span class="line">    axios.get(&quot;http://localhost:3000/students&quot;).then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(response.data);</span><br><span class="line">    &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error);</span><br><span class="line">    &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;this.getStudents&#125;&gt;获取学生数据&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>服务器代码端口5000</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">request,response,next</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人请求服务器1了&#x27;</span>);</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求来自于&#x27;</span>,request.<span class="title function_">get</span>(<span class="string">&#x27;Host&#x27;</span>));</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求的地址&#x27;</span>,request.<span class="property">url</span>);</span><br><span class="line">	<span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/students&#x27;</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">const</span> students = [</span><br><span class="line">		&#123;<span class="attr">id</span>:<span class="string">&#x27;001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;tom&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">id</span>:<span class="string">&#x27;002&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;jerry&#x27;</span>,<span class="attr">age</span>:<span class="number">19</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">id</span>:<span class="string">&#x27;003&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">120</span>&#125;,</span><br><span class="line">	]</span><br><span class="line">	response.<span class="title function_">send</span>(students)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">5000</span>,<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(!err) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器1启动成功了,请求学生信息地址为：http://localhost:5000/students&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意上面这种直接配置会出现vue一样的当本项目的静态文件public中有时不会去找服务器而是直接读取项目中的资源，当项目的静态文件中没有时会在放送到服务器中</p>
</blockquote>
<p>说明：</p>
<ol>
<li>优点：配置简单，前端请求资源时可以不加任何前缀。</li>
<li>缺点：不能配置多个代理。</li>
<li>工作方式：上述方式配置代理，当请求了3000不存在的资源时，那么该请求会转发给5000 （优先匹配前端资源）</li>
</ol>
<h4 id="方法二setupProxy-js文件"><a href="#方法二setupProxy-js文件" class="headerlink" title="方法二setupProxy.js文件"></a>方法二setupProxy.js文件</h4><ol>
<li>第一步：创建代理配置文件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在src下创建配置文件：src/setupProxy.js</span><br></pre></td></tr></table></figure>



<p>使用的不是ES6代码</p>
<p>用的是CJS需要引入http-proxy-middleware</p>
<p>该包在建项目时react已经下载了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const proxy = require(&#x27;http-proxy-middleware&#x27;)</span><br></pre></td></tr></table></figure>

<p>有的可以使用对象写法</p>
<p>最新的要求写成函数写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>编写setupProxy.js配置具体代理规则：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不能写成</span></span><br><span class="line"><span class="comment">// const  proxy  = require(&#x27;http-proxy-middleware&#x27;);</span></span><br><span class="line"><span class="comment">// const  &#123;proxy&#125;  = require(&#x27;http-proxy-middleware&#x27;);</span></span><br><span class="line"><span class="comment">// 版本问题</span></span><br><span class="line"><span class="comment">// 可以写成</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">createProxyMiddleware</span>: proxy &#125; = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);</span><br><span class="line">或</span><br><span class="line"><span class="comment">// const &#123; createProxyMiddleware: proxy &#125; = require(&#x27;http-proxy-middleware&#x27;);</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">app</span>) &#123;</span><br><span class="line">  app.<span class="title function_">use</span>(</span><br><span class="line">     <span class="title function_">proxy</span>(<span class="string">&#x27;/api1&#x27;</span>, &#123;  <span class="comment">//api1是需要转发的请求(所有带有/api1前缀的请求都会转发给5000)</span></span><br><span class="line">      <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span>, <span class="comment">//配置转发目标地址(能返回数据的服务器地址)</span></span><br><span class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">//控制服务器接收到的请求头中host字段的值</span></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">      	changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class="line"><span class="comment">      	changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:3000</span></span><br><span class="line"><span class="comment">      	changeOrigin默认值为false，但我们一般将changeOrigin值设为true</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/api1&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125; <span class="comment">//去除请求前缀，保证交给后台服务器的是正常请求地址(必须配置)</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 或</span></span><br><span class="line">    <span class="comment">// createProxyMiddleware(&#x27;&#x27;,&#123;&#125;)</span></span><br><span class="line">      <span class="title function_">proxy</span>(<span class="string">&quot;/api2&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">target</span>: <span class="string">&quot;http://localhost:5001&quot;</span>,</span><br><span class="line">      <span class="comment">// 是否告诉服务器请求的真实地址true不告诉，false告诉</span></span><br><span class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 替换路径的前缀</span></span><br><span class="line">      <span class="attr">pathRewrite</span>: &#123; <span class="string">&quot;^/api2&quot;</span>: <span class="string">&quot;&quot;</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>优点：可以配置多个代理，可以灵活的控制请求是否走代理。</li>
<li>缺点：配置繁琐，前端请求资源时必须加前缀。</li>
</ol>
<h3 id="暴露默认配置文件"><a href="#暴露默认配置文件" class="headerlink" title="暴露默认配置文件"></a>暴露默认配置文件</h3><blockquote>
<p>yarn eject</p>
</blockquote>
<h2 id="todoList"><a href="#todoList" class="headerlink" title="todoList"></a>todoList</h2><p>一、todoList案例相关知识点<br>        1.拆分组件、实现静态组件，注意：className、style的写法<br>        2.动态初始化列表，如何确定将数据放在哪个组件的state中？<br>                    ——某个组件使用：放在其自身的state中<br>                    ——某些组件使用：放在他们共同的父组件state中（官方称此操作为：状态提升）<br>        3.关于父子之间通信：<br>                1.【父组件】给【子组件】传递数据：通过props传递<br>                2.【子组件】给【父组件】传递数据：通过props传递，要求父提前给子传递一个函数<br>        4.注意defaultChecked 和 checked的区别，类似的还有：defaultValue 和 value<br>        5.状态在哪里，操作状态的方法就在哪里</p>
<h2 id="github案例"><a href="#github案例" class="headerlink" title="github案例"></a>github案例</h2><p>github搜索案例相关知识点<br>        1.设计状态时要考虑全面，例如带有网络请求的组件，要考虑请求失败怎么办。<br>        2.ES6小知识点：解构赋值+重命名<br>                    let obj &#x3D; {a:{b:1}}<br>                    const {a} &#x3D; obj; &#x2F;&#x2F;传统解构赋值<br>                    const {a:{b}} &#x3D; obj; &#x2F;&#x2F;连续解构赋值<br>                    const {a:{b:value}} &#x3D; obj; &#x2F;&#x2F;连续解构赋值+重命名<br>        3.fetch发送请求（关注分离的设计思想）<br>                    try {<br>                        const response&#x3D; await fetch(<code>/api1/search/users2?q=$&#123;keyWord&#125;</code>)<br>                        const data &#x3D; await response.json()<br>                        console.log(data);<br>                    } catch (error) {<br>                        console.log(‘请求出错’,error);<br>                    }</p>
<h2 id="消息订阅与发布"><a href="#消息订阅与发布" class="headerlink" title="消息订阅与发布"></a>消息订阅与发布</h2><p>消息订阅与发布机制<br>                    1.先订阅，再发布（理解：有一种隔空对话的感觉）<br>                    2.适用于任意组件间通信<br>                    3.要在组件的componentWillUnmount中取消订阅</p>
<h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><p><img src="/React/image-20230102202917907.png" alt="image-20230102202917907"></p>
<p>取消订阅</p>
<p><img src="/React/image-20230103170542389.png" alt="image-20230103170542389"></p>
<p>PubSub.unsubscribe(delete);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import axios from &quot;axios&quot;</span><br><span class="line">import PubSub from &#x27;pubsub-js&#x27;</span><br><span class="line"></span><br><span class="line">class Search extends Component &#123;</span><br><span class="line"></span><br><span class="line">  Search = () =&gt; &#123;</span><br><span class="line">    // 第一个参数为订阅名，第二个为参数</span><br><span class="line">    PubSub.publish(&#x27;Toke&#x27;, &#x27;hello world!&#x27;);</span><br><span class="line">    let &#123; keyWordElement: &#123; value: keyWord &#125; &#125; = this;</span><br><span class="line">    let stateObj = &#123;</span><br><span class="line">      isFirst: &quot;none&quot;,</span><br><span class="line">      isLoading: &quot;inline&quot;,</span><br><span class="line">      isMain: &quot;none&quot;,</span><br><span class="line">      errMsg:&quot;none&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    this.props.upState(stateObj)</span><br><span class="line">    axios.get(`/api1/search/users?q=$&#123;keyWord&#125;`).then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        this.props.getItems(response.data.items)</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        this.props.upState(&#123;</span><br><span class="line">          isLoading:&quot;none&quot;,</span><br><span class="line">          errMsg: &quot;inline&quot;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;section className=&quot;jumbotron&quot;&gt;</span><br><span class="line">            &lt;h3 className=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">            &lt;input ref=&#123;c=&gt; this.keyWordElement = c&#125; type=&quot;text&quot; placeholder=&quot;enter the name you search&quot; /&gt;&amp;nbsp;</span><br><span class="line">            &lt;button onClick=&#123;this.Search&#125;&gt;Search&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Search;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import PubSub from &#x27;pubsub-js&#x27;</span><br><span class="line">import &quot;./index.css&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class List extends Component &#123;</span><br><span class="line">  mySubscriber = function (msg, data) &#123;</span><br><span class="line">    //第一个参数为订阅名，第二个为参数</span><br><span class="line">    console.log( msg, data );</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    let &#123; items, isFirst, isLoading, errMsg, isMain &#125; = this.props;</span><br><span class="line">    // 参数一为订阅名，参数二为回调函数</span><br><span class="line">    PubSub.subscribe(&#x27;Toke&#x27;, this.mySubscriber);</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div className=&quot;row&quot; &gt;</span><br><span class="line">          &lt;h1 style=&#123;&#123;display:isFirst&#125;&#125;&gt;欢迎使用！&lt;/h1&gt;</span><br><span class="line">          &lt;h1 style=&#123;&#123;display:isLoading&#125;&#125;&gt;加载中....&lt;/h1&gt;</span><br><span class="line">          &lt;h1 style=&#123;&#123;display:errMsg&#125;&#125;&gt;请求失败!&lt;/h1&gt;</span><br><span class="line">          &#123;</span><br><span class="line">            items.map(item=&gt;&#123;</span><br><span class="line">              return (</span><br><span class="line">                  &lt;div className=&quot;card&quot; key=&#123;item.id&#125; style=&#123;&#123;display:isMain&#125;&#125;&gt;</span><br><span class="line">                  &lt;a rel=&quot;noreferrer&quot; href=&#123; item.html_url&#125; target=&quot;_blank&quot;&gt;</span><br><span class="line">                    &lt;img alt=&quot;headPortrait&quot; src=&#123;item.avatar_url&#125; style=&#123;&#123;width: &quot;100px&quot;&#125;&#125; /&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                  &lt;p className=&quot;card-text&quot;&gt;&#123; item.login&#125;&lt;/p&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                )</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default List;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h2><p><code>Fetch API</code>提供了一个 JavaScript 接口，用于访问和操纵HTTP的请求和响应等。提供了一个全局 <code>fetch()</code>方法来跨网络异步获取资源。</p>
<p>SourceURL:file:&#x2F;&#x2F;&#x2F;media&#x2F;mc&#x2F;F&#x2F;笔记&#x2F;02-课件资料&#x2F;React&#x2F;react全家桶资料&#x2F;01_课件&#x2F;尚硅谷react全家桶.docx</p>
<h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><ol>
<li><p><a target="_blank" rel="noopener" href="https://github.github.io/fetch/">https://github.github.io/fetch/</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000003810652">https://segmentfault.com/a/1190000003810652</a></p>
</li>
</ol>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol>
<li><p>fetch: 原生函数，不再使用XmlHttpRequest对象提交ajax请求</p>
</li>
<li><p>老版本浏览器可能不支持</p>
</li>
</ol>
<p>SourceURL:file:&#x2F;&#x2F;&#x2F;media&#x2F;mc&#x2F;F&#x2F;笔记&#x2F;02-课件资料&#x2F;React&#x2F;react全家桶资料&#x2F;01_课件&#x2F;尚硅谷react全家桶.docx</p>
<h3 id="相关API"><a href="#相关API" class="headerlink" title="相关API"></a>相关API</h3><ol>
<li>GET请求</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(url).then(function(response) &#123;  return response.json() &#125;)</span><br><span class="line">    .then(function(data) &#123;  console.log(data) &#125;)</span><br><span class="line">    .catch(function(e) &#123;  console.log(e) &#125;);</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>POST请求</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(url, &#123;  <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data), &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;  <span class="variable language_">console</span>.<span class="title function_">log</span>(data) &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">e</span>) &#123;  <span class="variable language_">console</span>.<span class="title function_">log</span>(e) &#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"> Search =async () =&gt; &#123;</span><br><span class="line">   let &#123; keyWordElement: &#123; value: keyWord &#125; &#125; = this;</span><br><span class="line">   let stateObj = &#123;</span><br><span class="line">     isFirst: &quot;none&quot;,</span><br><span class="line">     isLoading: &quot;inline&quot;,</span><br><span class="line">     isMain: &quot;none&quot;,</span><br><span class="line">     errMsg:&quot;none&quot;</span><br><span class="line">   &#125;</span><br><span class="line">   // 发布订阅</span><br><span class="line">   PubSub.publish(&#x27;Toke&#x27;,stateObj);</span><br><span class="line">   /* axios.get(`/api1/search/users?q=$&#123;keyWord&#125;`).then(</span><br><span class="line">     (response) =&gt; &#123;</span><br><span class="line">       // 发布数据</span><br><span class="line">       PubSub.publish(&quot;getItem&quot;,response.data.items)</span><br><span class="line">       // 发布状态</span><br><span class="line">       PubSub.publish(&#x27;Toke&#x27;, &#123; isLoading: &quot;none&quot;, isMain: &quot;inline&quot; &#125;)</span><br><span class="line">     &#125;,</span><br><span class="line">     (error) =&gt; &#123;</span><br><span class="line">       // 发布订阅</span><br><span class="line">       PubSub.publish(&#x27;Toke&#x27;,&#123;</span><br><span class="line">         isLoading:&quot;none&quot;,</span><br><span class="line">         errMsg: &quot;inline&quot;</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   ); */</span><br><span class="line">   // 未优化版本</span><br><span class="line">   /* fetch(`/api1/search/users?q=$&#123;keyWord&#125;`,).then(</span><br><span class="line">     // 联系服务器成功，不是请求成功</span><br><span class="line">     res =&gt; &#123;</span><br><span class="line">       // 将获取的数据转化为Prim</span><br><span class="line">       return res.json()</span><br><span class="line">     &#125;,</span><br><span class="line">     // 联系服务器失败了</span><br><span class="line">     err =&gt; &#123;</span><br><span class="line">       // 发布订阅</span><br><span class="line">       PubSub.publish(&#x27;Toke&#x27;,&#123;</span><br><span class="line">         isLoading:&quot;none&quot;,</span><br><span class="line">         errMsg: &quot;inline&quot;</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   ).then(</span><br><span class="line">     // 请求函数</span><br><span class="line">     res =&gt; &#123;</span><br><span class="line">       console.log(res)</span><br><span class="line">       // 发布数据</span><br><span class="line">       PubSub.publish(&quot;getItem&quot;,res.items)</span><br><span class="line">       // 发布状态</span><br><span class="line">       PubSub.publish(&#x27;Toke&#x27;, &#123; isLoading: &quot;none&quot;, isMain: &quot;inline&quot; &#125;)</span><br><span class="line">     &#125;,</span><br><span class="line">     err =&gt; &#123;</span><br><span class="line">       // 发布订阅</span><br><span class="line">       PubSub.publish(&#x27;Toke&#x27;,&#123;</span><br><span class="line">         isLoading:&quot;none&quot;,</span><br><span class="line">         errMsg: &quot;inline&quot;</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   ) */</span><br><span class="line"></span><br><span class="line">   // 优化版本</span><br><span class="line">   /* fetch(`/api1/search/users?q=$&#123;keyWord&#125;`,).then(</span><br><span class="line">     // 联系服务器成功，不是请求成功</span><br><span class="line">     res =&gt; &#123;</span><br><span class="line">       // 将获取的数据转化为Prim</span><br><span class="line">       return res.json()</span><br><span class="line">     &#125;</span><br><span class="line">   ).then(</span><br><span class="line">     // 请求函数</span><br><span class="line">     res =&gt; &#123;</span><br><span class="line">       console.log(res)</span><br><span class="line">       // 发布数据</span><br><span class="line">       PubSub.publish(&quot;getItem&quot;,res.items)</span><br><span class="line">       // 发布状态</span><br><span class="line">       PubSub.publish(&#x27;Toke&#x27;, &#123; isLoading: &quot;none&quot;, isMain: &quot;inline&quot; &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   ).catch(</span><br><span class="line">     err =&gt; &#123;</span><br><span class="line">       console.log(err);</span><br><span class="line">       // 发布订阅</span><br><span class="line">       PubSub.publish(&#x27;Toke&#x27;,&#123;</span><br><span class="line">         isLoading:&quot;none&quot;,</span><br><span class="line">         errMsg: &quot;inline&quot;</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   ) */</span><br><span class="line">// 优化版</span><br><span class="line">   try &#123;</span><br><span class="line">     let res = await fetch(`/api1/search/users?q=$&#123;keyWord&#125;`);</span><br><span class="line">     let data = await res.json()</span><br><span class="line">       // 发布数据</span><br><span class="line">       PubSub.publish(&quot;getItem&quot;,data.items)</span><br><span class="line">       // 发布状态</span><br><span class="line">       PubSub.publish(&#x27;Toke&#x27;, &#123; isLoading: &quot;none&quot;, isMain: &quot;inline&quot; &#125;)</span><br><span class="line">   &#125; catch (error) &#123;</span><br><span class="line">     PubSub.publish(&#x27;Toke&#x27;,&#123;</span><br><span class="line">         isLoading:&quot;none&quot;,</span><br><span class="line">         errMsg: &quot;inline&quot;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h2 id="路由-V5"><a href="#路由-V5" class="headerlink" title="路由  V5"></a>路由  V5</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45677671/article/details/116168250">【React】路由详解</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/AK852369/article/details/117924976">参考写法</a></p>
<p><img src="/React/image-20230103205556847.png" alt="image-20230103205556847"></p>
<p><img src="/React/image-20230103205615031.png" alt="image-20230103205615031"></p>
<h3 id="react-router-dom的理解"><a href="#react-router-dom的理解" class="headerlink" title="react-router-dom的理解"></a>react-router-dom的理解</h3><blockquote>
<ol>
<li><p>react的一个插件库。</p>
</li>
<li><p>专门用来实现一个SPA应用。</p>
</li>
<li><p>基于react的项目基本都会用到此库。</p>
</li>
</ol>
</blockquote>
<ul>
<li>react 的一个插件库</li>
<li>专门用来实现一个 SPA 应用</li>
<li>基于 react 的项目基本都会用到的库</li>
<li>之前版本的思想是传统的思想：<strong>路由应该统一在一处渲染</strong></li>
<li>Router 4之后是这样的思想：<strong>一切皆组件</strong>4</li>
</ul>
<h4 id="React-Router包含了四个包"><a href="#React-Router包含了四个包" class="headerlink" title="React Router包含了四个包:"></a>React Router包含了四个包:</h4><p>包名	使用途径<br>react-router	在任何地方使用<br>react-router-dom	在 web 开发中使用<br>react-router-native	在 native 开发中使用<br>react-router-config	静态路由的配置<br>我们前端主要使用react-router-dom</p>
<h3 id="Router-原理"><a href="#Router-原理" class="headerlink" title="Router 原理"></a>Router 原理</h3><p>React Router甚至大部分的前端路由都是依赖于history.js的，它是一个独立的第三方js库。可以用来兼容在不同浏览器、不同环境下对历史记录的管理，拥有统一的API。</p>
<p>老版本浏览器:</p>
<p>通过hash来存储在不同状态下的history信息，对应createHashHistory，通过检测location.hash的值的变化，使用location.replace方法来实现url跳转。通过注册监听window对象上的hashChange事件来监听路由的变化，实现历史记录的回退。<br>高版本浏览器:</p>
<p>利用HTML5里面的history，对应createBrowserHistory, 使用包括pushState， replaceState方法来进行跳转。通过注册监听window对象上的popstate事件来监听路由的变化，实现历史记录的回退。<br>node 环境下:</p>
<p>在内存中进行历史记录的存储，对应createMemoryHistory。直接在内存里push和pop状态。</p>
<h3 id="路由组件与一般组件"><a href="#路由组件与一般组件" class="headerlink" title="路由组件与一般组件"></a>路由组件与一般组件</h3><p>​			1.写法不同：<br>​						一般组件：<Demo><br>​						路由组件：<Route path="/demo" component="{Demo}/"><br>​			2.存放位置不同：<br>​						一般组件：components<br>​						路由组件：pages<br>​			3.接收到的props不同：<br>​						一般组件：写组件标签时传递了什么，就能收到什么<br>​						路由组件：接收到三个固定的属性<br>​											history:<br>​														go: ƒ go(n)<br>​														goBack: ƒ goBack()<br>​														goForward: ƒ goForward()<br>​														push: ƒ push(path, state)<br>​														replace: ƒ replace(path, state)<br>​											location:<br>​														pathname: “&#x2F;about”<br>​														search: “”<br>​														state: undefined<br>​											match:<br>​														params: {}<br>​														path: “&#x2F;about”<br>​														url: “&#x2F;about”</Route></Demo></p>
<h3 id="react-router-dom相关API"><a href="#react-router-dom相关API" class="headerlink" title="react-router-dom相关API"></a>react-router-dom相关API</h3><h4 id="内置组件"><a href="#内置组件" class="headerlink" title="内置组件"></a>内置组件</h4><ol>
<li><BrowserRouter>
</BrowserRouter></li>
<li><HashRouter>
</HashRouter></li>
<li><Route>
</Route></li>
<li><Redirect>
</Redirect></li>
<li><Link>
</Link></li>
<li><NavLink>
</NavLink></li>
<li><Switch></Switch></li>
</ol>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><ol>
<li><p>history对象</p>
</li>
<li><p>match对象</p>
</li>
<li><p>withRouter函数</p>
</li>
</ol>
<h3 id="基本路由使用"><a href="#基本路由使用" class="headerlink" title="基本路由使用"></a>基本路由使用</h3><h4 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h4><p>1.下载react-router-dom: npm install –save react-router-dom</p>
<ul>
<li><p>安装依赖：<code>npm i -S react-router-dom</code></p>
</li>
<li><p>使用时，路由器 <code>Router</code> 就是 <code>React</code> 的一个组件。</p>
</li>
<li><p><code>Router</code> 组件本身只是一个容器，真正的路由要通过 <code>Route</code> 组件定义。</p>
</li>
<li><p>Route 有两种方式：</p>
</li>
<li><p><code>HashRouter</code> 和 <code>BrowserRouter</code></p>
</li>
</ul>
<blockquote>
<p>注意：一个Router标签为一组路由其互不影响</p>
<p>Link或NarLink对应的展示区Route需要在同一个Router标签中才有效</p>
<p>也可以选择在index.js中使用Router包住App组件</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center">区别</td>
<td align="center">HashRouter</td>
<td align="center">BrowserRouter</td>
</tr>
<tr>
<td align="center">底层原理</td>
<td align="center">使用URL的哈希值</td>
<td align="center">使用H5的history API，不兼容IE9</td>
</tr>
<tr>
<td align="center">url形式</td>
<td align="center">路径中包含#</td>
<td align="center">路径中没有#</td>
</tr>
<tr>
<td align="center">刷新后对state参数的影响</td>
<td align="center">会导致state参数丢失</td>
<td align="center">没有任何影响</td>
</tr>
<tr>
<td align="center">其他</td>
<td align="center">可以解决一些路径上的错误</td>
<td align="center"></td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; HashRouter as Router, Route&#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">或：</span><br><span class="line">import &#123; BrowserRouter as Router, Route&#125; from &#x27;react-router-dom&#x27;;</span><br></pre></td></tr></table></figure>

<ul>
<li>用来监听浏览器地址栏的变化，并将URL解析成一个地址对象</li>
<li>整个应用最好只用一个路由器去管理</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">// 引入路由组件</span><br><span class="line">import &#123; BrowserRouter as Router &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">// 引入头部组件</span><br><span class="line">import Header from &#x27;../components/header/Header&#x27;;</span><br><span class="line"></span><br><span class="line">// 创建路由表</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">        &lt;Header /&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<h4 id="Route-属性"><a href="#Route-属性" class="headerlink" title="Route 属性"></a>Route 属性</h4><h5 id="path-属性"><a href="#path-属性" class="headerlink" title="path 属性"></a>path 属性</h5><blockquote>
<p><code>Route</code>组件的<code>path</code>属性用来匹配<strong>导航地址</strong>和<strong>路由地址</strong>是否匹配，匹配的话就加载<code>Route</code>标签绑定的组件</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route&#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line"></span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页&lt;/div&gt;)</span><br><span class="line">const About = () =&gt; (&lt;div&gt;关于我们&lt;/div&gt;)</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/main&quot;&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/about&quot;&#125; component=&#123;About&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>如果不写路径，那么会加载所有组件。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route  component=&#123;Home&#125; /&gt;</span><br><span class="line">      &lt;Route  component=&#123;About&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/Router&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/React/20210426200101386.png" alt="在这里插入图片描述"></p>
<p><strong>如果路径相同，那么会加载所有组件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/about&quot;&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/about&quot;&#125; component=&#123;About&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/Router&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="exact-属性"><a href="#exact-属性" class="headerlink" title="exact 属性"></a>exact 属性</h5><blockquote>
<p>exact 属性表示是否精准的匹配路径。有两个值true和false</p>
</blockquote>
<ul>
<li><code>exact=&#123;true&#125;</code> 或 <code>exact</code>：表示精准的匹配</li>
<li><code>exact=&#123;false&#125;</code> 或 <strong>不写</strong>：表示模糊的匹配</li>
</ul>
<h4 id="Route-组件"><a href="#Route-组件" class="headerlink" title="Route 组件"></a>Route 组件</h4><p>一般组件在现实开发中一般放在src&#x2F;components目录下。<br>路由组件在现实开发中一般放在src&#x2F;pages目录下。</p>
<p>我们一般的组件是这样写的：<Home><br>我们的路由组件写在：<Router>里面的<br>而<Route> 设置路由对应的组件有 3 种形式：<br>component、render、children</Route></Router></Home></p>
<h5 id="component"><a href="#component" class="headerlink" title="component"></a>component</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, NavLink &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页页面&lt;/div&gt;)</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;NavLink to=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; &gt;首页&lt;/NavLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;/*   只完全匹配/ */&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/20210426205239706.png" alt="在这里插入图片描述"></p>
<p><img src="/React/20210426205432605.png" alt="在这里插入图片描述"></p>
<h5 id="render"><a href="#render" class="headerlink" title="render"></a>render</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, NavLink &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页&lt;/div&gt;)</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;NavLink to=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; &gt;首页&lt;/NavLink&gt;</span><br><span class="line">      ---</span><br><span class="line">      &lt;NavLink to=&#123;&quot;/render&quot;&#125;&gt;render&lt;/NavLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;/*   只完全匹配/ */&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">      &lt;Route path=&quot;/render&quot; render=&#123;() =&gt; &lt;div&gt;render页面&lt;/div&gt;&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/20210426205857626.png" alt="在这里插入图片描述"></p>
<p><img src="/React/20210426205920921.png" alt="在这里插入图片描述"></p>
<h5 id="children"><a href="#children" class="headerlink" title="children"></a>children</h5><ul>
<li>children 比较特殊，每个页面都会匹配上</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, NavLink &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页页面&lt;/div&gt;)</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;NavLink to=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; &gt;首页&lt;/NavLink&gt;</span><br><span class="line">      ---</span><br><span class="line">      &lt;NavLink to=&#123;&quot;/child&quot;&#125;&gt;children&lt;/NavLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;/*   只完全匹配/ */&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">      &#123;/* children 比较特殊，每个页面都会匹配上 */&#125;</span><br><span class="line">      &lt;Route path=&quot;/child&quot; children=&#123;() =&gt; &lt;div&gt;children页面&lt;/div&gt;&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Njc3Njcx,size_16,color_FFFFFF,t_70-167283404774096.png" alt="在这里插入图片描述"></p>
<p><img src="/React/20210426210219122.png" alt="在这里插入图片描述"></p>
<h4 id="HashRouter"><a href="#HashRouter" class="headerlink" title="HashRouter"></a><strong>HashRouter</strong></h4><ul>
<li>如果设为<code>HashHistory</code>，路由将通过<strong>URL</strong>的<strong>hash</strong>部分（<code>#</code>）切换，URL的形式类似<code>http://localhost:3000/#/</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; HashRouter as Router, Route&#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line"></span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页&lt;/div&gt;)</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        // Route组件也必须在Router中</span><br><span class="line">      &lt;Route path=&#123;&quot;/&quot;&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="/React/20210426194115910.png" alt="img"></p>
<h4 id="BrowserRouter"><a href="#BrowserRouter" class="headerlink" title="BrowserRouter"></a><strong>BrowserRouter</strong></h4><ul>
<li>如果设为<code>BrowserHistory</code>，浏览器的路由就不再通过Hash完成了，而显示正常的路径<code>http://localhost:3000/about</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; BrowserRouter as Router, Route&#125; from &#x27;react-router-dom&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="/React/20210426194416920.png" alt="在这里插入图片描述"></p>
<h4 id="Link-和-NavLink"><a href="#Link-和-NavLink" class="headerlink" title="Link 和 NavLink"></a>Link 和 NavLink</h4><p>Link组件用于取代<a>元素，生成一个链接，允许用户点击后跳转到另一个路由。<br>算是<a>元素的React 版本，可以接收Router的状态</a></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=&quot;/about&quot; &gt;&lt;/Link&gt;</span><br><span class="line">相当于</span><br><span class="line">&lt;a href=&quot;/about&quot;&gt;&lt;a/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>to后面的链接地址写小写，不要写大写(一般不区分大小写)。<code>/</code>前面不能出现<code>.</code>什么的</li>
<li><code>&lt;Link&gt;</code>标签必须写在<code>&lt;Router&gt;</code>标签里面</li>
<li><code>&lt;Route&gt;</code>标签<code>path</code>路径必须与<code>&lt;Link&gt;</code>标签<code>to</code>路径一致才能实现跳转</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route,Link&#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line"></span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页&lt;/div&gt;)</span><br><span class="line">const About = () =&gt; (&lt;div&gt;关于我们&lt;/div&gt;)</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Link to=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; &gt;首页&lt;/Link&gt;</span><br><span class="line">      ---</span><br><span class="line">      &lt;Link to=&#123;&quot;/about&quot;&#125; &gt;关于我们&lt;/Link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;/* exact=&#123;true&#125;  只完全匹配/ */&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/about&quot;&#125; component=&#123;About&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="/React/2021042620203772.png" alt="在这里插入图片描述"></p>
<p><img src="/React/2021042620203772-16728139919965.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>NavLink是Link的升级版<br>NavLink和Link都可以在里面设置样式<br>但是只有NavLink可以追加样式<br>常用于标签切换的高亮显示<br>NavLink还有个独特的属性activeClassName<br>谁被点击就会追加activeClassName里面的样式<br>比如：activeClassName&#x3D;”YellowColor”</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.YellowColor</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>= &quot;yellow&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="封装-NavLink"><a href="#封装-NavLink" class="headerlink" title="封装 NavLink"></a><strong>封装 NavLink</strong></h4><ul>
<li>封装后属于一般组件</li>
<li><code>&lt;NavLink&gt;</code>标签必须写在<code>&lt;Router&gt;</code>标签里面</li>
<li>标签体内容是一个特殊的标签属性</li>
<li>通过<code>this.props.children</code>可以获取标签体内容</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &#x27;react&#x27;;</span><br><span class="line">import &#123;NavLink&#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">export default class MyNavLink extends Component&#123;</span><br><span class="line">	const &#123;to,title&#125; = this.props;</span><br><span class="line">	render()&#123;</span><br><span class="line">		return(</span><br><span class="line">			&lt;NavLink to=&#123;to&#125; activeClassName=&quot;YellowColor&quot; &gt;&#123;title&#125;&lt;/NavLink&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyNavLink to=&quot;/home&quot; title=&quot;Home页&quot; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>优化：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &#x27;react&#x27;;</span><br><span class="line">import &#123;NavLink&#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">export default class MyNavLink extends Component&#123;</span><br><span class="line">	// const &#123;to,title&#125; = this.props;</span><br><span class="line">	// 使用&#123;...this.props&#125;直接进行解构</span><br><span class="line">	render()&#123;</span><br><span class="line">		// &#123;...this.props&#125;有个children属性，用来存储标签体里面的内容</span><br><span class="line">		// 所以这里可以使用单标签，并且内容“Home页”也能展示出来</span><br><span class="line">		return(</span><br><span class="line">			&lt;NavLink activeClassName=&quot;YellowColor&quot; &#123;...this.props&#125; /&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyNavLink to=&quot;/home&quot;&gt;Home页&lt;/MyNavLink&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Switch的使用"><a href="#Switch的使用" class="headerlink" title="Switch的使用"></a>Switch的使用</h3><p>Switch 使用</p>
<blockquote>
<p>一个Router里面有多个Route，当路径匹配到了对应的Route，它还会往下继续匹配，直到所有Route都匹配完，这样就很浪费性能。</p>
</blockquote>
<blockquote>
<p>还有一个问题，如果两个Route里面的path路径是一样的，那么就会把他们两个对应的不同组件都展示出来，但是你想要的其实只是其他一个。</p>
</blockquote>
<ul>
<li>Switch：匹配到第一个对应的Route之后就不再往下匹配了，可以优化性能</li>
</ul>
<p>优化性能</p>
<ul>
<li>不使用Switch：<br><img src="/React/20210430170644386.png" alt="在这里插入图片描述"></li>
<li>使用Switch：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route,Switch &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line"></span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页&lt;/div&gt;)</span><br><span class="line">const About = () =&gt; (&lt;div&gt;关于我们&lt;/div&gt;)</span><br><span class="line"></span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/home&quot;&#125;  component=&#123;Home&#125; /&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/home&quot;&#125; component=&#123;About&#125; /&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/20210430170550221.png" alt="img"></p>
<h4 id="处理-404-页面"><a href="#处理-404-页面" class="headerlink" title="处理 404 页面"></a>处理 404 页面</h4><ul>
<li>404页面组件需要放在路由表的最后面</li>
<li>不使用<code>switch</code>：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, Link&#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页页面&lt;/div&gt;)</span><br><span class="line">class Cart extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (&lt;div&gt;购物车页面&lt;/div&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Link to=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; &gt;首页&lt;/Link&gt;</span><br><span class="line">      --</span><br><span class="line">      &lt;Link to=&#123;&#123; pathname: &quot;/cart&quot; &#125;&#125;&gt;购物车&lt;/Link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;/*  exact=&#123;true&#125;： 表示只完全匹配/ */&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;/* &lt;Switch&gt; */&#125;</span><br><span class="line">        &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/cart&quot;&#125; component=&#123;Cart&#125; /&gt;</span><br><span class="line">        &lt;Route render=&#123;() =&gt; &lt;div&gt;404页面&lt;/div&gt;&#125; /&gt;</span><br><span class="line">      &#123;/* &lt;/Switch&gt; */&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Njc3Njcx,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"></p>
<p><img src="/React/2021042621501548.png" alt="img"></p>
<ul>
<li>使用<code>switch</code>：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, Link, Switch&#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页页面&lt;/div&gt;)</span><br><span class="line">class Cart extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (&lt;div&gt;购物车页面&lt;/div&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Link to=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; &gt;首页&lt;/Link&gt;</span><br><span class="line">      --</span><br><span class="line">      &lt;Link to=&#123;&#123; pathname: &quot;/cart&quot; &#125;&#125;&gt;购物车&lt;/Link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;/*  exact=&#123;true&#125;： 表示只完全匹配/ */&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/cart&quot;&#125; component=&#123;Cart&#125; /&gt;</span><br><span class="line">        &lt;Route render=&#123;() =&gt; &lt;div&gt;404页面&lt;/div&gt;&#125; /&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/20210426215307718.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Njc3Njcx,size_16,color_FFFFFF,t_70-167282234982417.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Njc3Njcx,size_16,color_FFFFFF,t_70-167282232396214.png" alt="在这里插入图片描述"></p>
<h3 id="Redirect-使用"><a href="#Redirect-使用" class="headerlink" title="Redirect 使用"></a>Redirect 使用</h3><ul>
<li>Redirect ：可以使路径重定向</li>
<li>一般放在Route的最下方</li>
<li>意思就是你当前的路径，和所有Route里面的路径都匹配不上，那么他就会跳转到他自定义的一个路径</li>
<li>v5的需要包含在Switch中</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route,Link, Redirect,Switch &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line"></span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页&lt;/div&gt;)</span><br><span class="line">const About = () =&gt; (&lt;div&gt;关于我们&lt;/div&gt;)</span><br><span class="line"></span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">            &lt;Route path=&#123;&quot;/home&quot;&#125;   component=&#123;Home&#125; /&gt;</span><br><span class="line">      		&lt;Redirect to=&quot;/home&quot;/&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/React/20210430181231175-167283181554073.png" alt="![在这里插入图片描述](https://img-blog.csdnimg.cn/20210430181349166.png)" style="zoom:150%;">

<p><img src="/React/20210430181349166.png" alt="在这里插入图片描述"></p>
<h3 id="解决样式丢失问题"><a href="#解决样式丢失问题" class="headerlink" title="解决样式丢失问题"></a>解决样式丢失问题</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1wy4y1D7JT?p=82&vd_source=031f631a87cca114e71194f12ec3fc3f">视屏讲解</a></p>
<p>多级路径时</p>
<p>请求路径的改变</p>
<p>我们把路由都变成二级路由，统一加上&#x2F;dean&#x2F;路由前缀</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"></p>
<p>效果：</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282373422224.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282374531127.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282375447030.png" alt="在这里插入图片描述"></p>
<p>看着没什么问题，但是一旦刷新页面，样式就废了：</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282376926933.png" alt="在这里插入图片描述"></p>
<p>我们把路由恢复，看看bootstrap网络请求正常不正常：</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282377777636.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>我们发现bootstrap请求地址是<a target="_blank" rel="noopener" href="http://localhost:3000/css/bootstrap.css%EF%BC%8Clocalhost:3000%E6%98%AF%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8Cwebpack%E9%87%8C%E9%9D%A2%E7%9A%84webServer%E9%85%8D%E7%BD%AE%E4%BA%86public%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E9%83%BD%E6%98%AFlocalhost:3000/%E6%A0%B9%E7%9B%AE%E5%BD%95%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BD%8D%E7%BD%AE">http://localhost:3000/css/bootstrap.css，localhost:3000是本地服务器，webpack里面的webServer配置了public这个文件夹都是localhost:3000/根目录对应的位置</a></p>
</blockquote>
<p>我们通过地址请求看看：</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282380022639.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282380979842.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282385271648.png" alt="在这里插入图片描述"></p>
<p>如果请求了一个不存在的资源，那么脚手架会默认把index.html返回</p>
<p>我们再把路由改回去到二级路由的状态：</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282394959659.png" alt="img"></p>
<p>我们再测试一遍，刷新页面的时候，按住shift强制刷新，看看网络请求：</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282389994754.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282388892751-167282392057857.png" alt="img"></p>
<p>所以，在多级路由中刷新，会丢失样式</p>
<p>解决方法：<br>1.把.删了：</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282407960462.png" alt="img"></p>
<p>.&#x2F;css&#x2F;bootstrap.css表示以当前所在路径为基准，去找&#x2F;css&#x2F;bootstrap.css，访问<a target="_blank" rel="noopener" href="http://localhost:3000/dean/home%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C">http://localhost:3000/dean/home的时候，</a> 就去.&#x2F;dean&#x2F;css去找bootstrap.css，肯定没有<br>去掉点. 改成&#x2F;css&#x2F;bootstrap.css，表示基于public文件夹</p>
<p>方法二：<br>把.改为%PUBLIC_URL%，指的就是public目录，相当于写死了</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282409293865.png" alt="在这里插入图片描述"></p>
<p>方法三：<br>就想用点. 的话， 就把路由换为hash方式：</p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R5dzMzOTAxOTk=,size_16,color_FFFFFF,t_70-167282410200668.png" alt="在这里插入图片描述"></p>
<p>因为hash路由这个模式下，#右侧的后不会带入查询<br><img src="/React/20210628152524770.png" alt="img"></p>
<h3 id="路由的模糊匹配与严格匹配"><a href="#路由的模糊匹配与严格匹配" class="headerlink" title="路由的模糊匹配与严格匹配"></a>路由的模糊匹配与严格匹配</h3><p>1.默认使用的是模糊匹配（简单记：【输入的路径】必须包含要【匹配的路径】，<strong>且顺序要一致</strong>）<br>2.开启严格匹配：<Route exact="{true}" path="/about" component="{About}/"><br>3.严格匹配不要随便开启，需要再开，有些时候开启会导致无法继续匹配二级路由</Route></p>
<p>如下写法也可以匹配到，但开启了严格模式就不行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;Router&gt;</span><br><span class="line">          &lt;div className=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;col-xs-2 col-xs-offset-2&quot;&gt;</span><br><span class="line">              &lt;div className=&quot;list-group&quot;&gt;</span><br><span class="line">                &lt;MyNavLink to=&quot;/About&quot;&gt;About&lt;/MyNavLink&gt;</span><br><span class="line">                &lt;MyNavLink to=&quot;/Home/a/b&quot;&gt;Home&lt;/MyNavLink&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div className=&quot;col-xs-6&quot;&gt;</span><br><span class="line">              &lt;div className=&quot;panel&quot;&gt;</span><br><span class="line">                &lt;div className=&quot;panel-body&quot;&gt;</span><br><span class="line">                  &lt;Route path=&#x27;/Home&#x27; exact component=&#123;Home&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                  &lt;Route path=&#x27;/About&#x27; component=&#123;About&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/Router&gt;</span><br></pre></td></tr></table></figure>

<p>如下写法也无法匹配到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;Router&gt;</span><br><span class="line">          &lt;div className=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;col-xs-2 col-xs-offset-2&quot;&gt;</span><br><span class="line">              &lt;div className=&quot;list-group&quot;&gt;</span><br><span class="line">                &lt;MyNavLink to=&quot;/About&quot;&gt;About&lt;/MyNavLink&gt;</span><br><span class="line">                &lt;MyNavLink to=&quot;/Home&quot;&gt;Home&lt;/MyNavLink&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div className=&quot;col-xs-6&quot;&gt;</span><br><span class="line">              &lt;div className=&quot;panel&quot;&gt;</span><br><span class="line">                &lt;div className=&quot;panel-body&quot;&gt;</span><br><span class="line">                  &lt;Route path=&#x27;/Home/a/b&#x27; exact component=&#123;Home&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                  &lt;Route path=&#x27;/About&#x27; component=&#123;About&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/Router&gt;</span><br></pre></td></tr></table></figure>

<p>如下写法也无法匹配到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;Router&gt;</span><br><span class="line">          &lt;div className=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;col-xs-2 col-xs-offset-2&quot;&gt;</span><br><span class="line">              &lt;div className=&quot;list-group&quot;&gt;</span><br><span class="line">                &lt;MyNavLink to=&quot;/About&quot;&gt;About&lt;/MyNavLink&gt;</span><br><span class="line">                &lt;MyNavLink to=&quot;a/Home/b&quot;&gt;Home&lt;/MyNavLink&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div className=&quot;col-xs-6&quot;&gt;</span><br><span class="line">              &lt;div className=&quot;panel&quot;&gt;</span><br><span class="line">                &lt;div className=&quot;panel-body&quot;&gt;</span><br><span class="line">                  &lt;Route path=&#x27;/Home&#x27; exact component=&#123;Home&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                  &lt;Route path=&#x27;/About&#x27; component=&#123;About&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/Router&gt;</span><br></pre></td></tr></table></figure>



<h3 id="嵌套路由使用"><a href="#嵌套路由使用" class="headerlink" title="嵌套路由使用"></a>嵌套路由使用</h3><ul>
<li>就是路由的里面再写路由</li>
<li>嵌套路由时，需要带上上一级的路径</li>
<li>有子路由的页面，不能使用 <code>exact = &#123;true&#125;</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, Link &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line"></span><br><span class="line">//需求：center页面中有两个子页面</span><br><span class="line">class Center extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div&gt;用户中心页面&lt;br/&gt;</span><br><span class="line">      &lt;Link to=&quot;/center/child1&quot;&gt;子页1&lt;/Link&gt;</span><br><span class="line">      ||</span><br><span class="line">      &lt;Link to=&quot;/center/child2&quot;&gt;子页2&lt;/Link&gt;</span><br><span class="line">      &lt;div className=&quot;child&quot;&gt;</span><br><span class="line">        &lt;Route path=&quot;/center/child1&quot; component=&#123;Child1&#125; /&gt;</span><br><span class="line">        &lt;Route path=&quot;/center/child2&quot; component=&#123;Child2&#125; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const Child1 = () =&gt; (&lt;div&gt;子页 1 页面&lt;/div&gt;)</span><br><span class="line">const Child2 = () =&gt; (&lt;div&gt;子页 2 页面&lt;/div&gt;)</span><br><span class="line"></span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Link to=&#123;&quot;/center&quot;&#125; &gt;用户中心&lt;/Link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/center&quot;&#125; component=&#123;Center&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Njc3Njcx,size_16,color_FFFFFF,t_70-167283194572777.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Njc3Njcx,size_16,color_FFFFFF,t_70-167283195637880.png" alt="在这里插入图片描述"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Njc3Njcx,size_16,color_FFFFFF,t_70-167283197491583.png" alt="在这里插入图片描述"></p>
<h3 id="路由组件传递params参数"><a href="#路由组件传递params参数" class="headerlink" title="路由组件传递params参数"></a>路由组件传递params参数</h3><p>路由传参有三种方式：</p>
<p>方法一：match.params</p>
<p>路由链接（携带参数）：<NavLink></NavLink><br>注册路由（声明接收）：<Route></Route><br>接收参数：const{id,text} &#x3D; this.props.math.params</p>
<p>1.params参数<br>        路由链接(携带参数)：&lt;Link to&#x3D;’&#x2F;demo&#x2F;test&#x2F;tom&#x2F;18’}&gt;详情<br>        注册路由(声明接收)：<Route path="/demo/test/:name/:age" component="{Test}/"><br>        接收参数：this.props.match.params</Route></p>
<p>传递一个参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, NavLink &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line"></span><br><span class="line">const About = (props) =&gt; (</span><br><span class="line">  &lt;div&gt;关于我们&lt;br /&gt;</span><br><span class="line">		接收到的 id ：&#123;props.match.params.userid&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      list: [</span><br><span class="line">        &#123;id:1,text:&quot;aaa&quot;&#125;,</span><br><span class="line">        &#123;id:2,text:&quot;bbb&quot;&#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; list &#125; = this.state;</span><br><span class="line">    console.log(list.id);</span><br><span class="line">    return (&lt;Router&gt;</span><br><span class="line"></span><br><span class="line">      &#123;/* 静态传递params参数 */&#125;</span><br><span class="line">      &lt;NavLink to=&#123;&quot;/about/666&quot;&#125;&gt;About1&lt;/NavLink&gt;</span><br><span class="line">      ---</span><br><span class="line">      &#123;/* 动态传递params参数 */&#125;</span><br><span class="line">      &lt;NavLink to=&#123;`/about/$&#123;list[0].id&#125;`&#125;&gt;About2&lt;/NavLink&gt;</span><br><span class="line"></span><br><span class="line">      &#123;/* 声明接收params参数 */&#125;</span><br><span class="line">      &lt;Route path=&#123;&quot;/about/:userid&quot;&#125; component=&#123;About&#125; /&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">    &lt;/Router&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">      &lt;React.StrictMode&gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">      &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h3 id="传递search参数"><a href="#传递search参数" class="headerlink" title="传递search参数"></a>传递search参数</h3><p>location.search</p>
<blockquote>
<p>路由链接（携带参数）：<code>&lt;NavLink&gt;&lt;/NavLink&gt;</code><br>注册路由（不用接收）：<code>&lt;Route&gt;&lt;/Route&gt;</code><br>接收参数：<code>new URLSearchParams(props.location.search).get(&#39;id&#39;)</code></p>
</blockquote>
<blockquote>
<p>2.search参数<br>        路由链接(携带参数)：&lt;Link to&#x3D;’&#x2F;demo&#x2F;test?name&#x3D;tom&amp;age&#x3D;18’}&gt;详情<br>        注册路由(无需声明，正常注册即可)：<Route path="/demo/test" component="{Test}/"><br>        接收参数：this.props.location.search<br>        备注：获取到的search是urlencoded编码字符串，需要借助querystring解析</Route></p>
</blockquote>
<blockquote>
<p>取出url中的参数</p>
</blockquote>
<p>使用第三方的库querystring</p>
<blockquote>
<p>注意传进的字符串参数为参数部分中不带？的部分</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&quot;querystring&quot;</span></span><br><span class="line"><span class="comment">//将url的参数转换为对象 </span></span><br><span class="line"><span class="keyword">let</span> obj = qs.<span class="title function_">parse</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">slice</span>(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// 将字符串转为url形式</span></span><br><span class="line"><span class="keyword">let</span> obj1 = qs.<span class="title function_">stringift</span>(obj)</span><br></pre></td></tr></table></figure>



<p>自己写的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">split</span>(<span class="string">&quot;&amp;&quot;</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> arr = val.<span class="title function_">split</span>(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> (obj[arr[<span class="number">0</span>]] = arr[<span class="number">1</span>]);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>



<p>案例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, NavLink &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line"></span><br><span class="line">const About = (props) =&gt; (</span><br><span class="line">  &lt;div&gt;关于我们&lt;br /&gt;</span><br><span class="line">  </span><br><span class="line">		接收到的 id ：&#123;new URLSearchParams(props.location.search).get(&#x27;id&#x27;)&#125;&lt;br/&gt;</span><br><span class="line">    接收到的 text ：&#123;new URLSearchParams(props.location.search).get(&#x27;text&#x27;)&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      list: [</span><br><span class="line">        &#123;id:1,text:&quot;aaa&quot;&#125;,</span><br><span class="line">        &#123;id:2,text:&quot;bbb&quot;&#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; list &#125; = this.state;</span><br><span class="line">    console.log(list.id);</span><br><span class="line">    return (&lt;Router&gt;      </span><br><span class="line">      </span><br><span class="line">      &#123;/* 静态传递多个search参数 */&#125;</span><br><span class="line">      &lt;NavLink to=&#123;&quot;/about/666/?id=&#x27;11&#x27;&amp;text=&#x27;ccc&#x27;&quot;&#125;&gt;About1&lt;/NavLink&gt;</span><br><span class="line">      ---</span><br><span class="line">      &#123;/* 动态传递多个search参数 */&#125;</span><br><span class="line">      &lt;NavLink to=&#123;`/about/?id=$&#123;list[0].id&#125;&amp;text=$&#123;list[0].text&#125;`&#125;&gt;About2&lt;/NavLink&gt;</span><br><span class="line"></span><br><span class="line">      </span><br><span class="line">      &#123;/* 无需声明接收search参数 */&#125;</span><br><span class="line">      &lt;Route path=&#123;&quot;/about&quot;&#125; component=&#123;About&#125; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/Router&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">      &lt;React.StrictMode&gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">      &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/image-20230105101515621-16728849185611.png" alt="image-20230105101515621"></p>
<p>案例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import React,&#123;Component&#125; from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, NavLink &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页&lt;/div&gt;)</span><br><span class="line">class Cart extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    console.log(this.props);</span><br><span class="line">    return (&lt;div&gt;购物车页面&lt;br/&gt;</span><br><span class="line">          &#123;/* URLSearchParams：解构？号后面的数据 */&#125;</span><br><span class="line">         用户ID：&#123;new URLSearchParams(this.props.location.search).get(&#x27;id&#x27;)&#125;&lt;br/&gt;</span><br><span class="line">         用户名：&#123;new URLSearchParams(this.props.location.search).get(&#x27;name&#x27;)&#125;</span><br><span class="line">    &lt;/div&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;NavLink to=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; &gt;首页&lt;/NavLink&gt;</span><br><span class="line">      ---</span><br><span class="line">      &lt;NavLink to=&#123;&#123; pathname: &quot;/cart&quot;, search: &quot;?id=123&amp;name=lili&quot; &#125;&#125;&gt;购物车&lt;/NavLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;/*   只完全匹配/ */&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">      &lt;Route path=&#123;&quot;/cart&quot;&#125; component=&#123;Cart&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/image-20230105101750488-16728850719353.png" alt="image-20230105101750488"></p>
<h3 id="传递state参数"><a href="#传递state参数" class="headerlink" title="传递state参数"></a>传递state参数</h3><blockquote>
<p>state参数<br>    路由链接(携带参数)：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;&#123;pathname:</span>&#x27;/<span class="attr">demo</span>/<span class="attr">test</span>&#x27;,<span class="attr">state:</span>&#123;<span class="attr">name:</span>&#x27;<span class="attr">tom</span>&#x27;,<span class="attr">age:18</span>&#125;&#125;&#125;&gt;</span>详情<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>​	注册路由(无需声明，正常注册即可)：<Route path="/demo/test" component="{Test}/"></Route></p>
<p>​	接收参数：this.props.location.state</p>
<p>​	备注：BrowserRouter刷新也可以保留住参数，HashRouter哈西类型在刷新时会出现问题</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, NavLink &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line"></span><br><span class="line">class About extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    console.log(this.props);</span><br><span class="line">    return (&lt;div&gt;</span><br><span class="line">      关于我们&lt;br /&gt;</span><br><span class="line">    &#123;console.log(this.props.location.state)&#125;</span><br><span class="line">		接收到的 id ：&#123;this.props.location.state.id||&#123;&#125;&#125;&lt;br/&gt;</span><br><span class="line">    接收到的 text ：&#123;this.props.location.state.text||&#123;&#125;&#125;</span><br><span class="line">    &lt;/div&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// state在函数组件里面接收不到参数</span><br><span class="line">// const About = (props) =&gt; (</span><br><span class="line">//   &lt;div&gt;关于我们&lt;br /&gt;</span><br><span class="line">//     &#123;console.log(props.location.state)&#125;</span><br><span class="line">// 		接收到的 id ：&#123;props.location.state.id||&#123;&#125;&#125;&lt;br/&gt;</span><br><span class="line">//     接收到的 text ：&#123;props.location.state.text||&#123;&#125;&#125;</span><br><span class="line">//   &lt;/div&gt;</span><br><span class="line">// )</span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      list: [</span><br><span class="line">        &#123;id:1,text:&quot;aaa&quot;&#125;,</span><br><span class="line">        &#123;id:2,text:&quot;bbb&quot;&#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; list &#125; = this.state;</span><br><span class="line">    return (&lt;Router&gt;    </span><br><span class="line">      </span><br><span class="line">      &#123;/* 静态传递多个state参数 */&#125;</span><br><span class="line">      &lt;NavLink to=&#123;&#123;pathname:&quot;/about&quot;,state:&#123;id:&#x27;11&#x27;,text:&#x27;ccc&#x27;&#125;&#125;&#125;&gt;About1&lt;/NavLink&gt;</span><br><span class="line">      ---</span><br><span class="line">      &#123;/* 动态传递多个state参数 */&#125;</span><br><span class="line">      &lt;NavLink to=&#123;&#123;pathname:&quot;/about&quot;,state:&#123;id:list[0].id,text:list[0].text&#125;&#125;&#125;&gt;About2&lt;/NavLink&gt;</span><br><span class="line"></span><br><span class="line">      </span><br><span class="line">      &#123;/* 无需声明接收state参数 */&#125;</span><br><span class="line">      &lt;Route path=&#123;&quot;/about&quot;&#125; component=&#123;About&#125; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/Router&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">      &lt;React.StrictMode&gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">      &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/20210430210545873.png"></p>
<p><img src="/React/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Njc3Njcx,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"></p>
<h3 id="BrowserRouter与HashRouter区别"><a href="#BrowserRouter与HashRouter区别" class="headerlink" title="BrowserRouter与HashRouter区别"></a>BrowserRouter与HashRouter区别</h3><p>1.底层原理不一样：<br>            BrowserRouter使用的是H5的history API，不兼容IE9及以下版本。<br>            HashRouter使用的是URL的哈希值。<br>2.path表现形式不一样<br>            BrowserRouter的路径中没有#,例如：localhost:3000&#x2F;demo&#x2F;test<br>            HashRouter的路径包含#,例如：localhost:3000&#x2F;#&#x2F;demo&#x2F;test<br>3.刷新后对路由state参数的影响<br>            (1).BrowserRouter没有任何影响，因为state保存在history对象中。<br>            (2).HashRouter刷新后会导致路由state参数的丢失！！！</p>
<p>4.备注：HashRouter可以用于解决一些路径错误相关的问题。</p>
<h3 id="路由的push与replace"><a href="#路由的push与replace" class="headerlink" title="路由的push与replace"></a>路由的push与replace</h3><p>默认开启的是push</p>
<p>开启replace模式replace &#x3D;{true}或replace</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink</span><br><span class="line">    replace =&#123;true&#125;</span><br><span class="line">    to=&#123;`/home/message/Detail/?id=$&#123;id&#125;&amp;title=$&#123;title&#125;&amp;a=1&amp;b=2`&#125;</span><br><span class="line">&gt;</span><br><span class="line">    &#123;val.title&#125;</span><br><span class="line">&lt;/NavLink&gt;</span><br></pre></td></tr></table></figure>



<h3 id="lazyLoad"><a href="#lazyLoad" class="headerlink" title="lazyLoad"></a>lazyLoad</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//1.通过React的lazy函数配合import()函数动态加载路由组件 ===&gt; 路由组件代码会被分开打包</span><br><span class="line">	const Login = lazy(()=&gt;import(&#x27;@/pages/Login&#x27;))</span><br><span class="line">	</span><br><span class="line">	//2.通过&lt;Suspense&gt;指定在加载得到路由打包文件前显示一个自定义loading界面</span><br><span class="line">	&lt;Suspense fallback=&#123;&lt;h1&gt;loading.....&lt;/h1&gt;&#125;&gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">            &lt;Route path=&quot;/xxx&quot; component=&#123;Xxxx&#125;/&gt;</span><br><span class="line">            &lt;Redirect to=&quot;/login&quot;/&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">    &lt;/Suspense&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component, lazy,Suspense &#125; from &quot;react&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  BrowserRouter as Router,</span><br><span class="line">  NavLink,</span><br><span class="line">  Route,</span><br><span class="line">  Switch,</span><br><span class="line">  StaticRouter</span><br><span class="line">&#125; from &quot;react-router-dom&quot;;</span><br><span class="line">/* import Home from &quot;./Home&quot;;</span><br><span class="line">import Abount from &quot;./Abount&quot;; */</span><br><span class="line"></span><br><span class="line">const Home = lazy(() =&gt; import(&quot;./Home&quot;))</span><br><span class="line">const Abount = lazy(()=&gt;import(&quot;./Abount&quot;))</span><br><span class="line"></span><br><span class="line">export default class Demo extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div className=&quot;row&quot;&gt;</span><br><span class="line">          &lt;div className=&quot;col-xs-offset-2 col-xs-8&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;page-header&quot;&gt;</span><br><span class="line">              &lt;h2&gt;React Router Demo&lt;/h2&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;Router&gt;</span><br><span class="line">          &lt;div className=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div className=&quot;col-xs-2 col-xs-offset-2&quot;&gt;</span><br><span class="line">              &lt;div className=&quot;list-group&quot;&gt;</span><br><span class="line">                &lt;NavLink className=&quot;list-group-item&quot; to=&quot;/about&quot;&gt;</span><br><span class="line">                  About</span><br><span class="line">                &lt;/NavLink&gt;</span><br><span class="line">                &lt;NavLink className=&quot;list-group-item&quot; to=&quot;/home&quot;&gt;</span><br><span class="line">                  Home</span><br><span class="line">                &lt;/NavLink&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div className=&quot;col-xs-6&quot;&gt;</span><br><span class="line">              &lt;div className=&quot;panel&quot;&gt;</span><br><span class="line">                &lt;div className=&quot;panel-body&quot;&gt;</span><br><span class="line">                  &lt;Suspense fallback=&#123;&lt;h1&gt;loading.....&lt;/h1&gt;&#125;&gt;</span><br><span class="line">                    &lt;Switch&gt;</span><br><span class="line">                      &lt;Route path=&quot;/home&quot; component=&#123;Home&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                      &lt;Route path=&quot;/about&quot; component=&#123;Abount&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                    &lt;/Switch&gt;</span><br><span class="line">                  &lt;/Suspense&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/Router&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h3><p>React Router 中文文档：<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://github.com/react-guide/react-router-cn">https://github.com/react-guide/react-router-cn</a></p>
<p>React Router 使用教程：<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://www.ruanyifeng.com/blog/2016/05/react_router.html?utm_source=tool.lu">http://www.ruanyifeng.com/blog/2016/05/react_router.html?utm_source&#x3D;tool.lu</a></p>
<blockquote>
<p>借助this.prosp.history对象上的API对操作路由跳转、前进、后退<br>                            -this.prosp.history.push()<br>                            -this.prosp.history.replace()<br>                            -this.prosp.history.goBack()后退<br>                            -this.prosp.history.goForward()前进<br>                            -this.prosp.history.go()</p>
</blockquote>
<p>react-router-dom 编程式路由导航 (v5)</p>
<p>1.push跳转+携带params参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">props.<span class="property">history</span>.<span class="title function_">push</span>(<span class="string">`/b/child1/<span class="subst">$&#123;id&#125;</span>/<span class="subst">$&#123;title&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>



<p>2.push跳转+携带search参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">props.<span class="property">history</span>.<span class="title function_">push</span>(<span class="string">`/b/child1?id=<span class="subst">$&#123;id&#125;</span>&amp;title=<span class="subst">$&#123;title&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>



<p>3.push跳转+携带state参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">props.<span class="property">history</span>.<span class="title function_">push</span>(&#123;<span class="attr">pathname</span>:<span class="string">`/b/child1`</span>, state：&#123; id, title &#125;&#125;);</span><br></pre></td></tr></table></figure>



<p>4.replace跳转+携带params参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">replace</span>(<span class="string">`/home/message/detail/<span class="subst">$&#123;id&#125;</span>/<span class="subst">$&#123;title&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>



<p>5.replace跳转+携带search参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">replace</span>(<span class="string">`/home/message/detail?id=<span class="subst">$&#123;id&#125;</span>&amp;title=<span class="subst">$&#123;title&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>



<p>6.replace跳转+携带state参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">replace</span>(<span class="string">`/home/message/detail`</span>, &#123; id, title &#125;);</span><br></pre></td></tr></table></figure>



<p>7.前进</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">goForward</span>();</span><br></pre></td></tr></table></figure>



<p>8.回退</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">goBack</span>();</span><br></pre></td></tr></table></figure>



<p>9.前进或回退 ( go )</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">go</span>(-<span class="number">2</span>); <span class="comment">//回退到前2条的路由</span></span><br></pre></td></tr></table></figure>



<p>在一般组件中使用编程式路由导航 (非路由组件)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;withRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Header</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="comment">// withRouter(Header)后，就可以在一般组件内部使用 this.props.history </span></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withRouter</span>(<span class="title class_">Header</span>)</span><br></pre></td></tr></table></figure>



<p>react-router-dom 编程式路由导航 (v6)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// v6版本编程导航使用 useNavigate (以下为引入代码)</span></span><br><span class="line"><span class="keyword">import</span> &#123;  useNavigate &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>();</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>1.push跳转+携带params参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">navigate</span>(<span class="string">`/b/child1/<span class="subst">$&#123;id&#125;</span>/<span class="subst">$&#123;title&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>



<p>2.push跳转+携带search参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">navigate</span>(<span class="string">`/b/child2?id=<span class="subst">$&#123;id&#125;</span>&amp;title=<span class="subst">$&#123;title&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>



<p>3.push跳转+携带state参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">navigate</span>(<span class="string">&quot;/b/child2&quot;</span>, &#123; <span class="attr">state</span>: &#123; id, title &#125;&#125;);</span><br></pre></td></tr></table></figure>



<p>4.replace跳转+携带params参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">navigate</span>(<span class="string">`/b/child1/<span class="subst">$&#123;id&#125;</span>/<span class="subst">$&#123;title&#125;</span>`</span>,&#123;<span class="attr">replace</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure>



<p>5.replace跳转+携带search参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">navigate</span>(<span class="string">`/b/child2?id=<span class="subst">$&#123;id&#125;</span>&amp;title=<span class="subst">$&#123;title&#125;</span>`</span>,&#123;<span class="attr">replace</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure>



<p>6.replace跳转+携带state参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">navigate</span>(<span class="string">&quot;/b/child2&quot;</span>, &#123; <span class="attr">state</span>: &#123; id, title &#125;,<span class="attr">replace</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="withRouter-函数"><a href="#withRouter-函数" class="headerlink" title="withRouter 函数"></a>withRouter 函数</h3><ul>
<li>withRouter 可以给普通的组件添加路由属性</li>
<li>一般用在头部，尾部，withRouter 用法是高阶组件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import &#123; withRouter &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">import &quot;./header.css&quot;</span><br><span class="line">class Header extends Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.state = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    goFenlei = () =&gt; &#123;</span><br><span class="line">        console.log(this);</span><br><span class="line">        //Header 是一个组件，他不存在 路由中的history属性</span><br><span class="line">        //可以使用 withRouter的高阶组件添加 history属性</span><br><span class="line">        this.props.history.push(&quot;/about/23&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div className=&quot;header&quot;&gt;头部</span><br><span class="line">                &lt;button onClick=&#123;this.goFenlei&#125;&gt;点击跳转到关于我们&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// withRouter(Header)后，就可以在一般组件内部使用 this.props.history </span><br><span class="line">export default withRouter(Header);</span><br></pre></td></tr></table></figure>

<h3 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/16f35c090706">参考写法</a></p>
<ul>
<li>Redirect 重定向 ，可以做路由前置守卫</li>
<li>Prompt 路由后置守卫</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, Link, Switch, Redirect, Prompt &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">//BrowserRouter 不带#，NavLink有激活状态链接效果 </span><br><span class="line">const Home = () =&gt; (&lt;div&gt;首页&lt;/div&gt;)</span><br><span class="line"></span><br><span class="line">class Center extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (loginType ? &lt;div&gt;用户中心&lt;/div&gt; : &lt;Redirect to=&quot;/login&quot; /&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const Login = (props) =&gt; (&lt;div&gt;登录&lt;/div&gt;)</span><br><span class="line">class Cart extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    console.log(this.props);</span><br><span class="line">    return (&lt;div&gt;购物车页面</span><br><span class="line"></span><br><span class="line">      &lt;Prompt when=&#123;true&#125; message=&#123;&quot;您确定要离开这个页面么？&quot;&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">let loginType = false;</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Link to=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; &gt;首页&lt;/Link&gt;</span><br><span class="line">      --</span><br><span class="line">      &lt;Link to=&#123;&#123; pathname: &quot;/cart&quot; &#125;&#125;&gt;购物车页面&lt;/Link&gt;</span><br><span class="line">      --</span><br><span class="line">      &lt;Link to=&#123;&quot;/center&quot;&#125; &gt;用户中心&lt;/Link&gt;</span><br><span class="line">      --</span><br><span class="line">      &lt;Link to=&#123;&quot;/login&quot;&#125;  &gt;登录&lt;/Link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/&quot;&#125; exact=&#123;true&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/cart&quot;&#125; component=&#123;Cart&#125; /&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/center&quot;&#125; component=&#123;Center&#125; /&gt;</span><br><span class="line">        &lt;Route path=&#123;&quot;/login&quot;&#125; component=&#123;Login&#125; /&gt;</span><br><span class="line">        &lt;Redirect from=&quot;/*&quot; to=&quot;/&quot; /&gt;</span><br><span class="line">        &#123;/* 404页面定位到首页 */&#125;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">上面代码实现的功能：</span><br><span class="line">1. 给购物车页面设置了Prompt 路由后置守卫</span><br><span class="line">2. 当你想离开购物车页面时，会弹出一个确认框</span><br><span class="line">3. 给404页面设置了 Redirect 重定向</span><br><span class="line">4. 当路径不对时，会重新定向到login登录页面</span><br><span class="line">5. 给用户中心页面设置了Redirect 路由前置守卫</span><br><span class="line">6. 当你为登录时，无法打开用户中心，只能跳转到login登录页面先登录</span><br></pre></td></tr></table></figure>













<h2 id="React-UI组件库"><a href="#React-UI组件库" class="headerlink" title="React UI组件库"></a>React UI组件库</h2><h3 id="流行的开源React-UI组件库"><a href="#流行的开源React-UI组件库" class="headerlink" title="流行的开源React UI组件库"></a>流行的开源React UI组件库</h3><p>material-ui(国外)<br>1.官网: <a target="_blank" rel="noopener" href="http://www.material-ui.com/#/">http://www.material-ui.com/#/</a><br>2.github: <a target="_blank" rel="noopener" href="https://github.com/callemall/material-ui">https://github.com/callemall/material-ui</a><br>ant-design(国内蚂蚁金服)<br>1.官网: <a target="_blank" rel="noopener" href="https://ant.design/index-cn">https://ant.design/index-cn</a><br>2.Github: <a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/">https://github.com/ant-design/ant-design/</a></p>
<blockquote>
<p>1.安装依赖：yarn add react-app-rewired customize-cra babel-plugin-import less less-loader<br>            2.修改package.json<br>                    ….<br>                        “scripts”: {<br>                            “start”: “react-app-rewired start”,<br>                            “build”: “react-app-rewired build”,<br>                            “test”: “react-app-rewired test”,<br>                            “eject”: “react-scripts eject”<br>                        },<br>                    ….<br>            3.根目录下创建config-overrides.js<br>                    &#x2F;&#x2F;配置具体的修改规则<br>                    const { override, fixBabelImports,addLessLoader} &#x3D; require(‘customize-cra’);<br>                    module.exports &#x3D; override(<br>                        fixBabelImports(‘import’, {<br>                            libraryName: ‘antd’,<br>                            libraryDirectory: ‘es’,<br>                            style: true,<br>                        }),<br>                        addLessLoader({<br>                            lessOptions:{<br>                                javascriptEnabled: true,<br>                                modifyVars: { ‘@primary-color’: ‘green’ },<br>                            }<br>                        }),<br>                    );<br>                4.备注：不用在组件里亲自引入样式了，即：import ‘antd&#x2F;dist&#x2F;antd.css’应该删掉</p>
</blockquote>
<h2 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h2><blockquote>
<p>安装yarn add redux</p>
</blockquote>
<h3 id="redux理解"><a href="#redux理解" class="headerlink" title="redux理解"></a>redux理解</h3><h4 id="学习文档"><a href="#学习文档" class="headerlink" title="学习文档"></a>学习文档</h4><p>1.英文文档: <a target="_blank" rel="noopener" href="https://redux.js.org/">https://redux.js.org/</a><br>2.中文文档: <a target="_blank" rel="noopener" href="http://www.redux.org.cn/">http://www.redux.org.cn/</a><br>3.Github: <a target="_blank" rel="noopener" href="https://github.com/reactjs/redux">https://github.com/reactjs/redux</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/GreyCastle/article/details/105472526">多个reducre参考</a></p>
<h3 id="redux是什么"><a href="#redux是什么" class="headerlink" title="redux是什么"></a>redux是什么</h3><p>1.redux是一个专门用于做状态管理的JS库(<strong>不是react插件库</strong>)。<br>2.<strong>它可以用在react, angular, vue等项目中, 但基本与react配合使用。</strong><br>3.作用: 集中式管理react应用中多个组件共享的状态。</p>
<h3 id="什么情况下需要使用redux"><a href="#什么情况下需要使用redux" class="headerlink" title="什么情况下需要使用redux"></a>什么情况下需要使用redux</h3><p>1.某个组件的状态，需要让其他组件可以随时拿到（共享）。</p>
<p>2.一个组件需要改变另一个组件的状态（通信）。</p>
<p>3.总体原则：能不用就不用, 如果不用比较吃力才考虑使用。</p>
<h3 id="redux工作流程"><a href="#redux工作流程" class="headerlink" title="redux工作流程"></a>redux工作流程</h3><p><img src="/React/image-20230106110239646-16729741614052.png" alt="image-20230106110239646"></p>
<p><img src="/React/aceec9d1ca114dfb8cdd2ce7c428db1etplv-k3u1fbpfcp-zoom-in-crop-mark4536000.png" alt="image.png"></p>
<blockquote>
<p>store：store是保存数据state的地方，你可以把它看成是数据源对数据进行统一管理，整个应用中只能有一个store，所有组件均可通过redux规范与store中的数据进行交互</p>
<p>action：action 就是 JavaScript 普通对象。并且action 内必须使用一个字符串类型的 type 字段来表示将要执行的动作(规定action对象里面必须有type字段，否则代码将报错)</p>
<p>reducers: actions发送给store，根据action中的type来改变相应的store内的state，但是如何改变呢？就是通过reducers来改变的，reducers是一个纯函数，并且记住 actions 只是描述了有事情发生了这一事实，并没有描述应用如何更新state，而是有reducers根据action对象内的信息来改变store内的数据</p>
</blockquote>
<h3 id="redux的三个核心概念"><a href="#redux的三个核心概念" class="headerlink" title="redux的三个核心概念"></a>redux的三个核心概念</h3><h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><blockquote>
<p>1.动作的对象<br>2.包含2个属性<br>type：标识属性, 值为字符串, 唯一, 必要属性<br>data：数据属性, 值类型任意, 可选属性<br>3.例子：{ type: ‘ADD_STUDENT’,data:{name: ‘tom’,age:18} }</p>
</blockquote>
<h4 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h4><blockquote>
<p>1.用于初始化状态、加工状态。<br>2.加工时，根据旧的state和action， 产生新的state的纯函数。</p>
</blockquote>
<p>初始化时的旧state是undefined</p>
<h4 id="store"><a href="#store" class="headerlink" title="store"></a>store</h4><p>1.将state、action、reducer联系在一起的对象<br>2.如何得到此对象?</p>
<blockquote>
<p>​	1)import {createStore} from ‘redux’<br>​	2)import reducer from ‘.&#x2F;reducers’<br>​	3)const store &#x3D; createStore(reducer)</p>
</blockquote>
<p>3.此对象的功能?</p>
<blockquote>
<p>​	1)getState(): 得到state<br>​	2)dispatch(action): 分发action, 触发reducer调用, 产生新的state<br>​	3)subscribe(listener): 注册监听, 当产生了新的state时, 自动调用</p>
</blockquote>
<h3 id="redux的核心API"><a href="#redux的核心API" class="headerlink" title="redux的核心API"></a>redux的核心API</h3><h4 id="createstore"><a href="#createstore" class="headerlink" title="createstore()"></a>createstore()</h4><p>作用：创建包含指定reducer的store对象</p>
<h4 id="store对象"><a href="#store对象" class="headerlink" title="store对象"></a>store对象</h4><p>1.作用: redux库最核心的管理对象<br>2.它内部维护着:</p>
<blockquote>
<p>1)state<br>2)reducer</p>
</blockquote>
<p>3.核心方法:</p>
<blockquote>
<p>1)getState()获取store中的状态<br>2)dispatch(action)触发reducer中的行为<br>3)subscribe(listener)当store中的状态发生改变时调用store.subscribe</p>
</blockquote>
<blockquote>
<p>getState()只用一个reducre函数时返回的就是prestore</p>
<p>多个reducre时返回的是以函数名为属性的对象</p>
</blockquote>
<p><img src="/React/image-20230106210228090.png" alt="image-20230106210228090"></p>
<p>4.具体编码:</p>
<blockquote>
<p>1)store.getState()<br>2)store.dispatch({type:’INCREMENT’, number})<br>3)store.subscribe(render)</p>
</blockquote>
<h4 id="applyMiddleware"><a href="#applyMiddleware" class="headerlink" title="applyMiddleware()"></a>applyMiddleware()</h4><p>作用：应用上基于redux的中间件(插件库)redux内置的函数（应用异步action）</p>
<h4 id="combineReducers"><a href="#combineReducers" class="headerlink" title="combineReducers()"></a>combineReducers()</h4><p>作用：<strong>合并多个reducer函数</strong>redux内置的函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span></span><br><span class="line"><span class="keyword">import</span> countreducer <span class="keyword">from</span> <span class="string">&quot;./countrReducer&quot;</span></span><br><span class="line"><span class="keyword">import</span> homereducre <span class="keyword">from</span> <span class="string">&quot;./home_reducre&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">combineReducers</span>(&#123; countreducer, homereducre &#125;);</span><br></pre></td></tr></table></figure>



<h3 id="简写案例"><a href="#简写案例" class="headerlink" title="简写案例"></a>简写案例</h3><blockquote>
<p>　</p>
<p>　		(1).去除Count组件自身的状态<br>　		(2).src下建立:<br>　				-redux<br>　				-store.js<br>　				-count_reducer.js<br>　		(3).store.js：<br>　					1).引入redux中的createStore函数，创建一个store<br>　					2).createStore调用时要传入一个为其服务的reducer<br>　					3).记得暴露store对象<br>　	<br>　		(4).count_reducer.js：<br>　					1).reducer的本质是一个函数，接收：preState,action，返回加工后的状态<br>　					2).reducer有两个作用：初始化状态，加工状态<br>　					3).reducer被第一次调用时，是store自动触发的，<br>　								传递的preState是undefined,<br>　								传递的action是:{type:‘@@REDUX&#x2F;INIT_a.2.b.4}<br>　	<br>　		(5).在index.js中监测store中状态的改变，一旦发生改变重新渲染<App>（方法二）<br>　			备注：redux只负责管理状态，至于状态的改变驱动着页面的展示，要靠我们自己写。</App></p>
</blockquote>
<p>store.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  该文件专门用于暴露一个store对象，整个应用只有一个store对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入createStore，专门用于创建redux中最为核心的store对象</span></span><br><span class="line"><span class="comment">// 版本3以上的使用，废弃了原有的createStore改成了legacy_createStore</span></span><br><span class="line"><span class="comment">// import &#123; legacy_createStore as createStore &#125; from &#x27;redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入为Count组件服务的reducer</span></span><br><span class="line"><span class="keyword">import</span> countReducer <span class="keyword">from</span> <span class="string">&#x27;./countrReducer&#x27;</span></span><br><span class="line"><span class="comment">//暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(countReducer)</span><br></pre></td></tr></table></figure>

<p>countreducer.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  1.该文件是用于创建一个为Count组件服务的reducer，reducer的本质就是一个函数</span></span><br><span class="line"><span class="comment">  2.reducer函数会接到两个参数，分别为：之前的状态(preState)，动作对象(action)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">countreducer</span>(<span class="params">preStore = <span class="number">0</span>,action</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, data &#125; = action;</span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;INCREMENT&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> preStore + data.<span class="property">value</span> * <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;decrement&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> preStore - data.<span class="property">value</span> * <span class="number">1</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> preStore;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom/client&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./redux/store&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>));</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"><span class="comment">//监听store状态改变方法二：</span></span><br><span class="line">store.<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>App.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Count</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Count&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Count</span>&gt;</span><span class="tag">&lt;/<span class="name">Count</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// operation</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Count.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &quot;react&quot;;</span><br><span class="line">import store from &quot;../../redux/store.js&quot;</span><br><span class="line"></span><br><span class="line">export default class Count extends Component &#123;</span><br><span class="line">  // state = &#123; count: store.getState &#125;;</span><br><span class="line">  //监视redux中状态的改变，只要变化就调用render</span><br><span class="line">  // 写法一</span><br><span class="line">  //componentDidMount() &#123;</span><br><span class="line">    // 当store中的状态发生改变时调用store.subscribe</span><br><span class="line">    //store.subscribe(() =&gt; &#123;</span><br><span class="line">      // 不能直接调用render</span><br><span class="line">      //this.setState(&#123;&#125;);</span><br><span class="line">    //&#125;);</span><br><span class="line">  //&#125;</span><br><span class="line">  //加法</span><br><span class="line">  increment = () =&gt; &#123;</span><br><span class="line">    const &#123; value &#125; = this.selectNumber;</span><br><span class="line">    let action = &#123; type: &quot;INCREMENT&quot;,data:&#123;value&#125; &#125;;</span><br><span class="line">    store.dispatch(action);</span><br><span class="line">  &#125;;</span><br><span class="line">  //减法</span><br><span class="line">  decrement = () =&gt; &#123;</span><br><span class="line">    const &#123; value &#125; = this.selectNumber;</span><br><span class="line">    let action = &#123; type: &quot;decrement&quot;, data: &#123; value &#125; &#125;;</span><br><span class="line">    store.dispatch(action);</span><br><span class="line">  &#125;;</span><br><span class="line">  //奇数再加</span><br><span class="line">  incrementIfOdd = () =&gt; &#123;</span><br><span class="line">    const &#123; value &#125; = this.selectNumber;</span><br><span class="line">    let count = store.getState();</span><br><span class="line">    let action = &#123; type: &quot;INCREMENT&quot;, data: &#123; value &#125; &#125;;</span><br><span class="line">    if (count % 2 !== 0) &#123;</span><br><span class="line">      store.dispatch(action);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  //异步加</span><br><span class="line">  incrementAsync = () =&gt; &#123;</span><br><span class="line">    const &#123; value &#125; = this.selectNumber;</span><br><span class="line">    let action = &#123; type: &quot;INCREMENT&quot;, data: &#123; value &#125; &#125;;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      store.dispatch(action);</span><br><span class="line">    &#125;, 500);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;当前求和为：&#123;store.getState()&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;select ref=&#123;(c) =&gt; (this.selectNumber = c)&#125;&gt;</span><br><span class="line">          &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span><br><span class="line">          &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><br><span class="line">          &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">        &amp;nbsp;</span><br><span class="line">        &lt;button onClick=&#123;this.increment&#125;&gt;+&lt;/button&gt;&amp;nbsp;</span><br><span class="line">        &lt;button onClick=&#123;this.decrement&#125;&gt;-&lt;/button&gt;&amp;nbsp;</span><br><span class="line">        &lt;button onClick=&#123;this.incrementIfOdd&#125;&gt;当前求和为奇数再加&lt;/button&gt;&amp;nbsp;</span><br><span class="line">        &lt;button onClick=&#123;this.incrementAsync&#125;&gt;异步加&lt;/button&gt;&amp;nbsp;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="完整版案例"><a href="#完整版案例" class="headerlink" title="完整版案例"></a>完整版案例</h3><blockquote>
<p>新增文件：<br>            1.count_action.js 专门用于创建action对象<br>            2.constant.js 放置容易写错的type值</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  该模块是用于定义action对象中type类型的常量值，目的只有一个：便于管理的同时防止程序员单词写错</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">INCREMENT</span> = <span class="string">&#x27;increment&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">DECREMENT</span> = <span class="string">&#x27;decrement&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  该文件专门为Count组件生成action对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">INCREMENT</span>, <span class="variable constant_">DECREMENT</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./constant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">createIncrementAction</span> = data =&gt; (&#123; <span class="attr">type</span>: <span class="variable constant_">INCREMENT</span>, data &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">createDecrementAction</span> = data =&gt; (&#123; <span class="attr">type</span>: <span class="variable constant_">DECREMENT</span>, data &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  1.该文件是用于创建一个为Count组件服务的reducer，reducer的本质就是一个函数</span></span><br><span class="line"><span class="comment">  2.reducer函数会接到两个参数，分别为：之前的状态(preState)，动作对象(action)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">INCREMENT</span>, <span class="variable constant_">DECREMENT</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./constant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">countreducer</span>(<span class="params">preStore = <span class="number">0</span>,action</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, data &#125; = action;</span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="attr">INCREMENT</span>:</span><br><span class="line">      <span class="keyword">return</span> preStore + data.<span class="property">value</span> * <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="attr">DECREMENT</span>:</span><br><span class="line">      <span class="keyword">return</span> preStore - data.<span class="property">value</span> * <span class="number">1</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> preStore;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &quot;react&quot;;</span><br><span class="line">import store from &quot;../../redux/store.js&quot;</span><br><span class="line">import &#123;</span><br><span class="line">  createIncrementAction,</span><br><span class="line">  createDecrementAction,</span><br><span class="line">&#125; from &quot;../../redux/count_action&quot;;</span><br><span class="line"></span><br><span class="line">export default class Count extends Component &#123;</span><br><span class="line">  // state = &#123; count: store.getState &#125;;</span><br><span class="line">  //监视redux中状态的改变，只要变化就调用render</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    // 当store中的状态发生改变时调用store.subscribe</span><br><span class="line">    store.subscribe(() =&gt; &#123;</span><br><span class="line">      // 不能直接调用render</span><br><span class="line">      this.setState(&#123;&#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  //加法</span><br><span class="line">  increment = () =&gt; &#123;</span><br><span class="line">    const &#123; value &#125; = this.selectNumber;</span><br><span class="line">    store.dispatch(createIncrementAction(&#123;value&#125;));</span><br><span class="line">  &#125;;</span><br><span class="line">  //减法</span><br><span class="line">  decrement = () =&gt; &#123;</span><br><span class="line">    const &#123; value &#125; = this.selectNumber;</span><br><span class="line">    store.dispatch(createDecrementAction(&#123;value&#125;));</span><br><span class="line">  &#125;;</span><br><span class="line">  //奇数再加</span><br><span class="line">  incrementIfOdd = () =&gt; &#123;</span><br><span class="line">    const &#123; value &#125; = this.selectNumber;</span><br><span class="line">    let count = store.getState();</span><br><span class="line">    if (count % 2 !== 0) &#123;</span><br><span class="line">      store.dispatch(createIncrementAction(&#123; value &#125;));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  //异步加</span><br><span class="line">  incrementAsync = () =&gt; &#123;</span><br><span class="line">    const &#123; value &#125; = this.selectNumber;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      store.dispatch(createIncrementAction(&#123; value &#125;));</span><br><span class="line">    &#125;, 500);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;当前求和为：&#123;store.getState()&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;select ref=&#123;(c) =&gt; (this.selectNumber = c)&#125;&gt;</span><br><span class="line">          &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span><br><span class="line">          &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><br><span class="line">          &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">        &amp;nbsp;</span><br><span class="line">        &lt;button onClick=&#123;this.increment&#125;&gt;+&lt;/button&gt;&amp;nbsp;</span><br><span class="line">        &lt;button onClick=&#123;this.decrement&#125;&gt;-&lt;/button&gt;&amp;nbsp;</span><br><span class="line">        &lt;button onClick=&#123;this.incrementIfOdd&#125;&gt;当前求和为奇数再加&lt;/button&gt;&amp;nbsp;</span><br><span class="line">        &lt;button onClick=&#123;this.incrementAsync&#125;&gt;异步加&lt;/button&gt;&amp;nbsp;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="异步action"><a href="#异步action" class="headerlink" title="异步action"></a>异步action</h3><blockquote>
<p>　　(1).明确：延迟的动作不想交给组件自身，想交给action<br>　		 (2).何时需要异步action：想要对状态进行操作，但是具体的数据靠异步任务返回。<br>　		 (3).具体编码：<br>　		 		1).yarn add redux-thunk，并配置在store中<br>　		 		2).创建action的函数不再返回一般对象，而是一个函数，该函数中写异步任务。<br>　		 		3).异步任务有结果后，分发一个同步的action去真正操作数据。<br>　		 (4).备注：异步action不是必须要写的，完全可以自己等待异步任务的结果了再去分发同步action。</p>
</blockquote>
<p>action参数可以是对象类型（同步），也可以是函数类型（异步）</p>
<p>需要安装redux-thunk包</p>
<p>配置store.js</p>
<p>需要引入applyMiddleware与thunk</p>
<blockquote>
<p><strong>配置store后给dispatch传递的不是普通对象，而是函数时会自动调用该函数并且不会调用reducre函数</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  该文件专门用于暴露一个store对象，整个应用只有一个store对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入createStore，专门用于创建redux中最为核心的store对象</span></span><br><span class="line"><span class="comment">// 版本3以上的使用，废弃了原有的createStore改成了legacy_createStore</span></span><br><span class="line"><span class="comment">// import &#123; legacy_createStore as createStore &#125; from &#x27;redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&quot;redux-thunk&quot;</span></span><br><span class="line"><span class="comment">//引入为Count组件服务的reducer</span></span><br><span class="line"><span class="keyword">import</span> countReducer <span class="keyword">from</span> <span class="string">&#x27;./countrReducer&#x27;</span></span><br><span class="line"><span class="comment">//暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(countReducer, <span class="title function_">applyMiddleware</span>(thunk))</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  该文件专门为Count组件生成action对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">INCREMENT</span>, <span class="variable constant_">DECREMENT</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./constant&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">createIncrementAction</span> = data =&gt; (&#123; <span class="attr">type</span>: <span class="variable constant_">INCREMENT</span>, data &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">createDecrementAction</span> = data =&gt; (&#123; <span class="attr">type</span>: <span class="variable constant_">DECREMENT</span>, data &#125;)</span><br><span class="line"><span class="comment">// 异步的</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">createIncrementAsyncAction</span> = (<span class="params">data, time</span>) =&gt; &#123;</span><br><span class="line">  	<span class="comment">// 配置store后给dispatch传递的不是普通对象，而是函数时会自动调用该函数并且不会调用reducre函数</span></span><br><span class="line">    <span class="comment">// 返回为函数时调用这个函数不调用reducre</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> store.<span class="title function_">dispatch</span>(<span class="title function_">createIncrementAction</span>(data))</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="redux开发这工具使用"><a href="#redux开发这工具使用" class="headerlink" title="redux开发这工具使用"></a>redux开发这工具使用</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1wy4y1D7JT?p=113&spm_id_from=pageDriver&vd_source=031f631a87cca114e71194f12ec3fc3f">视屏介绍</a></p>
<blockquote>
<p>(1).yarn add redux-devtools-extension<br>            (2).store中进行配置<br>                    import {composeWithDevTools} from ‘redux-devtools-extension’<br>                    const store &#x3D; createStore(allReducer,composeWithDevTools(applyMiddleware(thunk)))</p>
</blockquote>
<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><blockquote>
<p>在reducer中返回的是一个对象，<strong>redux会将返回值与之前的值进行一个浅比较（对象类型比较引用地址）</strong>故在使修改数组的方法修改数组时，redux不会发生更新</p>
</blockquote>
<h2 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h2><p><img src="/React/react-redux%E6%A8%A1%E5%9E%8B%E5%9B%BE.png" alt="react-redux模型图"></p>
<blockquote>
<p>(1).明确两个概念：<br>                        1).UI组件:不能使用任何redux的api，只负责页面的呈现、交互等。<br>                        2).容器组件：负责和redux通信，将结果交给UI组件。<br>            (2).如何创建一个容器组件————靠react-redux 的 connect函数<br>                            connect(mapStateToProps,mapDispatchToProps)(UI组件)<br>                                -mapStateToProps:映射状态，返回值是一个对象<br>                                -mapDispatchToProps:映射操作状态的方法，返回值是一个对象<br>            (3).备注1：<strong>容器组件中的store是靠props传进去的，而不是在容器组件中直接引入</strong><br>            (4).备注2：mapDispatchToProps，<strong>也可以是一个对象</strong></p>
</blockquote>
<blockquote>
<p>(1).容器组件和UI组件整合一个文件<br>            (2).无需自己给容器组件传递store，给<App>包裹一个<Provider store="{store}">即可。<br>            (3).使用了react-redux后也不用再自己检测redux中状态的改变了，容器组件可以自动完成这个工作。<br>            (4).mapDispatchToProps也可以简单的写成一个对象<br>            (5).一个组件要和redux“打交道”要经过哪几步？<br>                            (1).定义好UI组件—不暴露<br>                            (2).引入connect生成一个容器组件，并暴露，写法如下：<br>                                    connect(<br>                                        state &#x3D;&gt; ({key:value}), &#x2F;&#x2F;映射状态<br>                                        {key:xxxxxAction} &#x2F;&#x2F;映射操作状态的方法<br>                                    )(UI组件)<br>                            (4).在UI组件中通过this.props.xxxxxxx读取和操作状态</Provider></App></p>
</blockquote>
<h3 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h3><p>React-Redux提供connect方法，用于从 UI 组件生成容器组件。connect的意思，就是将这两种组件连起来。</p>
<p>1、导入</p>
<blockquote>
<p>import { connect } from ‘react-redux’</p>
</blockquote>
<p>2、使用</p>
<blockquote>
<p>export default connect(mapStateToProps, mapDispatchToProps)(AppUI);</p>
</blockquote>
<p>connect方法可以省略mapStateToProps参数，那样的话，UI 组件就不会订阅Store，<strong>就是说 Store 的更新不会引起 UI 组件的更新。</strong>(但在UI中在生命函数钩子调用subscribe可以引起页面的更新,而想redux一样在index中通过subscribe进行统一的更新是无效的)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 当store中的状态发生改变时调用store.subscribe</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">store</span>.<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 不能直接调用render</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;&#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<p>mapStateToProps：更新props————&gt;作为输入源。返回一个对象，key为UI界面对应的名称，value为state处理的结果<br>mapDispatchToProps：更新action————&gt;作为输出源。触发action更新reducer，进而更新state，从而驱动参数1变化，引起UI数据的变化<br>通过这个两参数的自动调用方式，将UI和业务逻辑分开，UI组件通过props显示，没有任何业务逻辑，容器组件负责逻辑业务。下面详解这两个参数</p>
<h3 id="mapStateToProps"><a href="#mapStateToProps" class="headerlink" title="mapStateToProps"></a>mapStateToProps</h3><p>建立一个从（外部的）state对象到（UI 组件的）props对象的映射关系。作为函数，mapStateToProps执行后应该返回一个对象，里面的每一个键值对就是一个映射。</p>
<p>mapStateToProps会订阅 Store，每当state更新的时候，就会自动执行，重新计算 UI 组件的参数，从而触发 UI 组件的重新渲染。</p>
<p>mapStateToProps的第一个参数总是state对象，还可以使用第二个参数，代表容器组件的props对象。使用ownProps作为参数后，如果容器组件的参数发生变化，也会引发 UI 组件重新渲染。</p>
<p>一个参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">state</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">         <span class="attr">value</span>: state.<span class="property">count</span> <span class="comment">//UI组件中需要什么参数，对象中就写哪些参数</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>两个参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">state, ownProps</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">value</span>: state.<span class="property">count</span> <span class="comment">//UI组件中需要什么参数，对象中就写哪些参数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="mapDispatchToProps"><a href="#mapDispatchToProps" class="headerlink" title="mapDispatchToProps"></a>mapDispatchToProps</h3><p>mapDispatchToProps是connect函数的第二个参数，用来建立 UI 组件的参数到store.dispatch方法的映射。也就是说，它定义了哪些用户的操作应该当作 Action，传给 Store。它可以是一个函数，也可以是一个对象。</p>
<p>1、作为函数</p>
<p>如果mapDispatchToProps是一个函数，会得到dispatch和ownProps（容器组件的props对象）两个参数。作为函数，应该返回一个对象，该对象的每个键值对都是一个映射，定义了 UI 组件的参数怎样发出 Action。</p>
<p>dispach(action)发出消息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapDispatchToProps</span> = (<span class="params">dispatch, ownProps</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">onIncreaseClick</span>: <span class="function">() =&gt;</span> <span class="title function_">dispatch</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;increase&#x27;</span>&#125;),</span><br><span class="line">        <span class="attr">onReduceClick</span>: <span class="function">() =&gt;</span> <span class="title function_">dispatch</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;reduce&#x27;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、对象写法</p>
<blockquote>
<p>对象写法时可以不用调用dispatch，react-redux会帮我们调用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mapDispatchToProps = &#123;</span><br><span class="line">    <span class="attr">onIncreaseClick</span>: <span class="function">() =&gt;</span> (&#123;<span class="attr">type</span>: <span class="string">&#x27;increase&#x27;</span>&#125;),</span><br><span class="line">    <span class="attr">onReduceClick</span>: <span class="function">() =&gt;</span> (&#123;<span class="attr">type</span>: <span class="string">&#x27;reduce&#x27;</span>&#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入action</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">	createIncrementAction,</span><br><span class="line">	createDecrementAction,</span><br><span class="line">	createIncrementAsyncAction</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;../../redux/count_action&#x27;</span></span><br><span class="line"><span class="comment">// 对象写法时可以不用调用dispatch，react-redux会帮我们调用</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">jia</span>:createIncrementAction,</span><br><span class="line">	<span class="attr">jian</span>:createDecrementAction,</span><br><span class="line">	<span class="attr">jiaAsync</span>:createIncrementAsyncAction,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数写法</p>
<blockquote>
<p>需要接收到dispatch自己取调用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapDispatchToProps</span> = (<span class="params">dispatch</span>) =&gt; (&#123;</span><br><span class="line">    <span class="title function_">onIncreaseClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="title function_">dispatch</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;increase&#x27;</span>&#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">onReduceClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">dispatch</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;reduce&#x27;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这两个使用的效果一样。通过connect，store.subscribe也不需要了。通过connnect方法，最终的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;value, onIncreaseClick, onReduceClick&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">&#123;&#123;width:</span> <span class="attr">40</span>, <span class="attr">height:</span> <span class="attr">40</span>&#125;&#125; <span class="attr">onClick</span>=<span class="string">&#123;onIncreaseClick&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">style</span>=<span class="string">&#123;&#123;padding:</span> <span class="attr">40</span>&#125;&#125;&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">&#123;&#123;width:</span> <span class="attr">40</span>, <span class="attr">height:</span> <span class="attr">40</span>&#125;&#125; <span class="attr">onClick</span>=<span class="string">&#123;onReduceClick&#125;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">state</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">value</span>: state.<span class="property">count</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapDispatchToProps</span> = (<span class="params">dispatch, ownProps</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">onIncreaseClick</span>: <span class="function">() =&gt;</span> <span class="title function_">dispatch</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;increase&#x27;</span>&#125;),</span><br><span class="line">        <span class="attr">onReduceClick</span>: <span class="function">() =&gt;</span> <span class="title function_">dispatch</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;reduce&#x27;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(mapStateToProps, mapDispatchToProps)(<span class="title class_">App</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h3><p>1、导入</p>
<p>import {Provider} from “react-redux”;</p>
<p>2、使用</p>
<p>Provider在根组件外面包了一层，这样一来，App的所有子组件就默认都可以拿到state了</p>
<blockquote>
<Provider store="{store}">
         <App>
</App></Provider>
</blockquote>
<h2 id="react打包"><a href="#react打包" class="headerlink" title="react打包"></a>react打包</h2><blockquote>
<p>npm run build</p>
</blockquote>
<blockquote>
<p>打包后的文件需要部署到服务其中才能使用</p>
</blockquote>
<p>方法一</p>
<p>真实的部署到一台服务器中</p>
<p>方法二</p>
<p>使用第三方的库serve</p>
<blockquote>
<p>npm i serve -g</p>
</blockquote>
<p>使用</p>
<blockquote>
<p>以当前文件为根路径启动一台服务器</p>
<p>serve</p>
</blockquote>
<blockquote>
<p>以指定文件为根路径启动服务器</p>
<p>serve 文件名</p>
</blockquote>
<p>方法三自己写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">// 将打包的文件暴露出来</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>,express.<span class="title function_">static</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;build&#x27;</span>)));</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;http://127.0.0.1:8080&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h2><blockquote>
<p>react的状态的更新是异步的</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(1). setState(stateChange, [callback])------对象式的setState</span><br><span class="line">    1.stateChange为状态改变对象(该对象可以体现出状态的更改)</span><br><span class="line">    2.callback是可选的回调函数, 它在状态更新完毕、界面也更新后(render调用后)才被调用</span><br><span class="line">					</span><br><span class="line">(2). setState(updater, [callback])------函数式的setState</span><br><span class="line">    1.updater为返回stateChange对象的函数。</span><br><span class="line">    2.updater可以接收到state和props。</span><br><span class="line">    4.callback是可选的回调函数, 它在状态更新、界面也更新后(render调用后)才被调用。</span><br><span class="line">总结:</span><br><span class="line">1.对象式的setState是函数式的setState的简写方式(语法糖)</span><br><span class="line">2.使用原则：</span><br><span class="line">	(1).如果新状态不依赖于原状态 ===&gt; 使用对象方式</span><br><span class="line">	(2).如果新状态依赖于原状态 ===&gt; 使用函数方式</span><br><span class="line">	(3).如果需要在setState()执行后获取最新的状态数据, </span><br><span class="line">		要在第二个callback函数中读取</span><br></pre></td></tr></table></figure>



<h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><h3 id="React-Hook-x2F-Hooks是什么"><a href="#React-Hook-x2F-Hooks是什么" class="headerlink" title="React Hook&#x2F;Hooks是什么?"></a>React Hook&#x2F;Hooks是什么?</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(1). Hook是React 16.8.0版本增加的新特性/新语法</span><br><span class="line">(2). 可以让你在函数组件中使用 state 以及其他的 React 特性</span><br></pre></td></tr></table></figure>

<h3 id="三个常用的Hook"><a href="#三个常用的Hook" class="headerlink" title="三个常用的Hook"></a>三个常用的Hook</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1). State Hook: React.useState()</span><br><span class="line">(2). Effect Hook: React.useEffect()</span><br><span class="line">(3). Ref Hook: React.useRef()</span><br></pre></td></tr></table></figure>

<h3 id="State-Hook"><a href="#State-Hook" class="headerlink" title="State Hook"></a>State Hook</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(1). State Hook让函数组件也可以有state状态, 并进行状态数据的读写操作</span><br><span class="line">(2). 语法: const [xxx, setXxx] = React.useState(initValue)  </span><br><span class="line">(3). useState()说明:</span><br><span class="line">        参数: 第一次初始化指定的值在内部作缓存</span><br><span class="line">        返回值: 包含2个元素的数组, 第1个为内部当前状态值, 第2个为更新状态值的函数</span><br><span class="line">(4). setXxx()2种写法:</span><br><span class="line">        setXxx(newValue): 参数为非函数值, 直接指定新的状态值, 内部用其覆盖原来的状态值</span><br><span class="line">        setXxx(value =&gt; newValue): 参数为函数, 接收原本的状态值, 返回新的状态值, 内部用其覆盖原来的状态值</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面的initValue设置初始的state</p>
<p>数组中的第一个参数为将initValue加工后得到的state</p>
<p>第二个参数为steState()方法</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import React,&#123;useState&#125; from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">export default function Demo() &#123;</span><br><span class="line">  let [count, setCount] = useState(0);</span><br><span class="line">  let [Name,setNam] = useState(&#x27;李四&#x27;)</span><br><span class="line">  function add() &#123;</span><br><span class="line">    setCount(val=&gt;(val+1))</span><br><span class="line">  &#125;</span><br><span class="line">  function setNamez() &#123;</span><br><span class="line">    setNam(&quot;张三&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;&#123;count&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;h2&gt;&#123;Name&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;button onClick=&#123;add&#125;&gt;加一&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;setNamez&#125;&gt;改名&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="Effect-Hook"><a href="#Effect-Hook" class="headerlink" title="Effect Hook"></a>Effect Hook</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">(1). Effect Hook 可以让你在函数组件中执行副作用操作(用于模拟类组件中的生命周期钩子)</span><br><span class="line">(2). React中的副作用操作:</span><br><span class="line">        发ajax请求数据获取</span><br><span class="line">        设置订阅 / 启动定时器</span><br><span class="line">        手动更改真实DOM</span><br><span class="line">(3). 语法和说明: </span><br><span class="line">        useEffect(() =&gt; &#123; </span><br><span class="line">          // 在此可以执行任何带副作用操作</span><br><span class="line">          return () =&gt; &#123; // 在组件卸载前执行</span><br><span class="line">            // 在此做一些收尾工作, 比如清除定时器/取消订阅等</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, [stateValue]) // 如果指定的是[], 回调函数只会在第一次render()后执行</span><br><span class="line">    </span><br><span class="line">(4). 可以把 useEffect Hook 看做如下三个函数的组合</span><br><span class="line">        componentDidMount()</span><br><span class="line">        componentDidUpdate()</span><br><span class="line">    	componentWillUnmount() </span><br><span class="line">    	</span><br><span class="line">    	</span><br></pre></td></tr></table></figure>

<ul>
<li>当做componentDidMount和componentDidUpdate的时候</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function App() &#123;</span><br><span class="line">    const [count,setCount] = useState(0);</span><br><span class="line">    // 组件挂载完成之后 或 组件数据更新完成之后 执行</span><br><span class="line">    useEffect(() =&gt; &#123;</span><br><span class="line">        console.log(&#x27;组件挂载完成之后 或 组件数据更新完成之后 执行&#x27;);</span><br><span class="line">    &#125;)</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &#123;count&#125;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>仅当做comonentDidMount的时候</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;仅当做componentDidMount&#x27;);</span><br><span class="line">&#125;,[])</span><br></pre></td></tr></table></figure>

<ul>
<li>当做componentWillunmount的时候(注意：这里不是仅当做componentWillunmount)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(() =&gt; () =&gt; &#123;</span><br><span class="line">    console.log(&#x27;当做componentWillUnmount&#x27;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="Ref-Hook"><a href="#Ref-Hook" class="headerlink" title="Ref Hook"></a>Ref Hook</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1). Ref Hook可以在函数组件中存储/查找组件内的标签或任意其它数据</span><br><span class="line">(2). 语法: const refContainer = useRef()</span><br><span class="line">(3). 作用:保存标签对象,功能与React.createRef()一样</span><br></pre></td></tr></table></figure>

<p>函数式组件使用</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> inputRef = <span class="title function_">useRef</span>();</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> /&gt;</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> show =&gt;()&#123;</span><br><span class="line">    inputRef.<span class="property">current</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h2><h3 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h3><pre><code>&lt;Fragment&gt;&lt;Fragment&gt;
&lt;&gt;&lt;/&gt;
</code></pre>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><blockquote>
<p>可以不用必须有一个真实的DOM根标签了</p>
</blockquote>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><h3 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h3><blockquote>
<p>一种组件间通信方式, 常用于【祖组件】与【后代组件】间通信</p>
</blockquote>
<h3 id="使用-3"><a href="#使用-3" class="headerlink" title="使用"></a>使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) 创建<span class="title class_">Context</span>容器对象：</span><br><span class="line">	<span class="keyword">const</span> <span class="title class_">XxxContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>()  </span><br><span class="line">	</span><br><span class="line"><span class="number">2</span>) 渲染子组时，外面包裹xxxContext.<span class="property">Provider</span>, 通过value属性给后代组件传递数据：</span><br><span class="line">	&lt;xxxContext.<span class="property">Provider</span> value=&#123;数据&#125;&gt;</span><br><span class="line">		子组件</span><br><span class="line">    &lt;/xxxContext.<span class="property">Provider</span>&gt;</span><br><span class="line">    </span><br><span class="line"><span class="number">3</span>) 后代组件读取数据：</span><br><span class="line"></span><br><span class="line">	<span class="comment">//第一种方式:仅适用于类组件 </span></span><br><span class="line">	  <span class="keyword">static</span> contextType = xxxContext  <span class="comment">// 声明接收context</span></span><br><span class="line">	  <span class="variable language_">this</span>.<span class="property">context</span> <span class="comment">// 读取context中的value数据</span></span><br><span class="line">	  </span><br><span class="line">	<span class="comment">//第二种方式: 函数组件与类组件都可以</span></span><br><span class="line">	  &lt;xxxContext.<span class="property">Consumer</span>&gt;</span><br><span class="line">	    &#123;</span><br><span class="line">	      <span class="function"><span class="params">value</span> =&gt;</span> ( <span class="comment">// value就是context中的value数据</span></span><br><span class="line">	        要显示的内容</span><br><span class="line">	      )</span><br><span class="line">	    &#125;</span><br><span class="line">	  &lt;/xxxContext.<span class="property">Consumer</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><pre><code>在应用开发中一般不用context, 一般都它的封装react插件
</code></pre>
<h3 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h3><blockquote>
<p>React创建使用上下文Context，遇到Uncaught ReferenceError: Cannot access ‘UserListContext‘ before initialization</p>
</blockquote>
<p>最初的方案<br>还原出问题的路径，首先看一下代码路径，一共两个文件</p>
<p><img src="/React/7a06e9f12651425fab6f62f0041372c1.png" alt="img"></p>
<p>UserList.js为父组件<br>CmpUserList.js为子组件<br>父组件提供数据给子组件。<br>其次，看一下思路，父组件会创建一个 Context 对象，并导出这个对象，export const UserListContext &#x3D; React.createContext()，接着子组件使用CmpUserList.contextType &#x3D; UserListContext来使用上下文。</p>
<p>代码如下：<br>父组件UserList.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">CmpUserList</span> <span class="keyword">from</span> <span class="string">&#x27;./CmpUserList&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">UserListContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserList</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">showPage</span>: <span class="string">&#x27;list&#x27;</span>,     <span class="comment">// 要显示的页面 list：列表</span></span><br><span class="line">            props</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    changePage = <span class="function">(<span class="params">page, props = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">showPage</span>: page,</span><br><span class="line">            props</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> showCmp</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">showPage</span> === <span class="string">&#x27;list&#x27;</span>) &#123;</span><br><span class="line">            showCmp = <span class="language-xml"><span class="tag">&lt;<span class="name">CmpUserList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">changePage</span>=<span class="string">&#123;this.changePage&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                &#123;<span class="attr">...this.state.props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                      /&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">UserListContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;</span>&#x27;<span class="attr">214</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">flex:</span> <span class="attr">1</span>, <span class="attr">display:</span> &#x27;<span class="attr">flex</span>&#x27;, <span class="attr">flexDirection:</span> &#x27;<span class="attr">column</span>&#x27;, <span class="attr">overflow:</span> &#x27;<span class="attr">auto</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;showCmp&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">UserListContext.Provider</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(<span class="function">(<span class="params">store, props</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        ...props</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(<span class="title class_">UserList</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>子组件<code>CmpUserList.js</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import &#123; UserListContext &#125; from &#x27;./UserList&#x27;</span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line">class CmpUserList extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;&#123;this.context&#125;&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CmpUserList.contextType = UserListContext</span><br><span class="line">export default CmpUserList</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/../../../../../media/mc/F/%E7%AC%94%E8%AE%B0/%E7%AC%94%E8%AE%B0/React.assets/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeuatouS6juiHs-WWhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>注意：写成函数和类通用的方法可以</p>
</blockquote>
<p><strong>新方案</strong></p>
<p><strong>解决方案：新建一个js文件创建上下文，并导出给父子组件使用</strong>(即单独建一个文件存放上下文容器)</p>
<p>那么开始吧，</p>
<ul>
<li>新建一个<code>index.js</code>文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上下文</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="comment">// 用户列表</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">UserListContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>修改父组件<code>UserList.js</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import &#123; connect &#125; from &#x27;react-redux&#x27;</span><br><span class="line"></span><br><span class="line">import CmpUserList from &#x27;./CmpUserList&#x27;</span><br><span class="line">import &#123; UserListContext &#125; from &#x27;../../context/index.js&#x27;   // 导入这个</span><br><span class="line"></span><br><span class="line">export const UserListContext = React.createContext()   // 删除这个</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class UserList extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props)</span><br><span class="line">        this.state = &#123;</span><br><span class="line">            showPage: &#x27;list&#x27;,     // 要显示的页面 list：列表/detail：详情/edit：编辑</span><br><span class="line">            props</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    changePage = (page, props = &#123;&#125;) =&gt; &#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            showPage: page,</span><br><span class="line">            props</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        let showCmp</span><br><span class="line">        if (this.state.showPage === &#x27;list&#x27;) &#123;</span><br><span class="line">            showCmp = &lt;CmpUserList</span><br><span class="line">                changePage=&#123;this.changePage&#125;</span><br><span class="line">                &#123;...this.state.props&#125;</span><br><span class="line">                      /&gt;</span><br><span class="line">        &#125;</span><br><span class="line">        return (</span><br><span class="line">            &lt;UserListContext.Provider value=&#123;&#x27;214&#x27;&#125;&gt;</span><br><span class="line">                &lt;div style=&#123;&#123; flex: 1, display: &#x27;flex&#x27;, flexDirection: &#x27;column&#x27;, overflow: &#x27;auto&#x27; &#125;&#125;&gt;</span><br><span class="line">                    &#123;showCmp&#125;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/UserListContext.Provider&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default connect((store, props) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        ...props</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(UserList)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>修改子组件<code>CmpUserList.js</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import &#123; UserListContext &#125; from &#x27;../../../context&#x27;   // 导入这个</span><br><span class="line"></span><br><span class="line">import &#123; UserListContext &#125; from &#x27;./UserList&#x27;   // 删掉这个</span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line">class CmpUserList extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;&#123;this.context&#125;&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CmpUserList.contextType = UserListContext</span><br><span class="line">export default CmpUserList</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/React/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeuatouS6juiHs-WWhA==,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="img"></p>
<h2 id="继承component创建组件存在的问题"><a href="#继承component创建组件存在的问题" class="headerlink" title="继承component创建组件存在的问题"></a>继承component创建组件存在的问题</h2><h3 id="Component的2个问题"><a href="#Component的2个问题" class="headerlink" title="Component的2个问题"></a>Component的2个问题</h3><blockquote>
<ol>
<li><p>只要执行setState(),即使不改变状态数据, 组件也会重新render()</p>
</li>
<li><p>只当前组件重新render(), 就会自动重新render子组件 &#x3D;&#x3D;&gt; 效率低</p>
</li>
</ol>
</blockquote>
<h3 id="效率高的做法"><a href="#效率高的做法" class="headerlink" title="效率高的做法"></a>效率高的做法</h3><blockquote>
<p> 只有当组件的state或props数据发生改变时才重新render()</p>
</blockquote>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><blockquote>
<p> Component中的shouldComponentUpdate()总是返回true</p>
</blockquote>
<h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">办法1: </span><br><span class="line">	重写shouldComponentUpdate()方法</span><br><span class="line">	比较新旧state或props数据, 如果有变化才返回true, 如果没有返回false</span><br><span class="line">办法2:  </span><br><span class="line">	使用PureComponent</span><br><span class="line">	PureComponent重写了shouldComponentUpdate(), 只有state或props数据有变化才返回true</span><br><span class="line">	注意: </span><br><span class="line">		只是进行state和props数据的浅比较, 如果只是数据对象内部数据变了, 返回false  </span><br><span class="line">		不要直接修改state数据, 而是要产生新数据</span><br><span class="line">项目中一般使用PureComponent来优化</span><br></pre></td></tr></table></figure>

<h3 id="PureComponent"><a href="#PureComponent" class="headerlink" title="PureComponent"></a>PureComponent</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用PureComponent</span><br><span class="line">PureComponent重写shouldComponentUpdate(), 只有state或props数据有变化才返回true</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意:<br>    只是进行state和props数据的<strong>浅比较</strong>, 如果只是数据对象内部数据变了, 返回false<br>    不要直接修改state数据, 而是要产生新数据<br>项目中一般使用PureComponent来优化</p>
</blockquote>
<p>(对象类型引用地址)</p>
<h2 id="render-props-插槽"><a href="#render-props-插槽" class="headerlink" title="render props(插槽)"></a>render props(插槽)</h2><h3 id="如何向组件内部动态传入带内容的结构-标签"><a href="#如何向组件内部动态传入带内容的结构-标签" class="headerlink" title="如何向组件内部动态传入带内容的结构(标签)?"></a>如何向组件内部动态传入带内容的结构(标签)?</h3><pre><code>Vue中: (插槽)
    使用slot技术, 也就是通过组件标签体传入结构  &lt;AA&gt;&lt;BB/&gt;&lt;/AA&gt;
React中:
    使用children props: 通过组件标签体传入结构
    使用render props: 通过组件标签属性传入结构, 一般用render函数属性
</code></pre>
<h3 id="children-props"><a href="#children-props" class="headerlink" title="children props"></a>children props</h3><pre><code>&lt;A&gt;
  &lt;B&gt;xxxx&lt;/B&gt;
&lt;/A&gt;
&#123;this.props.children&#125;
问题: 如果B组件需要A组件内的数据, ==&gt; 做不到 
</code></pre>
<h3 id="render-props"><a href="#render-props" class="headerlink" title="render props"></a>render props</h3><pre><code>&lt;A render=&#123;(data) =&gt; &lt;C data=&#123;data&#125;&gt;&lt;/C&gt;&#125;&gt;&lt;/A&gt;
A组件: &#123;this.props.render(内部state数据)&#125;
C组件: 读取A组件传入的数据显示 &#123;this.props.data&#125; 
</code></pre>
<p><img src="/React/image-20230109112313099.png" alt="image-20230109112313099"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;</span><br><span class="line">import &#x27;./index.css&#x27;</span><br><span class="line">import C from &#x27;../1_setState&#x27;</span><br><span class="line"></span><br><span class="line">export default class Parent extends Component &#123;</span><br><span class="line">	render() &#123;</span><br><span class="line">		return (</span><br><span class="line">			&lt;div className=&quot;parent&quot;&gt;</span><br><span class="line">				&lt;h3&gt;我是Parent组件&lt;/h3&gt;</span><br><span class="line">				&lt;A render=&#123;(name)=&gt;&lt;C name=&#123;name&#125;/&gt;&#125;/&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class A extends Component &#123;</span><br><span class="line">	state = &#123;name:&#x27;tom&#x27;&#125;</span><br><span class="line">	render() &#123;</span><br><span class="line">		console.log(this.props);</span><br><span class="line">		const &#123;name&#125; = this.state</span><br><span class="line">		return (</span><br><span class="line">			&lt;div className=&quot;a&quot;&gt;</span><br><span class="line">				&lt;h3&gt;我是A组件&lt;/h3&gt;</span><br><span class="line">				&#123;this.props.render(name)&#125;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class B extends Component &#123;</span><br><span class="line">	render() &#123;</span><br><span class="line">		console.log(&#x27;B--render&#x27;);</span><br><span class="line">		return (</span><br><span class="line">			&lt;div className=&quot;b&quot;&gt;</span><br><span class="line">				&lt;h3&gt;我是B组件,&#123;this.props.name&#125;&lt;/h3&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="错误边界"><a href="#错误边界" class="headerlink" title="错误边界"></a>错误边界</h2><h3 id="理解："><a href="#理解：" class="headerlink" title="理解："></a>理解：</h3><p>错误边界：用来捕获后代组件错误，渲染出备用页面</p>
<h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><p>只能捕获后代组件生命周期产生的错误，不能捕获自己组件产生的错误和其他组件在合成事件、定时器中产生的错误</p>
<h3 id="使用方式："><a href="#使用方式：" class="headerlink" title="使用方式："></a>使用方式：</h3><p>getDerivedStateFromError配合componentDidCatch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生命周期函数，一旦后台组件报错，就会触发</span></span><br><span class="line"><span class="keyword">static</span> <span class="title function_">getDerivedStateFromError</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    <span class="comment">// 在render之前触发</span></span><br><span class="line">    <span class="comment">// 返回新的state</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">hasError</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 渲染组件时出错</span></span><br><span class="line"><span class="title function_">componentDidCatch</span>(<span class="params">error, info</span>) &#123;</span><br><span class="line">    <span class="comment">// 统计页面的错误。发送请求发送到后台去</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error, info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="组件通信方式总"><a href="#组件通信方式总" class="headerlink" title="组件通信方式总"></a>组件通信方式总</h2><h3 id="方式："><a href="#方式：" class="headerlink" title="方式："></a>方式：</h3><pre><code>    props：
        (1).children props
        (2).render props
    消息订阅-发布：
        pubs-sub、event等等
    集中式管理：
        redux、dva等等
    conText:
        生产者-消费者模式
</code></pre>
<h3 id="组件间的关系"><a href="#组件间的关系" class="headerlink" title="组件间的关系"></a>组件间的关系</h3><pre><code>    父子组件：props
    兄弟组件(非嵌套组件)：消息订阅-发布、集中式管理
    祖孙组件(跨级组件)：消息订阅-发布、集中式管理、conText(用的少)
</code></pre>
<h2 id="React-Router-v6"><a href="#React-Router-v6" class="headerlink" title="React-Router v6"></a>React-Router v6</h2><img src="/React/f86f98dd6ff7d01b.png" style="width:50%;margin-left:50%;transform:translateX(-50%)">

<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ol>
<li><p>React Router 以三个不同的包发布到 npm 上，它们分别为：</p>
<ol>
<li>react-router: 路由的核心库，提供了很多的：组件、钩子。</li>
<li><strong style="color:#dd4d40"><strong>react-router-dom:</strong></strong> <strong style="color:#dd4d40">包含react-router所有内容，并添加一些专门用于 DOM 的组件，例如 <code>&lt;BrowserRouter&gt;</code>等 </strong>。</li>
<li>react-router-native: 包括react-router所有内容，并添加一些专门用于ReactNative的API，例如:<code>&lt;NativeRouter&gt;</code>等。</li>
</ol>
</li>
<li><p>与React Router 5.x 版本相比，改变了什么？</p>
<ol>
<li><p>内置组件的变化：移除<code>&lt;Switch/&gt;</code> ，新增 <code>&lt;Routes/&gt;</code>等。</p>
</li>
<li><p>语法的变化：<code>component=&#123;About&#125;</code> 变为 <code>element=&#123;&lt;About/&gt;&#125;</code>等。</p>
</li>
<li><p>新增多个hook：<code>useParams</code>、<code>useNavigate</code>、<code>useMatch</code>等。</p>
</li>
<li><p><strong style="color:#dd4d40">官方明确推荐函数式组件了！！！</strong></p>
<p>……</p>
</li>
</ol>
</li>
</ol>
<h3 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h3><h3 id="1-lt-BrowserRouter-gt"><a href="#1-lt-BrowserRouter-gt" class="headerlink" title="1. &lt;BrowserRouter&gt;"></a>1. <code>&lt;BrowserRouter&gt;</code></h3><ol>
<li><p>说明：<code>&lt;BrowserRouter&gt; </code>用于包裹整个应用。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BrowserRouter</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* 整体结构（通常为App组件） */&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span>,root</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-lt-HashRouter-gt"><a href="#2-lt-HashRouter-gt" class="headerlink" title="2. &lt;HashRouter&gt;"></a>2. <code>&lt;HashRouter&gt;</code></h3><ol>
<li>说明：作用与<code>&lt;BrowserRouter&gt;</code>一样，但<code>&lt;HashRouter&gt;</code>修改的是地址栏的hash值。</li>
<li>备注：6.x版本中<code>&lt;HashRouter&gt;</code>、<code>&lt;BrowserRouter&gt; </code> 的用法与 5.x 相同。</li>
</ol>
<h3 id="3-lt-Routes-gt-与-lt-Route-gt"><a href="#3-lt-Routes-gt-与-lt-Route-gt" class="headerlink" title="3. &lt;Routes/&gt; 与 &lt;Route/&gt;"></a>3. <code>&lt;Routes/&gt; 与 &lt;Route/&gt;</code></h3><ol>
<li><p>v6版本中移出了先前的<code>&lt;Switch&gt;</code>，引入了新的替代者：<code>&lt;Routes&gt;</code>。</p>
</li>
<li><p><code>&lt;Routes&gt;</code> 和 <code>&lt;Route&gt;</code>要配合使用，且必须要用<code>&lt;Routes&gt;</code>包裹<code>&lt;Route&gt;</code>。</p>
</li>
<li><p><code>&lt;Route&gt;</code> 相当于一个 if 语句，如果其路径与当前 URL 匹配，则呈现其对应的组件。</p>
</li>
<li><p><code>&lt;Route caseSensitive&gt;</code> 属性用于指定：<strong>匹配时是否区分大小写（默认为 false）</strong>。</p>
</li>
<li><p>当URL发生变化时，<code>&lt;Routes&gt; </code>都会查看其所有子<code> &lt;Route&gt;</code> 元素以找到最佳匹配并呈现组件 。</p>
</li>
<li><p><code>&lt;Route&gt;</code> 也可以嵌套使用，且可配合<code>useRoutes()</code>配置 “<strong>路由表</strong>” ，但需要通过 <code>&lt;Outlet&gt;</code> 组件来渲染其子路由。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Routes</span>&gt;</span><br><span class="line">    <span class="comment">/*path属性用于定义路径，element属性用于定义当前路径所对应的组件*/</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Login</span> /&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">		<span class="comment">/*用于定义嵌套路由，home是一级路由，对应的路径/home*/</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;home&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Home</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">       /*test1 和 test2 是二级路由,对应的路径是/home/test1 或 /home/test2*/</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;test1&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Test</span>/&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;test2&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Test2</span>/&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">	</span><br><span class="line">		<span class="comment">//Route也可以不写element属性, 这时就是用于展示嵌套的路由 .所对应的路径是/users/xxx</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;xxx&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Demo</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Routes</span>&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-lt-Link-gt"><a href="#4-lt-Link-gt" class="headerlink" title="4. &lt;Link&gt;"></a>4. <code>&lt;Link&gt;</code></h3><ol>
<li><p>作用: 修改URL，且不发送网络请求（路由链接）。</p>
</li>
<li><p>注意: 外侧需要用<code>&lt;BrowserRouter&gt;</code>或<code>&lt;HashRouter&gt;</code>包裹。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/路径&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-lt-NavLink-gt"><a href="#5-lt-NavLink-gt" class="headerlink" title="5. &lt;NavLink&gt;"></a>5. <code>&lt;NavLink&gt;</code></h3><ol>
<li><p>作用: 与<code>&lt;Link&gt;</code>组件类似，且可实现导航的“高亮”效果。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意: NavLink默认类名是active，下面是指定自定义的class</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义样式</span></span><br><span class="line">&lt;<span class="title class_">NavLink</span></span><br><span class="line">    to=<span class="string">&quot;login&quot;</span></span><br><span class="line">    className=&#123;<span class="function">(<span class="params">&#123; isActive &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 传递一个对象参数，包含一个属性isActive，表示是否点击选中</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;home&#x27;</span>, isActive)</span><br><span class="line">        <span class="keyword">return</span> isActive ? <span class="string">&#x27;base one&#x27;</span> : <span class="string">&#x27;base&#x27;</span></span><br><span class="line">    &#125;&#125;</span><br><span class="line">&gt;login&lt;/<span class="title class_">NavLink</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	默认情况下，当Home的子组件匹配成功，Home的导航也会高亮，</span></span><br><span class="line"><span class="comment">	当NavLink上添加了end属性后，若Home的子组件匹配成功，则Home的导航没有高亮效果。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">to</span>=<span class="string">&quot;home&quot;</span> <span class="attr">end</span> &gt;</span>home<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>注意: NavLink默认类名是active，下面是指定自定义的class</p>
<p>当NavLink上添加了end属性后，若Home的<strong>子组件匹配成功</strong>，则Home的导航没有高亮效果</p>
<h3 id="6-lt-Navigate-gt"><a href="#6-lt-Navigate-gt" class="headerlink" title="6. &lt;Navigate&gt;"></a>6. <code>&lt;Navigate&gt;</code></h3><ol>
<li><p>作用：只要<code>&lt;Navigate&gt;</code>组件被渲染，就会修改路径，切换视图。</p>
</li>
<li><p><code>replace</code>属性用于控制跳转模式（push 或 replace，默认是push）。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Navigate</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> [sum,setSum] = <span class="title function_">useState</span>(<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是Home的内容<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			&#123;/* 根据sum的值决定是否切换视图 */&#125;</span></span><br><span class="line"><span class="language-xml">			&#123;sum === 1 ? <span class="tag">&lt;<span class="name">h4</span>&gt;</span>sum的值为&#123;sum&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span> : <span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">replace</span>=<span class="string">&#123;true&#125;/</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setSum(2)&#125;&gt;点我将sum变为2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-lt-Outlet-gt"><a href="#7-lt-Outlet-gt" class="headerlink" title="7. &lt;Outlet&gt;"></a>7. <code>&lt;Outlet&gt;</code></h3><ol>
<li><p>当<code>&lt;Route&gt;</code>产生嵌套时，渲染其对应的后续子路由。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据路由表生成对应的路由规则</span></span><br><span class="line"><span class="keyword">const</span> element = <span class="title function_">useRoutes</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">About</span>/&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Home</span>/&gt;</span></span>,</span><br><span class="line">    <span class="attr">children</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 子级路由不带斜杠</span></span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">        <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">News</span>/&gt;</span></span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">        <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Message</span>/&gt;</span></span>,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">//Home.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">NavLink</span>,<span class="title class_">Outlet</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>Home组件内容<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">className</span>=<span class="string">&quot;nav nav-tabs&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">					<span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        &#123;// 写斜杠就必须带上父级路由路径，不写斜杠可以只写</span></span><br><span class="line"><span class="language-xml">                        &#125;</span></span><br><span class="line"><span class="language-xml">						<span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">className</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">to</span>=<span class="string">&quot;news&quot;</span>&gt;</span>News<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">					<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">					<span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">						<span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">className</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">to</span>=<span class="string">&quot;message&quot;</span>&gt;</span>Message<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">					<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				&#123;/* 指定路由组件呈现的位置 */&#125;</span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">Outlet</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="react-router-dom-v6-的类组件使用路由的参数"><a href="#react-router-dom-v6-的类组件使用路由的参数" class="headerlink" title="react-router-dom v6 的类组件使用路由的参数"></a>react-router-dom v6 的类组件使用路由的参数</h2><p>react-router从v5升级到v6之后做了非常大的改动（刚学习的时候非常头疼）：<br>具体的新特性可以看这篇文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40906515/article/details/104957712">https://blog.csdn.net/weixin_40906515/article/details/104957712</a><br>也可以看react-router的官方网站的迁移策略：<a target="_blank" rel="noopener" href="https://reactrouter.com/docs/en/v6/upgrading/v5">https://reactrouter.com/docs/en/v6/upgrading/v5</a></p>
<p>在react-router v6的文档以及很多网上的博客中，在组件中使用路由参数location、history、match的时候，介绍的只有在函数组件中使用hooks的形式（官方推荐），经过尝试，确实可以实现。但是在类组件中如何使用根本没有提到，我做了一个实验发现根本获取不到，如下图：</p>
<p><img src="/React/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA54uX5Ymp6ZuG5Zui,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="在这里插入图片描述"></p>
<p>这是一个类组件，并且，这个组件是通过路由进入访问的，不是普通组件：</p>
<p><img src="/React/04c25983de3340679bbb7ae2d2dafdf0.png" alt="在这里插入图片描述"></p>
<p><strong>在运行控制台打印的是：</strong></p>
<p><img src="/React/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA54uX5Ymp6ZuG5Zui,size_20,color_FFFFFF,t_70,g_se,x_16-16732662034247.png" alt="在这里插入图片描述"></p>
<p>发现props是一个空对象！！！ 这样很多的功能根本通过路由参数实现不了了，比如：</p>
<p>编程式路由导航，在非受控组件中可以使用useNavigate这个钩子进行导航，而在类组件中无能为力，只能想办法使用<Navigate>这个标签，非常的麻烦，可以看看这篇文章：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5bdfd2fac2cd">https://www.jianshu.com/p/5bdfd2fac2cd</a><br>获取路由参数 ，在以往的react-router-dom版本中，路由的三个参数location、history、match都是直接挂载到组件的props身上，即使组件不是路由组件，也可以使用withRouter高阶组件对普通组件进行增强，也可以将这三个参数带到props身上。在v6版本中withRouter直接被移除。怎么办？<br>估计官方的目的是极力推荐我们使用React Hooks ，从而提高类组件的使用门槛（tm不能像vue那样做做兼容，平滑过度吗？）。只能自己编写高阶组件withRouter从而实现这一需求，可以看看这篇文章中的回答：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/sof/296970">https://cloud.tencent.com/developer/ask/sof/296970</a></Navigate></p>
<p>js写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">withRouter</span>(<span class="params"> Child </span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params"> props </span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> location = <span class="title function_">useLocation</span>();</span><br><span class="line">    <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> &#123; <span class="attr">...props</span> &#125; <span class="attr">navigate</span>=<span class="string">&#123;</span> <span class="attr">navigate</span> &#125; <span class="attr">location</span>=<span class="string">&#123;</span> <span class="attr">location</span> &#125; /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ts写法</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NavigateFunction</span>, useLocation, useNavigate, useParams &#125; <span class="keyword">from</span> <span class="string">&quot;react-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">RoutedProps</span>&lt;<span class="title class_">Params</span> = <span class="built_in">any</span>, <span class="title class_">State</span> = <span class="built_in">any</span>&gt; &#123;</span><br><span class="line">    <span class="attr">location</span>: <span class="title class_">State</span>;</span><br><span class="line">    <span class="attr">navigate</span>: <span class="title class_">NavigateFunction</span>;</span><br><span class="line">    <span class="attr">params</span>: <span class="title class_">Params</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> withRouter&lt;P <span class="keyword">extends</span> <span class="title class_">RoutedProps</span>&gt;( <span class="title class_">Child</span>: <span class="title class_">React</span>.<span class="property">ComponentClass</span>&lt;P&gt; ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params"> props: Omit&lt;P, keyof RoutedProps&gt; </span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> location = <span class="title function_">useLocation</span>();</span><br><span class="line">        <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>();</span><br><span class="line">        <span class="keyword">const</span> params = <span class="title function_">useParams</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> &#123; <span class="attr">...props</span> <span class="attr">as</span> <span class="attr">P</span> &#125; <span class="attr">navigate</span>=<span class="string">&#123;</span> <span class="attr">navigate</span> &#125; <span class="attr">location</span>=<span class="string">&#123;</span> <span class="attr">location</span> &#125; <span class="attr">params</span>=<span class="string">&#123;</span> <span class="attr">params</span> &#125;/&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>在使用的时候：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &#123; withRouter, RoutedProps &#125; from &#x27;../../utils/withRouter&#x27;;</span><br><span class="line"></span><br><span class="line">class ArticleList extends Component&lt;RoutedProps&gt; &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    articleList: [],</span><br><span class="line">    curPage: 1,</span><br><span class="line">    loginToken: getToken(),</span><br><span class="line">    loginUser: getLoginUser()</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillMount() &#123;</span><br><span class="line">    console.log(this)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        ...</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default withRouter(ArticleList);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>在控制台输出</strong></p>
<p><img src="/React/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA54uX5Ymp6ZuG5Zui,size_20,color_FFFFFF,t_70,g_se,x_16-167326632034410.png" alt="img"></p>
<h2 id="Hooks-1"><a href="#Hooks-1" class="headerlink" title="Hooks"></a>Hooks</h2><h3 id="1-useRoutes"><a href="#1-useRoutes" class="headerlink" title="1. useRoutes()"></a>1. useRoutes()</h3><ol>
<li><p>作用：根据路由表，动态创建<code>&lt;Routes&gt;</code>和<code>&lt;Route&gt;</code>。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路由表配置：src/routes/index.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;../pages/About&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../pages/Home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Navigate</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">		<span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">About</span>/&gt;</span></span></span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">		<span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Home</span>/&gt;</span></span></span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">		<span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>/&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">//App.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">NavLink</span>,useRoutes&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&#x27;./routes&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">//根据路由表生成对应的路由规则</span></span><br><span class="line">    <span class="comment">// UseRoutes ()只能在 &lt; Router &gt; 组件的上下文中使用</span></span><br><span class="line">	<span class="keyword">const</span> element = <span class="title function_">useRoutes</span>(routes)</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			......</span></span><br><span class="line"><span class="language-xml">      &#123;/* 注册路由 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;element&#125;</span></span><br><span class="line"><span class="language-xml">		  ......</span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>UseRoutes ()只能在 &lt; Router &gt; 组件的上下文中使用</p>
</blockquote>
<h3 id="2-useNavigate-编程式导航"><a href="#2-useNavigate-编程式导航" class="headerlink" title="2. useNavigate()编程式导航"></a>2. useNavigate()编程式导航</h3><ol>
<li><p>作用：返回一个函数用来实现编程式导航。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;useNavigate&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handle</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">//第一种使用方式：指定具体的路径</span></span><br><span class="line">    <span class="title function_">navigate</span>(<span class="string">&#x27;/login&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">replace</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">state</span>: &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>&#125;</span><br><span class="line">    &#125;) </span><br><span class="line">    <span class="comment">//第二种使用方式：传入数值进行前进或后退，类似于5.x中的 history.go()方法</span></span><br><span class="line">    <span class="title function_">navigate</span>(-<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handle&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-useParams-路由传递params参数"><a href="#3-useParams-路由传递params参数" class="headerlink" title="3. useParams()路由传递params参数"></a>3. useParams()路由传递<code>params</code>参数</h3><ol>
<li><p>作用：回当前匹配路由的<code>params</code>参数，类似于5.x中的<code>match.params</code>。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Routes</span>, <span class="title class_">Route</span>, useParams &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;./pages/User.jsx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ProfilePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 获取URL中携带过来的params参数</span></span><br><span class="line">  <span class="keyword">let</span> &#123; id &#125; = <span class="title function_">useParams</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users/:id&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">User</span> /&gt;</span>&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-useSearchParams-路由传递seaech参数"><a href="#4-useSearchParams-路由传递seaech参数" class="headerlink" title="4. useSearchParams()路由传递seaech参数"></a>4. useSearchParams()路由传递seaech参数</h3><ol>
<li><p>作用：用于读取和修改当前位置的 URL 中的查询字符串。</p>
</li>
<li><p>返回一个包含两个值的数组，内容分别为：当前的seaech参数、更新search的函数。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;useSearchParams&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Detail</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> [search,setSearch] = <span class="title function_">useSearchParams</span>()</span><br><span class="line">	<span class="keyword">const</span> id = search.<span class="title function_">get</span>(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line">	<span class="keyword">const</span> title = search.<span class="title function_">get</span>(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">	<span class="keyword">const</span> content = search.<span class="title function_">get</span>(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setSearch(&#x27;id=008&amp;title=哈哈&amp;content=嘻嘻&#x27;)&#125;&gt;点我更新一下收到的search参数<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>消息编号：&#123;id&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>消息标题：&#123;title&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>消息内容：&#123;content&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-useLocation-路由传递state参数"><a href="#5-useLocation-路由传递state参数" class="headerlink" title="5. useLocation()路由传递state参数"></a>5. useLocation()路由传递state参数</h3><ol>
<li><p>作用：获取当前 location 信息，对标5.x中的路由组件的<code>location</code>属性。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;useLocation&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Detail</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> x = <span class="title function_">useLocation</span>()</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;@&#x27;</span>,x)</span><br><span class="line">  <span class="comment">// x就是location对象: </span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		&#123;</span></span><br><span class="line"><span class="comment">      hash: &quot;&quot;,</span></span><br><span class="line"><span class="comment">      key: &quot;ah9nv6sz&quot;,</span></span><br><span class="line"><span class="comment">      pathname: &quot;/login&quot;,</span></span><br><span class="line"><span class="comment">      search: &quot;?name=zs&amp;age=18&quot;,</span></span><br><span class="line"><span class="comment">      state: &#123;a: 1, b: 2&#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>消息编号：&#123;id&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>消息标题：&#123;title&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>消息内容：&#123;content&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="6-useMatch"><a href="#6-useMatch" class="headerlink" title="6. useMatch()"></a>6. useMatch()</h3><ol>
<li><p>作用：返回当前匹配信息，对标5.x中的路由组件的<code>match</code>属性。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/login/:page/:pageSize&quot;</span> element=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span>&#125;/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">to</span>=<span class="string">&quot;/login/1/10&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Login</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> match = <span class="title function_">useMatch</span>(<span class="string">&#x27;/login/:x/:y&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(match) <span class="comment">//输出match对象</span></span><br><span class="line">  <span class="comment">//match对象内容如下：</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  	&#123;</span></span><br><span class="line"><span class="comment">      params: &#123;x: &#x27;1&#x27;, y: &#x27;10&#x27;&#125;</span></span><br><span class="line"><span class="comment">      pathname: &quot;/LoGin/1/10&quot;  </span></span><br><span class="line"><span class="comment">      pathnameBase: &quot;/LoGin/1/10&quot;</span></span><br><span class="line"><span class="comment">      pattern: &#123;</span></span><br><span class="line"><span class="comment">      	path: &#x27;/login/:x/:y&#x27;, </span></span><br><span class="line"><span class="comment">      	caseSensitive: false, </span></span><br><span class="line"><span class="comment">      	end: false</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">  	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-useInRouterContext"><a href="#7-useInRouterContext" class="headerlink" title="7. useInRouterContext()"></a>7. useInRouterContext()</h3><p>作用：如果组件在 <code>&lt;Router&gt;</code> 的上下文中呈现，则 <code>useInRouterContext</code> 钩子返回 true，否则返回 false。</p>
<h3 id="8-useNavigationType"><a href="#8-useNavigationType" class="headerlink" title="8. useNavigationType()"></a>8. useNavigationType()</h3><ol>
<li>作用：返回当前的导航类型（用户是如何来到当前页面的）。</li>
<li>返回值：<code>POP</code>、<code>PUSH</code>、<code>REPLACE</code>。</li>
<li>备注：<code>POP</code>是指在浏览器中直接打开了这个路由组件（刷新页面）。</li>
</ol>
<h3 id="9-useOutlet"><a href="#9-useOutlet" class="headerlink" title="9. useOutlet()"></a>9. useOutlet()</h3><ol>
<li><p>作用：用来呈现当前组件中渲染的嵌套路由。</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> result = <span class="title function_">useOutlet</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line"><span class="comment">// 如果嵌套路由没有挂载,则result为null</span></span><br><span class="line"><span class="comment">// 如果嵌套路由已经挂载,则展示嵌套的路由对象</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-useResolvedPath"><a href="#10-useResolvedPath" class="headerlink" title="10.useResolvedPath()"></a>10.useResolvedPath()</h3><ol>
<li>作用：给定一个 URL值，解析其中的：path、search、hash值。</li>
</ol>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">框架</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/React/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-TS" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/TS/">TS</a>
	
    </h1>
  


  
  
<a href="/TS/" class="archive-article-date">
        <time datetime="2023-02-16T14:41:41.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="TypeScript简介"><a href="#TypeScript简介" class="headerlink" title="TypeScript简介"></a>TypeScript简介</h1><ul>
<li>TypeScript 介绍</li>
<li>TypeScript 初体验</li>
<li>TypeScript 常用类型</li>
<li>TypeScript 高级类型</li>
<li>TypeScript 类型声明文件</li>
<li>在 React 中使用 TypeScript</li>
</ul>
<h2 id="TypeScript-介绍"><a href="#TypeScript-介绍" class="headerlink" title="TypeScript 介绍"></a>TypeScript 介绍</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/">TS 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://www.tslang.cn/">TS 中文参考 - 不再维护</a></li>
</ul>
<p><img src="/TS/TS_logo.png" alt="TS Logo"></p>
<ol>
<li>TypeScript 是什么</li>
<li>TypeScript 为什么要为 JS 添加类型支持?</li>
<li>TypeScript 相比 JS 的优势</li>
</ol>
<h3 id="TypeScript-是什么"><a href="#TypeScript-是什么" class="headerlink" title="TypeScript 是什么"></a>TypeScript 是什么</h3><ul>
<li><strong><code>TypeScript</code> 简称：TS，是 JavaScript 的超集</strong>，简单来说就是：JS 有的 TS 都有</li>
</ul>
<p><img src="/TS/TS%E6%98%AFJS%E7%9A%84%E8%B6%85%E9%9B%86.png" alt="TS是JS的超集"></p>
<ul>
<li>TypeScript &#x3D; <code>Type</code> + JavaScript（在 JS 基础之上，<strong>为 JS 添加了类型支持</strong>）</li>
<li>TypeScript 是<em>微软</em>开发的开源编程语言，可以在任何运行 JavaScript 的地方运行</li>
</ul>
<p><img src="/TS/TSvsJS.png" alt="TS 和 JS 的对比"></p>
<h3 id="TypeScript-为什么要为-JS-添加类型支持"><a href="#TypeScript-为什么要为-JS-添加类型支持" class="headerlink" title="TypeScript 为什么要为 JS 添加类型支持?"></a>TypeScript 为什么要为 JS 添加类型支持?</h3><ul>
<li>背景：JS 的类型系统存在“先天缺陷”，JS 代码中绝大部分错误都是类型错误（Uncaught TypeError） </li>
<li>这些经常出现的错误，导致了在使用 JS 进行项目开发时，增加了找 Bug、改 Bug 的时间，严重影响开发效率</li>
</ul>
<p>为什么会这样？</p>
<ul>
<li><p>从编程语言的动静来区分，<strong>TypeScript 属于静态类型的编程语言</strong>，<strong>JavaScript 属于动态类型的编程语言</strong></p>
<ul>
<li>静态类型：<strong>编译</strong>期做类型检查</li>
<li>动态类型：<strong>执行</strong>期做类型检查</li>
</ul>
</li>
<li><p>代码编译和代码执行的顺序：1 编译 2 执行</p>
</li>
<li><p>对于 JS 来说：需要等到代码真正去执行的时候才能发现错误（晚）</p>
</li>
<li><p>对于 TS 来说：在代码编译的时候（代码执行前）就可以发现错误（早）</p>
</li>
</ul>
<p>并且，配合 VSCode 等开发工具，TS 可以提前到<strong>在编写代码的同时就发现代码中的错误</strong>，减少找 Bug、改 Bug 时间  </p>
<p>对比：</p>
<ul>
<li>使用 JS：<ol>
<li>在 VSCode 里面写代码</li>
<li>在浏览器中运行代码 –&gt; 运行时，才会发现错误【晚】</li>
</ol>
</li>
<li>使用 TS：<ol>
<li>在 VSCode 里面写代码 –&gt; 写代码的同时，就会发现错误【早】</li>
<li>在浏览器中运行代码</li>
</ol>
</li>
</ul>
<h3 id="TypeScript-相比-JS-的优势"><a href="#TypeScript-相比-JS-的优势" class="headerlink" title="TypeScript 相比 JS 的优势"></a>TypeScript 相比 JS 的优势</h3><ol>
<li><strong>更早（写代码的同时）发现错误</strong>，减少找 Bug、改 Bug 时间，提升开发效率</li>
<li>程序中任何位置的代码都有<strong>代码提示</strong>，随时随地的安全感，增强了开发体验</li>
<li>强大的类型系统提升了代码的可维护性，使得<strong>重构代码更加容易</strong></li>
<li>支持最新的 ECMAScript 语法，<strong>优先体验最新的语法，让你走在前端技术的最前沿</strong> </li>
<li>TS 类型推断机制，不需要在代码中的每个地方都显示标注类型，让你在享受优势的同时，尽量降低了学习负担</li>
</ol>
<p>除此之外，Vue 3 源码使用 TS 重写、Angular 默认支持 TS、React 与 TS 完美配合，TypeScript 已成为大中型前端 项目的首选编程语言</p>
<p>目前，前端最新的开发技术栈：</p>
<ol>
<li>React： TS + Hooks</li>
<li>Vue： TS + Vue3</li>
</ol>
<ul>
<li>注意： Vue2 对 TS 的支持不好~</li>
</ul>
<hr>
<h2 id="TypeScript-初体验"><a href="#TypeScript-初体验" class="headerlink" title="TypeScript 初体验"></a>TypeScript 初体验</h2><ol>
<li>安装编译 TS 的工具包</li>
<li>编译并运行 TS 代码</li>
<li>简化运行 TS 的步骤</li>
</ol>
<h3 id="安装编译-TS-的工具包"><a href="#安装编译-TS-的工具包" class="headerlink" title="安装编译 TS 的工具包"></a>安装编译 TS 的工具包</h3><ul>
<li>问题：为什么要安装编译 TS 的工具包?</li>
<li>回答：Node.js&#x2F;浏览器，只认识 JS 代码，不认识 TS 代码。需要先将 TS 代码转化为 JS 代码，然后才能运行</li>
<li>安装命令：<code>npm i -g typescript</code><ul>
<li>typescript 包：用来编译 TS 代码的包，提供了 <code>tsc</code> 命令，实现了 TS -&gt; JS 的转化</li>
<li><em>注意：Mac 电脑安装全局包时，需要添加 <code>sudo</code> 获取权限：<code>sudo npm i -g typescript</code></em>  yarn 全局安装：<code>sudo yarn global add typescript</code></li>
</ul>
</li>
<li>验证是否安装成功：tsc –v(查看 typescript 的版本)</li>
</ul>
<p><img src="/TS/TS%E7%BC%96%E8%AF%91.png" alt="TS 编译"></p>
<h3 id="编译并运行-TS-代码"><a href="#编译并运行-TS-代码" class="headerlink" title="编译并运行 TS 代码"></a>编译并运行 TS 代码</h3><ol>
<li>创建 hello.ts 文件（注意：**TS 文件的后缀名为 <code>.ts</code>**）</li>
<li>将 TS 编译为 JS：在终端中输入命令，<code>tsc hello.ts</code>（此时，在同级目录中会出现一个同名的 JS 文件）</li>
<li>执行 JS 代码：在终端中输入命令，<code>node hello.js</code></li>
</ol>
<p>1 创建 ts 文件  &#x3D;&#x3D;&#x3D;&gt;  2 编译 TS  &#x3D;&#x3D;&#x3D;&gt;  3 执行 JS  </p>
<ul>
<li>说明：所有合法的 JS 代码都是 TS 代码，有 JS 基础只需要学习 TS 的类型即可</li>
<li>注意：由 TS 编译生成的 JS 文件，代码中就没有类型信息了</li>
</ul>
<h3 id="简化运行-TS-的步骤"><a href="#简化运行-TS-的步骤" class="headerlink" title="简化运行 TS 的步骤"></a>简化运行 TS 的步骤</h3><ul>
<li>问题描述：每次修改代码后，都要重复执行两个命令，才能运行 TS 代码，太繁琐</li>
<li>简化方式：使用 <code>ts-node</code> 包，直接在 Node.js 中执行 TS 代码</li>
<li>安装命令：<code>npm i -g ts-node</code><ul>
<li>ts-node 包提供了 <code>ts-node</code> 命令</li>
<li>使用方式：<code>ts-node hello.ts</code> 相当于：1 tsc 命令  2 node（注意：ts-node 不会生成 js 文件）</li>
</ul>
</li>
</ul>
<p>解释：ts-node 命令在内部偷偷的将 TS -&gt; JS，然后，再运行 JS 代码</p>
<p>使用ts-node执行文件，输出报错时使用用</p>
<blockquote>
<p>tsc –init</p>
</blockquote>
<p>初始一个配置文件即可</p>
<h1 id="TypeScript-常用类型"><a href="#TypeScript-常用类型" class="headerlink" title="TypeScript 常用类型"></a>TypeScript 常用类型</h1><ul>
<li>TypeScript 是 JS 的超集，TS 提供了 JS 的所有功能，并且额外的增加了：<strong>类型系统</strong><ul>
<li>所有的 JS 代码都是 TS 代码</li>
<li><strong>JS 有类型</strong>（比如，number&#x2F;string 等），但是 <strong>JS 不会检查变量的类型是否发生变化</strong>，而 TS 会检查</li>
</ul>
</li>
<li>TypeScript 类型系统的主要优势：<strong>可以显示标记出代码中的意外行为，从而降低了发生错误的可能性</strong></li>
</ul>
<ol>
<li>类型注解</li>
<li>常用基础类型</li>
</ol>
<h2 id="类型注解"><a href="#类型注解" class="headerlink" title="类型注解"></a>类型注解</h2><p>示例代码:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">18</span></span><br></pre></td></tr></table></figure>

<ul>
<li>说明：代码中的 <code>: number</code> 就是<strong>类型注解</strong></li>
<li>作用：<strong>为变量添加类型约束</strong>。比如，上述代码中，约定变量 age 的类型为 number 类型（明确指定一个变量的类型，变量的类型是不能修改的）</li>
<li>解释：<strong>约定了什么类型，就只能给变量赋值该类型的值，否则，就会报错</strong></li>
<li>错误演示：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误代码：</span></span><br><span class="line"><span class="comment">// 错误原因：将 string 类型的值赋值给了 number 类型的变量，类型不一致</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="string">&#x27;18&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="常用基础类型"><a href="#常用基础类型" class="headerlink" title="常用基础类型"></a>常用基础类型</h2><p>可以将 TS 中的常用基础类型细分为两类：1 JS 已有类型 2 TS 新增类型</p>
<ol>
<li>JS 已有类型</li>
</ol>
<ul>
<li>原始类型：<code>number/string/boolean/null/undefined/symbol</code>（无浮点型）</li>
<li>对象类型：<code>object</code>（包括，数组、对象、函数等对象）</li>
</ul>
<ol start="2">
<li>TS 新增类型</li>
</ol>
<ul>
<li><p>联合类型、自定义类型(类型别名)、接口、元组、字面量类型、枚举、void、any 等</p>
</li>
<li><p>注意：</p>
<ol>
<li><em>原始类型</em>在 TS 和 JS 中写法一致</li>
<li><em>对象类型</em>在 TS 中更加细化，每个具体的对象（比如，数组、对象、函数）都有自己的类型语法</li>
</ol>
</li>
</ul>
<h3 id="原始类型"><a href="#原始类型" class="headerlink" title="原始类型"></a>原始类型</h3><ul>
<li>原始类型：number&#x2F;string&#x2F;boolean&#x2F;null&#x2F;undefined&#x2F;symbol</li>
<li>特点：简单，这些类型，完全按照 JS 中类型的名称来书写</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myName</span>: <span class="built_in">string</span> = <span class="string">&#x27;老师&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">isLoading</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等等...</span></span><br></pre></td></tr></table></figure>

<h3 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h3><ul>
<li>数组类型的两种写法：<ul>
<li>推荐使用 <code>number[]</code> 写法</li>
</ul>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写法一：</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">numbers</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="comment">// 写法二：</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">strings</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h3><p>需求：数组中既有 number 类型，又有 string 类型，这个数组的类型应该如何写?</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: (<span class="built_in">number</span> | <span class="built_in">string</span>)[] = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：<code>|</code>（竖线）在 TS 中叫做<strong>联合类型</strong>，即：由两个或多个其他类型组成的类型，表示可以是这些类型中的任意一种</li>
<li>注意：这是 TS 中联合类型的语法，只有一根竖线，不要与 JS 中的或（|| 或）混淆了</li>
</ul>
<h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><ul>
<li><code>类型别名（自定义类型）</code>：为任意类型起别名</li>
<li>使用场景：当同一类型（复杂）被多次使用时，可以通过类型别名，<strong>简化该类型的使用</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">CustomArray</span> = (<span class="built_in">number</span> | <span class="built_in">string</span>)[]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="title class_">CustomArray</span> = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">CustomArray</span> = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>使用 <code>type</code> 关键字来创建自定义类型</li>
<li>类型别名（比如，此处的 <em>CustomArray</em>）可以是任意合法的变量名称</li>
<li>推荐使用大写字母开头</li>
<li>创建类型别名后，直接使用该类型别名作为变量的类型注解即可</li>
</ol>
</li>
</ul>
<h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><ul>
<li>函数的类型实际上指的是：<code>函数参数</code>和<code>返回值</code>的类型</li>
<li>为函数指定类型的两种方式：<ol>
<li>单独指定参数、返回值的类型（参数也需要指定类型）</li>
<li>同时指定参数、返回值的类型</li>
</ol>
</li>
</ul>
<ol>
<li>单独指定参数、返回值的类型：</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 箭头函数</span></span><br><span class="line"><span class="keyword">const</span> add = (<span class="attr">num1</span>: <span class="built_in">number</span>, <span class="attr">num2</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>同时指定参数、返回值的类型:</strong></li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">AddFn</span> = <span class="function">(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">add</span>: <span class="title class_">AddFn</span> = <span class="function">(<span class="params">num1, num2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：当函数作为表达式时，可以通过类似箭头函数形式的语法来为函数添加类型</li>
<li>注意：这种形式只适用于<strong>函数表达式</strong></li>
</ul>
<h4 id="void-类型"><a href="#void-类型" class="headerlink" title="void 类型"></a>void 类型</h4><ul>
<li>如果函数没有返回值，那么，函数返回值类型为：<code>void</code></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello&#x27;</span>, name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<ul>
<li>如果一个函数没有返回值，此时，在 TS 的类型中，应该使用 <code>void</code> 类型</li>
</ul>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果什么都不写，此时，add 函数的返回值类型为： void</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params"></span>) =&gt; &#123;&#125;</span><br><span class="line"><span class="comment">// 这种写法是明确指定函数返回值类型为 void，与上面不指定返回值类型相同</span></span><br><span class="line"><span class="keyword">const</span> add = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 但，如果指定 返回值类型为 undefined，此时，函数体中必须显示的 return undefined 才可以</span></span><br><span class="line"><span class="keyword">const</span> add = (): <span class="function"><span class="params">undefined</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 此处，返回的 undefined 是 JS 中的一个值</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数可选参数"><a href="#函数可选参数" class="headerlink" title="函数可选参数"></a>函数可选参数</h4><ul>
<li>使用函数实现某个功能时，参数可以传也可以不传。这种情况下，在给函数参数指定类型时，就用到<strong>可选参数</strong>了</li>
<li>比如，数组的 slice 方法，可以 <code>slice()</code> 也可以 <code>slice(1)</code> 还可以 <code>slice(1, 3)</code></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mySlice</span>(<span class="params">start?: <span class="built_in">number</span>, end?: <span class="built_in">number</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;起始索引：&#x27;</span>, start, <span class="string">&#x27;结束索引：&#x27;</span>, end)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>可选参数：<strong>在可传可不传的参数名称后面添加 <code>?</code>（问号</strong>） </li>
<li>注意：<strong>可选参数只能出现在参数列表的最后</strong>，也就是说可选参数后面不能再出现必选参数</li>
</ul>
<h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h3><ul>
<li>JS 中的对象是由属性和方法构成的，而 <strong>TS 对象的类型就是在描述对象的结构</strong>（有什么类型的属性和方法）</li>
<li>对象类型的写法:</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 空对象</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;&#125; = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有属性的对象</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;同学&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 既有属性又有方法的对象</span></span><br><span class="line"><span class="comment">// 在一行代码中指定对象的多个属性类型时，使用 `;`（分号）来分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="title function_">sayHi</span>(): <span class="built_in">void</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象中如果有多个类型，可以换行写：</span></span><br><span class="line"><span class="comment">// 通过换行来分隔多个属性类型，可以去掉 `;`</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>使用 <code>&#123;&#125;</code> 来描述对象结构</li>
<li>属性采用<code>属性名: 类型</code>的形式</li>
<li>方法采用<code>方法名(): 返回值类型</code>的形式</li>
</ol>
</li>
</ul>
<blockquote>
<p>注意：在一行代码中指定对象的多个属性类型时，使用 <code>;</code>（分号）来分隔</p>
</blockquote>
<h4 id="使用类型别名"><a href="#使用类型别名" class="headerlink" title="使用类型别名"></a>使用类型别名</h4><ul>
<li>注意：直接使用 <code>&#123;&#125;</code> 形式为对象添加类型，会降低代码的可读性（不好辨识类型和值）</li>
<li>推荐：<strong>使用类型别名为对象添加类型</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建类型别名</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用类型别名作为对象的类型：</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="带有参数的方法类型"><a href="#带有参数的方法类型" class="headerlink" title="带有参数的方法类型"></a>带有参数的方法类型</h4><ul>
<li>如果方法有参数，就在方法名后面的小括号中指定参数类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="title function_">greet</span>(<span class="attr">name</span>: <span class="built_in">string</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="箭头函数形式的方法类型"><a href="#箭头函数形式的方法类型" class="headerlink" title="箭头函数形式的方法类型"></a>箭头函数形式的方法类型</h4><ul>
<li>方法的类型也可以使用箭头函数形式</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">greet</span>: <span class="function">(<span class="params">name: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="对象可选属性"><a href="#对象可选属性" class="headerlink" title="对象可选属性"></a>对象可选属性</h4><ul>
<li>对象的属性或方法，也可以是可选的，此时就用到<strong>可选属性</strong>了</li>
<li>比如，我们在使用 <code>axios(&#123; ... &#125;)</code> 时，如果发送 GET 请求，method 属性就可以省略</li>
<li>可选属性的语法与函数可选参数的语法一致，都使用 <code>?</code> 来表示</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Config</span> = &#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span></span><br><span class="line">  method?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myAxios</span>(<span class="params">config: Config</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(config)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>当一个对象类型被多次使用时，一般会使用接口（<code>interface</code>）来描述对象的类型，达到复用的目的</p>
<ul>
<li>解释：<ol>
<li>使用 <code>interface</code> 关键字来声明接口</li>
<li>接口名称(比如，此处的 IPerson)，可以是任意合法的变量名称，推荐以 <code>I</code> 开头</li>
<li>声明接口后，直接使用接口名称作为变量的类型</li>
<li>因为每一行只有一个属性类型，因此，属性类型后没有 ;(分号)</li>
</ol>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">IPerson</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">19</span>,</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="interface-vs-type"><a href="#interface-vs-type" class="headerlink" title="interface vs type"></a>interface vs type</h4><ul>
<li>interface（接口）和 type（类型别名）的对比：</li>
<li>相同点：都可以给对象指定类型</li>
<li>不同点:<ul>
<li>接口，只能为对象指定类型</li>
<li>类型别名，不仅可以为对象指定类型，实际上可以为任意类型指定别名</li>
</ul>
</li>
<li>推荐：<strong>能使用 type 就是用 type</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为对象类型创建类型别名</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IPerson</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="title function_">sayHi</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为联合类型创建类型别名</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NumStr</span> = <span class="built_in">number</span> | <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h4 id="接口继承"><a href="#接口继承" class="headerlink" title="接口继承"></a>接口继承</h4><ul>
<li>如果两个接口之间有相同的属性或方法，可以将<strong>公共的属性或方法抽离出来，通过继承来实现复用</strong></li>
<li>比如，这两个接口都有 x、y 两个属性，重复写两次，可以，但很繁琐</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Point2D</span> &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Point3D</span> &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span>; <span class="attr">z</span>: <span class="built_in">number</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>更好的方式:</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Point2D</span> &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="comment">// 继承 Point2D</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Point3D</span> <span class="keyword">extends</span> <span class="title class_">Point2D</span> &#123;</span><br><span class="line">  <span class="attr">z</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：<ol>
<li>使用 <code>extends</code>(继承)关键字实现了接口 Point3D 继承 Point2D</li>
<li>继承后，Point3D 就有了 Point2D 的所有属性和方法(此时，Point3D 同时有 x、y、z 三个属性)</li>
</ol>
</li>
</ul>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><ul>
<li>场景：在地图中，使用经纬度坐标来标记位置信息</li>
<li>可以使用数组来记录坐标，那么，该数组中只有两个元素，并且这两个元素都是数值类型 number[]</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">position</span>: <span class="built_in">number</span>[] = [<span class="number">116.2317</span>, <span class="number">39.5427</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 number[] 的缺点：不严谨，因为该类型的数组中可以出现任意多个数字</li>
<li>更好的方式：<code>元组 Tuple</code></li>
<li>元组类型是另一种类型的数组，它确切地知道包含多少个元素，<strong>以及特定索引对应的类型</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">position</span>: [<span class="built_in">number</span>, <span class="built_in">number</span>] = [<span class="number">39.5427</span>, <span class="number">116.2317</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：<ol>
<li>元组类型可以确切地标记出有多少个元素，以及每个元素的类型</li>
<li>该示例中，元素有两个元素，每个元素的类型都是 number</li>
</ol>
</li>
</ul>
<hr>
<h3 id="类型推论"><a href="#类型推论" class="headerlink" title="类型推论"></a>类型推论</h3><ul>
<li>在 TS 中，某些没有明确指出类型的地方，<strong>TS 的类型推论机制会帮助提供类型</strong></li>
<li>换句话说：由于类型推论的存在，这些地方，类型注解可以省略不写</li>
<li>发生类型推论的 2 种常见场景:<ol>
<li>声明变量并初始化时</li>
<li>决定函数返回值时</li>
</ol>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量 age 的类型被自动推断为：number</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数返回值的类型被自动推断为：number</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>推荐：<strong>能省略类型注解的地方就省略</strong>（<del>偷懒</del>，充分利用TS类型推论的能力，提升开发效率）</li>
<li>技巧：如果不知道类型，可以通过鼠标放在变量名称上，利用 VSCode 的提示来查看类型</li>
<li>推荐：在 VSCode 中写代码的时候，多看方法、属性的类型，养成写代码看类型的习惯</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log()</span><br><span class="line">document.createElement()</span><br></pre></td></tr></table></figure>



<h3 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h3><ul>
<li>思考以下代码，两个变量的类型分别是什么?</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&#x27;Hello TS&#x27;</span></span><br><span class="line"><span class="keyword">const</span> str2 = <span class="string">&#x27;Hello TS&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>通过 TS 类型推论机制，可以得到答案：</p>
<ol>
<li>变量 str1 的类型为：string</li>
<li>变量 str2 的类型为：’Hello TS’</li>
</ol>
</li>
<li><p>解释:</p>
</li>
</ul>
<ol>
<li>str1 是一个变量(let)，它的值可以是任意字符串，所以类型为:string</li>
<li>str2 是一个常量(const)，它的值不能变化只能是 ‘Hello TS’，所以，它的类型为:’Hello TS’</li>
</ol>
<ul>
<li>注意：此处的 ‘Hello TS’，就是一个<strong>字面量类型</strong>，也就是说某个特定的字符串也可以作为 TS 中的类型</li>
<li>任意的 JS 字面量（比如，对象、数字等）都可以作为类型使用<ul>
<li>字面量：<code>&#123; name: &#39;jack&#39; &#125;</code> <code>[]</code> <code>18</code> <code>20</code> <code>&#39;abc&#39;</code> <code>false</code> <code>function() &#123;&#125;</code></li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&#x27;Hello TS&#x27;</span></span><br><span class="line"><span class="keyword">const</span> str2 = <span class="string">&#x27;Hello TS123&#x27;</span></span><br><span class="line"></span><br><span class="line">str1 = str2</span><br><span class="line"></span><br><span class="line"><span class="comment">// str2 = str1 不行</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="使用模式和场景"><a href="#使用模式和场景" class="headerlink" title="使用模式和场景"></a>使用模式和场景</h4><ul>
<li>使用模式：<strong>字面量类型配合联合类型一起使用</strong></li>
<li>使用场景：用来表示一组明确的可选值列表</li>
<li>比如，在贪吃蛇游戏中，游戏的方向的可选值只能是上、下、左、右中的任意一个</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用自定义类型:</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Direction</span> = <span class="string">&#x27;up&#x27;</span> | <span class="string">&#x27;down&#x27;</span> | <span class="string">&#x27;left&#x27;</span> | <span class="string">&#x27;right&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeDirection</span>(<span class="params">direction: Direction</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(direction)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数时，会有类型提示：</span></span><br><span class="line"><span class="title function_">changeDirection</span>(<span class="string">&#x27;up&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：参数 direction 的值只能是 up&#x2F;down&#x2F;left&#x2F;right 中的任意一个</li>
<li>优势：相比于 string 类型，使用字面量类型更加精确、严谨</li>
</ul>
<h3 id="【了解】枚举"><a href="#【了解】枚举" class="headerlink" title="【了解】枚举"></a>【了解】枚举</h3><ul>
<li>枚举的功能类似于<strong>字面量类型+联合类型组合</strong>的功能，也可以表示一组明确的可选值</li>
<li>枚举：定义一组命名常量。它描述一个值，该值可以是这些命名常量中的一个</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建枚举</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123; <span class="title class_">Up</span>, <span class="title class_">Down</span>, <span class="title class_">Left</span>, <span class="title class_">Right</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用枚举类型</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeDirection</span>(<span class="params">direction: Direction</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(direction)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数时，需要应该传入：枚举 Direction 成员的任意一个</span></span><br><span class="line"><span class="comment">// 类似于 JS 中的对象，直接通过 点（.）语法 访问枚举的成员也可以通过[]来访问</span></span><br><span class="line"><span class="title function_">changeDirection</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>解释:</p>
<ol>
<li><p>使用 <code>enum</code> 关键字定义枚举</p>
</li>
<li><p>约定枚举名称以大写字母开头</p>
</li>
<li><p>枚举中的多个值之间通过 <code>,</code>（逗号）分隔</p>
</li>
<li><p>定义好枚举后，直接使用枚举名称作为类型注解</p>
</li>
<li><p>ts中的枚举：不仅是类型也是值，而type定义的类型是不能当值使用的</p>
</li>
<li><p>类似于 JS 中的对象，直接通过 点（.）语法 访问枚举的成员也可以通过[]来访问</p>
</li>
<li><p>只能读取枚举类型的值不能修改</p>
</li>
</ol>
</li>
</ul>
<h4 id="数字枚举"><a href="#数字枚举" class="headerlink" title="数字枚举"></a>数字枚举</h4><ul>
<li>问题：我们把枚举成员作为了函数的实参，它的值是什么呢?</li>
<li>解释：通过将鼠标移入 Direction.Up，可以看到枚举成员 Up 的值为 0</li>
<li>注意：枚举成员是有值的，默认为：从 0 开始自增的数值</li>
<li>我们把，枚举成员的值为数字的枚举，称为：<code>数字枚举</code></li>
<li>当然，也可以给枚举中的成员初始化值</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Down -&gt; 11、Left -&gt; 12、Right -&gt; 13</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123; <span class="title class_">Up</span> = <span class="number">10</span>, <span class="title class_">Down</span>, <span class="title class_">Left</span>, <span class="title class_">Right</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123; <span class="title class_">Up</span> = <span class="number">2</span>, <span class="title class_">Down</span> = <span class="number">4</span>, <span class="title class_">Left</span> = <span class="number">8</span>, <span class="title class_">Right</span> = <span class="number">16</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="字符串枚举"><a href="#字符串枚举" class="headerlink" title="字符串枚举"></a>字符串枚举</h4><ul>
<li>字符串枚举：枚举成员的值是字符串</li>
<li>注意：字符串枚举没有自增长行为，因此，<strong>字符串枚举的每个成员必须有初始值</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">Up</span> = <span class="string">&#x27;UP&#x27;</span>,</span><br><span class="line">  <span class="title class_">Down</span> = <span class="string">&#x27;DOWN&#x27;</span>,</span><br><span class="line">  <span class="title class_">Left</span> = <span class="string">&#x27;LEFT&#x27;</span>,</span><br><span class="line">  <span class="title class_">Right</span> = <span class="string">&#x27;RIGHT&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="枚举实现原理"><a href="#枚举实现原理" class="headerlink" title="枚举实现原理"></a>枚举实现原理</h4><ul>
<li>枚举是 TS 为数不多的非 JavaScript 类型级扩展(不仅仅是类型)的特性之一</li>
<li>因为：其他类型仅仅被当做类型，而枚举不仅用作类型，还提供值(枚举成员都是有值的)</li>
<li>也就是说，其他的类型会在编译为 JS 代码时自动移除。但是，<strong>枚举类型会被编译为 JS 代码</strong></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">Up</span> = <span class="string">&#x27;UP&#x27;</span>,</span><br><span class="line">  <span class="title class_">Down</span> = <span class="string">&#x27;DOWN&#x27;</span>,</span><br><span class="line">  <span class="title class_">Left</span> = <span class="string">&#x27;LEFT&#x27;</span>,</span><br><span class="line">  <span class="title class_">Right</span> = <span class="string">&#x27;RIGHT&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 会被编译为以下 JS 代码：</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Direction</span>;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params">Direction</span>) &#123;</span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;Up&#x27;</span>] = <span class="string">&#x27;UP&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;Down&#x27;</span>] = <span class="string">&#x27;DOWN&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;Left&#x27;</span>] = <span class="string">&#x27;LEFT&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;Right&#x27;</span>] = <span class="string">&#x27;RIGHT&#x27;</span></span><br><span class="line">&#125;)(<span class="title class_">Direction</span> || <span class="title class_">Direction</span> = &#123;&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>说明：枚举与前面讲到的字面量类型+联合类型组合的功能类似，都用来表示一组明确的可选值列表</li>
<li>一般情况下，<strong>推荐使用字面量类型+联合类型组合的方式</strong>，因为相比枚举，这种方式更加直观、简洁、高效</li>
</ul>
<h3 id="any-类型"><a href="#any-类型" class="headerlink" title="any 类型"></a>any 类型</h3><ul>
<li><strong>原则:不推荐使用 any</strong>!这会让 TypeScript 变为 “AnyScript”(失去 TS 类型保护的优势)</li>
<li>因为当值的类型为 any 时，可以对该值进行任意操作，并且不会有代码提示</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="built_in">any</span> = &#123; <span class="attr">x</span>: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line">obj.<span class="property">bar</span> = <span class="number">100</span></span><br><span class="line"><span class="title function_">obj</span>()</span><br><span class="line"><span class="keyword">const</span> <span class="attr">n</span>: <span class="built_in">number</span> = obj</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:以上操作都不会有任何类型错误提示，即使可能存在错误</li>
<li>尽可能的避免使用 any 类型，除非临时使用 any 来“避免”书写很长、很复杂的类型</li>
<li>其他隐式具有 any 类型的情况<ol>
<li>声明变量不提供类型也不提供默认值</li>
<li>函数参数不加类型</li>
</ol>
</li>
<li>注意：因为不推荐使用 any，所以，这两种情况下都应该提供类型</li>
</ul>
<p>在项目开发中，尽量少用any类型</p>
<hr>
<h3 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h3><p>有时候你会比 TS 更加明确一个值的类型，此时，可以使用类型断言来指定更具体的类型。 比如，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> aLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<strong>该方法返回值的类型是 HTMLElement，</strong>该类型只包含所有标签公共的属性或方法，不包含 a 标签特有的 href 等属性</li>
<li>因此，这个**类型太宽泛(不具体)**，无法操作 href 等 a 标签特有的属性或方法</li>
<li>解决方式：这种情况下就需要<strong>使用类型断言指定更加具体的类型</strong></li>
<li>使用类型断言：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> aLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>) <span class="keyword">as</span> <span class="title class_">HTMLAnchorElement</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>解释:</p>
<ol>
<li>使用 <code>as</code> 关键字实现类型断言</li>
<li>关键字 as 后面的类型是一个更加具体的类型（HTMLAnchorElement 是 HTMLElement 的子类型）</li>
<li>通过类型断言，aLink 的类型变得更加具体，这样就可以访问 a 标签特有的属性或方法了</li>
</ol>
</li>
<li><p>另一种语法，使用 <code>&lt;&gt;</code> 语法，这种语法形式不常用知道即可:</p>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该语法，知道即可：在react的jsx中使用会报错</span></span><br><span class="line"><span class="keyword">const</span> aLink = &lt;<span class="title class_">HTMLAnchorElement</span>&gt;<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><em>技巧：在浏览器控制台，通过 <code>__proto__</code> 获取 DOM 元素的类型</em></p>
<h3 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h3><ul>
<li>众所周知，JS 中提供了 typeof 操作符，用来在 JS 中获取数据的类型</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="string">&#x27;Hello world&#x27;</span>) <span class="comment">// ?</span></span><br></pre></td></tr></table></figure>

<ul>
<li>实际上，TS 也提供了 typeof 操作符：可以在<em>类型上下文</em>中引用变量或属性的类型（类型查询）</li>
<li>使用场景:根据已有变量的值，获取该值的类型，来简化类型书写</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatPoint</span>(<span class="params">point: &#123; x: <span class="built_in">number</span>; y: <span class="built_in">number</span> &#125;</span>) &#123;&#125;</span><br><span class="line"><span class="title function_">formatPoint</span>(p)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatPoint</span>(<span class="params">point: <span class="keyword">typeof</span> p</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>使用 <code>typeof</code> 操作符来获取变量 p 的类型，结果与第一种（对象字面量形式的类型）相同</li>
<li>typeof 出现在<strong>类型注解的位置（参数名称的冒号后面）所处的环境就在类型上下文</strong>(区别于 JS 代码)</li>
<li>注意：typeof 只能用来查询变量或属性的类型，无法查询其他形式的类型（比如，函数调用的类型）</li>
</ol>
</li>
</ul>
<h1 id="TypeScript-高级类型"><a href="#TypeScript-高级类型" class="headerlink" title="TypeScript 高级类型"></a>TypeScript 高级类型</h1><p>TS 中的高级类型有很多，重点学习以下高级类型：</p>
<ol>
<li>泛型 和 keyof</li>
<li>索引签名类型 和 索引查询类型</li>
<li>映射类型</li>
</ol>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><ul>
<li><strong>泛型是可以在保证类型安全前提下，让函数等与多种类型一起工作，从而实现复用</strong>，常用于：函数、接口、class 中</li>
<li>需求：创建一个 id 函数，传入什么数据就返回该数据本身(也就是说，参数和返回值类型相同)</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">id</span>(<span class="params">value: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123; <span class="keyword">return</span> value &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>比如，id(10) 调用以上函数就会直接返回 10 本身。但是，该函数只接收数值类型，无法用于其他类型</li>
<li>为了能让函数能够接受任意类型，可以将参数类型修改为 any。但是，这样就失去了 TS 的类型保护，类型不安全</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">id</span>(<span class="params">value: <span class="built_in">any</span></span>): <span class="built_in">any</span> &#123; <span class="keyword">return</span> value &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>泛型在保证类型安全(不丢失类型信息)的同时，可以让函数等与多种不同的类型一起工作，灵活可复用</strong></li>
<li>实际上，在 C# 和 Java 等编程语言中，泛型都是用来实现可复用组件功能的主要工具之一</li>
</ul>
<h3 id="创建泛型函数"><a href="#创建泛型函数" class="headerlink" title="创建泛型函数"></a>创建泛型函数</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123; <span class="keyword">return</span> value &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> id&lt;T&gt;(<span class="attr">value</span>: T): T &#123; <span class="keyword">return</span> value &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释<ol>
<li>动态指定类型，Type相当于函数的参数,传递的什么类型就是什么类型</li>
<li>语法：在函数名称的后面添加 <code>&lt;&gt;</code>(尖括号)，<strong>尖括号中添加类型变量</strong>，比如此处的 Type</li>
<li><strong>类型变量 Type，是一种特殊类型的变量，它处理类型而不是值</strong></li>
<li><strong>该类型变量相当于一个类型容器</strong>，能够捕获用户提供的类型(具体是什么类型由用户调用该函数时指定)</li>
<li>因为 Type 是类型，因此可以将其作为函数参数和返回值的类型，表示参数和返回值具有相同的类型</li>
<li>类型变量 Type，可以是任意合法的变量名称</li>
</ol>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动态指定类型</span></span><br><span class="line"><span class="keyword">function</span> fn&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">fn&lt;<span class="built_in">number</span>| <span class="built_in">string</span>&gt;(<span class="string">&quot;12&quot;</span>);</span><br><span class="line"><span class="comment">// 简写</span></span><br><span class="line"><span class="title function_">fn</span>(<span class="string">&quot;15&quot;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="调用泛型函数"><a href="#调用泛型函数" class="headerlink" title="调用泛型函数"></a>调用泛型函数</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = id&lt;<span class="built_in">number</span>&gt;(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">const</span> str = id&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>解释：</p>
<ol>
<li>语法：在函数名称的后面添加 <code>&lt;&gt;</code>(尖括号)，<strong>尖括号中指定具体的类型</strong>，比如，此处的 number</li>
<li>当传入类型 number 后，这个类型就会被函数声明时指定的类型变量 Type 捕获到</li>
<li>此时，Type 的类型就是 number，所以，函数 id 参数和返回值的类型也都是 number</li>
</ol>
</li>
<li><p>同样，如果传入类型 string，函数 id 参数和返回值的类型就都是 string</p>
</li>
<li><p>这样，通过泛型就做到了让 id 函数与多种不同的类型一起工作，<strong>实现了复用的同时保证了类型安全</strong></p>
</li>
</ul>
<h3 id="简化泛型函数调用"><a href="#简化泛型函数调用" class="headerlink" title="简化泛型函数调用"></a>简化泛型函数调用</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略 &lt;number&gt; 调用函数</span></span><br><span class="line"><span class="keyword">let</span> num = <span class="title function_">id</span>(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> str = <span class="title function_">id</span>(<span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>解释:</p>
<ol>
<li>在调用泛型函数时，<strong>可以省略 <code>&lt;类型&gt;</code> 来简化泛型函数的调用</strong></li>
<li>此时，TS 内部会采用一种叫做<strong>类型参数推断</strong>的机制，来根据传入的实参自动推断出类型变量 Type 的类型</li>
<li>比如，传入实参 10，TS 会自动推断出变量 num 的类型 number，并作为 Type 的类型</li>
</ol>
</li>
<li><p>推荐：使用这种简化的方式调用泛型函数，使代码更短，更易于阅读</p>
</li>
<li><p>说明：<strong>当编译器无法推断类型或者推断的类型不准确时，就需要显式地传入类型参数</strong></p>
</li>
<li><p>ts的数组就是一个泛型</p>
</li>
</ul>
<h3 id="泛型约束"><a href="#泛型约束" class="headerlink" title="泛型约束"></a>泛型约束</h3><ul>
<li>默认情况下，泛型函数的类型变量 Type 可以代表多个类型，这导致无法访问任何属性</li>
<li>比如，id(‘a’) 调用函数时获取参数的长度：</li>
<li><strong>下列写法会报错</strong>，不确定是否存在length属性</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="property">length</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">id</span>(<span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>解释：<strong>Type 可以代表任意类型，无法保证一定存在 length 属性，</strong>比如 number 类型就没有 length</li>
<li>此时，就需要<strong>为泛型添加约束来<code>收缩类型</code>(缩窄类型取值范围)</strong></li>
<li>添加泛型约束收缩类型，主要有以下两种方式：1 指定更加具体的类型  2 添加约束</li>
</ul>
<h4 id="指定更加具体的类型"><a href="#指定更加具体的类型" class="headerlink" title="指定更加具体的类型"></a>指定更加具体的类型</h4><p>比如，将类型修改为 <code>Type[]</code>(Type 类型的数组)，因为只要是数组就一定存在 length 属性，因此就可以访问了</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>[]): <span class="title class_">Type</span>[] &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="property">length</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ILength</span> &#123; <span class="attr">length</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type extends ILength 添加泛型约束</span></span><br><span class="line"><span class="comment">// 解释：表示传入的 类型 必须满足 ILength 接口的要求才行，也就是得有一个 number 类型的 length 属性</span></span><br><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span> <span class="keyword">extends</span> <span class="title class_">ILength</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="property">length</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>解释:<ol>
<li>创建描述约束的接口 ILength，该接口要求提供 length 属性</li>
<li>通过 <code>extends</code> 关键字使用该接口，为泛型(类型变量)添加约束</li>
<li>该约束表示：<strong>传入的类型必须具有 length 属性</strong></li>
</ol>
</li>
<li>注意:传入的实参(比如，数组)只要有 length 属性即可（类型兼容性)</li>
<li>也可以写成Type,不写接口</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> T = &#123;</span><br><span class="line">  <span class="attr">length</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> fn&lt;<span class="title class_">Type</span> <span class="keyword">extends</span> T&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="property">length</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">fn&lt;<span class="built_in">string</span>| <span class="built_in">number</span>[]&gt;(<span class="string">&quot;asd&quot;</span>);</span><br></pre></td></tr></table></figure>



<h3 id="多个类型变量"><a href="#多个类型变量" class="headerlink" title="多个类型变量"></a>多个类型变量</h3><p>泛型的类型变量可以有多个，并且<strong>类型变量之间还可以约束</strong>(比如，第二个类型变量受第一个类型变量约束)<br>比如，创建一个函数来获取对象中属性的值：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getProp&lt;<span class="title class_">Type</span>, <span class="title class_">Key</span> <span class="keyword">extends</span> keyof <span class="title class_">Type</span>&gt;(<span class="attr">obj</span>: <span class="title class_">Type</span>, <span class="attr">key</span>: <span class="title class_">Key</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[key]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;</span><br><span class="line"><span class="title function_">getProp</span>(person, <span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>添加了第二个类型变量 Key，两个类型变量之间使用 <code>,</code> 逗号分隔。</li>
<li><strong>keyof 关键字接收一个对象类型，生成其键名称(可能是字符串或数字)的联合类型</strong>。</li>
<li>本示例中 <code>keyof Type</code> 实际上获取的是 person 对象所有键的联合类型，也就是：<code>&#39;name&#39; | &#39;age&#39;</code></li>
<li>类型变量 Key 受 Type 约束，可以理解为：Key 只能是 Type 所有键中的任意一个，或者说只能访问对象中存在的属性</li>
</ol>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Type extends object 表示： Type 应该是一个对象类型，如果不是 对象 类型，就会报错</span></span><br><span class="line"><span class="comment">// 如果要用到 对象 类型，应该用 object ，而不是 Object</span></span><br><span class="line"><span class="keyword">function</span> getProperty&lt;<span class="title class_">Type</span> <span class="keyword">extends</span> <span class="built_in">object</span>, <span class="title class_">Key</span> <span class="keyword">extends</span> keyof <span class="title class_">Type</span>&gt;(<span class="attr">obj</span>: <span class="title class_">Type</span>, <span class="attr">key</span>: <span class="title class_">Key</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[key]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h3><p>泛型接口：接口也可以配合泛型来使用，以增加其灵活性，增强其复用性</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IdFunc</span>&lt;<span class="title class_">Type</span>&gt; &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="function">(<span class="params">value: Type</span>) =&gt;</span> <span class="title class_">Type</span></span><br><span class="line">  <span class="attr">ids</span>: <span class="function">() =&gt;</span> <span class="title class_">Type</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="title class_">IdFunc</span>&lt;<span class="built_in">number</span>&gt; = &#123;</span><br><span class="line">  <span class="title function_">id</span>(<span class="params">value</span>) &#123; <span class="keyword">return</span> value &#125;,</span><br><span class="line">  <span class="title function_">ids</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>在接口名称的后面添加 <code>&lt;类型变量&gt;</code>，那么，这个接口就变成了泛型接口。</li>
<li>接口的类型变量，对接口中所有其他成员可见，也就是<strong>接口中所有成员都可以使用类型变量</strong>。</li>
<li>使用泛型接口时，<strong>需要显式指定具体的类型</strong>(比如，此处的 IdFunc<nunber>)。</nunber></li>
<li>此时，id 方法的参数和返回值类型都是 number;ids 方法的返回值类型是 number[]。</li>
</ol>
</li>
</ul>
<h4 id="JS-中的泛型接口"><a href="#JS-中的泛型接口" class="headerlink" title="JS 中的泛型接口"></a>JS 中的泛型接口</h4><p>实际上，JS 中的数组在 TS 中就是一个泛型接口。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> strs = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="comment">// 鼠标放在 forEach 上查看类型</span></span><br><span class="line">strs.<span class="property">forEach</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="comment">// 鼠标放在 forEach 上查看类型</span></span><br><span class="line">nums.<span class="property">forEach</span></span><br></pre></td></tr></table></figure>

<p><img src="/TS/image-20210917002203414.png" alt="image-20210917002203414"></p>
<ul>
<li>解释:当我们在使用数组时，TS 会根据数组的不同类型，来自动将类型变量设置为相应的类型</li>
<li>技巧:可以通过 Ctrl + 鼠标左键(Mac：Command + 鼠标左键)来查看具体的类型信息</li>
</ul>
<h3 id="泛型工具类型"><a href="#泛型工具类型" class="headerlink" title="泛型工具类型"></a>泛型工具类型</h3><ul>
<li>泛型工具类型:TS 内置了一些常用的工具类型，来简化 TS 中的一些常见操作</li>
<li>说明:它们都是基于泛型实现的(泛型适用于多种类型，更加通用)，并且是内置的，可以直接在代码中使用。 这些工具类型有很多，主要学习以下几个:</li>
</ul>
<ol>
<li><code>Partial&lt;Type&gt;</code></li>
<li><code>Readonly&lt;Type&gt;</code></li>
<li><code>Pick&lt;Type, Keys&gt;</code></li>
<li><code>Omit&lt;Type&gt;</code></li>
</ol>
<h4 id="Partial"><a href="#Partial" class="headerlink" title="Partial"></a>Partial</h4><ul>
<li>Partial<Type> 用来构造(创建)一个类型，将 Type 的所有属性设置为可选。</Type></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> =  &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">children</span>: <span class="built_in">number</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialProps</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Props</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:构造出来的新类型 PartialProps 结构和 Props 相同，但所有属性都变为可选的。</li>
</ul>
<h4 id="Readonly"><a href="#Readonly" class="headerlink" title="Readonly"></a>Readonly</h4><ul>
<li>Readonly<Type> 用来构造一个类型，将 Type 的所有属性都设置为 readonly(只读)。</Type></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> =  &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">children</span>: <span class="built_in">number</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReadonlyProps</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">Props</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:构造出来的新类型 ReadonlyProps 结构和 Props 相同，但所有属性都变为只读的。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">props</span>: <span class="title class_">ReadonlyProps</span> = &#123; <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">children</span>: [] &#125;</span><br><span class="line"><span class="comment">// 错误演示</span></span><br><span class="line">props.<span class="property">id</span> = <span class="string">&#x27;2&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>当我们想重新给 id 属性赋值时，就会报错:无法分配到 “id” ，因为它是只读属性。</li>
</ul>
<h4 id="Pick"><a href="#Pick" class="headerlink" title="Pick"></a>Pick</h4><ul>
<li>Pick&lt;Type, Keys&gt; 从 Type 中选择一组属性来构造新类型。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Props</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">children</span>: <span class="built_in">number</span>[]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PickProps</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">Props</span>, <span class="string">&#x27;id&#x27;</span> | <span class="string">&#x27;title&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>Pick 工具类型有两个类型变量:1 表示选择谁的属性 2 表示选择哪几个属性。 2. 其中第二个类型变量，如果只选择一个则只传入该属性名即可。</li>
<li>第二个类型变量传入的属性只能是第一个类型变量中存在的属性。</li>
<li>构造出来的新类型 PickProps，只有 id 和 title 两个属性类型。</li>
</ol>
</li>
</ul>
<h4 id="Omit"><a href="#Omit" class="headerlink" title="Omit"></a>Omit</h4><p>Omit&lt;K,T&gt;类型让我们可以从另一个对象类型中剔除某些属性，并创建一个新的对象类型：</p>
<p>K：是对象类型名称，T：是剔除K类型中的属性名称</p>
<p><img src="/TS/image-20210917003456128.png" alt="image-20210917003456128"></p>
<h2 id="索引签名类型"><a href="#索引签名类型" class="headerlink" title="索引签名类型"></a>索引签名类型</h2><p>绝大多数情况下，我们都可以在使用对象前就确定对象的结构，并为对象添加准确的类型。<br>使用场景:<strong>当无法确定对象中有哪些属性</strong>(或者说对象中可以出现任意多个属性)，此时，就用到<strong>索引签名类型</strong>了。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">AnyObject</span> &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="title class_">AnyObject</span> = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>使用 <code>[key: string]</code> 来约束该接口中允许出现的属性名称。表示只要是 string 类型的属性名称，都可以出现在对象中。</li>
<li>这样，对象 obj 中就可以出现任意多个属性(比如，a、b 等)。</li>
<li><code>key 只是一个占位符</code>，可以换成任意合法的变量名称。</li>
<li>隐藏的前置知识:<code>JS 中对象(&#123;&#125;)的键是 string 类型的</code>。</li>
</ol>
</li>
</ul>
<h3 id="数组索引类型签名"><a href="#数组索引类型签名" class="headerlink" title="数组索引类型签名"></a>数组索引类型签名</h3><ul>
<li>在 JS 中数组是一类特殊的对象，特殊在数组的键(索引)是数值类型</li>
<li>并且，数组也可以出现任意多个元素。所以，在数组对应的泛型接口中，也用到了索引签名类型。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyArray</span>&lt;T&gt; &#123;</span><br><span class="line">  [<span class="attr">n</span>: <span class="built_in">number</span>]: T</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="title class_">MyArray</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>MyArray 接口模拟原生的数组接口，并使用 <code>[n: number]</code> 来作为索引签名类型。</li>
<li>该索引签名类型表示:只要是 number 类型的键(索引)都可以出现在数组中，或者说数组中可以有任意多个元素。</li>
<li>同时也符合数组索引是 number 类型这一前提。</li>
</ol>
</li>
</ul>
<h2 id="映射类型"><a href="#映射类型" class="headerlink" title="映射类型"></a>映射类型</h2><ul>
<li>映射类型:<strong>基于旧类型创建新类型(对象类型</strong>)，减少重复、提升开发效率。<br>比如，类型 PropKeys 有 x&#x2F;y&#x2F;z，另一个类型 Type1 中也有 x&#x2F;y&#x2F;z，并且 Type1 中 x&#x2F;y&#x2F;z 的类型相同:</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PropKeys</span> = <span class="string">&#x27;x&#x27;</span> | <span class="string">&#x27;y&#x27;</span> | <span class="string">&#x27;z&#x27;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Type1</span> = &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span>; <span class="attr">z</span>: <span class="built_in">number</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>这样书写没错，但 x&#x2F;y&#x2F;z 重复书写了两次。像这种情况，就可以使用映射类型来进行简化。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PropKeys</span> = <span class="string">&#x27;x&#x27;</span> | <span class="string">&#x27;y&#x27;</span> | <span class="string">&#x27;z&#x27;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Type2</span> = &#123; [<span class="title class_">Key</span> <span class="keyword">in</span> <span class="title class_">PropKeys</span>]: <span class="built_in">number</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>映射类型是基于索引签名类型的，所以，该语法类似于索引签名类型，也使用了 []。</li>
<li><code>Key in PropKeys</code> 表示 Key 可以是 PropKeys 联合类型中的任意一个，类似于 forin(let k in obj)。</li>
<li>使用映射类型创建的新对象类型 Type2 和类型 Type1 结构完全相同。</li>
<li>注意:<strong>映射类型只能在类型别名中使用，不能在接口中使用</strong>。</li>
</ol>
</li>
</ul>
<h3 id="根据对象创建"><a href="#根据对象创建" class="headerlink" title="根据对象创建"></a>根据对象创建</h3><p>映射类型除了根据联合类型创建新类型外，还可以根据对象类型来创建:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span>; <span class="attr">c</span>: <span class="built_in">boolean</span> &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Type3</span> = &#123; [key <span class="keyword">in</span> keyof <span class="title class_">Props</span>]: <span class="built_in">number</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li>首先，先执行 <code>keyof Props</code> 获取到对象类型 Props 中所有键的联合类型即，’a’ | ‘b’ | ‘c’。</li>
<li>然后，<code>Key in ...</code> 就表示 Key 可以是 Props 中所有的键名称中的任意一个。</li>
</ol>
</li>
</ul>
<h3 id="内置映射类型实现分析"><a href="#内置映射类型实现分析" class="headerlink" title="内置映射类型实现分析"></a>内置映射类型实现分析</h3><ul>
<li>实际上，前面讲到的<strong>泛型工具类型</strong>(比如，Partial<Type>)都是基于映射类型实现的。 </Type></li>
<li>比如，Partial<Type> 的实现:</Type></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span>; <span class="attr">c</span>: <span class="built_in">boolean</span> &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialProps</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Props</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<ol>
<li><code>keyof T</code> 即 keyof Props 表示获取 Props 的所有键，也就是:’a’ | ‘b’ | ‘c’。</li>
<li>在 [] 后面添加 <code>?</code>(问号)，表示将这些属性变为<code>可选</code>的，以此来实现 Partial 的功能。</li>
<li>冒号后面的 <code>T[P] 表示获取 T 中每个键对应的类型</code>。比如，如果是 ‘a’ 则类型是 number;如果是 ‘b’ 则类型是 string。</li>
<li>最终，新类型 PartialProps 和旧类型 Props 结构完全相同，只是让所有类型都变为可选了。</li>
</ol>
</li>
</ul>
<h3 id="索引访问类型"><a href="#索引访问类型" class="headerlink" title="索引访问类型"></a>索引访问类型</h3><ul>
<li>刚刚用到的 <code>T[P]</code> 语法，在 TS 中叫做<code>索引访问类型</code></li>
<li>作用:<strong>用来查询属性的类型</strong>。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span>; <span class="attr">c</span>: <span class="built_in">boolean</span> &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TypeA</span> = <span class="title class_">Props</span>[<span class="string">&#x27;a&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>解释:<code>Props[&#39;a&#39;]</code> 表示查询类型 Props 中属性 ‘a’ 对应的类型 number。所以，TypeA 的类型为 number</li>
<li>注意:<strong>[] 中的属性必须存在于被查询类型中</strong>，否则就会报错。</li>
</ul>
<h4 id="同时查询多个索引的类型"><a href="#同时查询多个索引的类型" class="headerlink" title="同时查询多个索引的类型"></a>同时查询多个索引的类型</h4><ul>
<li>索引查询类型的其他使用方式:同时查询多个索引的类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span>; <span class="attr">c</span>: <span class="built_in">boolean</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TypeA</span> = <span class="title class_">Props</span>[<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span>] <span class="comment">// string | number</span></span><br></pre></td></tr></table></figure>

<ul>
<li>解释:使用字符串字面量的联合类型，获取属性 a 和 b 对应的类型，结果为: string | number。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TypeA</span> = <span class="title class_">Props</span>[keyof <span class="title class_">Props</span>] <span class="comment">// string | number | boolean</span></span><br></pre></td></tr></table></figure>

<ul>
<li>解释:使用 keyof 操作符获取 Props 中所有键对应的类型，结果为: string | number | boolean。</li>
</ul>
<h1 id="在-React-项目中使用-TS"><a href="#在-React-项目中使用-TS" class="headerlink" title="在 React 项目中使用 TS"></a>在 React 项目中使用 TS</h1><ol>
<li>创建新项目</li>
<li>在现有项目中添加 TS</li>
</ol>
<h2 id="创建新项目"><a href="#创建新项目" class="headerlink" title="创建新项目"></a>创建新项目</h2><ul>
<li><p>命令：<code>npx create-react-app my-app --template typescript</code></p>
</li>
<li><p>说明：在命令行中，添加 <code>--template typescript</code> 表示创建支持 TS 的项目</p>
</li>
<li><p>项目目录的变化：</p>
<ol>
<li>在项目根目录中多了一个文件：<code>tsconfig.json</code><ul>
<li>TS 的配置文件</li>
</ul>
</li>
<li>在 src 目录中，文件的后缀有变化，由原来的 .js 变为 <code>.ts</code> 或 <code>.tsx</code><ul>
<li><code>.ts</code> ts 文件的后缀名</li>
<li><code>.tsx</code> 是在 TS 中使用 React 组件时，需要使用该后缀(组件必须使用该后缀，不能用ts)</li>
</ul>
</li>
<li>在 src 目录中，多了 <code>react-app-env.d.ts</code> 文件<ul>
<li><code>.d.ts</code> 类型声明文件，用来指定类型</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="tsconfig的介绍"><a href="#tsconfig的介绍" class="headerlink" title="tsconfig的介绍"></a>tsconfig的介绍</h2><ul>
<li>tsconfig.json是typescript项目的配置文件，用于配置typescript</li>
<li>tsconfig.json配置文件可以通过 <code>tsc --init</code> 生成</li>
</ul>
<ul>
<li>说明：所有的配置项都可以通过鼠标移入的方式，来查看配置项的解释说明。</li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/tsconfig">tsconfig 文档链接</a></li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 编译选项</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 生成代码的语言版本：将我们写的 TS 代码编译成哪个版本的 JS 代码</span></span><br><span class="line">    <span class="comment">// 命令行： tsc --target es5 11-测试TS配置文件.ts</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 指定要包含在编译中的 library</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;dom&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom.iterable&quot;</span><span class="punctuation">,</span> <span class="string">&quot;esnext&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 允许 ts 编译器编译 js 文件</span></span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 跳过类型声明文件的类型检查</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// es 模块 互操作，屏蔽 ESModule 和 CommonJS 之间的差异</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 允许通过 import x from &#x27;y&#x27; 即使模块没有显式指定 default 导出</span></span><br><span class="line">    <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 开启严格模式</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 对文件名称强制区分大小写</span></span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 为 switch 语句启用错误报告</span></span><br><span class="line">    <span class="attr">&quot;noFallthroughCasesInSwitch&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 生成代码的模块化标准</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;esnext&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 模块解析（查找）策略</span></span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 允许导入扩展名为.json的模块</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 是否将没有 import/export 的文件视为旧（全局而非模块化）脚本文件</span></span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 编译时不生成任何文件（只进行类型检查）</span></span><br><span class="line">    <span class="attr">&quot;noEmit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 指定将 JSX 编译成什么形式</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-jsx&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 指定允许 ts 处理的目录</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="typescript类型声明文件"><a href="#typescript类型声明文件" class="headerlink" title="typescript类型声明文件"></a>typescript类型声明文件</h1><p>今天几乎所有的 JavaScript 应用都会引入许多第三方库来完成任务需求。</p>
<p>这些第三方库不管是否是用 TS 编写的，最终都要编译成 JS 代码，才能发布给开发者使用。</p>
<p>我们知道是 TS 提供了类型，才有了代码提示和类型保护等机制。 </p>
<p>但在项目开发中使用第三方库时，你会发现它们几乎都有相应的 TS 类型，这些类型是怎么来的呢? <code>类型声明文件</code></p>
<ul>
<li><strong>类型声明文件：用来为已存在的 JS 库提供类型信息</strong></li>
</ul>
<p>这样在 TS 项目中使用这些库时，就像用 TS 一样，都会有代码提示、类型保护等机制了。</p>
<ol>
<li>TS 的两种文件类型</li>
<li>类型声明文件的使用说明</li>
</ol>
<h2 id="TS-中的两种文件类型"><a href="#TS-中的两种文件类型" class="headerlink" title="TS 中的两种文件类型"></a>TS 中的两种文件类型</h2><ul>
<li><p>TS 中有两种文件类型：1 <code>.ts</code> 文件 2 <code>.d.ts</code> 文件</p>
</li>
<li><p>.ts 文件:</p>
<ol>
<li><code>既包含类型信息又可执行代码</code></li>
<li>可以被编译为 .js 文件，然后，执行代码</li>
<li>用途：编写程序代码的地方</li>
</ol>
</li>
<li><p>.d.ts 文件:</p>
<ol>
<li><code>只包含类型信息</code>的类型声明文件</li>
<li><strong>不会生成 .js 文件，仅用于提供类型信息,在.d.ts文件中不允许出现可执行的代码，只用于提供类型</strong></li>
<li>用途：为 JS 提供类型信息</li>
</ol>
</li>
<li><p>总结：.ts 是 <code>implementation</code>(代码实现文件)；**.d.ts 是 declaration(类型声明文件)**</p>
</li>
<li><p>如果要为 JS 库提供类型信息，要使用 <code>.d.ts</code> 文件</p>
</li>
</ul>
<h2 id="类型声明文件的使用说明"><a href="#类型声明文件的使用说明" class="headerlink" title="类型声明文件的使用说明"></a>类型声明文件的使用说明</h2><ul>
<li>在使用 TS 开发项目时，类型声明文件的使用包括以下两种方式: <ol>
<li>使用已有的类型声明文件</li>
<li>创建自己的类型声明文件</li>
</ol>
</li>
</ul>
<p>使用已有的类型声明文件</p>
<ol>
<li>内置类型声明文件</li>
<li>第三方库的类型声明文件</li>
<li>自己提供的</li>
</ol>
<h2 id="内置类型声明文件"><a href="#内置类型声明文件" class="headerlink" title="内置类型声明文件"></a>内置类型声明文件</h2><ul>
<li>TS 为 JS 运行时可用的所有标准化内置 API 都提供了声明文件</li>
<li>比如，在使用数组时，数组所有方法都会有相应的代码提示以及类型信息:</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> strs = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="comment">// 鼠标放在 forEach 上查看类型</span></span><br><span class="line">strs.<span class="property">forEach</span></span><br></pre></td></tr></table></figure>

<ul>
<li>实际上这都是 TS 提供的内置类型声明文件</li>
<li>可以通过 Ctrl + 鼠标左键(Mac：Command + 鼠标左键)来查看内置类型声明文件内容</li>
<li>比如，查看 forEach 方法的类型声明，在 VSCode 中会自动跳转到 <code>lib.es5.d.ts</code> 类型声明文件中</li>
<li>当然，像 window、document 等 BOM、DOM API 也都有相应的类型声明(<code>lib.dom.d.ts</code>)</li>
</ul>
<h2 id="第三方库的类型声明文件"><a href="#第三方库的类型声明文件" class="headerlink" title="第三方库的类型声明文件"></a>第三方库的类型声明文件</h2><ul>
<li>目前，几乎所有常用的第三方库都有相应的类型声明文件</li>
<li>第三方库的类型声明文件有两种存在形式:1 库自带类型声明文件 2 由 DefinitelyTyped 提供。</li>
</ul>
<ol>
<li>库自带类型声明文件：比如，axios</li>
</ol>
<ul>
<li>查看 <code>node_modules/axios</code> 目录</li>
</ul>
<p>解释：这种情况下，正常导入该库，<strong>TS 就会自动加载库自己的类型声明文件</strong>，以提供该库的类型声明。</p>
<ol start="2">
<li>由 DefinitelyTyped 提供</li>
</ol>
<ul>
<li>DefinitelyTyped 是一个 github 仓库，用来提供高质量 TypeScript 类型声明</li>
<li><a target="_blank" rel="noopener" href="https://github.com/DefinitelyTyped/DefinitelyTyped/">DefinitelyTyped 链接</a></li>
<li>可以通过 npm&#x2F;yarn 来下载该仓库提供的 TS 类型声明包，这些包的名称格式为:<code>@types/*</code></li>
<li>比如，@types&#x2F;react、@types&#x2F;lodash 等</li>
<li>说明：在实际项目开发时，如果你使用的第三方库没有自带的声明文件，VSCode 会给出明确的提示</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 VSCode 中，查看 &#x27;lodash&#x27; 前面的提示</span></span><br></pre></td></tr></table></figure>

<ul>
<li>解释：当安装 <code>@types/*</code> 类型声明包后，<strong>TS 也会自动加载该类声明包</strong>，以提供该库的类型声明</li>
<li>补充：TS 官方文档提供了一个页面，可以来查询 @types&#x2F;* 库</li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/dt">@types&#x2F;* 库</a></li>
</ul>
<h2 id="创建自己的类型声明文件"><a href="#创建自己的类型声明文件" class="headerlink" title="创建自己的类型声明文件"></a>创建自己的类型声明文件</h2><ol>
<li>项目内共享类型</li>
<li>为已有 JS 文件提供类型声明</li>
</ol>
<h3 id="项目内共享类型"><a href="#项目内共享类型" class="headerlink" title="项目内共享类型"></a>项目内共享类型</h3><ul>
<li>如果多个 .ts 文件中都用到同一个类型，此时可以创建 .d.ts 文件提供该类型，实现类型共享。</li>
<li>操作步骤:<ol>
<li>创建 index.d.ts 类型声明文件。</li>
<li>创建需要共享的类型，并使用 export 导出(TS 中的类型也可以使用 import&#x2F;export 实现模块化功能)。</li>
<li>在需要使用共享类型的 .ts 文件中，通过 import 导入即可(.d.ts 后缀导入时，直接省略)。</li>
</ol>
</li>
</ul>
<h3 id="为已有-JS-文件提供类型声明"><a href="#为已有-JS-文件提供类型声明" class="headerlink" title="为已有 JS 文件提供类型声明"></a>为已有 JS 文件提供类型声明</h3><ol>
<li>在将 JS 项目迁移到 TS 项目时，为了让已有的 .js 文件有类型声明。 </li>
<li>成为库作者，创建库给其他人使用。</li>
</ol>
<ul>
<li>注意:类型声明文件的编写与模块化方式相关，不同的模块化方式有不同的写法。但由于历史原因，JS 模块化的发展 经历过多种变化(AMD、CommonJS、UMD、ESModule 等)，而 TS 支持各种模块化形式的类型声明。这就导致 ，类型声明文件相关内容又多又杂。</li>
<li>演示:基于最新的 ESModule(import&#x2F;export)来为已有 .js 文件，创建类型声明文件。</li>
</ul>
<h3 id="类型声明文件的使用说明-1"><a href="#类型声明文件的使用说明-1" class="headerlink" title="类型声明文件的使用说明"></a>类型声明文件的使用说明</h3><ul>
<li>说明:TS 项目中也可以使用 .js 文件。</li>
<li>说明:在导入 .js 文件时，TS 会自动加载与 .js 同名的 .d.ts 文件，以提供类型声明。</li>
<li>declare 关键字:用于类型声明，<strong>为其他地方(比如，.js 文件)已存在的变量声明类型，而不是创建一个新的变量。</strong><ol>
<li>对于 type、interface 等这些明确就是 TS 类型的(只能在 TS 中使用的)，可以省略 declare 关键字。</li>
<li>对于 let、function 等具有双重含义(在 JS、TS 中都能用)，应该使用 declare 关键字，明确指定此处用于类型声明。</li>
</ol>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> songName = <span class="string">&#x27;痴心绝对&#x27;</span></span><br><span class="line"><span class="keyword">let</span> position = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeDirection</span>(<span class="params">direction</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(direction)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fomartPoint</span> = point =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前坐标：&#x27;</span>, point)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; count, songName, position, add, changeDirection, fomartPoint &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>定义类型声明文件</p>
<h1 id="在现有项目中添加-TS"><a href="#在现有项目中添加-TS" class="headerlink" title="在现有项目中添加 TS"></a>在现有项目中添加 TS</h1><ul>
<li><a target="_blank" rel="noopener" href="https://create-react-app.dev/docs/adding-typescript">CRA 添加 ts 文档</a></li>
<li>如果要在现有的 JS 项目中，添加 TS，需要以下操作：</li>
</ul>
<ol>
<li>安装包：<code>yarn add typescript @types/node @types/react @types/react-dom @types/jest</code></li>
<li>把 <code>jsconfig.json</code>改成 path.tsconfig.json（改其他的文件名也行,只是不能为jsconfig.json）</li>
<li>将原来通过 React 脚手架创建的 TS 项目中的 tsconfig.json 中的配置，拷贝到咱们自己的项目中</li>
<li>创建 <code>path.tsconfig.json</code> 文件，将原来 <code>jsconfig.json</code> 文件中的内容拿过来</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;@scss/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/assets/styles/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>在 <code>tsconfig.json</code> 中，添加以下配置：</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 添加这一句</span></span><br><span class="line">  <span class="comment">// 扩展</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./path.tsconfig.json&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>将通过 React 脚手架创建的 TS 项目中的 <code>src/react-app-env.d.ts</code> 拷贝到咱们自己项目的 src 目录下</li>
<li>重启项目</li>
</ol>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ol>
<li>项目中使用 TS 时，既可以包含 js 文件，又可以包含 ts 文件</li>
</ol>
<ul>
<li><code>.js</code>、<code>.jsx</code>（使用 JS 时，React 组件对应的文件后缀）</li>
<li><code>.ts</code>、<code>.tsx</code>（使用 TS 时，React 组件对应的文件后缀）、<code>.d.ts</code></li>
</ul>
<ol start="2">
<li>在已有项目中，添加 TS 时的推荐模式</li>
</ol>
<ul>
<li>新的功能用 TS</li>
<li>已实现的功能，可以继续保持 JS 文件，慢慢修改为 TS 即可</li>
</ul>
<ol start="3">
<li>React 组件对应的文件后缀，修改为：<code>.tsx</code></li>
<li>工具函数对应的文件后缀，修改为：<code>.ts</code> 或者为其添加类型声明文件 <code>.d.ts</code></li>
</ol>
<h1 id="项目改造"><a href="#项目改造" class="headerlink" title="项目改造"></a>项目改造</h1><h2 id="改造建议"><a href="#改造建议" class="headerlink" title="改造建议"></a>改造建议</h2><ol>
<li>项目中使用 TS 时，既可以包含 js 文件，又可以包含 ts 文件</li>
</ol>
<ul>
<li><code>.js</code>、<code>.jsx</code>（使用 JS 时，React 组件对应的文件后缀）</li>
<li><code>.ts</code>、<code>.tsx</code>（使用 TS 时，React 组件对应的文件后缀）、<code>.d.ts</code></li>
</ul>
<ol start="2">
<li>在已有项目中，添加 TS 时的推荐模式</li>
</ol>
<ul>
<li>新的功能用 TS</li>
<li>已实现的功能，可以继续保持 JS 文件，慢慢修改为 TS 即可</li>
</ul>
<ol start="3">
<li>React 组件对应的文件后缀，修改为：<code>.tsx</code></li>
<li>工具函数对应的文件后缀，修改为：<code>.ts</code> 或者为其添加类型声明文件 <code>.d.ts</code></li>
</ol>
<h2 id="修改入口文件"><a href="#修改入口文件" class="headerlink" title="修改入口文件"></a>修改入口文件</h2><h3 id="index-ts"><a href="#index-ts" class="headerlink" title="index.ts"></a>index.ts</h3><ul>
<li>直接将文件后缀修改为 index.tsx 即可</li>
<li>需要重启项目</li>
</ul>
<h2 id="修改App-js"><a href="#修改App-js" class="headerlink" title="修改App.js"></a>修改App.js</h2><ul>
<li>讲App.js 改成app.tsx即可</li>
<li>需要安装react-router-dom的类型</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add <span class="meta">@types</span>/react-router-dom</span><br></pre></td></tr></table></figure>

<ul>
<li>重启</li>
</ul>
<h1 id="utils工具函数改造"><a href="#utils工具函数改造" class="headerlink" title="utils工具函数改造"></a>utils工具函数改造</h1><h2 id="history-js"><a href="#history-js" class="headerlink" title="history.js"></a>history.js</h2><p>不需要改造，直接把js改成ts即可</p>
<h2 id="storage-js"><a href="#storage-js" class="headerlink" title="storage.js"></a>storage.js</h2><ul>
<li>讲js改成ts</li>
<li>修改getTokenInfo</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从本地缓存中获取 Token 信息</span></span><br><span class="line"><span class="comment"> * JSON.parse() 要求参数必须是字符串</span></span><br><span class="line"><span class="comment"> * localStorage.getItem() 返回值可能是字符串，也可能是null，所以会报错</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getTokenInfo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">TOKEN_KEY</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="非空断言"><a href="#非空断言" class="headerlink" title="非空断言"></a>非空断言</h3><p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#non-null-assertion-operator">Non-null assertion operator</a></p>
<ul>
<li>TS 中提供一个运算符：<code>!</code> <code>非空断言</code><ul>
<li>如果一个值，它的类型可能是 null 或 undefined，但是，我们在使用时又很确定它的值一定不是 null 或 unde，此时，就可以通过 <code>非空断言</code> 来告诉 TS 听哥的，哥很确定它的不是 null 或 undefined</li>
</ul>
</li>
<li>注意：<strong>这个操作是风险的</strong>，非空断言，仅仅是让 TS 中的类型检查不再校验 null 或 undefined，但是，如果它的值真的是 null 或 undefined，代码会在运行时报错！！！</li>
</ul>
<h3 id="整体修改"><a href="#整体修改" class="headerlink" title="整体修改"></a>整体修改</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户 Token 的本地缓存键名</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN_KEY</span> = <span class="string">&#x27;geek-itcast-21&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CHANNEL_KEY</span> = <span class="string">&#x27;geek-itcast-21-channels&#x27;</span></span><br><span class="line">type <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: string</span><br><span class="line">  <span class="attr">refresh_token</span>: string</span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">Channels</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: number</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">&#125;[]</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从本地缓存中获取 Token 信息</span></span><br><span class="line"><span class="comment"> * JSON.parse() 要求参数必须是字符串</span></span><br><span class="line"><span class="comment"> * localStorage.getItem() 返回值可能是字符串，也可能是null，所以会报错</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTokenInfo = (): <span class="function"><span class="params">Token</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">TOKEN_KEY</span>)!) || &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将 Token 信息存入缓存</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; tokenInfo 从后端获取到的 Token 信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setTokenInfo = (<span class="attr">tokenInfo</span>: <span class="title class_">Token</span>): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="variable constant_">TOKEN_KEY</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tokenInfo))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除本地缓存中的 Token 信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">removeTokenInfo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="variable constant_">TOKEN_KEY</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断本地缓存中是否存在 Token 信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hasToken = (): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> !!<span class="title function_">getTokenInfo</span>().<span class="property">token</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存频道数据到本地</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">channels</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setLocalChannels = (<span class="attr">channels</span>: <span class="title class_">Channels</span>): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="variable constant_">CHANNEL_KEY</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(channels))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取本地的频道数据，，，，，，，如果没有数据，不要默认为空数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getLocalChannels = (): <span class="function"><span class="params">Channels</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">CHANNEL_KEY</span>)!)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除本地的频道数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> removeLocalChannels = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="variable constant_">CHANNEL_KEY</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="request-js改造"><a href="#request-js改造" class="headerlink" title="request.js改造"></a>request.js改造</h2><p>讲js改成ts即可</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> (<span class="attr">err</span>: <span class="title class_">AxiosError</span>&lt;&#123; <span class="attr">message</span>: <span class="built_in">string</span> &#125;&gt;) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 如果因为网络原因，response没有，给提示消息</span></span><br><span class="line">    <span class="keyword">if</span> (!err.<span class="property">response</span>) &#123;</span><br><span class="line">      <span class="title class_">Toast</span>.<span class="title function_">info</span>(<span class="string">&#x27;网络繁忙，请稍后重试&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="通用组件改造"><a href="#通用组件改造" class="headerlink" title="通用组件改造"></a>通用组件改造</h1><h2 id="Icon组件修改"><a href="#Icon组件修改" class="headerlink" title="Icon组件修改"></a>Icon组件修改</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">Props</span> = &#123;</span><br><span class="line">  <span class="attr">type</span>: string</span><br><span class="line">  className?: string</span><br><span class="line">  onClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Icon</span>(<span class="params">&#123; type, className, ...rest &#125;: Props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">svg</span> &#123;<span class="attr">...rest</span>&#125; <span class="attr">className</span>=<span class="string">&#123;classNames(</span>&#x27;<span class="attr">icon</span>&#x27;, <span class="attr">className</span>)&#125; <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlinkHref</span>=<span class="string">&#123;</span>`#$&#123;<span class="attr">type</span>&#125;`&#125;&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Icon</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="typescript中ref的使用"><a href="#typescript中ref的使用" class="headerlink" title="typescript中ref的使用"></a>typescript中ref的使用</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> imgRef = useRef&lt;<span class="title class_">HTMLImageElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> current = imgRef.<span class="property">current</span>!</span><br></pre></td></tr></table></figure>

<h2 id="Img懒加载组件修改"><a href="#Img懒加载组件修改" class="headerlink" title="Img懒加载组件修改"></a>Img懒加载组件修改</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classnames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&#x27;../Icon&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line">type <span class="title class_">Props</span> = &#123;</span><br><span class="line">  <span class="attr">src</span>: string</span><br><span class="line">  className?: string</span><br><span class="line">  alt?: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Image</span> = (<span class="params">&#123; className, src, alt &#125;: Props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> imgRef = useRef&lt;<span class="title class_">HTMLImageElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="comment">// 控制是否在加载</span></span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="comment">// 控制是否加载失败</span></span><br><span class="line">  <span class="keyword">const</span> [error, setError] = <span class="title function_">useState</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载成功</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onLoad</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setError</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="title function_">setLoading</span>(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onError</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setLoading</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="title function_">setError</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 监听图片</span></span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="function">(<span class="params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (isIntersecting) &#123;</span><br><span class="line">        <span class="comment">// 图片在可视区</span></span><br><span class="line">        <span class="keyword">const</span> current = imgRef.<span class="property">current</span>!</span><br><span class="line">        current.<span class="property">src</span> = current.<span class="property">dataset</span>.<span class="property">src</span>!</span><br><span class="line">        <span class="comment">// 取消监听</span></span><br><span class="line">        observer.<span class="title function_">unobserve</span>(current)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    observer.<span class="title function_">observe</span>(imgRef.<span class="property">current</span>!)</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classnames(styles.root,</span> <span class="attr">className</span>)&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 加载中 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;loading &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;image-icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&quot;iconphoto&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* 加载出错时显示的内容 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;error &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;image-icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&quot;iconphoto-fail&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;alt&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;imgRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">data-src</span>=<span class="string">&#123;src&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onLoad</span>=<span class="string">&#123;onLoad&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onError</span>=<span class="string">&#123;onError&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Image</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Input组件修改"><a href="#Input组件修改" class="headerlink" title="Input组件修改"></a>Input组件修改</h2><ul>
<li>基本改造</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line">interface <span class="title class_">Props</span> &#123;</span><br><span class="line">  extra?: string</span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  className?: string</span><br><span class="line">  autoFocus?: boolean</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Input</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  extra,</span></span><br><span class="line"><span class="params">  onExtraClick,</span></span><br><span class="line"><span class="params">  className,</span></span><br><span class="line"><span class="params">  autoFocus,</span></span><br><span class="line"><span class="params">  ...rest</span></span><br><span class="line"><span class="params">&#125;: Props</span>) &#123;</span><br><span class="line">  <span class="comment">// focus</span></span><br><span class="line">  <span class="keyword">const</span> inputRef = useRef&lt;<span class="title class_">HTMLInputElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (autoFocus) &#123;</span><br><span class="line">      inputRef.<span class="property">current</span>?.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [autoFocus])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.root&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;classNames(</span>&#x27;<span class="attr">input</span>&#x27;, <span class="attr">className</span>)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#123;<span class="attr">...rest</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;extra ? (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;extra&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;onExtraClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;extra&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ) : null&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>剩余参数的支持</li>
</ul>
<blockquote>
<p>InputHTMLAttributes中包含了Input框所有能够支持的属性</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">Props</span> <span class="keyword">extends</span> <span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt; &#123;</span><br><span class="line">  extra?: string</span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  className?: string</span><br><span class="line">  autoFocus?: boolean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用type替代interface</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Props</span> = &#123;</span><br><span class="line">  extra?: string</span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  className?: string</span><br><span class="line">  autoFocus?: boolean</span><br><span class="line">  type?: <span class="string">&#x27;input&#x27;</span> | <span class="string">&#x27;password&#x27;</span></span><br><span class="line">&#125; &amp; <span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;</span><br></pre></td></tr></table></figure>

<p>TS 中的 &amp;（交叉类型）</p>
<p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#intersection-types">https://www.typescriptlang.org/docs/handbook/2/objects.html#intersection-types</a></p>
<ul>
<li>交叉类型：<code>&amp;</code><ul>
<li>作用：可以理解为取多个类型的并集</li>
</ul>
</li>
<li>联想到了，另一个类型：<code>|</code> 联合类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// | 在 TS 中表示： number 和 string 两者中出现哪一个都行</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NumStr</span> = <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">InputProps</span> = &#123;</span><br><span class="line">  extra?: <span class="built_in">string</span></span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  className?: <span class="built_in">string</span></span><br><span class="line">  dom?: <span class="title class_">React</span>.<span class="property">RefObject</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &amp; 在 TS 中表示： 最终的类型两者都有</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = <span class="title class_">InputProps</span> &amp; <span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;</span><br></pre></td></tr></table></figure>

<p>交叉类型需要注意的地方：同名的属性容易冲突</p>
<p>使用omit优化</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = <span class="title class_">Omit</span>&lt;</span><br><span class="line">  <span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;,</span><br><span class="line">  <span class="string">&#x27;type&#x27;</span> | <span class="string">&#x27;autoFocus&#x27;</span></span><br><span class="line">&gt; &amp; &#123;</span><br><span class="line">  extra?: <span class="built_in">string</span></span><br><span class="line">  onExtraClick?: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  className?: <span class="built_in">string</span></span><br><span class="line">  autoFocus?: <span class="built_in">boolean</span></span><br><span class="line">  <span class="keyword">type</span>?: <span class="string">&#x27;text&#x27;</span> | <span class="string">&#x27;password&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Textarea组件改造"><a href="#Textarea组件改造" class="headerlink" title="Textarea组件改造"></a>Textarea组件改造</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TextareaHTMLAttributes</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;hoist-non-react-statics/node_modules/@types/react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line">type <span class="title class_">Props</span> = <span class="title class_">Omit</span>&lt;</span><br><span class="line">  <span class="title class_">TextareaHTMLAttributes</span>&lt;<span class="title class_">HTMLTextAreaElement</span>&gt;,</span><br><span class="line">  <span class="string">&#x27;maxLength&#x27;</span> | <span class="string">&#x27;value&#x27;</span> | <span class="string">&#x27;onChange&#x27;</span></span><br><span class="line">&gt; &amp; &#123;</span><br><span class="line">  maxLength?: number</span><br><span class="line">  className?: string</span><br><span class="line">  <span class="attr">value</span>: string</span><br><span class="line">  <span class="attr">onChange</span>: <span class="function">(<span class="params">e: React.ChangeEvent&lt;HTMLTextAreaElement&gt;</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Textarea</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  maxLength = <span class="number">100</span>,</span></span><br><span class="line"><span class="params">  className,</span></span><br><span class="line"><span class="params">  value,</span></span><br><span class="line"><span class="params">  onChange,</span></span><br><span class="line"><span class="params">  ...rest</span></span><br><span class="line"><span class="params">&#125;: Props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [content, setContent] = <span class="title function_">useState</span>(value || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleChange</span> = (<span class="params">e: React.ChangeEvent&lt;HTMLTextAreaElement&gt;</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setContent</span>(e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line">    onChange &amp;&amp; <span class="title function_">onChange</span>(e)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> textRef = useRef&lt;<span class="title class_">HTMLTextAreaElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    textRef.<span class="property">current</span>!.<span class="title function_">focus</span>()</span><br><span class="line">    textRef.<span class="property">current</span>!.<span class="title function_">setSelectionRange</span>(-<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.root&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 文本输入框 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">textarea</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#123;<span class="attr">...rest</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;classNames(</span>&#x27;<span class="attr">textarea</span>&#x27;, <span class="attr">className</span>)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">maxLength</span>=<span class="string">&#123;maxLength&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;textRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* 当前字数/最大允许字数 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;count&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;content.length&#125;/&#123;maxLength&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="NavBar组件改造"><a href="#NavBar组件改造" class="headerlink" title="NavBar组件改造"></a>NavBar组件改造</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Icon&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ReactNode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="comment">// import &#123; withRouter &#125; from &#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="comment">// 1. withRouter的使用</span></span><br><span class="line"><span class="comment">// history match location: 这个组件必须是通过路由配置的  &lt;Route&gt;&lt;/Route&gt;</span></span><br><span class="line"><span class="comment">// 自己渲染的组件，无法获取到路由信息  &lt;NavBar&gt;&lt;/NavBar&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 路由提供了几个和路由相关的hook</span></span><br><span class="line"><span class="comment">// useHistory  useLocation  useParams</span></span><br><span class="line">type <span class="title class_">Props</span> = &#123;</span><br><span class="line">  <span class="attr">children</span>: string | <span class="title class_">ReactNode</span></span><br><span class="line">  extra?: string</span><br><span class="line">  onLeftClick?: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  className?: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NavBar</span>(<span class="params">&#123; children, extra, onLeftClick, className &#125;: Props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> history = <span class="title function_">useHistory</span>()</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">back</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line">    <span class="comment">// 跳回上一页</span></span><br><span class="line">    <span class="keyword">if</span> (onLeftClick) &#123;</span><br><span class="line">      <span class="title function_">onLeftClick</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      history.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classNames(styles.root,</span> <span class="attr">className</span>)&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 后退按钮 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&quot;iconfanhui&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;back&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 居中标题 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* 右侧内容 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;right&quot;</span>&gt;</span>&#123;extra&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">NavBar</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="AuthRoute组件改造"><a href="#AuthRoute组件改造" class="headerlink" title="AuthRoute组件改造"></a>AuthRoute组件改造</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/53104165/implement-react-router-privateroute-in-typescript-project/53111155#">https://stackoverflow.com/questions/53104165/implement-react-router-privateroute-in-typescript-project/53111155#</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; hasToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Route</span>, <span class="title class_">Redirect</span>, useLocation, <span class="title class_">RouteProps</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line">interface <span class="title class_">PrivateRouteProps</span> <span class="keyword">extends</span> <span class="title class_">RouteProps</span> &#123;</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">React</span>.<span class="property">ComponentType</span>&lt;any&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">AuthRoute</span>(<span class="params">props: PrivateRouteProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">component</span>: <span class="title class_">Component</span>, ...rest &#125; = props</span><br><span class="line">  <span class="keyword">const</span> location = <span class="title function_">useLocation</span>()</span><br><span class="line">  <span class="comment">// console.log(location)</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#123;<span class="attr">...rest</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">render</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        if (hasToken()) &#123;</span></span><br><span class="line"><span class="language-xml">          return <span class="tag">&lt;<span class="name">Component</span>&gt;</span><span class="tag">&lt;/<span class="name">Component</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">          return (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Redirect</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">to</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">pathname:</span> &#x27;/<span class="attr">login</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">state:</span> &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  // <span class="attr">从哪儿来的</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">from:</span> <span class="attr">location.pathname</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span><span class="tag">&lt;/<span class="name">Redirect</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          )</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="页面改造"><a href="#页面改造" class="headerlink" title="页面改造"></a>页面改造</h1><h2 id="Layout组件"><a href="#Layout组件" class="headerlink" title="Layout组件"></a>Layout组件</h2><p>直接把js改成tsx</p>
<h1 id="Login组件"><a href="#Login组件" class="headerlink" title="Login组件"></a>Login组件</h1><h3 id="location的处理"><a href="#location的处理" class="headerlink" title="location的处理"></a>location的处理</h3><p><img src="/TS/image-20210917205318957.png" alt="image-20210917205318957"></p>
<ul>
<li>关于useLocation的使用</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">LocationState</span> = &#123;</span><br><span class="line">  <span class="attr">from</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> location = useLocation&lt;<span class="title class_">LocationState</span>&gt;()</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/61668623/react-typescript-correct-type-for-uselocation-from-react-router-dom">https://stackoverflow.com/questions/61668623/react-typescript-correct-type-for-uselocation-from-react-router-dom</a></p>
<h3 id="redux-action修改"><a href="#redux-action修改" class="headerlink" title="redux-action修改"></a>redux-action修改</h3><ul>
<li>修改action&#x2F;login.js</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; setTokenInfo, removeTokenInfo &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dispatch</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line">type <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: string</span><br><span class="line">  <span class="attr">refresh_token</span>: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">sendCode</span> = (<span class="params">mobile: string</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="comment">// 发送请求</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/sms/codes/&#x27;</span> + mobile,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">saveToken</span> = (<span class="params">payload: Token</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 登录功能</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">login</span> = (<span class="params">data: &#123; mobile: string; code: string &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: <span class="title class_">Dispatch</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/authorizations&#x27;</span>,</span><br><span class="line">      data,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 保存token到redux中</span></span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">saveToken</span>(res.<span class="property">data</span>))</span><br><span class="line">    <span class="comment">// 保存到本地</span></span><br><span class="line">    <span class="title function_">setTokenInfo</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 退出</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">logout</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch: Dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">removeTokenInfo</span>()</span><br><span class="line">    <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;login/logout&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>Dispatch的分析</li>
</ul>
<p>索引签名</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#index-signatures">索引签名</a></li>
<li>语法：<code>[key: string]: any</code></li>
<li>应用场景：我要使用一个对象类型，但是，我不确定对象中有什么属性，此时，就可以使用索引签名类型了</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可以将这个内容分为两部分，</span></span><br><span class="line"><span class="comment">//  冒号前面 `[extraProps: string]` 表示对象中的属性类型 - 键</span></span><br><span class="line"><span class="comment">//  冒号后面 `any` 表示属性值的类型 - 值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [extraProps: string] 表示：</span></span><br><span class="line"><span class="comment">//  extraProps 是一个任意合法属性名称，比如，可以叫：k 或 key</span></span><br><span class="line"><span class="comment">//  : string 表示对象属性的类型是 字符串 类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：一个对象，它的属性类型可以是： string | number | symbol</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">AnyAction</span> &#123;</span><br><span class="line">  [<span class="attr">extraProps</span>: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AnyAction</span> <span class="keyword">extends</span> <span class="title class_">Action</span> &#123;</span><br><span class="line">  <span class="comment">// Allows any extra properties to be defined in an action.</span></span><br><span class="line">  [<span class="attr">extraProps</span>: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="redux-reducer修改"><a href="#redux-reducer修改" class="headerlink" title="redux-reducer修改"></a>redux-reducer修改</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: string</span><br><span class="line">  <span class="attr">refresh_token</span>: string</span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">ActionType</span> = &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span> | <span class="string">&#x27;login/logout&#x27;</span></span><br><span class="line">  <span class="attr">payload</span>: <span class="title class_">Token</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">initValue</span>: <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">refresh_token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initValue, action: ActionType</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, payload &#125; = action</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;login/token&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> payload</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;login/logout&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="类型提取"><a href="#类型提取" class="headerlink" title="类型提取"></a>类型提取</h3><ul>
<li>types.d.ts</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * token的类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Token</span> = &#123;</span><br><span class="line">  <span class="attr">token</span>: string</span><br><span class="line">  <span class="attr">refresh_token</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="Profile组件改造"><a href="#Profile组件改造" class="headerlink" title="Profile组件改造"></a>Profile组件改造</h1><h2 id="修改redux-reducer"><a href="#修改redux-reducer" class="headerlink" title="修改redux-reducer"></a>修改redux-reducer</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">User</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: string</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">photo</span>: string</span><br><span class="line">  <span class="attr">art_count</span>: number</span><br><span class="line">  <span class="attr">follow_count</span>: number</span><br><span class="line">  <span class="attr">fans_count</span>: number</span><br><span class="line">  <span class="attr">like_count</span>: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Profile</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: string</span><br><span class="line">  <span class="attr">photo</span>: string</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">mobile</span>: string</span><br><span class="line">  <span class="attr">gender</span>: number</span><br><span class="line">  <span class="attr">birthday</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">InitType</span> = &#123;</span><br><span class="line">  <span class="attr">user</span>: <span class="title class_">User</span></span><br><span class="line">  <span class="attr">profile</span>: <span class="title class_">Profile</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">ProfileAction</span> =</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;profile/user&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">User</span></span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;profile/profile&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">Profile</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initValue</span>: <span class="title class_">InitType</span> = &#123;</span><br><span class="line">  <span class="attr">user</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">profile</span>: &#123;&#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">InitType</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理个人信息的reducer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">state</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">action</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initValue, action: ProfileAction</span>) &#123;</span><br><span class="line">  <span class="comment">// const &#123; type, payload &#125; = action</span></span><br><span class="line">  <span class="keyword">if</span> (action.<span class="property">type</span> === <span class="string">&#x27;profile/user&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...state,</span><br><span class="line">      <span class="attr">user</span>: action.<span class="property">payload</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (action.<span class="property">type</span> === <span class="string">&#x27;profile/profile&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...state,</span><br><span class="line">      <span class="attr">profile</span>: action.<span class="property">payload</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="修改redux-action的修改"><a href="#修改redux-action的修改" class="headerlink" title="修改redux-action的修改"></a>修改redux-action的修改</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">User</span>, <span class="title class_">Profile</span>, <span class="title class_">ProfileAction</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../reducers/profile&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dispatch</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存用户信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">payload</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// actionCreator: 创建action  必须要符合 ProfileAction类型</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> saveUser = (<span class="attr">payload</span>: <span class="title class_">User</span>): <span class="function"><span class="params">ProfileAction</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;profile/user&#x27;</span>,</span><br><span class="line">    <span class="attr">payload</span>: payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取用户信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> <span class="variable">Promise</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getUser</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: <span class="title class_">Dispatch</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> http.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>)</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">saveUser</span>(res.<span class="property">data</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> saveProfile = (<span class="attr">payload</span>: <span class="title class_">Profile</span>): <span class="function"><span class="params">ProfileAction</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;profile/profile&#x27;</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getProfile</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: <span class="title class_">Dispatch</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> http.<span class="title function_">get</span>(<span class="string">&#x27;/user/profile&#x27;</span>)</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">saveProfile</span>(res.<span class="property">data</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回一个全部属性变成可选的类型</span></span><br><span class="line">type <span class="title class_">PartialProfile</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Profile</span>&gt;</span><br><span class="line"><span class="comment">// 修改用户的信息</span></span><br><span class="line"><span class="comment">// dispatch: Dispatch类型，，，参数必须符合Action类型 &#123;type: T&#125;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">updateProfile</span> = (<span class="params">data: PartialProfile</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: any) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> http.<span class="title function_">patch</span>(<span class="string">&#x27;/user/profile&#x27;</span>, data)</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">getProfile</span>())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">updatePhoto</span> = (<span class="params">fd: FormData</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">dispatch</span>: any) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> http.<span class="title function_">patch</span>(<span class="string">&#x27;/user/photo&#x27;</span>, fd)</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">getProfile</span>())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="泛型工具类型-ReturnType"><a href="#泛型工具类型-ReturnType" class="headerlink" title="泛型工具类型 - ReturnType"></a>泛型工具类型 - ReturnType</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/57472105/react-redux-useselector-typescript-type-for-state/57472389">https://stackoverflow.com/questions/57472105/react-redux-useselector-typescript-type-for-state/57472389</a></p>
<ul>
<li>泛型：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> id&lt;<span class="title class_">Type</span>&gt;(<span class="attr">value</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 尖括号中出现的是 类型</span></span><br><span class="line">id&lt;<span class="built_in">number</span>&gt;(<span class="number">1</span>)</span><br><span class="line">id&lt;<span class="built_in">string</span>&gt;(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>ReturnType<ul>
<li>作用：<strong>用来获取函数返回值的类型</strong></li>
</ul>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// typeof fn 的结果： () =&gt; number</span></span><br><span class="line"><span class="comment">// R1 =&gt; number</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">R1</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> fn&gt;</span><br><span class="line"><span class="comment">// type R1 = ReturnType&lt;() =&gt; number&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="获取redux状态的类型"><a href="#获取redux状态的类型" class="headerlink" title="获取redux状态的类型"></a>获取redux状态的类型</h2><p><a target="_blank" rel="noopener" href="https://redux.js.org/usage/usage-with-typescript">https://redux.js.org/usage/usage-with-typescript</a></p>
<ul>
<li>讲store&#x2F;index.js修改为store&#x2F;index.ts</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数1：reducer</span></span><br><span class="line"><span class="comment">// 参数2：指定store的初始值</span></span><br><span class="line"><span class="comment">// 参数3：指定中间件</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(</span><br><span class="line">  reducer,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">login</span>: <span class="title function_">getTokenInfo</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">composeWithDevTools</span>(<span class="title function_">applyMiddleware</span>(thunk))</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">RootState</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> store.<span class="property">getState</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="useSelector-的类型"><a href="#useSelector-的类型" class="headerlink" title="useSelector 的类型"></a>useSelector 的类型</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 TS 中 useSelector 是一个泛型函数，并且它有两个泛型变量，分别是：</span></span><br><span class="line"><span class="comment">// 1 整个Redux应用的状态类型</span></span><br><span class="line"><span class="comment">// 2 当前要获取的状态类型</span></span><br><span class="line"><span class="comment">// 因此，在使用的时候，需要传入两个 泛型变量：</span></span><br><span class="line"><span class="comment">// 比如，以下代码中，</span></span><br><span class="line"><span class="comment">// 第一个传入了 AppState 也就是整个 Redux 应用的状态类型</span></span><br><span class="line"><span class="comment">// 第二个传入了 AppState[&#x27;profile&#x27;] 也就是当前要获取的 profile 状态的类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = useSelector&lt;<span class="title class_">RootState</span>, <span class="title class_">RootState</span>[<span class="string">&#x27;profile&#x27;</span>][<span class="string">&#x27;user&#x27;</span>]&gt;(</span><br><span class="line">  <span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">profile</span>.<span class="property">user</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型参数1：指定state的类型</span></span><br><span class="line"><span class="comment">// 泛型参数2：指定返回值的类型</span></span><br><span class="line"><span class="keyword">const</span> user = <span class="title function_">useSelector</span>(<span class="function">(<span class="params">state: RootState</span>) =&gt;</span> state.<span class="property">profile</span>.<span class="property">user</span>)</span><br></pre></td></tr></table></figure>



<h2 id="TS-中的索引查询类型"><a href="#TS-中的索引查询类型" class="headerlink" title="TS 中的索引查询类型"></a>TS 中的索引查询类型</h2><ul>
<li>语法：<code>对象类型[键]</code></li>
<li>作用：查询 对象类型 中某个属性对应的类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NameType =&gt; string</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NameTyep</span> = A[<span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure>



<h1 id="Home组件的修改"><a href="#Home组件的修改" class="headerlink" title="Home组件的修改"></a>Home组件的修改</h1><h2 id="修改home组件-reducer"><a href="#修改home组件-reducer" class="headerlink" title="修改home组件-reducer"></a>修改home组件-reducer</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="variable constant_">SAVE_ALL_CHANNELS</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_ARTICLE_LIST</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_CHANNELS</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_MORE_ARTICLE_LIST</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;../action_types/home&#x27;</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">Channel</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: number</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">MoreAction</span> = &#123;</span><br><span class="line">  <span class="attr">visible</span>: boolean</span><br><span class="line">  <span class="attr">articleId</span>: string</span><br><span class="line">  <span class="attr">channelId</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Ariticle</span> = &#123;</span><br><span class="line">  <span class="attr">art_id</span>: string</span><br><span class="line">  <span class="attr">title</span>: string</span><br><span class="line">  <span class="attr">aut_id</span>: string</span><br><span class="line">  <span class="attr">aut_name</span>: string</span><br><span class="line">  <span class="attr">comm_count</span>: string</span><br><span class="line">  <span class="attr">pubdate</span>: string</span><br><span class="line">  <span class="attr">cover</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: string</span><br><span class="line">    <span class="attr">images</span>: string[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Articles</span> = &#123;</span><br><span class="line">  [<span class="attr">index</span>: number]: &#123;</span><br><span class="line">    <span class="attr">timestamp</span>: string</span><br><span class="line">    <span class="attr">list</span>: <span class="title class_">Ariticle</span>[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">HomeType</span> = &#123;</span><br><span class="line">  <span class="attr">userChannels</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">  <span class="attr">allChannels</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">  <span class="attr">moreAction</span>: <span class="title class_">MoreAction</span></span><br><span class="line">  <span class="attr">articles</span>: <span class="title class_">Articles</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initValue</span>: <span class="title class_">HomeType</span> = &#123;</span><br><span class="line">  <span class="attr">userChannels</span>: [],</span><br><span class="line">  <span class="attr">allChannels</span>: [],</span><br><span class="line">  <span class="comment">// 存储所有的文章列表</span></span><br><span class="line">  <span class="attr">articles</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">moreAction</span>: &#123;</span><br><span class="line">    <span class="attr">visible</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">articleId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">channelId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">HomeType</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initValue, action</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="修改home组件-reducer的修改-完成"><a href="#修改home组件-reducer的修改-完成" class="headerlink" title="修改home组件-reducer的修改-完成"></a>修改home组件-reducer的修改-完成</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="variable constant_">SAVE_ALL_CHANNELS</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_ARTICLE_LIST</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_CHANNELS</span>,</span><br><span class="line">  <span class="variable constant_">SAVE_MORE_ARTICLE_LIST</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;../action_types/home&#x27;</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">Channel</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: number</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">MoreAction</span> = &#123;</span><br><span class="line">  <span class="attr">visible</span>: boolean</span><br><span class="line">  <span class="attr">articleId</span>: string</span><br><span class="line">  <span class="attr">channelId</span>: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Ariticle</span> = &#123;</span><br><span class="line">  <span class="attr">art_id</span>: string</span><br><span class="line">  <span class="attr">title</span>: string</span><br><span class="line">  <span class="attr">aut_id</span>: string</span><br><span class="line">  <span class="attr">aut_name</span>: string</span><br><span class="line">  <span class="attr">comm_count</span>: string</span><br><span class="line">  <span class="attr">pubdate</span>: string</span><br><span class="line">  <span class="attr">cover</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: string</span><br><span class="line">    <span class="attr">images</span>: string[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Articles</span> = &#123;</span><br><span class="line">  [<span class="attr">index</span>: number]: &#123;</span><br><span class="line">    <span class="attr">timestamp</span>: string</span><br><span class="line">    <span class="attr">list</span>: <span class="title class_">Ariticle</span>[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">HomeType</span> = &#123;</span><br><span class="line">  <span class="attr">userChannels</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">  <span class="attr">allChannels</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">  <span class="attr">moreAction</span>: <span class="title class_">MoreAction</span></span><br><span class="line">  <span class="attr">articles</span>: <span class="title class_">Articles</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initValue</span>: <span class="title class_">HomeType</span> = &#123;</span><br><span class="line">  <span class="attr">userChannels</span>: [],</span><br><span class="line">  <span class="attr">allChannels</span>: [],</span><br><span class="line">  <span class="comment">// 存储所有的文章列表</span></span><br><span class="line">  <span class="attr">articles</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">moreAction</span>: &#123;</span><br><span class="line">    <span class="attr">visible</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">articleId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">channelId</span>: -<span class="number">1</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">HomeType</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">ActionType</span> =</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/saveChannels&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/saveAllChannels&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">Channel</span>[]</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/saveArticleList&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: &#123;</span><br><span class="line">        <span class="attr">channelId</span>: number</span><br><span class="line">        <span class="attr">timestamp</span>: string</span><br><span class="line">        <span class="attr">list</span>: <span class="title class_">Ariticle</span>[]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/saveMoreArticleList&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: &#123;</span><br><span class="line">        <span class="attr">channelId</span>: number</span><br><span class="line">        <span class="attr">timestamp</span>: string</span><br><span class="line">        <span class="attr">list</span>: <span class="title class_">Ariticle</span>[]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;home/setMoreAction&#x27;</span></span><br><span class="line">      <span class="attr">payload</span>: <span class="title class_">MoreAction</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initValue, action: ActionType</span>) &#123;</span><br><span class="line">  <span class="comment">// const &#123; type, payload &#125; = action</span></span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/saveChannels&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">userChannels</span>: action.<span class="property">payload</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/saveAllChannels&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">allChannels</span>: action.<span class="property">payload</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/saveArticleList&#x27;</span>:</span><br><span class="line">      <span class="keyword">const</span> &#123; list, timestamp, channelId &#125; = action.<span class="property">payload</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">articles</span>: &#123;</span><br><span class="line">          ...state.<span class="property">articles</span>,</span><br><span class="line">          [channelId]: &#123;</span><br><span class="line">            <span class="attr">timestamp</span>: timestamp,</span><br><span class="line">            <span class="comment">// 如果是loadMore，追加数据，否则，覆盖数据</span></span><br><span class="line">            <span class="attr">list</span>: list,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/saveMoreArticleList&#x27;</span>:</span><br><span class="line">      <span class="comment">// const oldList = state.articles[action.payload.channelId].list</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">articles</span>: &#123;</span><br><span class="line">          ...state.<span class="property">articles</span>,</span><br><span class="line">          [action.<span class="property">payload</span>.<span class="property">channelId</span>]: &#123;</span><br><span class="line">            <span class="attr">timestamp</span>: action.<span class="property">payload</span>.<span class="property">timestamp</span>,</span><br><span class="line">            <span class="attr">list</span>: [</span><br><span class="line">              ...state.<span class="property">articles</span>[action.<span class="property">payload</span>.<span class="property">channelId</span>].<span class="property">list</span>,</span><br><span class="line">              ...action.<span class="property">payload</span>.<span class="property">list</span>,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;home/setMoreAction&#x27;</span>: &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">moreAction</span>: action.<span class="property">payload</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="解决问题：request中dispatch的问题"><a href="#解决问题：request中dispatch的问题" class="headerlink" title="解决问题：request中dispatch的问题"></a>解决问题：request中dispatch的问题</h2><p>原因： saveToken没有指定返回值类型，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionCreator</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">saveToken</span> = (<span class="params">payload: Token</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把type推断为string类型   string类型无法常量类型赋值，所以报错了</p>
<p>解决方案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionCreator</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">saveToken</span> = (<span class="params">payload: Token</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span> <span class="keyword">as</span> <span class="keyword">const</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方案2：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionCreator</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> saveToken = (<span class="attr">payload</span>: <span class="title class_">Token</span>): <span class="function"><span class="params">LoginAction</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/token&#x27;</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="解决问题：logout的错误"><a href="#解决问题：logout的错误" class="headerlink" title="解决问题：logout的错误"></a>解决问题：logout的错误</h2><p>原因：store.dispatch的参数必须是一个对象，且要有type属性</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 退出</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">logout</span> = (<span class="params">payload: Token</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;login/logout&#x27;</span> <span class="keyword">as</span> <span class="keyword">const</span>,</span><br><span class="line">    payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除本地的token</span></span><br><span class="line"><span class="title function_">removeTokenInfo</span>()</span><br><span class="line">store.<span class="title function_">dispatch</span>(</span><br><span class="line">  <span class="title function_">logout</span>(&#123;</span><br><span class="line">    <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">refresh_token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="RootThunkAction的使用"><a href="#RootThunkAction的使用" class="headerlink" title="RootThunkAction的使用"></a>RootThunkAction的使用</h2><p><a target="_blank" rel="noopener" href="https://redux.js.org/usage/usage-with-typescript#type-checking-redux-thunks">https://redux.js.org/usage/usage-with-typescript#type-checking-redux-thunks</a></p>
<p>场景：</p>
<p> 我们如果需要使用redux-thunk的action，需要指定两个参数的类型，dispatch和getState的类型。</p>
<p>redux-thunk中间件帮助我们提供了一个thunkAction的类型。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取RootState的类型‘</span></span><br><span class="line"><span class="comment">// typeof: 获取store.getState的类型</span></span><br><span class="line"><span class="comment">// ReturnType 获取返回值的类型</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">RootState</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> store.<span class="property">getState</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// R：thunk的action的返回类型  void Promise&lt;void&gt;</span></span><br><span class="line"><span class="comment">// S: 需要指定个getState的返回类型  RootState</span></span><br><span class="line"><span class="comment">// E: extra: 额外的参数 any</span></span><br><span class="line"><span class="comment">// A: 需要指定Action的类型 Action AnyAction [extraProps: string]: any</span></span><br><span class="line"><span class="comment">// ThunkAction&lt;R, S, E, A&gt;</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">RootThunkAction</span> = <span class="title class_">ThunkAction</span>&lt;</span><br><span class="line">  <span class="title class_">Promise</span>&lt;<span class="keyword">void</span>&gt;,</span><br><span class="line">  <span class="title class_">RootState</span>,</span><br><span class="line">  unknown,</span><br><span class="line">  <span class="title class_">AnyAction</span></span><br><span class="line">&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>以后，只要是redux-thunk的action的类型，我们只需要指定返回类型为RootThunkAction类型即可，不需要指定dispatch和getState的类型</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取用户的频道</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUserChannels = (): <span class="function"><span class="params">RootThunkAction</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (dispatch) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 1. 判断用户是否登录</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">hasToken</span>()) &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/user/channels&#x27;</span>)</span><br><span class="line">      <span class="title function_">dispatch</span>(<span class="title function_">saveUserChannels</span>(res.<span class="property">data</span>.<span class="property">channels</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 2. 没有token,从本地获取频道数据</span></span><br><span class="line">      <span class="keyword">const</span> channels = <span class="title function_">getLocalChannels</span>()</span><br><span class="line">      <span class="keyword">if</span> (channels) &#123;</span><br><span class="line">        <span class="comment">// 没有token，但本地有channels数据</span></span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">saveUserChannels</span>(channels))</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 没有token, 且本地没有channels数据</span></span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/user/channels&#x27;</span>)</span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">saveUserChannels</span>(res.<span class="property">data</span>.<span class="property">channels</span>))</span><br><span class="line">        <span class="comment">// 保存到本地</span></span><br><span class="line">        <span class="title function_">setLocalChannels</span>(res.<span class="property">data</span>.<span class="property">channels</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/TS/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-vue3" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/vue3/">vue3</a>
	
    </h1>
  


  
  
<a href="/vue3/" class="archive-article-date">
        <time datetime="2023-02-16T14:41:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="vue3">Vue3快速上手</h1>

<img src="/vue3/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png" style="width:200px">

<h2 id="1-Vue3简介"><a href="#1-Vue3简介" class="headerlink" title="1.Vue3简介"></a>1.Vue3简介</h2><ul>
<li>2020年9月18日，Vue.js发布3.0版本，代号：One Piece（海贼王）</li>
<li>耗时2年多、<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/graphs/commit-activity">2600+次提交</a>、<a target="_blank" rel="noopener" href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">30+个RFC</a>、<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+次PR</a>、<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/graphs/contributors">99位贡献者</a> </li>
<li>github上的tags地址：<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li>
</ul>
<h2 id="2-Vue3带来了什么"><a href="#2-Vue3带来了什么" class="headerlink" title="2.Vue3带来了什么"></a>2.Vue3带来了什么</h2><h3 id="1-性能的提升"><a href="#1-性能的提升" class="headerlink" title="1.性能的提升"></a>1.性能的提升</h3><ul>
<li><p>打包大小减少41%</p>
</li>
<li><p>初次渲染快55%, 更新渲染快133%</p>
</li>
<li><p>内存减少54%</p>
<p>……</p>
</li>
</ul>
<h3 id="2-源码的升级"><a href="#2-源码的升级" class="headerlink" title="2.源码的升级"></a>2.源码的升级</h3><ul>
<li><p>使用Proxy代替defineProperty实现响应式</p>
</li>
<li><p>重写虚拟DOM的实现和Tree-Shaking</p>
<p>……</p>
</li>
</ul>
<h3 id="3-拥抱TypeScript"><a href="#3-拥抱TypeScript" class="headerlink" title="3.拥抱TypeScript"></a>3.拥抱TypeScript</h3><ul>
<li>Vue3可以更好的支持TypeScript</li>
</ul>
<h3 id="4-新的特性"><a href="#4-新的特性" class="headerlink" title="4.新的特性"></a>4.新的特性</h3><ol>
<li><p>Composition API（<strong>组合API</strong>）</p>
<ul>
<li>setup配置</li>
<li>ref与reactive</li>
<li>watch与watchEffect</li>
<li>provide与inject</li>
<li>……</li>
</ul>
</li>
<li><p>新的内置组件</p>
<ul>
<li>Fragment </li>
<li>Teleport</li>
<li>Suspense</li>
</ul>
</li>
<li><p>其他改变</p>
<ul>
<li>新的生命周期钩子</li>
<li>data 选项应始终被声明为一个函数</li>
<li>移除keyCode支持作为 v-on 的修饰符</li>
<li>……</li>
</ul>
</li>
</ol>
<h1 id="一、创建Vue3-0工程"><a href="#一、创建Vue3-0工程" class="headerlink" title="一、创建Vue3.0工程"></a>一、创建Vue3.0工程</h1><h2 id="1-使用-vue-cli-创建"><a href="#1-使用-vue-cli-创建" class="headerlink" title="1.使用 vue-cli 创建"></a>1.使用 vue-cli 创建</h2><p>官方文档：<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">## 安装或者升级你的@vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">## 创建</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<h2 id="2-使用-vite-创建"><a href="#2-使用-vite-创建" class="headerlink" title="2.使用 vite 创建"></a>2.使用 vite 创建</h2><p>官方文档：<a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p>
<p>vite官网：<a target="_blank" rel="noopener" href="https://vitejs.cn/">https://vitejs.cn</a></p>
<p><img src="/vue3/image-20221206180738377.png" alt="image-20221206180738377"></p>
<ul>
<li>什么是vite？—— 新一代前端构建工具。(webpack)</li>
<li>优势如下：<ul>
<li>开发环境中，无需打包操作，可快速的冷启动。</li>
<li>轻量快速的热重载（HMR）。</li>
<li>真正的按需编译，不再等待整个应用编译完成。</li>
</ul>
</li>
<li>传统构建 与 vite构建对比图</li>
</ul>
<p><img src="/vue3/image-20221206181011117.png" alt="image-20221206181011117"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 创建工程</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 进入工程目录</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 安装依赖</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## 运行</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>



<p>初始化项目文件的文件解析</p>
<p>app.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入的不再是Vue构造函数，而是引入一个名为createApp的工厂函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建应用实例对象——与vm类似，但比vm更轻,</span></span><br><span class="line"><span class="comment">// mount为挂载</span></span><br><span class="line"><span class="comment">// 不兼容之前的写法</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// vue2创建方法Vue3不兼容</span></span><br><span class="line"><span class="comment">// new Vue(&#123;</span></span><br><span class="line"><span class="comment">//   render: h =&gt; h(App)</span></span><br><span class="line"><span class="comment">// &#125;).mount(&quot;#app&quot;)</span></span><br></pre></td></tr></table></figure>

<p><img src="/vue3/image-20221206193344768.png" alt="image-20221206193344768"></p>
<p><strong>vue3中的组件中的模板可以没有根标签</strong></p>
<h1 id="二、常用-Composition-API"><a href="#二、常用-Composition-API" class="headerlink" title="二、常用 Composition API"></a>二、常用 Composition API</h1><p>官方文档: <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p>
<h2 id="1-拉开序幕的setup"><a href="#1-拉开序幕的setup" class="headerlink" title="1.拉开序幕的setup"></a>1.拉开序幕的setup</h2><ol>
<li>理解：Vue3.0中一个新的配置项，值为一个函数。</li>
<li>setup是所有<strong style="color:#DD5145">Composition API（组合API）</strong><i style="color:gray;font-weight:bold">“ 表演的舞台 ”</i>。</li>
<li>组件中所用到的：数据、方法等等，均要配置在setup中。</li>
<li>setup函数的两种返回值：<ol>
<li>若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）</li>
<li><span style="color:#aad">若返回一个渲染函数：则可以自定义渲染内容。（了解）</span></li>
</ol>
</li>
<li>注意点：<ol>
<li>尽量不要与Vue2.x配置混用<ul>
<li>Vue2.x配置（data、methos、computed…）中<strong style="color:#DD5145">可以访问到</strong>setup中的属性、方法。</li>
<li>但在setup中<strong style="color:#DD5145">不能访问到</strong>Vue2.x配置（data、methos、computed…）。</li>
<li>如果有重名, setup优先。</li>
</ul>
</li>
<li>setup不能是一个async函数，因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性。<strong>（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）</strong></li>
</ol>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; set &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;show&quot;</span>&gt;</span>Vue3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;text&quot;</span>&gt;</span>vue2并读取vue3数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="comment">// Vue2写法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 渲染函数使用需要导入的h</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 向下兼容支持vue2的写法但data只能写成函数式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">set</span>:<span class="string">&quot;男&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">bj</span>:<span class="number">18</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">text</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// vue2中可以轻松访问vue3的配置数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="title function_">show</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// vue3写法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> name = <span class="string">&quot;张珊&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> age = <span class="number">18</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">alert</span>(<span class="string">`我是<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 对象写法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      name,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      age,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      show</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 渲染函数写法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// return () =&gt; h(&quot;h1&quot;, &quot;尚硅谷&quot;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2-ref函数"><a href="#2-ref函数" class="headerlink" title="2.ref函数"></a>2.ref函数</h2><ul>
<li>作用: 定义一个响应式的数据</li>
<li>语法: <code>const xxx = ref(initValue)</code> <ul>
<li>创建一个包含响应式数据的<strong style="color:#DD5145">引用对象（reference对象，简称ref对象）</strong>。</li>
<li>JS中操作数据： <code>xxx.value</code></li>
<li>模板中读取数据: 不需要.value，直接：<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li>
</ul>
</li>
<li>备注：<ul>
<li>接收的数据可以是：基本类型、也可以是对象类型。</li>
<li>基本类型的数据：响应式依然是靠<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成的。</li>
<li><strong>对象类型的数据：内部 <i style="color:gray;font-weight:bold">“ 求助 ”</i> 了Vue3.0中的一个新函数—— <code>reactive</code>函数。</strong></li>
</ul>
</li>
</ul>
<p><img src="/vue3/image-20221206215438014.png" alt="image-20221206215438014"></p>
<p><img src="/vue3/image-20221206215515781.png" alt="image-20221206215515781"></p>
<p><img src="/vue3/image-20221206215544205.png" alt="image-20221206215544205"></p>
<p>对象类型也是响应式的写法如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> job = <span class="title function_">ref</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&#x27;前端工程师&#x27;</span>,</span><br><span class="line">    <span class="attr">xs</span>:<span class="number">30</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改时</span></span><br><span class="line">job.<span class="property">value</span>.<span class="property">type</span> = <span class="string">&#x27;后端工程师&#x27;</span>,</span><br><span class="line">job.<span class="property">value</span>.<span class="property">xs</span> = <span class="number">60</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>理论上</p>
<p><img src="/vue3/image-20221206220730575.png" alt="image-20221206220730575">  </p>
<p>实际上</p>
<p>处理对象内数据时使用的事ex6的proxy（代理）对象（在vue3中将proxy封装在了reactive函数中）</p>
<p><img src="/vue3/image-20221206221042116.png" alt="image-20221206221042116"></p>
<h2 id="3-reactive函数"><a href="#3-reactive函数" class="headerlink" title="3.reactive函数"></a>3.reactive函数</h2><ul>
<li>作用: 定义一个<strong style="color:#DD5145">对象类型</strong>的响应式数据（基本类型不要用它，要用<code>ref</code>函数）</li>
<li>语法：<code>const 代理对象= reactive(源对象)</code>接收一个对象（或数组），返回一个<strong style="color:#DD5145">代理对象（Proxy的实例对象，简称proxy对象）</strong></li>
<li>reactive定义的响应式数据是“深层次的”。</li>
<li>内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。</li>
</ul>
<h2 id="4-Vue3-0中的响应式原理"><a href="#4-Vue3-0中的响应式原理" class="headerlink" title="4.Vue3.0中的响应式原理"></a>4.Vue3.0中的响应式原理</h2><h3 id="vue2-x的响应式"><a href="#vue2-x的响应式" class="headerlink" title="vue2.x的响应式"></a>vue2.x的响应式</h3><ul>
<li><p>实现原理：</p>
<ul>
<li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行拦截（数据劫持）。</p>
</li>
<li><p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">    get () &#123;&#125;, </span><br><span class="line">    set () &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>存在问题：</p>
<ul>
<li>新增属性、删除属性, 界面不会更新。</li>
<li>直接通过下标修改数组, 界面不会自动更新。</li>
</ul>
</li>
</ul>
<h3 id="Vue3-0的响应式"><a href="#Vue3-0的响应式" class="headerlink" title="Vue3.0的响应式"></a>Vue3.0的响应式</h3><ul>
<li><p>实现原理: </p>
<ul>
<li><p>通过Proxy（代理）:  拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。</p>
</li>
<li><p>通过Reflect（反射）:  对源对象的属性进行操作。</p>
</li>
<li><p>MDN文档中描述的Proxy与Reflect：</p>
<ul>
<li><p>Proxy：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p>
</li>
<li><p>Reflect：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span><br><span class="line">	<span class="comment">// 拦截读取属性值</span></span><br><span class="line">    get (target, prop) &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, prop)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 拦截设置属性值或添加新属性</span></span><br><span class="line">    set (target, prop, value) &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, prop, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 拦截删除属性</span></span><br><span class="line">    deleteProperty (target, prop) &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, prop)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">name</span> = <span class="string">&#x27;tom&#x27;</span>   </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>修改数组时可以通过数组下标改不需要通过修改原数组的方法</p>
<p>可以直接添加修改和删除对象属性不需要通过this.$set 或this.delete等方法</p>
</blockquote>
<p>原理Proxy</p>
<blockquote>
<p>Reflect（反射）</p>
<p>es6新增的windos的属性</p>
<p>可以读取修改对象的属性值</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//源数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> person = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">age</span>:<span class="number">18</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//模拟Vue2中实现响应式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//#region </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">/* let p = &#123;&#125;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			Object.defineProperty(p,&#x27;name&#x27;,&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				configurable:true,</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				get()&#123; //有人读取name时调用</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					return person.name</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				&#125;,</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				set(value)&#123; //有人修改name时调用</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					console.log(&#x27;有人修改了name属性，我发现了，我要去更新界面！&#x27;)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					person.name = value</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			Object.defineProperty(p,&#x27;age&#x27;,&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				get()&#123; //有人读取age时调用</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					return person.age</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				&#125;,</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				set(value)&#123; //有人修改age时调用</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					console.log(&#x27;有人修改了age属性，我发现了，我要去更新界面！&#x27;)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					person.age = value</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125;) */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//#endregion</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//模拟Vue3中实现响应式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//#region </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Proxy</span>(person,&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="comment">//有人读取p的某个属性时调用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="title function_">get</span>(<span class="params">target,propName</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人读取了p身上的<span class="subst">$&#123;propName&#125;</span>属性`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">// target[propName]</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target,propName)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="comment">//有人修改p的某个属性、或给p追加某个属性时调用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="title function_">set</span>(<span class="params">target,propName,value</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人修改了p身上的<span class="subst">$&#123;propName&#125;</span>属性，我要去更新界面了！`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">// target[prpName] = value</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="title class_">Reflect</span>.<span class="title function_">set</span>(target,propName,value)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="comment">//有人删除p的某个属性时调用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="title function_">deleteProperty</span>(<span class="params">target,propName</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人删除了p身上的<span class="subst">$&#123;propName&#125;</span>属性，我要去更新界面了！`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">return</span> <span class="keyword">delete</span> target[propName]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target,propName)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//#endregion</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> obj = &#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//通过Object.defineProperty去操作</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//#region </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">/* try &#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			 // 无返回值，重复定义一个属性会报错，不容易捕获错误</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				Object.defineProperty(obj,&#x27;c&#x27;,&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					get()&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">						return 3</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				&#125;)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				Object.defineProperty(obj,&#x27;c&#x27;,&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					get()&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">						return 4</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				&#125;)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125; catch (error) &#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				console.log(error)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125; */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//#endregion</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//通过Reflect.defineProperty去操作</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 有返回值，重复定义一个属性不会报错，容易捕获错误</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//#region </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">/* const x1 = Reflect.defineProperty(obj,&#x27;c&#x27;,&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				get()&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					return 3</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			console.log(x1)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			const x2 = Reflect.defineProperty(obj,&#x27;c&#x27;,&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				get()&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">					return 4</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125;) </span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			if(x2)&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				console.log(&#x27;某某某操作成功了！&#x27;)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125;else&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				console.log(&#x27;某某某操作失败了！&#x27;)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125; */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//#endregion</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// console.log(&#x27;@@@&#x27;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>





<h2 id="5-reactive对比ref"><a href="#5-reactive对比ref" class="headerlink" title="5.reactive对比ref"></a>5.reactive对比ref</h2><ul>
<li>从定义数据角度对比：<ul>
<li>ref用来定义：<strong style="color:#DD5145">基本类型数据</strong>。</li>
<li>reactive用来定义：<strong style="color:#DD5145">对象（或数组）类型数据</strong>。</li>
<li>备注：ref也可以用来定义<strong style="color:#DD5145">对象（或数组）类型数据</strong>, 它内部会自动通过<code>reactive</code>转为<strong style="color:#DD5145">代理对象</strong>。</li>
</ul>
</li>
<li>从原理角度对比：<ul>
<li>ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）。</li>
<li>reactive通过使用<strong style="color:#DD5145">Proxy</strong>来实现响应式（数据劫持）, 并通过<strong style="color:#DD5145">Reflect</strong>操作<strong style="color:orange">源对象</strong>内部的数据。</li>
</ul>
</li>
<li>从使用角度对比：<ul>
<li>ref定义的数据：操作数据<strong style="color:#DD5145">需要</strong><code>.value</code>，读取数据时模板中直接读取<strong style="color:#DD5145">不需要</strong><code>.value</code>。</li>
<li>reactive定义的数据：操作数据与读取数据：<strong style="color:#DD5145">均不需要</strong><code>.value</code>。</li>
</ul>
</li>
</ul>
<h2 id="6-setup的两个注意点（emit等）"><a href="#6-setup的两个注意点（emit等）" class="headerlink" title="6.setup的两个注意点（emit等）"></a>6.setup的两个注意点（emit等）</h2><ul>
<li><p>setup执行的时机</p>
<ul>
<li>在beforeCreate之前执行一次，this是undefined。</li>
</ul>
</li>
<li><p>setup的参数</p>
<ul>
<li>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。</li>
<li>context：上下文对象<ul>
<li>attrs: 值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性, 相当于 <code>this.$attrs</code>。</li>
<li>slots: 收到的插槽内容, 相当于 <code>this.$slots</code>。</li>
<li>emit: 分发自定义事件的函数, 相当于 <code>this.$emit</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>vue 3中也支持props配置项</p>
<p>vue2中传了不接收不会警告，vue3中传了不接收会警告</p>
<p>setup的第一个参数可以访问到props配置中接收到的数据</p>
<p>setup的第二个参数context不是vuex中的，本质上是一个对象包含attrs、slots、emit等属性（相当与vue2中的$attre$emit和插槽）</p>
<p><strong>注意：vue3中父组件给子组件绑定的自定义事件需要在子组件中通过emit配置项进行接收否则会发出警告，不接收也可以用</strong></p>
</blockquote>
<blockquote>
<p>注意在vue3中通过slot绑定具名插槽时在context.slots配置项中存放的插槽名还是默认插槽名（可以正常使用只是名字显示为默认）</p>
<p>但通过v-slot绑定的会显示以插槽名为键插槽内容的虚拟dom为值的对象</p>
</blockquote>
<h2 id="7-计算属性与监视"><a href="#7-计算属性与监视" class="headerlink" title="7.计算属性与监视"></a>7.计算属性与监视</h2><h3 id="1-computed函数"><a href="#1-computed函数" class="headerlink" title="1.computed函数"></a>1.computed函数</h3><ul>
<li><p>与Vue2.x中computed配置功能一致</p>
</li>
<li><p>写法</p>
<p>使用时需要导入</p>
<blockquote>
<p>注意在Vue3中computed不在是一个对象而是一个函数</p>
<p>是写在setup配置中的,this为undefined</p>
<p>vc配置中也可以vue2的computed配置想vue3向下兼容</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    ...</span><br><span class="line">	<span class="comment">//计算属性——简写</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//计算属性——完整</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(&#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">            <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">            person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span><br><span class="line">            person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>一个人的信息<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	姓：&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;person.firstName&quot;</span>&gt;</span><br><span class="line">	&lt;br&gt;</span><br><span class="line">	名：&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;person.lastName&quot;</span>&gt;</span><br><span class="line">	&lt;br&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>全名：&#123;&#123;person.fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">	&lt;br&gt;</span><br><span class="line">	全名：&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;person.fullName&quot;</span>&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">import</span> &#123;reactive,computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">firstName</span>:<span class="string">&#x27;张&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">lastName</span>:<span class="string">&#x27;三&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//计算属性——简写（没有考虑计算属性被修改的情况）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">/* person.fullName = computed(()=&gt;&#123;</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">				return person.firstName + &#x27;-&#x27; + person.lastName</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">			&#125;) */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//计算属性——完整写法（考虑读和写）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			person.<span class="property">fullName</span> = <span class="title function_">computed</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="title function_">set</span>(<span class="params">value</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//返回一个对象（常用）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				person</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="2-watch函数"><a href="#2-watch函数" class="headerlink" title="2.watch函数"></a>2.watch函数</h3><ul>
<li><p>与Vue2.x中watch配置功能一致</p>
</li>
<li><p>两个小“坑”：</p>
<ul>
<li>监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。</li>
<li>监视reactive定义的响应式数据中某个属性(对象属性，基本属性不需要)时：deep配置有效。</li>
</ul>
<p><img src="/vue3/image-20221208145602727.png" alt="image-20221208145602727"></p>
<p><img src="/vue3/image-20221208145251194.png" alt="image-20221208145251194"></p>
<p>reactive定义的响应式数据,在vue3默认开启了深度监视即使通过deep配置项关闭深度监视也无效</p>
<p><img src="/vue3/image-20221208150817388.png" alt="image-20221208150817388"></p>
<p><img src="/vue3/image-20221208150142067.png" alt="image-20221208150142067"></p>
<blockquote>
<p>监视reactive定义的响应式数据中的某个属性<br><strong>第一个参数写成person.name时，修改数据不会触发监视的回调函数不会被监测到，并且一开始会发出警告</strong></p>
</blockquote>
<p><img src="/vue3/image-20221208150731354.png" alt="image-20221208150731354"></p>
<p><img src="/vue3/image-20221208150700123.png" alt="image-20221208150700123"></p>
<p>显示只能监视函数类型或ref类型的或reactive对象类型或是一个数组</p>
<p>解决方法</p>
<p>写成箭头函数的返回值，并且newValue和oldValue都可以正常使用</p>
<p><img src="/vue3/image-20221208151043858.png" alt="image-20221208151043858"></p>
<p><img src="/vue3/image-20221208151029590.png" alt="image-20221208151029590"></p>
<p>情况五</p>
<p><img src="/vue3/image-20221208151903025.png" alt="image-20221208151903025"></p>
<h4 id="特殊情况"><a href="#特殊情况" class="headerlink" title="特殊情况"></a>特殊情况</h4><blockquote>
<p><em>&#x2F;&#x2F;特殊情况</em></p>
<p>​      <em>&#x2F;&#x2F; 直接监视reactive对象时是强制直接开启深度监视的并且无法关闭，oldValue也无效</em></p>
<p>​      <em>&#x2F;&#x2F; 但是监视的rective定义对象内的某一个或多个属性（改属性属性可以是一个对象类型）时默认不是深度监视的修改给属性对象内的属性值是不会被监视到，需要自己配置</em></p>
<p>​      <em>&#x2F;&#x2F; 并且在这种情况下使用deep配置项有效</em></p>
</blockquote>
<p><img src="/vue3/image-20221208152656933.png" alt="image-20221208152656933"></p>
<p>默认修改后都不会监测到</p>
<p><img src="/vue3/image-20221208152721858.png" alt="image-20221208152721858"></p>
<p><img src="/vue3/image-20221208153142519.png" alt="image-20221208153142519"></p>
<p>配置deep配置项后修改会被监视到并且newValue和oldValue都有效</p>
<p><img src="/vue3/image-20221208152526176.png" alt="image-20221208152526176"></p>
<p><img src="/vue3/image-20221208153035421.png" alt="image-20221208153035421"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//情况一：监视ref定义的响应式数据，第一个参数位监视谁，第二个参数监视的回调，第三个参数位一个对象是监视属性的配置项</span></span><br><span class="line"><span class="title function_">watch</span>(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//情况二：监视多个ref定义的响应式数据，可以多磁调用watch函数下面写简写方式</span></span><br><span class="line"><span class="comment">// 同时监视多个属性时可以多次调用watch函数也可以将第一写成数组</span></span><br><span class="line"><span class="title function_">watch</span>([sum,msg],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// 同时监视多个时，newValue，oldValue不是简单的数据了而是将检查的数据整合为一个数组，按照监视的属性数组来排序</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum或msg变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 情况三：监视reactive定义的响应式数据</span></span><br><span class="line"><span class="comment">	若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！</span></span><br><span class="line"><span class="comment">	若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// newValue,oldValue都是新值</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">false</span>&#125;) <span class="comment">//此处的deep配置不再奏效</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//情况四：监视reactive定义的响应式数据中的某个属性</span></span><br><span class="line"><span class="comment">// 写成person.name时有效，但会发出警告</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">//情况五：监视reactive定义的响应式数据中的某些属性</span></span><br><span class="line"><span class="title function_">watch</span>([<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">()=&gt;</span>person.<span class="property">name</span>],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//特殊情况</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;) <span class="comment">//此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="ref定义的数据时"><a href="#ref定义的数据时" class="headerlink" title="ref定义的数据时"></a>ref定义的数据时</h4><blockquote>
<p>注意项：</p>
<ul>
<li><p>监视ref定义的基本数据时不需要.value，.value后得到的是值，将无法监视并且发出警告</p>
</li>
<li><p>ref定义的对象数据需要.value默认没有开启深度监视,它监视的是一个对象，除非引用地址发生改变才能监测到需要开启深度监视</p>
<ul>
<li>使用person.value<br>&#x2F;因为ref中简单属性是直接生的RefImpl对象，而对象属性是借助reactive生成的Proxy对象<br>    &#x2F;&#x2F; 而reactive生成的对象默认是开启深度监视的</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sum++&quot;</span>&gt;</span>点我+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	&lt;hr&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前的信息为：&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;msg+=&#x27;！&#x27;&quot;</span>&gt;</span>修改信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	&lt;hr&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;person.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;person.age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>薪资：&#123;&#123;person.job.j1.salary&#125;&#125;K<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;person.name+=&#x27;~&#x27;&quot;</span>&gt;</span>修改姓名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;person.age++&quot;</span>&gt;</span>增长年龄<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;person.job.j1.salary++&quot;</span>&gt;</span>涨薪<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">import</span> &#123;ref,reactive,watch&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;你好啊&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> person = <span class="title function_">ref</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">age</span>:<span class="number">18</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">job</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">j1</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">salary</span>:<span class="number">20</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 监视ref定义的基本数据时不需要.value，.value后得到的是值，将无法监视并且发出警告</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">watch</span>(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum的值变化了&#x27;</span>,newValue,oldValue)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 它监视的是一个对象，除非引用地址发生改变才能监测到需要开启深度监视</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的值变化了&#x27;</span>,newValue,oldValue)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//或者使用person.value</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//因为ref中简单属性是直接生的RefImpl对象，而对象属性是借助reactive生成的Proxy对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 而reactive生成的对象默认是开启深度监视的</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">watch</span>(person.<span class="property">value</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的值变化了&#x27;</span>,newValue,oldValue)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//返回一个对象（常用）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				sum,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				msg,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				person</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>&lt;template&gt;</span><br><span class="line">	&lt;h2&gt;当前求和为：&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">	&lt;button @click=&quot;sum++&quot;&gt;点我+1&lt;/button&gt;</span><br><span class="line">	&lt;hr&gt;</span><br><span class="line">	&lt;h2&gt;当前的信息为：&#123;&#123;msg&#125;&#125;&lt;/h2&gt;</span><br><span class="line">	&lt;button @click=&quot;msg+=&#x27;！&#x27;&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">	&lt;hr&gt;</span><br><span class="line">	&lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">	&lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">	&lt;h2&gt;薪资：&#123;&#123;person.job.j1.salary&#125;&#125;K&lt;/h2&gt;</span><br><span class="line">	&lt;button @click=&quot;person.name+=&#x27;~&#x27;&quot;&gt;修改姓名&lt;/button&gt;</span><br><span class="line">	&lt;button @click=&quot;person.age++&quot;&gt;增长年龄&lt;/button&gt;</span><br><span class="line">	&lt;button @click=&quot;person.job.j1.salary++&quot;&gt;涨薪&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;ref,reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name: &#x27;Demo&#x27;,</span><br><span class="line">		setup()&#123;</span><br><span class="line">			//数据</span><br><span class="line">			let sum = ref(0)</span><br><span class="line">			let msg = ref(&#x27;你好啊&#x27;)</span><br><span class="line">			let person = ref(&#123;</span><br><span class="line">				name:&#x27;张三&#x27;,</span><br><span class="line">				age:18,</span><br><span class="line">				job:&#123;</span><br><span class="line">					j1:&#123;</span><br><span class="line">						salary:20</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">			console.log(person)</span><br><span class="line">			// 监视ref定义的数据时不需要.value，.value后得到的是值，将无法监视并且发出警告</span><br><span class="line">			watch(sum,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">				console.log(&#x27;sum的值变化了&#x27;,newValue,oldValue)</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">			watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">				console.log(&#x27;person的值变化了&#x27;,newValue,oldValue)</span><br><span class="line">			&#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			//返回一个对象（常用）</span><br><span class="line">			return &#123;</span><br><span class="line">				sum,</span><br><span class="line">				msg,</span><br><span class="line">				person</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>









<h3 id="3-watchEffect函数"><a href="#3-watchEffect函数" class="headerlink" title="3.watchEffect函数"></a>3.watchEffect函数</h3><ul>
<li><p>watch的套路是：既要指明监视的属性，也要指明监视的回调。没有newValue和oldValue</p>
</li>
<li><p>watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。</p>
</li>
<li><p>watchEffect有点像computed：</p>
<ul>
<li>但computed注重的计算出来的值（回调函数的返回值），所以必须要写返回值。</li>
<li>而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//回调函数中用到谁监视谁，使用和修改</span></span><br><span class="line">    <span class="keyword">const</span> x1 = sum.<span class="property">value</span> <span class="comment">// 获取的是新值</span></span><br><span class="line">    <span class="keyword">const</span> x2 = person.<span class="property">age</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watchEffect配置的回调执行了&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="8-生命周期"><a href="#8-生命周期" class="headerlink" title="8.生命周期"></a>8.生命周期</h2><p>vue2生命周期图</p>
<img src="/vue3/生命周期.png" alt="生命周期" style="zoom:50%;">

<p><img src="/vue3/lifecycle.png" alt="Vue 实例生命周期"></p>
<p>vue3</p>
<p><img src="/vue3/image-20221208171454122.png" alt="image-20221208171454122"></p>
<p><img src="/vue3/image-20221208171550862.png" alt="image-20221208171550862"></p>
<p><img src="/vue3/lifecycle.16e4c08e.png" alt="组件生命周期图示"></p>
<blockquote>
<p>vue2先开始走逻辑在再开始确定容器</p>
<p>vue3先确定容器后才开始走逻辑</p>
</blockquote>
<p>1</p>
<ul>
<li>Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有有两个被更名：<ul>
<li><code>beforeDestroy</code>改名为 <code>beforeUnmount</code></li>
<li><code>destroyed</code>改名为 <code>unmounted</code></li>
<li>注意在Vue3中使用上面的vue2的无效需要使用vue3新定义的</li>
</ul>
</li>
<li>Vue3.0也提供了 Composition API 形式的生命周期钩子，与Vue2.x中钩子对应关系如下：<ul>
<li>卸载vue配置中的 &#x3D;&#x3D;&#x3D;&#x3D;&gt; 写setup或setup中的</li>
<li><code>beforeCreate</code>&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>
<li><code>created</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>
<li><code>beforeMount</code> &#x3D;&#x3D;&#x3D;&gt;<code>onBeforeMount</code></li>
<li><code>mounted</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onMounted</code></li>
<li><code>beforeUpdate</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeUpdate</code></li>
<li><code>updated</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUpdated</code></li>
<li><code>beforeUnmount</code> &#x3D;&#x3D;&gt;<code>onBeforeUnmount</code></li>
<li><code>unmounted</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUnmounted</code></li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sum++&quot;</span>&gt;</span>点我+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">import</span> &#123;ref,onBeforeMount,onMounted,onBeforeUpdate,onUpdated,onBeforeUnmount,onUnmounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---setup---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//通过组合式API的形式去使用生命周期钩子</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">onBeforeMount</span>(<span class="function">()=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeMount---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onMounted---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">onBeforeUpdate</span>(<span class="function">()=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeUpdate---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">onUpdated</span>(<span class="function">()=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onUpdated---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeUnmount---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onUnmounted---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//返回一个对象（常用）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;sum&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//通过配置项的形式使用生命周期钩子</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//#region </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---beforeCreate---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---created---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---beforeMount---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---mounted---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">beforeUpdate</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---beforeUpdate---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">updated</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---updated---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---beforeUnmount---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---unmounted---&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="comment">//#endregion</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="9-自定义hook函数"><a href="#9-自定义hook函数" class="headerlink" title="9.自定义hook函数"></a>9.自定义hook函数</h2><ul>
<li><p>什么是hook？—— 本质是一个函数，把setup函数中使用的Composition API进行了封装。</p>
</li>
<li><p>类似于vue2.x中的mixin。</p>
</li>
<li><p>自定义hook的优势: 复用代码, 让setup中的逻辑更清楚易懂。</p>
</li>
</ul>
<p>不是配置项</p>
<p>公共的提取出来方法一单独的js文件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,onMounted,onBeforeUnmount&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">	<span class="comment">//实现鼠标“打点”相关的数据</span></span><br><span class="line">	<span class="keyword">let</span> point = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">		<span class="attr">x</span>:<span class="number">0</span>,</span><br><span class="line">		<span class="attr">y</span>:<span class="number">0</span></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//实现鼠标“打点”相关的方法</span></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">savePoint</span>(<span class="params">event</span>)&#123;</span><br><span class="line">		point.<span class="property">x</span> = event.<span class="property">pageX</span></span><br><span class="line">		point.<span class="property">y</span> = event.<span class="property">pageY</span></span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">pageX</span>,event.<span class="property">pageY</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//实现鼠标“打点”相关的生命周期钩子</span></span><br><span class="line">	<span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">		<span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,savePoint)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">		<span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>,savePoint)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> point</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在组件中引入使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sum++&quot;</span>&gt;</span>点我+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	&lt;hr&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前点击时鼠标的坐标为：x：&#123;&#123;point.x&#125;&#125;，y：&#123;&#123;point.y&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">import</span> usePoint <span class="keyword">from</span> <span class="string">&#x27;../hooks/usePoint&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 调用该函数会执行生命周期钩子函数绑定回调函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> point = <span class="title function_">usePoint</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//返回一个对象（常用）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;sum,point&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="10-toRef（加工）"><a href="#10-toRef（加工）" class="headerlink" title="10.toRef（加工）"></a>10.toRef（加工）</h2><ul>
<li><p>作用：创建一个 ref 对象，其value值指向另一个对象中的某个属性。</p>
</li>
<li><p>语法：<code>const name = toRef(person,&#39;name&#39;)</code></p>
</li>
<li><p>应用:   要将响应式对象中的某个属性单独提供给外部使用时。</p>
</li>
<li><p>扩展：<code>toRefs</code> 与<code>toRef</code>功能一致，但可以批量创建多个 ref 对象，语法：<code>toRefs(person)</code>返回值是一个对象，使用时可能需要进行解构k</p>
</li>
</ul>
<blockquote>
<p>注意将ref定义的数据传给toRefs时需要.value</p>
<p>toRefs接受响应式对象</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123;person&#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>薪资：&#123;&#123;job.j1.salary&#125;&#125;K<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;name+=&#x27;~&#x27;&quot;</span>&gt;</span>修改姓名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;age++&quot;</span>&gt;</span>增长年龄<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;job.j1.salary++&quot;</span>&gt;</span>涨薪<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">import</span> &#123;ref,reactive,toRef,toRefs&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">age</span>:<span class="number">18</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">job</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">j1</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">salary</span>:<span class="number">20</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// const name1 = person.name</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// console.log(&#x27;%%%&#x27;,name1)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// const name2 = toRef(person,&#x27;name&#x27;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// console.log(&#x27;####&#x27;,name2)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">const</span> x = <span class="title function_">toRefs</span>(person)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;******&#x27;</span>,x)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//返回一个对象（常用）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				person,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//如果将toRef改成ref，则是生成一个新的ref对象修改的是新的对象数据而没有修改person中的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//创建一个 ref 对象，其value值指向另一个对象中的某个属性。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="comment">// name:toRef(person,&#x27;name&#x27;),</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="comment">// age:toRef(person,&#x27;age&#x27;),</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="comment">// salary:toRef(person.job.j1,&#x27;salary&#x27;),</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				...<span class="title function_">toRefs</span>(person) <span class="comment">// 只会执行一次，只会在setup函数执行时执行，例如在运行时临时在person中添加一个属性它不会将新添加的属性暴露给vue</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>…toRefs(person) &#x2F;&#x2F; 只会执行一次，只会在setup函数执行时执行，例如在运行时临时在person中添加一个属性它不会将新添加的属性暴露给vue</strong></p>
</blockquote>
<h1 id="三、其它-Composition-API"><a href="#三、其它-Composition-API" class="headerlink" title="三、其它 Composition API"></a>三、其它 Composition API</h1><h2 id="1-shallowReactive-与-shallowRef（定义）"><a href="#1-shallowReactive-与-shallowRef（定义）" class="headerlink" title="1.shallowReactive 与 shallowRef（定义）"></a>1.shallowReactive 与 shallowRef（定义）</h2><ul>
<li><p>shallowReactive：只处理对象最外层(对象第一层的，深层次的不响应)属性的响应式（浅响应式）。</p>
</li>
<li><p>shallowRef：只处理基本数据类型的响应式, <strong>不进行对象的响应式处理。</strong></p>
</li>
<li><p>什么时候使用?</p>
<ul>
<li>如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 &#x3D;&#x3D;&#x3D;&gt; shallowReactive。</li>
<li>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换（即只有对象被替换时才响应） &#x3D;&#x3D;&#x3D;&gt; shallowRef。</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意将响应是数据传给shallowRef和shallowReactive生成的对象无效将还是响应式的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">let</span> person = <span class="title function_">ref</span>(&#123;</span><br><span class="line">			<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">			<span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">			<span class="attr">job</span>:&#123;</span><br><span class="line">				<span class="attr">j1</span>:&#123;</span><br><span class="line">					<span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		<span class="comment">//无效还是响应式的</span></span><br><span class="line">		person = <span class="title function_">shallowRef</span>(person)</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;******&#x27;</span>,person)</span><br></pre></td></tr></table></figure>

<p>用于定义数据</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>当前的x.y值是：&#123;&#123;x.y&#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;x=&#123;y:888&#125;&quot;</span>&gt;</span>点我替换x<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;x.y++&quot;</span>&gt;</span>点我x.y++<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	&lt;hr&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123;person&#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>薪资：&#123;&#123;job.j1.salary&#125;&#125;K<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;name+=&#x27;~&#x27;&quot;</span>&gt;</span>修改姓名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;age++&quot;</span>&gt;</span>增长年龄<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;job.j1.salary++&quot;</span>&gt;</span>涨薪<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">import</span> &#123;ref,reactive,toRef,toRefs,shallowReactive,shallowRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// let person = shallowReactive(&#123; //只考虑第一层数据的响应式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">age</span>:<span class="number">18</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">job</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">j1</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">salary</span>:<span class="number">20</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//对对象不进行响应式处理</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 而ref会求助reative将对象类型转化为响应式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> x = <span class="title function_">shallowRef</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">y</span>:<span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;******&#x27;</span>,x) <span class="comment">// RefImpl对象中的value值为object对象不是proxy对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">//返回一个对象（常用）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				x,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				person,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				...<span class="title function_">toRefs</span>(person)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>











<h2 id="2-readonly-与-shallowReadonly（加工）"><a href="#2-readonly-与-shallowReadonly（加工）" class="headerlink" title="2.readonly 与 shallowReadonly（加工）"></a>2.readonly 与 shallowReadonly（加工）</h2><ul>
<li>readonly: 让一个响应式数据变为只读的（对象内的数据都不能修改）（深只读）。</li>
<li>shallowReadonly：让一个响应式数据变为只读的(只考虑对象的第一层)（浅只读）。</li>
<li>应用场景: 不希望数据被修改时。</li>
</ul>
<p>返回加工后的新对像</p>
<blockquote>
<p>注意直接写数据导出不使用ref、reactive等加工，在操作数据时可以进行修改，只是vue检测不到</p>
<p>而使用readonly或shallowReadonly加工数据都不能进行修改，修改还会发出警告</p>
</blockquote>
<blockquote>
<p>使用场景使用他人定义的组件传过来的响应式数据并且不让修改时</p>
</blockquote>
<h2 id="3-toRaw-与-markRaw（加工）"><a href="#3-toRaw-与-markRaw（加工）" class="headerlink" title="3.toRaw 与 markRaw（加工）"></a>3.toRaw 与 markRaw（加工）</h2><ul>
<li>toRaw：<ul>
<li>作用：将一个由<code>reactive</code>生成的<strong style="color:orange">响应式对象</strong>转为<strong style="color:orange">普通对象</strong>。（不能处理ref生成的）</li>
<li>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。</li>
</ul>
</li>
<li>markRaw：<ul>
<li>作用：标记一个对象，使其永远不会再成为响应式对象。</li>
<li>应用场景:<ol>
<li>有些值不应被设置为响应式的，例如复杂的第三方类库等。</li>
<li>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。</li>
</ol>
</li>
</ul>
</li>
</ul>
<p>原始数据可以修改只是不是响应式的了（即vue不在进行监视了）</p>
<h2 id="4-customRef"><a href="#4-customRef" class="headerlink" title="4.customRef"></a>4.customRef</h2><ul>
<li><p>作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。</p>
</li>
<li><p>实现防抖效果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; v-model=&quot;keyword&quot;&gt;</span><br><span class="line">	&lt;h3&gt;&#123;&#123;keyword&#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;ref,customRef&#125; from &#x27;vue&#x27;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name:&#x27;Demo&#x27;,</span><br><span class="line">		setup()&#123;</span><br><span class="line">			// let keyword = ref(&#x27;hello&#x27;) //使用Vue准备好的内置ref</span><br><span class="line">            </span><br><span class="line">			//自定义一个myRef</span><br><span class="line">			function myRef(value,delay)&#123;</span><br><span class="line">				let timer</span><br><span class="line">				//通过customRef去实现自定义</span><br><span class="line">				return customRef((track,trigger)=&gt;&#123;</span><br><span class="line">                    // 必须返回一个对象</span><br><span class="line">					return&#123;</span><br><span class="line">						get()&#123;</span><br><span class="line">							track() //告诉Vue这个value值是需要被“追踪”的，跟踪返回值</span><br><span class="line">							return value</span><br><span class="line">						&#125;,</span><br><span class="line">						set(newValue)&#123;</span><br><span class="line">							clearTimeout(timer)</span><br><span class="line">							timer = setTimeout(()=&gt;&#123;</span><br><span class="line">								value = newValue // 写到这只是修改了数据但无法检测</span><br><span class="line">								trigger() //告诉Vue去更新界面，重新解析模板</span><br><span class="line">							&#125;,delay)</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">            </span><br><span class="line">			let keyword = myRef(&#x27;hello&#x27;,500) //使用程序员自定义的ref</span><br><span class="line">			return &#123;</span><br><span class="line">				keyword</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-provide-与-inject"><a href="#5-provide-与-inject" class="headerlink" title="5.provide 与 inject"></a>5.provide 与 inject</h2><p>只能实现上对下传输数据proveid注册传递数据，inject接受</p>
<blockquote>
<p>按照执行顺序父在子之前导致inject找不到子注册的</p>
</blockquote>
<ul>
<li><p>作用：实现<strong style="color:#DD5145">祖与后代组件间</strong>通信</p>
</li>
<li><p>套路：父组件有一个 <code>provide</code> 选项来提供数据，后代组件有一个 <code>inject</code> 选项来开始使用这些数据</p>
</li>
<li><p>具体写法：</p>
<ol>
<li><p>祖组件中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;奔驰&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;40万&#x27;</span>&#125;)</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>,car)</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>后代组件中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props,context</span>)&#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;car&#125;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ZYS10000/article/details/123243486">参考</a></p>
<p>一、概念解析</p>
<p><strong>成对出现：</strong>provide和inject是成对出现的</p>
<p><strong>作用</strong>：用于父组件向子孙组件传递数据</p>
<p><strong>使用方法：</strong>provide在父组件中返回要传给下级的数据，inject在需要使用这个数据的子辈组件或者孙辈等下级组件中注入数据。</p>
<p><strong>使用场景：</strong>由于vue有$parent属性可以让子组件访问父组件。但孙组件想要访问祖先组件就比较困难。通过provide&#x2F;inject可以轻松实现<strong>跨级访问父组件</strong>的数据</p>
<h2 id="6-响应式数据的判断"><a href="#6-响应式数据的判断" class="headerlink" title="6.响应式数据的判断"></a>6.响应式数据的判断</h2><ul>
<li>isRef: 检查一个值是否为一个 ref 对象</li>
<li>isReactive: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li>
<li>isReadonly: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li>
<li>isProxy: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li>
</ul>
<h1 id="四、Composition-API-的优势组合式API"><a href="#四、Composition-API-的优势组合式API" class="headerlink" title="四、Composition API 的优势组合式API"></a>四、Composition API 的优势组合式API</h1><h2 id="1-Options-API-存在的问题"><a href="#1-Options-API-存在的问题" class="headerlink" title="1.Options API 存在的问题"></a>1.Options API 存在的问题</h2><p>使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。</p>
<div style="width:60%;height:370px;overflow:hidden;float:left">
    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image" style="width:100%;float:left">
</div>
<div style="width:40%;height:370px;overflow:hidden;float:left">
    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image" style="zoom:50%;width:100%;left"> 
</div>


















<h2 id="2-Composition-API-的优势"><a href="#2-Composition-API-的优势" class="headerlink" title="2.Composition API 的优势"></a>2.Composition API 的优势</h2><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。hook函数</p>
<div style="width:50%;height:340px;overflow:hidden;float:left">
    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image" style="height:360px">
</div>
<div style="width:50%;height:340px;overflow:hidden;float:left">
    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image" style="height:360px">
</div>





























<h1 id="五、新的组件"><a href="#五、新的组件" class="headerlink" title="五、新的组件"></a>五、新的组件</h1><h2 id="1-Fragment"><a href="#1-Fragment" class="headerlink" title="1.Fragment"></a>1.Fragment</h2><ul>
<li>在Vue2中: 组件必须有一个根标签</li>
<li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li>
<li>好处: 减少标签层级, 减小内存占用</li>
</ul>
<h2 id="2-Teleport"><a href="#2-Teleport" class="headerlink" title="2.Teleport"></a>2.Teleport</h2><ul>
<li><p>什么是Teleport？—— <code>Teleport</code> 是一种能够将我们的<strong style="color:#DD5145">组件html结构</strong>移动到指定位置的技术。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to=&quot;移动位置&quot;&gt;  // html body 也可以写标签id名</span><br><span class="line">	&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;</span><br><span class="line">		&lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">			&lt;h3&gt;我是一个弹窗&lt;/h3&gt;</span><br><span class="line">			&lt;button @click=&quot;isShow = false&quot;&gt;关闭弹窗&lt;/button&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-Suspense"><a href="#3-Suspense" class="headerlink" title="3.Suspense"></a>3.Suspense</h2><ul>
<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li><p>使用步骤：</p>
<ul>
<li><p>异步引入组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//  defineAsyncComponent传入一个函数要求有返回值</span></span><br><span class="line"><span class="comment">// 定时器设定展示时间</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>)) </span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default（正真展示的）</code> 与 <code>fallback（应急的）</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;app&quot;&gt;</span><br><span class="line">		&lt;h3&gt;我是App组件&lt;/h3&gt;</span><br><span class="line">		&lt;Suspense&gt; 内置的组件，底层通过插槽实现的</span><br><span class="line">			&lt;template v-slot:default&gt;</span><br><span class="line">                得到后，展示真实的组件内容</span><br><span class="line">				&lt;Child/&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">			&lt;template v-slot:fallback&gt;</span><br><span class="line">				异步引入的组件未回来前</span><br><span class="line">				&lt;h3&gt;加载中.....&lt;/h3&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">		&lt;/Suspense&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">			<span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">				<span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">					<span class="title function_">resolve</span>(&#123;sum&#125;)</span><br><span class="line">				&#125;,<span class="number">1000</span>)</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">await</span> p</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>







<h1 id="六、其他"><a href="#六、其他" class="headerlink" title="六、其他"></a>六、其他</h1><h2 id="1-全局API的转移"><a href="#1-全局API的转移" class="headerlink" title="1.全局API的转移"></a>1.全局API的转移</h2><ul>
<li><p>Vue 2.x 有许多全局 API 和配置。</p>
<ul>
<li><p>例如：注册全局组件、注册全局指令等。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册全局组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//注册全局指令</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">inserted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Vue3.0中对这些API做出了调整：</p>
<ul>
<li><p>将全局的API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p>
<table>
<thead>
<tr>
<th>2.x 全局 API（<code>Vue</code>）</th>
<th>3.x 实例 API (<code>app</code>)</th>
</tr>
</thead>
<tbody><tr>
<td>Vue.config.xxxx</td>
<td>app.config.xxxx</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td><strong style="color:#DD5145">移除</strong></td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive自定义指令</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin混入</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use使用组件</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype原型</td>
<td>app.config.globalProperties</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h2 id="2-其他改变"><a href="#2-其他改变" class="headerlink" title="2.其他改变"></a>2.其他改变</h2><ul>
<li><p>data选项应始终被声明为一个函数。</p>
</li>
<li><p>过度类名的更改：</p>
<ul>
<li><p>Vue2.x写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Vue3.x写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li><p><strong style="color:#DD5145">移除</strong><code>v-on.native</code>修饰符&#x3D;&gt;原生事件(vue2父组件给子组件绑定事件时默认未自定事件)</p>
<ul>
<li><p>父组件中绑定事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class="line">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子组件中声明自定义事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    emits: [&#x27;close&#x27;] // z自定事件，指定自定事件的配置项未指定click未自定义事件，自定后也为自定事件</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>过滤器（filter）</p>
<blockquote>
<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>
</blockquote>
</li>
<li><p>……</p>
</li>
</ul>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/vue3/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-vue2" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/vue2/">vue2</a>
	
    </h1>
  


  
  
<a href="/vue2/" class="archive-article-date">
        <time datetime="2023-02-16T14:41:18.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-02-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p><img src="/vue2/image-20220523015710986.png" alt="image-20220523015710986"></p>
<h1 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li>vue是什么？<ul>
<li>vue是javascript的一门渐进式语言</li>
</ul>
</li>
<li>什么是渐进式？<ul>
<li>渐进式就是逐渐使用，集成更多的功能</li>
</ul>
</li>
<li>什么是库什么是框架?<ul>
<li>库是方法的集合、框架有一套语法规则</li>
</ul>
</li>
</ol>
<h2 id="vue基础"><a href="#vue基础" class="headerlink" title="vue基础"></a>vue基础</h2><h3 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">dir</span>=<span class="string">&quot;ltr&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>使用vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vuejs/vue.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- this指向vue实例对象 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &#123;&#123;&#125;&#125;里面只能写表达式,且可以读取vue实例中的data属性--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 插值语法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指令语法 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-bind 简写 ： --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- html属性不能使用双大括号形式绑定，只能使用v-bind指令 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-bind用于绑定一个多多个属性值，或者像一个组件创建props值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>vue<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>; <span class="comment">// 全局设置 阻止 Vue 在启动时的生成提示 </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 创建vue实例</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>, <span class="comment">// el用于指定当前vue的容器，通常用css选择器也可以使用dom获取元素方法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123; <span class="comment">// data用于存储数据，数据供el所指定的容器使用</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>: <span class="string">&#x27;https://cn.vuejs.org/&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>多个容器对应一个vue实例</p>
<ul>
<li>但vue只解析前面那个</li>
</ul>
</li>
<li><p>一个容器对应多个vue实例</p>
<ul>
<li>不能执行会报错</li>
</ul>
</li>
<li><p>只能一对一</p>
</li>
</ul>
<h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">dir</span>=<span class="string">&quot;ltr&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>使用vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vuejs/vue.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-bind 单向绑定只能data影响页面的值 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- v-bind 简写为 ： --&gt;</span></span><br><span class="line">    单项数据绑定<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;name&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-model相互影响 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-model 只能应用于表单元素 --&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- v-model:value 可以简写为v-model 因为v-mondel默认收集的就是value值--&gt;</span></span><br><span class="line">    双向数据绑定 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model:value</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>; <span class="comment">// 全局设置 阻止 Vue 在启动时的生成提示 </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 创建vue实例</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>, <span class="comment">// el用于指定当前vue的容器，通常用css选择器也可以使用dom获取元素方法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123; <span class="comment">// data用于存储数据，数据供el所指定的容器使用</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="el与data的两种写法"><a href="#el与data的两种写法" class="headerlink" title="el与data的两种写法"></a>el与data的两种写法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">dir</span>=<span class="string">&quot;ltr&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>使用vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vuejs/vue.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>vue<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>; <span class="comment">// 全局设置 阻止 Vue 在启动时的生成提示 </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// el的两种写法都可以</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/* const v = new Vue(&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // 写法一</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      // el: &#x27;#root&#x27;, // el用于指定当前vue的容器，通常用css选择器也可以使用dom获取元素方法</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      data: &#123; // data用于存储数据，数据供el所指定的容器使用</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        name: &#x27;张三&#x27;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        url: &#x27;https://cn.vuejs.org/&#x27;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    &#125;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    console.log(v);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    // 挂载、</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    // 写法二</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    v.$mount(&#x27;#root&#x27;) */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// data的两中写法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> v = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 写法一</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 写法一：对象式 </span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data: &#123; </span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   name: &#x27;张三&#x27;,</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   url: &#x27;https://cn.vuejs.org/&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 写法二：函数式 组件时使用</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data:function()&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   console.log(this); //这里的this指向vue实例对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   return &#123; name:&quot;张三&quot;&#125;;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125;,</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 箭头函数</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 不建议使用</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">//这里的this指向windom</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123; <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 推荐使用</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data() &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   return &#123; name: &#x27;张三&#x27; &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h3 id="mvvm模型"><a href="#mvvm模型" class="headerlink" title="mvvm模型"></a>mvvm模型</h3><p>数据驱动页面的改变</p>
<ol>
<li><p>M：模型(Model) ：对应 data 中的数据（数据层）</p>
</li>
<li><p>V：视图(View) ：模板（视图层DOM）</p>
</li>
<li><p>VM：视图模型(ViewModel) ： Vue 实例对象（vue原码）</p>
</li>
</ol>
<img src="/vue2/image-20220517174847948-1676560216507217.png" alt="image-20220517174847948">

<p>观察</p>
<ol>
<li>data中的所有属性，最后出现在vm身上</li>
<li>vm身上所有属性及vue原型上的所有属性可以直接在vue模板上使用</li>
<li></li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">dir</span>=<span class="string">&quot;ltr&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>使用vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vuejs/vue.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>vue<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>; <span class="comment">// 全局设置 阻止 Vue 在启动时的生成提示 </span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&quot;hello&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>: <span class="string">&#x27;http://127.0.0.1:5500/vue/01data/mvvm.html&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(vm);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="数据代理"><a href="#数据代理" class="headerlink" title="数据代理"></a>数据代理</h3><h5 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a><strong>Object.defineProperty</strong></h5><p>方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象。</p>
<h6 id="语法"><a href="#语法" class="headerlink" title="语法"></a><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#%E8%AF%AD%E6%B3%95">语法</a></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(obj, prop, descriptor)</span><br></pre></td></tr></table></figure>

<h6 id="参数"><a href="#参数" class="headerlink" title="参数"></a><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#%E5%8F%82%E6%95%B0">参数</a></h6><ul>
<li><p><code>obj</code></p>
<p>要定义属性的对象。</p>
</li>
<li><p><code>prop</code></p>
<p>要定义或修改的属性的名称或 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol"><code>Symbol</code></a> 。</p>
</li>
<li><p><code>descriptor</code></p>
<p>要定义或修改的属性描述符。</p>
</li>
</ul>
<p>该方法允许精确地添加或修改对象的属性。通过赋值操作添加的普通属性是可枚举的，在枚举对象属性时会被枚举到（<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in"><code>for...in</code></a> 或 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys"><code>Object.keys</code></a><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys"> </a>方法），可以改变这些属性的值，也可以<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete"><code>删除</code></a>这些属性。这个方法允许修改默认的额外选项（或配置）。默认情况下，使用 <code>Object.defineProperty()</code> 添加的属性值是不可修改（immutable）的。</p>
<p>这两种描述符都是对象。它们共享以下可选键值（默认值是指在使用 <code>Object.defineProperty()</code> 定义属性时的默认值）：</p>
<ul>
<li><p><code>configurable</code></p>
<p>当且仅当该属性的 <code>configurable</code> 键值为 <code>true</code> 时，该属性的描述符才能够被改变，同时该属性也能从对应的对象上被删除。 <strong>默认为</strong> **<code>false</code>**。</p>
</li>
<li><p><code>enumerable</code></p>
<p>当且仅当该属性的 <code>enumerable</code> 键值为 <code>true</code> 时，该属性才会出现在对象的枚举属性中。 **默认为 <code>false</code>**。</p>
</li>
</ul>
<p>数据描述符还具有以下可选键值：</p>
<ul>
<li><p><code>value</code></p>
<p>该属性对应的值。可以是任何有效的 JavaScript 值（数值，对象，函数等）。 **默认为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>**。</p>
</li>
<li><p><code>writable</code></p>
<p>当且仅当该属性的 <code>writable</code> 键值为 <code>true</code> 时，属性的值，也就是上面的 <code>value</code>，才能被<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators#assignment_operators"><code>赋值运算符</code> (en-US)</a>改变。 <strong>默认为 <code>false</code>。</strong></p>
</li>
</ul>
<p>存取描述符还具有以下可选键值：</p>
<ul>
<li><p><code>get</code></p>
<p>属性的 getter 函数，如果没有 getter，则为 <code>undefined</code>。当访问该属性时，会调用此函数。执行时不传入任何参数，但是会传入 <code>this</code> 对象（由于继承关系，这里的<code>this</code>并不一定是定义该属性的对象）。该函数的返回值会被用作属性的值。 **默认为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>**。</p>
</li>
<li><p><code>set</code></p>
<p>属性的 setter 函数，如果没有 setter，则为 <code>undefined</code>。当属性值被修改时，会调用此函数。该方法接受一个参数（也就是被赋予的新值），会传入赋值时的 <code>this</code> 对象。 **默认为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>**。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">o</span> <span class="operator">=</span> &#123;&#125;; <span class="comment">// 创建一个新对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在对象中添加一个属性与数据描述符的示例</span></span><br><span class="line">Object.defineProperty(o, <span class="string">&quot;a&quot;</span>, &#123;</span><br><span class="line">  value : <span class="number">37</span>,</span><br><span class="line">  writable : <span class="literal">true</span>,</span><br><span class="line">  enumerable : <span class="literal">true</span>,</span><br><span class="line">  configurable : <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象 o 拥有了属性 a，值为 37</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在对象中添加一个设置了存取描述符属性的示例</span></span><br><span class="line"><span class="type">var</span> <span class="variable">bValue</span> <span class="operator">=</span> <span class="number">38</span>;</span><br><span class="line">Object.defineProperty(o, <span class="string">&quot;b&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">// 使用了方法名称缩写（ES2015 特性）</span></span><br><span class="line">  <span class="comment">// 下面两个缩写等价于：</span></span><br><span class="line">  <span class="comment">// get : function() &#123; return bValue; &#125;,</span></span><br><span class="line">  <span class="comment">// set : function(newValue) &#123; bValue = newValue; &#125;,</span></span><br><span class="line">  <span class="comment">// 当有人读取o的b属性时执行get的，get的函数的返回值赋值给b</span></span><br><span class="line">  get() &#123; <span class="keyword">return</span> bValue; &#125;,</span><br><span class="line">  <span class="comment">// 当有人修改o的b属性时执行get的，get的函数的返回值赋值给b</span></span><br><span class="line">  set(newValue) &#123; bValue = newValue; &#125;, <span class="comment">// 注意不要造成死循环</span></span><br><span class="line">  enumerable : <span class="literal">true</span>, <span class="comment">// 可以枚举</span></span><br><span class="line">  configurable : <span class="literal">true</span>  <span class="comment">// 可以修改</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.b; <span class="comment">// 38</span></span><br><span class="line"><span class="comment">// 对象 o 拥有了属性 b，值为 38</span></span><br><span class="line"><span class="comment">// 现在，除非重新定义 o.b，o.b 的值总是与 bValue 相同</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据描述符和存取描述符不能混合使用</span></span><br><span class="line">Object.defineProperty(o, <span class="string">&quot;conflict&quot;</span>, &#123;</span><br><span class="line">  value: <span class="number">0x9f91102</span>,</span><br><span class="line">  get() &#123; <span class="keyword">return</span> <span class="number">0xdeadbeef</span>; &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 抛出错误 TypeError: value appears only in data descriptors, get appears only in accessor descriptors</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>vm将data对象存在了_data</p>
<p><img src="/vue2/image-20221117215736440-1676560216507218.png" alt="image-20221117215736440"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;hello world&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>; <span class="comment">// 阻止vue在启动时产生生产提示</span></span><br><span class="line">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: data,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(vm);</span><br></pre></td></tr></table></figure>

<p><img src="/vue2/image-20221117215518869-1676560216507219.png" alt="image-20221117215518869"></p>
<p><img src="/vue2/image-20221117215102318-1676560216507220.png" alt="image-20221117215102318"></p>
<h5 id="何为数据代理"><a href="#何为数据代理" class="headerlink" title="何为数据代理"></a>何为数据代理</h5><p>通过另一个数据对象修改一个数据对象</p>
<p><strong>两个代理数据方法</strong></p>
<p>get()</p>
<p>set()</p>
<h5 id="vue数据代理"><a href="#vue数据代理" class="headerlink" title="vue数据代理"></a>vue数据代理</h5><p>1、Vue中的数据代理：</p>
<blockquote>
<p>通过vm对象来代理data对象中的属性的操作（读 &#x2F; 写 ）</p>
</blockquote>
<p>2、Vue中数据代理的好处：</p>
<blockquote>
<p>更加方便的操作data中数据</p>
</blockquote>
<p>3、基本原理：</p>
<pre><code>&gt; 通过Object.defineProperty()把data对象中所有属性添加到vm上。
&gt;
&gt; 为每一个添加到vm上的属性，都指定一个getter / setter
&gt;
&gt; 在getter / setter内部去操作（读、写）data中对应的属性
</code></pre>
<p>​	还进行了数据拦截</p>
<p><img src="/vue2/image-20220517200652516.png" alt="image-20220517200652516"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">dir</span>=<span class="string">&quot;ltr&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>使用vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vuejs/vue.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>; <span class="comment">// 全局设置 阻止 Vue 在启动时的生成提示 </span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&quot;hello&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(vm.<span class="property">_data</span>); <span class="comment">// vm中的_data 就是 上面的data</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(vm);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h3><h4 id="点击事件"><a href="#点击事件" class="headerlink" title="点击事件"></a>点击事件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;使用vue&lt;/title&gt;</span><br><span class="line">  &lt;script src=&quot;../vuejs/vue.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line">    &lt;h1&gt;hello &#123;&#123; name &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;button v-on:click=&quot;a&quot;&gt;提醒事件1&lt;/button&gt;</span><br><span class="line">    &lt;button v-on:click=&quot;b()&quot;&gt;提醒事件2&lt;/button&gt;</span><br><span class="line">    &lt;button v-on:click=&quot;c(11,$event)&quot;&gt;提醒事件3&lt;/button&gt;</span><br><span class="line">    &lt;!-- 简写形式 --&gt;</span><br><span class="line">    &lt;button @click=&quot;a&quot;&gt;提醒事件4&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    Vue.config.productionTip = false; // 全局设置 阻止 Vue 在启动时的生成提示 </span><br><span class="line"></span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">      el: &quot;#root&quot;,</span><br><span class="line">      data: &#123; // data中的会进行数据代理</span><br><span class="line">        name: &quot;hello&quot;,</span><br><span class="line">        url: &#x27;http://127.0.0.1:5500/vue/01data/mvvm.html&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      // 也可以写在data中，但写在data中会进行数据代理</span><br><span class="line">      methods: &#123; // 不会进行数据代理</span><br><span class="line">        a(e) &#123;</span><br><span class="line">          console.log(e); 		 // 调用时不加括号会传过来事件对象</span><br><span class="line">          console.log(&#x27;事件1&#x27;);  	//this为vm即vue实例对象</span><br><span class="line">        &#125;,</span><br><span class="line">        d:()=&gt;&#123;</span><br><span class="line">          console.log(this); // this =&gt; wind</span><br><span class="line">        &#125;</span><br><span class="line">        b(e) &#123;</span><br><span class="line">          // console.log(num);</span><br><span class="line">          console.log(e); // 调用时加括号可以传入参数，不传入$event,事件对象将不会传过来</span><br><span class="line">          console.log(&quot;事件2&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">        c(num, e) &#123;</span><br><span class="line">          console.log(e); // 加括号传入$event,事件对象将才会传过来</span><br><span class="line">          console.log(&quot;事件3&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    console.log(vm);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<p>绑定监听 </p>
<ol>
<li>v-on:xxx&#x3D;”fun” &#x3D;&gt; v-on:click&#x3D;’ fun’</li>
<li>@xxx&#x3D;”fun” &#x3D;&gt; @click&#x3D;’fun ‘</li>
<li>@xxx&#x3D;”fun(参数)”</li>
<li>默认事件形参: event</li>
<li>隐含属性对象:</li>
</ol>
<h5 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h5><p>Vue中常用的事件修饰符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> .<span class="property">prevent</span> : 阻止事件的默认行为 event.<span class="title function_">preventDefault</span>()</span><br><span class="line"><span class="number">2.</span> .<span class="property">stop</span> : 停止事件冒泡 event.<span class="title function_">stopPropagation</span>()</span><br><span class="line"><span class="number">3.</span> .<span class="property">once</span> : 事件只触发一次</span><br><span class="line"><span class="number">4.</span> .<span class="property">capture</span>: 使用事件捕获模式</span><br><span class="line"><span class="number">5.</span> .<span class="property">self</span> 只有event.<span class="property">target</span> 是当前元素时才触发事件</span><br><span class="line"><span class="number">6.</span> .<span class="property">passive</span>: 事件的默认行为立即执行，无需等待事件回调执行完毕即解决函数先执行效果后（移动端）</span><br></pre></td></tr></table></figure>

<p>修饰符可以连续写</p>
<p><strong>.prevent.stop</strong></p>
<p>wheel事件：鼠标滚轮事件</p>
<p>scroll事件：为滚动条事件</p>
<h5 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h5><p>@keydown按下时就触发</p>
<p>@keyup松手时触发</p>
<p>获取按键编码e.keyCode 不建议使用</p>
<p>获取按键名e.key</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="title class_">Vue</span>中常用的按键别名：（修饰）实际的按键为大驼峰法</span><br><span class="line">	回车 =&gt; enter</span><br><span class="line">	删除 =&gt; <span class="keyword">delete</span> (捕获“删除”和“退格”键)</span><br><span class="line">	退出 =&gt; esc</span><br><span class="line">	空格 =&gt; space</span><br><span class="line">	换行 =&gt; tab (特殊，必须配合keydown去使用)切换焦点，松开时已经切换走了</span><br><span class="line">	上 =&gt; up</span><br><span class="line">	下 =&gt; down</span><br><span class="line">	左 =&gt; left</span><br><span class="line">	右 =&gt; right</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span><span class="title class_">Vue</span>未提供别名的按键，可以使用按键原始的key值去绑定，但注意要转为kebab-<span class="keyword">case</span>（短横线命名）</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>系统修饰键（用法特殊）：ctrl、alt、shift、meta</span><br><span class="line">	(<span class="number">1</span>).配合keyup使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发。同时松开时会触发两次</span><br><span class="line">	(<span class="number">2</span>).配合keydown使用：正常触发事件。</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>也可以使用keyCode去指定具体的按键（不推荐）</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">keyCodes</span>.自定义键名 = 键码，可以去定制按键别名</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ctrl+y</p>
<p><img src="/vue2/image-20221118093039706.png" alt="image-20221118093039706"></p>
<h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p><img src="/vue2/image-20230215154620375.png" alt="image-20230215154620375">定义：要用的属性不存在，要通过已有属性计算得来<br>原理：底层借助了Objcet.defineProperty方法提供的getter和setter<br>get函数什么时候执行？<br>(1).初次读取时会执行一次<br>(2).当依赖的数据发生改变时会被再次调用<br>优势：与methods实现相比，内部有缓存机制（复用），效率更高，调试方便<br>备注：<br>计算属性最终会出现在vm上，直接读取使用即可<br>如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生改变</p>
<p><a href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7computed">计算属性</a></p>
<h3 id="监视属性"><a href="#监视属性" class="headerlink" title="监视属性"></a>监视属性</h3><p><img src="/vue2/image-20221118214103665.png" alt="image-20221118214103665"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.10/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&#x27;root&#x27;&gt;</span><br><span class="line">    &lt;h2&gt;今天天气很&#123;&#123;info&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeWeather&quot;&gt;切换天气&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    let vm = new Vue(&#123;</span><br><span class="line">      el: &quot;#root&quot;,</span><br><span class="line">      data: &#123;</span><br><span class="line">        isHot: true</span><br><span class="line">      &#125;,</span><br><span class="line">      //函数</span><br><span class="line">      methods: &#123;</span><br><span class="line">        changeWeather() &#123;</span><br><span class="line">          this.isHot = !this.isHot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      //计算属性</span><br><span class="line">      computed: &#123;</span><br><span class="line">        info() &#123;</span><br><span class="line">          return this.isHot ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      // 写法一</span><br><span class="line">      watch: &#123;</span><br><span class="line">        // 属性和计算属性都可进行监视</span><br><span class="line">        isHot: &#123;</span><br><span class="line">          immediate: true,// 默认为false，初始化时立即自动调用一次原有值为undefined</span><br><span class="line">          //默认函数</span><br><span class="line">          // 当属性值修改后调用</span><br><span class="line">          handler(newValue, oldValue) &#123;</span><br><span class="line">            console.log(&#x27;新值的&#x27;, newValue);</span><br><span class="line">            console.log(&quot;原有的&quot;, oldValue);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    console.log(vm);</span><br><span class="line">		//写法二</span><br><span class="line">    vm.$watch(&#x27;info&#x27;, &#123;</span><br><span class="line">      immediate: true,// 默认为false，初始化时立即自动调用一次原有值为undefined</span><br><span class="line">      //默认函数</span><br><span class="line">      // 当属性值修改后调用</span><br><span class="line">      handler(newValue, oldValue) &#123;</span><br><span class="line">        console.log(&#x27;新值的&#x27;, newValue);</span><br><span class="line">        console.log(&quot;原有的&quot;, oldValue);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="深度监视"><a href="#深度监视" class="headerlink" title="深度监视"></a>深度监视</h3><h4 id="多级监视"><a href="#多级监视" class="headerlink" title="多级监视"></a>多级监视</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">      <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">isHot</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">name</span>:&#123;</span><br><span class="line">          <span class="attr">a</span>:<span class="string">&#x27;asd&#x27;</span>,</span><br><span class="line">          <span class="attr">b</span>:<span class="string">&#x27;asd&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 写法一</span></span><br><span class="line">      <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="comment">// 属性和计算属性都可进行监视</span></span><br><span class="line">        <span class="attr">isHot</span>: &#123;</span><br><span class="line">          <span class="attr">immediate</span>: <span class="literal">true</span>,<span class="comment">// 默认为false，初始化时立即自动调用一次原有值为undefined</span></span><br><span class="line">          <span class="comment">//默认函数</span></span><br><span class="line">          <span class="comment">// 当属性值修改后调用</span></span><br><span class="line">          <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值的&#x27;</span>, newValue);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原有的&quot;</span>, oldValue);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 监视多级属性中的某一个属性</span></span><br><span class="line">        <span class="comment">//即只监视name中的a属性</span></span><br><span class="line">        <span class="string">&#x27;name.a&#x27;</span>:&#123;</span><br><span class="line">          <span class="attr">immediate</span>: <span class="literal">true</span>,<span class="comment">// 默认为false，初始化时立即自动调用一次原有值为undefined</span></span><br><span class="line">          <span class="comment">//默认函数</span></span><br><span class="line">          <span class="comment">// 当属性值修改后调用</span></span><br><span class="line">          <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值的&#x27;</span>, newValue);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原有的&quot;</span>, oldValue);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="深度监视-1"><a href="#深度监视-1" class="headerlink" title="深度监视"></a>深度监视</h4><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH/?p=23&spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=031f631a87cca114e71194f12ec3fc3f">https://www.bilibili.com/video/BV1Zy4y1K7SH/?p=23&amp;spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=031f631a87cca114e71194f12ec3fc3f</a></p>
<p>9分钟处</p>
<p><img src="/vue2/image-20221119002623747.png" alt="image-20221119002623747"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">      <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">isHot</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">name</span>:&#123;</span><br><span class="line">          <span class="attr">a</span>:<span class="string">&#x27;asd&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 写法一</span></span><br><span class="line">      <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="comment">// 属性和计算属性都可进行监视</span></span><br><span class="line">        <span class="attr">isHot</span>: &#123;</span><br><span class="line">          <span class="attr">immediate</span>: <span class="literal">true</span>,<span class="comment">// 默认为false，初始化时立即自动调用一次原有值为undefined</span></span><br><span class="line">          <span class="comment">//默认函数</span></span><br><span class="line">          <span class="comment">// 当属性值修改后调用</span></span><br><span class="line">          <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值的&#x27;</span>, newValue);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原有的&quot;</span>, oldValue);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 监视多级属性中的所有属性</span></span><br><span class="line">        <span class="string">&#x27;name.a&#x27;</span>:&#123;</span><br><span class="line">          <span class="attr">deep</span>:<span class="literal">true</span>; <span class="comment">// 开启深度监视</span></span><br><span class="line">          <span class="attr">immediate</span>: <span class="literal">true</span>,<span class="comment">// 默认为false，初始化时立即自动调用一次原有值为undefined</span></span><br><span class="line">          <span class="comment">//默认函数</span></span><br><span class="line">          <span class="comment">// 当属性值修改后调用</span></span><br><span class="line">          <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值的&#x27;</span>, newValue);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原有的&quot;</span>, oldValue);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="简写形式"><a href="#简写形式" class="headerlink" title="简写形式"></a>简写形式</h4><p>简写的代价是只能配置一个发生修改后执行的函数</p>
<p>方式一：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">      <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">isHot</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">name</span>:&#123;</span><br><span class="line">          <span class="attr">a</span>:<span class="string">&#x27;asd&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 写法一</span></span><br><span class="line">      <span class="attr">watch</span>: &#123;</span><br><span class="line">        完整写法</span><br><span class="line">        <span class="comment">// 属性和计算属性都可进行监视</span></span><br><span class="line">        <span class="attr">isHot</span>: &#123;</span><br><span class="line">          <span class="attr">immediate</span>: <span class="literal">true</span>,<span class="comment">// 默认为false，初始化时立即自动调用一次原有值为undefined</span></span><br><span class="line">          <span class="comment">//默认函数</span></span><br><span class="line">          <span class="comment">// 当属性值修改后调用</span></span><br><span class="line">          <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值的&#x27;</span>, newValue);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原有的&quot;</span>, oldValue);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        简写形式</span><br><span class="line">        <span class="title function_">isHot</span>(<span class="params">newValue, oldValue</span>)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值的&#x27;</span>, newValue);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原有的&quot;</span>, oldValue);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>方式二</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vm.$watch(<span class="string">&#x27;info&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">immediate</span>: <span class="literal">true</span>,<span class="comment">// 默认为false，初始化时立即自动调用一次原有值为undefined</span></span><br><span class="line">      <span class="comment">//默认函数</span></span><br><span class="line">      <span class="comment">// 当属性值修改后调用</span></span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值的&#x27;</span>, newValue);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原有的&quot;</span>, oldValue);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">简写</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">vm.$watch(<span class="string">&#x27;info&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="function"><span class="params">this</span>=&gt;</span>vue</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="计算属性与监视属性"><a href="#计算属性与监视属性" class="headerlink" title="计算属性与监视属性"></a>计算属性与监视属性</h3><blockquote>
<p>计算属性不能进行异步数据处理</p>
</blockquote>
<p><img src="/vue2/image-20221119011440974.png" alt="image-20221119011440974"> </p>
<h2 id="vue创建项目"><a href="#vue创建项目" class="headerlink" title="vue创建项目"></a>vue创建项目</h2><h3 id="方法一自己配置"><a href="#方法一自己配置" class="headerlink" title="方法一自己配置"></a>方法一自己配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#vuecli-demo项目名 //项目名不能有大写字母中文和特殊符号</span></span><br><span class="line"></span><br><span class="line">vue create vuecli-demo</span><br></pre></td></tr></table></figure>

<p>选vue2</p>
<p><img src="/vue2/image-20221115154844702.png" alt="image-20221115154844702"></p>
<p>成功</p>
<p><img src="/vue2/image-20221115154908437.png" alt="image-20221115154908437"></p>
<p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#启动脚手架项目</span><br><span class="line">npm run serve 或 yarn serve</span><br></pre></td></tr></table></figure>

<p> 项目中各个文件的含义</p>
<p><img src="/vue2/image-20221115162305752.png" alt="image-20221115162305752"></p>
<p><img src="/vue2/image-20221115164234136.png" alt="image-20221115164234136"></p>
<p><img src="/vue2/image-20221115164326583.png" alt="image-20221115164326583"></p>
<h2 id="vue实例"><a href="#vue实例" class="headerlink" title="vue实例"></a>vue实例</h2><p>html文件</p>
<h3 id="创建vue实例"><a href="#创建vue实例" class="headerlink" title="创建vue实例"></a>创建vue实例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="comment">//选择</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="数据与方法"><a href="#数据与方法" class="headerlink" title="数据与方法"></a>数据与方法</h3><p>当一个 Vue 实例被创建时，它将 <code>data</code> 对象中的所有的 property 加入到 Vue 的<strong>响应式系统</strong></p>
<p>中。当这些 property 的值发生改变时，视图将会产生“响应”，即匹配更新为新的值。</p>
<p>当这些数据改变时，视图会进行重渲染。值得注意的是只有当实例被创建时就已经存在于 </p>
<p><code>data</code> 中的 property 才是<strong>响应式</strong>的。也就是说如果你添加一个新的 property，比如：</p>
<p>将b也加到模板中会报未定的错误</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.<span class="property">b</span> = <span class="string">&#x27;hi&#x27;</span></span><br></pre></td></tr></table></figure>

<p>那么对 <code>b</code> 的改动将不会触发任何视图的更新。如果你知道你会在晚些时候需要一个 </p>
<p>property，但是一开始它为空或不存在，那么你仅需要设置一些初始值。比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">  <span class="attr">newTodoText</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">visitCount</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">hideCompletedTodos</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">todos</span>: [],</span><br><span class="line">  <span class="attr">error</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里唯一的例外是使用 <code>Object.freeze()</code>，这会阻止修改现有的 property，也意味着响</p>
<p>应系统无法再<em>追踪</em>变化。</p>
<p><strong>容器和实例是一一对应的不能多对多或一对多</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(obj)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="comment">// 容器和实例是一一对应的不能多对多或一对多</span></span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>, <span class="comment">// css选择器或通过js获取元素</span></span><br><span class="line">  <span class="attr">data</span>: obj <span class="comment">// data中用于存放数据，数据供el指定的容器去使用 </span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 无法更改vm.a与data.a属性值</span></span><br><span class="line"><span class="comment">// 修改还会报错</span></span><br><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; foo &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  &lt;!-- 这里的 <span class="string">`foo`</span> 不会更新！ --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;foo = &#x27;baz&#x27;&quot;</span>&gt;</span>Change it<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>



<p>除了数据 property，Vue 实例还暴露了一些有用的实例 property 与方法。它们都有前缀 </p>
<p><code>$</code>，以便与用户定义的 property 区分开来。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#example&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">vm.<span class="property">$data</span> === data <span class="comment">// =&gt; true</span></span><br><span class="line">vm.<span class="property">$el</span> === <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;example&#x27;</span>) <span class="comment">// =&gt; true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// $watch 是一个实例方法</span></span><br><span class="line"><span class="comment">// 监视指定属性的值变化</span></span><br><span class="line">vm.$watch(<span class="string">&#x27;a&#x27;</span>, <span class="keyword">function</span> (<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">  <span class="comment">// 这个回调将在 `vm.a` 改变后调用</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="实例生命周期"><a href="#实例生命周期" class="headerlink" title="实例生命周期"></a>实例生命周期</h3><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#created"><code>created</code></a> 钩子可以用来在一个实例被创建之后执行代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">a</span>: <span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// this =&gt; vm 而在箭头函数中this =&gt; windom</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;实例被创建完成后执行&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不要在选项 property 或回调上使用箭头函数，比如 <span class="attr">created</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>) 或 vm.$watch(<span class="string">&#x27;a&#x27;</span>, <span class="function"><span class="params">newValue</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">myMethod</span>())。因为箭头函数并没有 <span class="variable language_">this</span>，<span class="variable language_">this</span> 会作为变量一直向上级词法作用域查找，直至找到为止，经常导致 <span class="title class_">Uncaught</span> <span class="title class_">TypeError</span>: <span class="title class_">Cannot</span> read property <span class="keyword">of</span> <span class="literal">undefined</span> 或 <span class="title class_">Uncaught</span> <span class="title class_">TypeError</span>: <span class="variable language_">this</span>.<span class="property">myMethod</span> is not a <span class="keyword">function</span> 之类的错误。</span><br></pre></td></tr></table></figure>

<h3 id="生命周期图"><a href="#生命周期图" class="headerlink" title="生命周期图"></a>生命周期图</h3><p>下图展示了实例的生命周期。你不需要立马弄明白所有的东西，不过随着你的不断学习和使</p>
<p>用，它的参考价值会越来越高。</p>
<blockquote>
<p><strong>$nextTick</strong></p>
</blockquote>
<h2 id="模板语法-1"><a href="#模板语法-1" class="headerlink" title="模板语法"></a>模板语法</h2><p>Vue.js 使用了基于 HTML 的模板语法，允许开发者声明式地将 DOM 绑定至底层 Vue 实例的</p>
<p>数据。所有 Vue.js 的模板都是合法的 HTML，所以能被遵循规范的浏览器和 HTML 解析器</p>
<p>解析。</p>
<p>在底层的实现上，Vue 将模板编译成虚拟 DOM 渲染函数。结合响应系统，Vue 能够智能地</p>
<p>计算出最少需要重新渲染多少组件，并把 DOM 操作次数减到最少。</p>
<h2 id="插值"><a href="#插值" class="headerlink" title="插值"></a>插值</h2><h4 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h4><p>数据绑定最常见的形式就是使用“Mustache”语法 (双大括号) 的文本插值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Message: &#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Mustache 标签将会被替代为对应数据对象上 <code>msg</code> property 的值。无论何时，绑定的数据</p>
<p>对象上 <code>msg</code> property 发生了改变，插值处的内容都会更新。</p>
<p>通过使用 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#v-once">v-once 指令</a>，你也能执行一次性地插值，当数据改变时，插值处的内容不会更</p>
<p>新。但请留心这会影响到该节点上的其它数据绑定</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; map &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-once</span>&gt;</span>&#123;&#123;map1&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">map</span>: <span class="string">&#x27;可以给变&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">map1</span>: <span class="string">&#x27;只会插入一次更改值也不会变&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="v-html原始HTML"><a href="#v-html原始HTML" class="headerlink" title="v-html原始HTML"></a>v-html原始HTML</h4><p>双大括号会将数据解释为普通文本，而非 HTML 代码。为了输出真正的 HTML，你需要使</p>
<p>用 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#v-html"><code>v-html</code> 指令</a>：(使用时有一定的fengxian)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&#x27;app&#x27;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; map &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">    &lt;!-- 设置了v-once的便签元素 只会插入一次更改值也不会变--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-once</span>&gt;</span>&#123;&#123;map1&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">    &lt;!-- 设置了rawhtml 会将其值添加到标签中 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-html</span>=<span class="string">&quot;rawhtml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">rawhtml</span>: <span class="string">&#x27;指令法插入&#x27;</span>,</span><br><span class="line">        <span class="attr">map</span>: <span class="string">&#x27;可以给变&#x27;</span>,</span><br><span class="line">        <span class="attr">map1</span>: <span class="string">&#x27;只会插入一次更改值也不会变&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>你的站点上动态渲染的任意 HTML 可能会非常危险，因为它很容易导致 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Cross-site_scripting">XSS 攻击</a>。请只对</p>
<p>可信内容使用 HTML 插值，<code>**绝不要**对用户提供的内容使用插值。</code></p>
<p>还有对应的v-text</p>
<h4 id="给属性插值"><a href="#给属性插值" class="headerlink" title="给属性插值"></a>给属性插值</h4><p>Mustache 语法不能作用在 HTML attribute 上，遇到这种情况应该使用 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#v-bind"><code>v-bind</code> 指令</a></p>
<p>v-bind: 可以简写为<code>:</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-bind:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span>&gt;</span>Button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果 <code>isButtonDisabled</code> 的值是 <code>null</code>、<code>undefined</code> 或 <code>false</code>，则 <code>disabled</code></p>
<p> attribute 甚至不会被包含在渲染出来的 <code>&lt;button&gt;</code> 元素中。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-bind:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span>&gt;</span>button<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isButtonDisabled</span>: <span class="literal">null</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/vue2/image-20220519005356346.png" alt="image-20220519005356346"></p>
<h2 id="使用javascript表达式"><a href="#使用javascript表达式" class="headerlink" title="使用javascript表达式"></a>使用javascript表达式</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; number + <span class="number">1</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; ok ? <span class="string">&#x27;YES&#x27;</span> : <span class="string">&#x27;NO&#x27;</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; message.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>) &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;div v-<span class="attr">bind</span>:id=<span class="string">&quot;&#x27;list-&#x27; + id&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>这些表达式会在所属 Vue 实例的数据作用域下作为 JavaScript 被解析。有个限制就是，每</p>
<p>个绑定都只能包含<strong>单个表达式</strong>，所以下面的例子都<strong>不会</strong>生效。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 这是语句，不是表达式 变量声明语句 --&gt;</span><br><span class="line">&#123;&#123; <span class="keyword">var</span> a = <span class="number">1</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; a = <span class="number">1</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 流控制也不会生效，请使用三元表达式 --&gt;</span><br><span class="line">&#123;&#123; <span class="keyword">if</span> (ok) &#123; <span class="keyword">return</span> message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p>指令 (Directives) 是带有 <code>v-</code> 前缀的特殊 attribute。指令 attribute 的值预期是**单个 **</p>
<p><strong>JavaScript 表达式</strong> (<code>v-for</code> 是例外情况，稍后我们再讨论)。指令的职责是，当表达式的值</p>
<p>改变时，将其产生的连带影响，响应式地作用于 DOM。回顾我们在介绍中看到的例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;seen&quot;</span>&gt;</span>现在你看到我了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里，<code>v-if</code> 指令将根据表达式 <code>seen</code> 的值的真假来插入&#x2F;移除 <code>&lt;p&gt;</code> 元素。</p>
<h3 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h3><p>一些指令能够接收一个“参数”，在指令名称之后以冒号表示。例如，<code>v-bind</code> 指令可以用</p>
<p>于响应式地更新 HTML attribute：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这里 <code>href</code> 是参数，告知 <code>v-bind</code> 指令将该元素的 <code>href</code> attribute 与表达式 <code>url</code> 的值</p>
<p>绑定。</p>
<p>另一个例子是 <code>v-on</code> 指令，它用于监听 DOM 事件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这里参数是监听的事件名。我们也会更详细地讨论事件处理。</p>
<h3 id="动态参数"><a href="#动态参数" class="headerlink" title="动态参数"></a>动态参数</h3><p>从 2.6.0 开始，可以用方括号括起来的 JavaScript 表达式作为一个指令的参数：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">注意，参数表达式的写法存在一些约束，如之后的“对动态参数表达式的约束”章节所述。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">attributeName</span>]=<span class="string">&quot;url&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="对动态参数的值的约束"><a href="#对动态参数的值的约束" class="headerlink" title="对动态参数的值的约束"></a>对动态参数的值的约束</h3><p>动态参数预期会求出一个字符串，异常情况下值为 <code>null</code>。这个特殊的 <code>null</code> 值可以被显性地用于移除绑定。任何其它非字符串类型的值都将会触发一个警告</p>
<p>动态的设置属性名称</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">:</span>[<span class="attr">att</span>]=<span class="string">&quot;url&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">att</span>: <span class="string">&#x27;herf&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">url</span>: <span class="string">&#x27;http://&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/vue2/image-20220519010845712.png" alt="image-20220519010845712"></p>
<p>还就可以动态设置绑定的事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:</span>[<span class="attr">eventName</span>]=<span class="string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这个示例中，当 <code>eventName</code> 的值为 <code>&quot;focus&quot;</code> 时，<code>v-on:[eventName]</code> 将等价于 <code>v-on:focus</code>。</p>
<ul>
<li>对动态参数的值的约束</li>
</ul>
<p>动态参数预期会求出一个字符串，异常情况下值为 <code>null</code>。这个特殊的 <code>null</code> 值可以被显性地用于移除绑定。任何其它非字符串类型的值都将会触发一个警告</p>
<p>注意事件中设置<strong>null字符串</strong>也会移除事件但不会报错</p>
<ul>
<li>对动态参数表达式的约束</li>
</ul>
<p>动态参数表达式有一些语法约束，因为某些字符，如空格和引号，放在 HTML attribute 名里是无效的。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 这会触发一个编译警告 --&gt;</span><br><span class="line">&lt;a v-bind:[&#x27;foo&#x27; + bar]=&quot;value&quot;&gt; ... &lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>变通的办法是使用没有空格或引号的表达式，或用计算属性替代这种复杂表达式。</p>
<h3 id="缩写"><a href="#缩写" class="headerlink" title="缩写"></a>缩写</h3><p><code>v-</code> 前缀作为一种视觉提示，用来识别模板中 Vue 特定的 attribute。当你在使用 Vue.js 为现有标签添加动态行为 (dynamic behavior) 时，<code>v-</code> 前缀很有帮助，然而，对于一些频繁用到的指令来说，就会感到使用繁琐。同时，在构建由 Vue 管理所有模板的<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Single-page_application">单页面应用程序 (SPA - single page application)</a> 时，<code>v-</code> 前缀也变得没那么重要了。因此，Vue 为 <code>v-bind</code> 和 <code>v-on</code> 这两个最常用的指令，提供了特定简写：</p>
<p>v-dind:   	简写为    :</p>
<p>v-on:   		简写为    @ 		动态 的缩写 @[event]</p>
<h3 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h3><p>双向绑定 </p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/nanchen_J/article/details/120882881#t8">https://blog.csdn.net/nanchen_J/article/details/120882881#t8</a></p>
<p>收集表单数据：</p>
<p>​          若：<input type="text">，则v-model收集的是value值，用户输入的就是value</p>
<p>值。</p>
<p>​          若：<input type="radio">，则v-model收集的是value值，且要给标签配置</p>
<p>value值。</p>
<p>​          若：<input type="checkbox"></p>
<p>​              1.没有配置input的value属性，那么收集的就是checked（勾选 or 未勾选，是布尔</p>
<p>值）</p>
<p>​              2.配置input的value属性:</p>
<p>​                  (1)v-model的初始值是非数组，那么收集的就是checked（勾选 or 未勾选，是布尔</p>
<p>值）</p>
<p>​                  (2)v-model的初始值是数组，那么收集的的就是value组成的数组</p>
<p>备注：v-model的三个修饰符：</p>
<p>​                  lazy：失去焦点再收集数据</p>
<p>​                  number：输入字符串转为有效的数字</p>
<p>​                  trim：输入首尾空格过滤</p>
<h4 id="v-model使用原理"><a href="#v-model使用原理" class="headerlink" title="v-model使用原理"></a>v-<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=model&spm=1001.2101.3001.7020">model</a>使用原理</h4><p>v-model就是vue的双向绑定的指令，能将页面上控件输入的值同步更新到相关绑定的data属性，也会在更新data绑定属性时候，更新页面上输入控件的值。</p>
<p>先看一下简单的v-model使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>v-model的基本使用<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span><span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">message</span>:<span class="string">&#x27;Nanchen&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/vue2/6e1e04bb4abd415ebc006c67d2b484e5.gif" alt="img"></p>
<h4 id="为什么要用到v-model？"><a href="#为什么要用到v-model？" class="headerlink" title="为什么要用到v-model？"></a>为什么要用到v-model？</h4><p>使用非常方便，提高前端开发效率。在view层，model层相互需要数据交互，即可使用v-model。</p>
<p>其使用原理：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>v-model的使用原理<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;changeValue&quot;</span>  <span class="attr">:value</span>=<span class="string">&quot;message&quot;</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- &lt;input type=&quot;text&quot;v-model=&quot;message&quot; /&gt; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">message</span>:<span class="string">&#x27;Nanchen&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">changeValue</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="property">message</span> = e.<span class="property">target</span>.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>oninput 事件在用户输入时触发。</strong></p>
<p><strong>详情请参考<a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/event-oninput.html">菜鸟教程oninput</a></strong></p>
<p>效果与上图一致。</p>
<h4 id="二、v-model结合radio单选按钮使用"><a href="#二、v-model结合radio单选按钮使用" class="headerlink" title="二、v-model结合radio单选按钮使用"></a>二、v-model结合radio单选按钮使用</h4><p>以前写单选按钮：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;one&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;one&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span>/&gt;</span>男</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;two&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;two&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span><span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> /&gt;</span>女</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在要实现双向绑定功能，就是点击哪个性别就会显示在h1里</p>
<p>这里就可以把name去掉，添加v-model</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;one&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;one&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span> /&gt;</span>男</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;two&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;two&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span>/&gt;</span>女</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h5</span>&gt;</span>&#123;&#123;sex&#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/vue2/ac29db16d0f949c885e1eab29769e115.gif" alt="img"></p>
<h4 id="v-model结合checkbox类型的使用"><a href="#v-model结合checkbox类型的使用" class="headerlink" title="v-model结合checkbox类型的使用"></a>v-model结合checkbox类型的使用</h4><p>这里实现一个同意协议的小功能，先看效果：</p>
<p><img src="/vue2/11436b5fd49541db915ab2b47d9437f9.gif" alt="img"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span>&gt;</span>复选框<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;one&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span><span class="attr">id</span>=<span class="string">&quot;one&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isAgree&quot;</span> /&gt;</span>同意协议</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">			您选择的是：&#123;&#123;isAgree&#125;&#125;</span><br><span class="line">			<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;!isAgree&quot;</span>&gt;</span>下一步<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">isAgree</span>:<span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="v-model结合checkbox类型使用（多选）"><a href="#v-model结合checkbox类型使用（多选）" class="headerlink" title="v-model结合checkbox类型使用（多选）"></a>v-model结合checkbox类型使用（多选）</h4><p>先看实现效果：</p>
<p><img src="/vue2/f59fcf602bc54a66b0733eb1ffbdebed.gif" alt="img"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;篮球&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span>篮球</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;hobby1&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;hobby1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;足球&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span>足球</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;hobby2&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;hobby2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;羽毛球&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span>羽毛球</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;hobby3&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;hobby3&quot;</span> <span class="attr">value</span>=<span class="string">&quot;排球&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span>排球</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;hobbies.length&gt;0&quot;</span>&gt;</span>&#123;&#123;hobbies&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">hobbies</span>:[]</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="五、v-model结合checkbox类型使用（值的绑定）"><a href="#五、v-model结合checkbox类型使用（值的绑定）" class="headerlink" title="五、v-model结合checkbox类型使用（值的绑定）"></a>五、v-model结合checkbox类型使用（值的绑定）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">:for</span>=<span class="string">&quot;index&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in arr&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">:name</span>=<span class="string">&quot;&#x27;hobby&#x27;+index&quot;</span>  <span class="attr">:id</span>=<span class="string">&quot;index&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span>  /&gt;</span></span><br><span class="line">				&#123;&#123;item&#125;&#125;</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;hobbies.length&gt;0&quot;</span>&gt;</span>&#123;&#123;hobbies&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">hobbies</span>:[],</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">arr</span>:[<span class="string">&#x27;篮球&#x27;</span>,<span class="string">&#x27;足球&#x27;</span>,<span class="string">&#x27;羽毛球&#x27;</span>,<span class="string">&#x27;排球&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/vue2/f59fcf602bc54a66b0733eb1ffbdebed-16764544502959.gif" alt="img"></p>
<p><img src="/vue2/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATmFuY2hlbl80Mg==,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="img"></p>
<h4 id="v-model结合select"><a href="#v-model结合select" class="headerlink" title="v-model结合select"></a>v-model结合select</h4><h3 id="1-select单选"><a href="#1-select单选" class="headerlink" title="1.select单选"></a>1.select单选</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>select单选<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;fruit&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;fruit&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;苹果&quot;</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;橘子&quot;</span>&gt;</span>橘子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;水蜜桃&quot;</span>&gt;</span>水蜜桃<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;橙子&quot;</span>&gt;</span>橙子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>你选择的水果有：&#123;&#123;fruit&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">fruit</span>:<span class="string">&#x27;苹果&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2.select多选</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>select多选<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;fruits&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;fruits&quot;</span> <span class="attr">multiple</span>=<span class="string">&quot;multiple&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;苹果&quot;</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;橘子&quot;</span>&gt;</span>橘子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;水蜜桃&quot;</span>&gt;</span>水蜜桃<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;橙子&quot;</span>&gt;</span>橙子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-show</span>=<span class="string">&quot;fruits.length&gt;0&quot;</span>&gt;</span>你选择的水果有：&#123;&#123;fruits&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">fruits</span>:[],</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/vue2/1991e303801e4e7b8f5b8136fc1aa438.gif" alt="img"></p>
<h4 id="v-model的修饰符的使用"><a href="#v-model的修饰符的使用" class="headerlink" title="v-model的修饰符的使用"></a>v-model的修饰符的使用</h4><p>v-model的修饰符：</p>
<blockquote>
<p>1、v-model.lazy         只有在input输入框发生一个blur时才触发<br>2、v-model.trim         将用户输入的前后的空格去掉<br>3、v-model.number         将用户输入的字符串转换成number</p>
</blockquote>
<p>这里看这个例子 </p>
<p>v-model.lazy       </p>
<p>只有在input输入框发生一个blur时才触发</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;message&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">message</span>:<span class="string">&#x27;Nan&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">age</span>:<span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>:<span class="string">&#x27;chen&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/vue2/4a2afe3ff48b452babe1cbac7d9b0d41-167645470275420.gif" alt="img"></p>
<p><strong>v-model.number ：不可以输入字符串</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">v-model.number</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">		   <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;age&#125;&#125;----&#123;&#123;typeof age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">message</span>:<span class="string">&#x27;Nan&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">age</span>:<span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>:<span class="string">&#x27;chen&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>v-model.trim</strong> </p>
<p>去除前后空格</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">message</span>:<span class="string">&#x27;Nan&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">age</span>:<span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>:<span class="string">&#x27;chen&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/vue2/5296b01674124ad9ac28bf2ab902c0ce.gif" alt="img"></p>
<h2 id="指令修饰符"><a href="#指令修饰符" class="headerlink" title="指令修饰符"></a>指令修饰符</h2><p>修饰符 (modifier) 是以半角句号 <code>.</code> 指明的特殊后缀，用于指出一个指令应该以特殊方式绑</p>
<p>定。例如，<code>.prevent</code> 修饰符告诉 <code>v-on</code> 指令对于触发的事件调用 </p>
<p><code>event.preventDefault()</code>：即阻止默认事件的发生</p>
<p>lazy：失去焦点再收集数据</p>
<p>number：输入字符串转为有效的数字</p>
<p> trim：输入首尾空格过滤</p>
<h3 id="v-on-指令常用修饰符："><a href="#v-on-指令常用修饰符：" class="headerlink" title="v-on 指令常用修饰符："></a>v-on 指令常用修饰符：</h3><p>.stop - 调用 event.stopPropagation()，禁止事件冒泡。</p>
<p>.prevent - 调用 event.preventDefault()，阻止事件默认行为。</p>
<p>.capture - 添加事件侦听器时使用 capture 模式。（捕获）</p>
<ul>
<li>即是给元素添加一个监听器，当元素发生冒泡时，先触发带有该修饰符的元素。若有多个该修饰符，则由外而内触发。<br>就是谁有该事件修饰符，就先触发谁。</li>
</ul>
<p>.self - 只当事件是从侦听器绑定的元素本身触发时才触发回调。</p>
<p>.{keyCode | keyAlias} - 只当事件是从特定键触发时才触发回调。</p>
<p>.native - 监听组件根元素的原生事件。</p>
<p>.once - 只触发一次回调。</p>
<p>.left - (2.2.0) 只当点击鼠标左键时触发。</p>
<p>.right - (2.2.0) 只当点击鼠标右键时触发。</p>
<p>.middle - (2.2.0) 只当点击鼠标中键时触发。</p>
<p>.passive - (2.3.0) 以 { passive: true } 模式添加侦听器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>.capture事件修饰符<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>:center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#obj1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: deeppink;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#obj2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: pink;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#obj3</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: hotpink;</span></span><br><span class="line"><span class="language-css">        &#125;<span class="selector-id">#obj4</span> &#123;</span></span><br><span class="line"><span class="language-css">             <span class="attribute">background</span>: <span class="number">#ff4225</span>;</span></span><br><span class="line"><span class="language-css">         &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;obj1&quot;</span> <span class="attr">v-on:click.capture</span>=<span class="string">&quot;doc&quot;</span>&gt;</span></span><br><span class="line">        obj1</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;obj2&quot;</span> <span class="attr">v-on:click.capture</span>=<span class="string">&quot;doc&quot;</span>&gt;</span></span><br><span class="line">            obj2</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;obj3&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doc&quot;</span>&gt;</span></span><br><span class="line">                obj3</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;obj4&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doc&quot;</span>&gt;</span></span><br><span class="line">                obj4</span><br><span class="line">                <span class="comment">&lt;!--。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。点击obj4的时候，弹出的顺序为：obj1、obj2、obj4、obj3；</span></span><br><span class="line"><span class="comment">                由于1，2有修饰符，故而先触发事件，然后就是4本身触发，最后冒泡事件。</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> content = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&quot;#content&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">id</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">doc</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">id</span>= event.<span class="property">currentTarget</span>.<span class="property">id</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="v-bind-指令常用修饰符："><a href="#v-bind-指令常用修饰符：" class="headerlink" title="v-bind 指令常用修饰符："></a>v-bind 指令常用修饰符：</h3><p>.prop - 被用于绑定 DOM 属性 (property)。(差别在哪里？)</p>
<p>.camel - (2.1.0+) 将 kebab-case 特性名转换为 camelCase. (从 2.1.0 开始支持)</p>
<p>.sync (2.3.0+) 语法糖，会扩展成一个更新父组件绑定值的 v-on 侦听器。</p>
<h3 id="v-model-指令常用修饰符："><a href="#v-model-指令常用修饰符：" class="headerlink" title="v-model 指令常用修饰符："></a>v-model 指令常用修饰符：</h3><p>.lazy - 取代 input 监听 change 事件失去焦点后触发</p>
<p>.number - 输入字符串转为数字</p>
<p>.trim - 输入首尾空格过滤</p>
<h2 id="事件的属性与监听"><a href="#事件的属性与监听" class="headerlink" title="事件的属性与监听"></a>事件的属性与监听</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.10/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&#x27;app&#x27;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;filname&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&#x27;lasname&#x27;&gt;</span><br><span class="line">    &lt;!-- 不管函数中是否涉及到修改的属性都会被重新解析 --&gt;</span><br><span class="line">    &lt;span&gt;&#123;&#123;fullname()&#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    let vm = new Vue(&#123;</span><br><span class="line">      el: &#x27;#app&#x27;,</span><br><span class="line">      data: &#123;</span><br><span class="line">        filname:&#x27;asd&#x27;,</span><br><span class="line">        lasname:&#x27;qwe&#x27;,</span><br><span class="line">        name:&#x27;vue&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        fullname()&#123;</span><br><span class="line">          console.log(&#x27;改变&#x27;)</span><br><span class="line">          return this.filname</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h3 id="计算属性computed"><a href="#计算属性computed" class="headerlink" title="计算属性computed"></a>计算属性computed</h3><p><img src="/vue2/image-20221118105915124.png" alt="image-20221118105915124"></p>
<p>模板内的表达式非常便利，但是设计它们的初衷是用于简单运算的。在模板中放入太多的逻辑会让模板过重且难以维护。例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这个地方，模板不再是简单的声明式逻辑。你必须看一段时间才能意识到，这里是想要显示变量 <code>message</code> 的翻转字符串。当你想要在模板中的多处包含此翻转字符串时，就会更加难以处理。</p>
<p>所以，对于任何复杂逻辑，你都应当使用<strong>计算属性</strong>。</p>
<h4 id="基本计算属性列子"><a href="#基本计算属性列子" class="headerlink" title="基本计算属性列子"></a>基本计算属性列子</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Original message: &quot;&#123;&#123; message &#125;&#125;&quot;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Computed reversed message: &quot;&#123;&#123; reversedMessage &#125;&#125;&quot;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#example&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">message</span>: <span class="string">&#x27;hello&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 我们提供的函数将用作 property vm.reversedMessage 的 getter 函数： </span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 简写法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// reversedMessage: function () &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   // 字符反转</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   return this.message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   // &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">reversedMessage</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 在读取reversedMessage值时触发</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 其中会存放在缓存中防止多次调用get函数增强性能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 但其中依赖的值发生改变时会重新调用get函数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 在reversedMessage 发生改变时会触发</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 可选 自读取值时可以不写省略</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">set</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">message</span> = <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="计算属性缓存Vs方法"><a href="#计算属性缓存Vs方法" class="headerlink" title="计算属性缓存Vs方法"></a>计算属性缓存Vs方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;<span class="title class_">Reversed</span> <span class="attr">message</span>: <span class="string">&quot;&#123;&#123; reversedMessage() &#125;&#125;&quot;</span>&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="attr">reversedMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以将同一函数定义为一个方法而不是一个计算属性。两种方式的最终结果确实是完全</p>
<p>相同的。然而，不同的是<strong>计算属性是基于它们的响应式依赖进行缓存的</strong>。只在相关响应式依</p>
<p>赖发生改变时它们才会重新求值。这就意味着只要 <code>message</code> 还没有发生改变，多次访问 </p>
<p><code>reversedMessage</code> 计算属性会立即返回之前的计算结果，而不必再次执行函数。</p>
<h4 id="计算属性VS侦听属性（即监听属性）"><a href="#计算属性VS侦听属性（即监听属性）" class="headerlink" title="计算属性VS侦听属性（即监听属性）"></a>计算属性VS侦听属性（即监听属性）</h4><h5 id="监听属性"><a href="#监听属性" class="headerlink" title="监听属性"></a>监听属性</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; fullName &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#demo&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">firstName</span>: <span class="string">&#x27;Foo&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lastName</span>: <span class="string">&#x27;Bar&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">fullName</span>: <span class="string">&#x27;Foo Bar&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">firstName</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(val);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">fullName</span> = val + <span class="string">&#x27; &#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lastName</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">fullName</span> = <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27; &#x27;</span> + val</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面代码是命令式且重复的。将它与计算属性的版本进行比较：</p>
<h5 id="用计算属性"><a href="#用计算属性" class="headerlink" title="用计算属性"></a>用计算属性</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#demo&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Foo&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;Bar&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="attr">fullName</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27; &#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>computed能完成的watch一定能完成</p>
<p>计算属性不能用异步处理但监视属性可以用异步</p>
<p>注意: 如果没有特殊指向，setInterval和setTimeout的回调函数中this的指向都是window。</p>
<p>这是因为JS的定时器方法是定义在window下的。但是平时很多场景下，都需要修改this的指</p>
<p>向。</p>
<p>解决方法一：(推荐用箭头函数) （箭头函数中的this中无规定指定外找）</p>
<p><strong>箭头函数中的this引用的是距离最近的作用域中的this,从this的所在处向外层层寻找,直到有this的定义.</strong></p>
<p>解决方法二：</p>
<p>最常用的方法：在外部函数中将this存为一个变量，回调函数中使用该变量，而不是直接使用this。</p>
<p>var name &#x3D; ‘window’;<br>  var obj &#x3D; {<br>      name: ‘obj’,<br>      fn: function () {<br>          var that &#x3D; this;<br>          var timer &#x3D; null;<br>          clearInterval(timer);<br>          timer &#x3D; setInterval(function () {<br>              console.log(that.name);   &#x2F;&#x2F;obj<br>         }, 1000)<br>     }<br> }</p>
<p>两个重要的原则：</p>
<p>1、所有vue管理的函数，最好用普通函数，这样this指向vm或组件实例对象</p>
<p>2、所有被vue管理的函数（定时回调函数，ajax的回调函数等。promise的回调函数），最</p>
<p>好写成箭头函数这样this指向的还是vm或组件实例对象</p>
<h3 id="侦听器（即监听事件）"><a href="#侦听器（即监听事件）" class="headerlink" title="侦听器（即监听事件）"></a>侦听器（即监听事件）</h3><h4 id="使用watch与-watch"><a href="#使用watch与-watch" class="headerlink" title="使用watch与$watch"></a>使用watch与$watch</h4><p>1、属性存在才能被监视</p>
<p>2、data的属性与计算属性都能被监视</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; fullName &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#demo&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">firstName</span>: <span class="string">&#x27;Foo&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lastName</span>: <span class="string">&#x27;Bar&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">fullName</span>: <span class="string">&#x27;Foo Bar&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 写法一简写法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">firstName</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(val);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">fullName</span> = val + <span class="string">&#x27; &#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 写法二</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lastName</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="comment">// 初始化时直接调用一次</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 当lastName被修改时调用</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handler</span>(<span class="params">newval, oldval</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 新值</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 修改前的值</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(newval, oldval);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// $watch</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 注意必须加引号</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 上面的是简写方式，这里是传入要监视的属性名</span></span></span><br><span class="line"><span class="language-javascript">  vm.$watch(<span class="string">&#x27;lastName&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="comment">// 初始化时直接调用一次</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 当lastName被修改时调用</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handler</span>(<span class="params">newval, oldval</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 新值</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 修改前的值</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(newval, oldval);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br></pre></td></tr></table></figure>

<p>在编写时明确要监视谁了就用watch</p>
<p>用时才确定要监视谁就用vm.$watch</p>
<h4 id="深度监视-2"><a href="#深度监视-2" class="headerlink" title="深度监视"></a>深度监视</h4><p>深度监视</p>
<p>​	(1)、vue中的watch默认不监测对象内部值得变化（一层）</p>
<p>​	(2)、 配置deep ： true可以监测对象的内部所有值改变（多层）</p>
<p>备注</p>
<ol>
<li>Vue自身可以监视对象内部的值，但Vue提供的watch默认不可以！</li>
<li>使用watch时根据数据的具体结构，决定是否采用深度监视（可以提高效率）</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vuejs/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; numbers.a &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;numbers.a++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    &#123;&#123; numbers.b &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;numbers.b++&quot;</span>&gt;</span>点我加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#demo&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">firstName</span>: <span class="string">&#x27;Foo&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">lastName</span>: <span class="string">&#x27;Bar&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">fullName</span>: <span class="string">&#x27;Foo Bar&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">numbers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">a</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">b</span>: <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 原始属性写法 </span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 检测多层级中指定的一个</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 标识符只能由字母、数字、下划线和‘$’组成</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 数字不可以作为标识符的首字符(纯数学时会自动转换为字符串但也不能用.进行访问)</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 不符合规则的要加引号才行</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// . 访问符只能访问符合规则的 []则都可以</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 用key中存在.不符合规则</span></span></span><br><span class="line"><span class="language-javascript">        <span class="string">&quot;numbers.a&quot;</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">immediate</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 初始化时直接调用一次</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 当lastName被修改时调用</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">handler</span>(<span class="params">newval, oldval</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 新值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 修改前的值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(newval, oldval);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 检查多层级的所有</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">numbers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 配置深度监测 </span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 不配置该属性a改变时无法监测到 </span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 只用当numbers对象的值发生改变时才会被监测到</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">deep</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已被修改&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="监视的简写形式"><a href="#监视的简写形式" class="headerlink" title="监视的简写形式"></a>监视的简写形式</h5><p><strong>简写的代价是无法</strong>  	多个配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> watch: &#123;</span><br><span class="line">        firstName(val) &#123;</span><br><span class="line">          console.log(val);</span><br><span class="line">          this.fullName = val + &#x27; &#x27; + this.lastName</span><br><span class="line">        &#125;</span><br><span class="line">       &#125;</span><br><span class="line">$watch(&#x27;key&#x27;,function()&#123;</span><br><span class="line">	console.log(val);</span><br><span class="line">    this.fullName = val + &#x27; &#x27; + this.lastName</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="监事属性的原理"><a href="#监事属性的原理" class="headerlink" title="监事属性的原理"></a>监事属性的原理</h2><h3 id="vue监测对象中属性值的改变的"><a href="#vue监测对象中属性值的改变的" class="headerlink" title="vue监测对象中属性值的改变的"></a>vue监测对象中属性值的改变的</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=34&spm_id_from=333.880.my_history.page.click">https://www.bilibili.com/video/BV1Zy4y1K7SH?p=34&amp;spm_id_from=333.880.my_history.page.click</a></p>
<p>分析</p>
<p><img src="/vue2/image-20220521111455384.png" alt="image-20220521111455384"></p>
<p><img src="/vue2/image-20220521111945791.png" alt="image-20220521111945791"></p>
<h3 id="模拟一个数据的监视"><a href="#模拟一个数据的监视" class="headerlink" title="模拟一个数据的监视"></a>模拟一个数据的监视</h3><p>底层代码简单分析 </p>
<p><img src="/vue2/image-20221120232532493.png" alt="image-20221120232532493"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">let</span> data = &#123;</span><br><span class="line">      <span class="attr">name</span>:<span class="string">&#x27;asd&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> obs = <span class="keyword">new</span> <span class="title class_">Observer</span>(data);</span><br><span class="line">    <span class="keyword">let</span> vm = &#123;&#125;;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(obs);</span><br><span class="line">    obs.<span class="property">a</span>=<span class="string">&#x27;asd&#x27;</span>;</span><br><span class="line">    vm.<span class="property">_data</span> = data = obs;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Observer</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj);</span><br><span class="line"></span><br><span class="line">      keys.<span class="title function_">forEach</span>(<span class="function">(<span class="params">k</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// this =&gt; obs</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>,<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>,k,&#123;</span><br><span class="line">          <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>,<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">            <span class="keyword">return</span> obj[k];</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="title function_">set</span>(<span class="params">val</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> obj[k] = val;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="监视对象与数组存在的坑"><a href="#监视对象与数组存在的坑" class="headerlink" title="监视对象与数组存在的坑"></a>监视对象与数组存在的坑</h3><h4 id="对象的监视"><a href="#对象的监视" class="headerlink" title="对象的监视"></a>对象的监视</h4><p>默认会监视vue初始化时对象中有的数据（多级嵌套也会），后期加的默认不会进行监视，需要配置</p>
<p><a href="#VueSet">方法在后面</a></p>
<p><img src="/vue2/image-20221120235551583.png" alt="image-20221120235551583"></p>
<p><img src="/vue2/image-20221120234957393.png" alt="image-20221120234957393"></p>
<p><img src="/vue2/image-20221121000251159.png" alt="image-20221121000251159"></p>
<p><strong>data中属性值为数组，其数组的值不进行监视</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eg: </span></span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">arr</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 其arr中的值不进行监视 无 `get` 与 `set` </span></span><br></pre></td></tr></table></figure>

<p> <img src="/vue2/image-20221121002726699.png" alt="image-20221121002726699"></p>
<h3 id="原因及解决方法"><a href="#原因及解决方法" class="headerlink" title="原因及解决方法"></a>原因及解决方法</h3><h4 id="变更方法"><a href="#变更方法" class="headerlink" title="变更方法"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/list.html#%E5%8F%98%E6%9B%B4%E6%96%B9%E6%B3%95">变更方法</a></h4><p>Vue 将被侦听的<strong>数组的变更方法进行了包裹</strong>，所以它们也将会触发视图更新。这些被包裹过的方法包括：</p>
<ul>
<li><code>push()</code>添加尾</li>
<li><code>pop()</code>删除尾</li>
<li><code>shift()</code>删除头</li>
<li><code>unshift()</code>添加头</li>
<li><code>splice()</code>替换</li>
<li><code>sort()</code>排序</li>
<li><code>reverse()</code></li>
</ul>
<p>你可以打开控制台，然后对前面例子的 <code>items</code> 数组尝试调用变更方法。比如 <code>example1.items.push(&#123; message: &#39;Baz&#39; &#125;)</code>。</p>
<p>也可以使用Vue.set()方法</p>
<p><img src="/vue2/image-20221121005237228.png" alt="image-20221121005237228"></p>
<h4 id="替换数组"><a href="#替换数组" class="headerlink" title="替换数组"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/list.html#%E6%9B%BF%E6%8D%A2%E6%95%B0%E7%BB%84">替换数组</a></h4><p>变更方法，顾名思义，会变更调用了这些方法的原始数组。相比之下，也有非变更方法，例如 <code>filter()</code>、<code>concat()</code> 和 <code>slice()</code>。它们不会变更原始数组，而<strong>总是返回一个新数组</strong>。当使用非变更方法时，可以用新数组替换旧数组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">example1.items = example1.items.filter(function (item) &#123;</span><br><span class="line">  return item.message.match(/Foo/)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>你可能认为这将导致 Vue 丢弃现有 DOM 并重新渲染整个列表。幸运的是，事实并非如此。Vue 为了使得 DOM 元素得到最大范围的重用而实现了一些智能的启发式方法，所以用一个含有相同元素的数组去替换原来的数组是非常高效的操作。</p>
<p>data中的属性值为对象的，其对象的值只有Vue实例创建时存在的才会进行监视</p>
<p>而后来添加的对象属性不会进行监视</p>
<p><strong>解决方方法使用Vue.set  API</strong> 数组也可用这个API来解决监视问题  还有一个方法</p>
<p>vm.$set   或</p>
<p>this.$set</p>
<p><a id="VueSet"></a></p>
<h3 id="Vue-set-target-propertyName-x2F-index-value"><a href="#Vue-set-target-propertyName-x2F-index-value" class="headerlink" title="Vue.set( target, propertyName&#x2F;index, value )"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#Vue-set">Vue.set( target, propertyName&#x2F;index, value )</a></h3><p><img src="/vue2/image-20221121001404523.png" alt="image-20221121001404523"></p>
<p>追加</p>
<p>不能写成this.set形式，可以写成this.$set()</p>
<p>第一个参数 要操作的对象或数组</p>
<p>第二个参数 要操作的属性名或索引</p>
<p>第三个参数 修改后的值</p>
<ul>
<li><p><strong>参数</strong>：</p>
<ul>
<li><code>&#123;Object | Array&#125; target</code> 要追加属性的对象</li>
<li><code>&#123;string | number&#125; propertyName/index</code></li>
<li><code>&#123;any&#125; value</code></li>
</ul>
</li>
<li><p><strong>返回值</strong>：设置的值。</p>
</li>
<li><p><strong>用法</strong>：</p>
<p>向响应式对象中添加一个 property，并确保这个新 property 同样是响应式的，且触发视图更新。它必须用于向响应式对象上添加新 property，因为 Vue 无法探测普通的新增 property (比如 <code>this.myObject.newProperty = &#39;hi&#39;</code>)</p>
</li>
</ul>
<p><strong>注意对象不能是 Vue 实例，或者 Vue 实例的根数据对象。(data 或 _data)</strong></p>
<p><code>注意以下情况</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">friends</span>:[</span><br><span class="line">	&#123;<span class="attr">name</span>:<span class="string">&#x27;jerry&#x27;</span>,<span class="attr">age</span>:<span class="number">35</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">36</span>&#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">// 数组中第 n 项 未设置代理 但其第 n 项中的属性进行了监视</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/vue2/image-20220522000905054.png" alt="image-20220522000905054"></p>
<p><strong>总结：</strong></p>
<p>​    &lt;!–</p>
<p>​      Vue监视数据的原理：</p>
<ol>
<li><p>vue会监视data中所有层次的数据。</p>
</li>
<li><p>如何监测对象中的数据？</p>
</li>
</ol>
<p>​                通过setter实现监视，且要在new Vue时就传入要监测的数据。</p>
<p>​                  (1).对象中后追加的属性，Vue默认不做响应式处理</p>
<p>​                  (2).如需给后添加的属性做响应式，请使用如下API：</p>
<p>​                          Vue.set(target，propertyName&#x2F;index，value) 或 </p>
<p>​                          vm.$set(target，propertyName&#x2F;index，value)</p>
<ol start="3">
<li>如何监测数组中的数据？</li>
</ol>
<p>​                  通过包裹数组更新元素的方法实现，本质就是做了两件事：</p>
<p>​                    (1).调用原生对应的方法对数组进行更新。</p>
<p>​                    (2).重新解析模板，进而更新页面。</p>
<p>4.在Vue修改数组中的某个元素一定要用如下方法：</p>
<p>​              1.使用这些API:push()、pop()、shift()、unshift()、splice()、sort()、reverse()</p>
<p>​              2.Vue.set() 或 vm.$set()</p>
<p>​        </p>
<p>​        特别注意：Vue.set() 和 vm.$set() 不能给vm 或 vm的根数据对象 添加属性！！！</p>
<p>​    –&gt;</p>
<p><strong>删除使用this.$delete()</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 准备好一个容器--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span>&gt;</span>学生信息<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;student.age++&quot;</span>&gt;</span>年龄+1岁<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addSex&quot;</span>&gt;</span>添加性别属性，默认值：男<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;student.sex = &#x27;未知&#x27; &quot;</span>&gt;</span>修改性别<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addFriend&quot;</span>&gt;</span>在列表首位添加一个朋友<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateFirstFriendName&quot;</span>&gt;</span>修改第一个朋友的名字为：张三<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addHobby&quot;</span>&gt;</span>添加一个爱好<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateHobby&quot;</span>&gt;</span>修改第一个爱好为：开车<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;removeSmoke&quot;</span>&gt;</span>过滤掉爱好中的抽烟<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>姓名：&#123;&#123;student.name&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>年龄：&#123;&#123;student.age&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-if</span>=<span class="string">&quot;student.sex&quot;</span>&gt;</span>性别：&#123;&#123;student.sex&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>爱好：<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(h,index) in student.hobby&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">					&#123;&#123;h&#125;&#125;</span><br><span class="line">				<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>朋友们：<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(f,index) in student.friends&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">					&#123;&#123;f.name&#125;&#125;--&#123;&#123;f.age&#125;&#125;</span><br><span class="line">				<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span> <span class="comment">//阻止 vue 在启动时生成生产提示。</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">student</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>:<span class="string">&#x27;tom&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">age</span>:<span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">hobby</span>:[<span class="string">&#x27;抽烟&#x27;</span>,<span class="string">&#x27;喝酒&#x27;</span>,<span class="string">&#x27;烫头&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">friends</span>:[</span></span><br><span class="line"><span class="language-javascript">						&#123;<span class="attr">name</span>:<span class="string">&#x27;jerry&#x27;</span>,<span class="attr">age</span>:<span class="number">35</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">						&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">36</span>&#125;</span></span><br><span class="line"><span class="language-javascript">					]</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">addSex</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// Vue.set(this.student,&#x27;sex&#x27;,&#x27;男&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">student</span>,<span class="string">&#x27;sex&#x27;</span>,<span class="string">&#x27;男&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">addFriend</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">         <span class="comment">// 即使是新添加的对象属性也是响应式的</span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">friends</span>.<span class="title function_">unshift</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;jack&#x27;</span>,<span class="attr">age</span>:<span class="number">70</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">updateFirstFriendName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">         <span class="comment">// this.student.friends[0] = 123 //不行</span></span></span><br><span class="line"><span class="language-javascript">         <span class="comment">// 没有服务与 0 (0:&#123;&#125;)的get和set </span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">friends</span>[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">addHobby</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">hobby</span>.<span class="title function_">push</span>(<span class="string">&#x27;学习&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">updateHobby</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// this.student.hobby.splice(0,1,&#x27;开车&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// Vue.set(this.student.hobby,0,&#x27;开车&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">hobby</span>,<span class="number">0</span>,<span class="string">&#x27;开车&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">removeSmoke</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">hobby</span> = <span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">hobby</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">h</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">return</span> h !== <span class="string">&#x27;抽烟&#x27;</span></span></span><br><span class="line"><span class="language-javascript">					&#125;)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/vue2/image-20221121005016605.png" alt="image-20221121005016605"></p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/list.html#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">注意事项</a></h3><p>由于 JavaScript 的限制，Vue <strong>不能检测</strong>数组和对象的变化。<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/reactivity.html#%E6%A3%80%E6%B5%8B%E5%8F%98%E5%8C%96%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">深入响应式原理</a>中有相关的讨论。</p>
<h3 id="官网说明"><a href="#官网说明" class="headerlink" title="官网说明"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/reactivity.html#%E6%A3%80%E6%B5%8B%E5%8F%98%E5%8C%96%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">官网说明</a></h3><p>现在是时候深入一下了！Vue 最独特的特性之一，是其非侵入性的响应式系统。数据模型仅仅是普通的 JavaScript 对象。而当你修改它们时，视图会进行更新。这使得状态管理非常简单直接，不过理解其工作原理同样重要，这样你可以避开一些常见的问题。在这个章节，我们将研究一下 Vue 响应式系统的底层的细节。</p>
<h4 id="如何追踪变化"><a href="#如何追踪变化" class="headerlink" title="如何追踪变化"></a><a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/reactivity.html#%E5%A6%82%E4%BD%95%E8%BF%BD%E8%B8%AA%E5%8F%98%E5%8C%96">如何追踪变化</a></h4><p><a target="_blank" rel="noopener" href="https://www.vuemastery.com/courses/advanced-components/build-a-reactivity-system">在 Vue Mastery 观看视频讲解</a></p>
<p>当你把一个普通的 JavaScript 对象传入 Vue 实例作为 <code>data</code> 选项，Vue 将遍历此对象所有的 property，并使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"><code>Object.defineProperty</code></a> 把这些 property 全部转为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Working_with_Objects#%E5%AE%9A%E4%B9%89_getters_%E4%B8%8E_setters">getter&#x2F;setter</a>。<code>Object.defineProperty</code> 是 ES5 中一个无法 shim 的特性，这也就是 Vue 不支持 IE8 以及更低版本浏览器的原因。</p>
<p>这些 getter&#x2F;setter 对用户来说是不可见的，但是在内部它们让 Vue 能够追踪依赖，在 property 被访问和修改时通知变更。这里需要注意的是不同浏览器在控制台打印数据对象时对 getter&#x2F;setter 的格式化并不同，所以建议安装 <a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-devtools">vue-devtools</a> 来获取对检查数据更加友好的用户界面。</p>
<p>每个组件实例都对应一个 <strong>watcher</strong> 实例，它会在组件渲染的过程中把“接触”过的数据 property 记录为依赖。之后当依赖项的 setter 触发时，会通知 watcher，从而使它关联的组件重新渲染。</p>
<p><img src="/vue2/data.png" alt="data"></p>
<h4 id="检测变化的注意事项"><a href="#检测变化的注意事项" class="headerlink" title="检测变化的注意事项"></a><a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/reactivity.html#%E6%A3%80%E6%B5%8B%E5%8F%98%E5%8C%96%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">检测变化的注意事项</a></h4><p>由于 JavaScript 的限制，Vue <strong>不能检测</strong>数组和对象的变化。尽管如此我们还是有一些办法来回避这些限制并保证它们的响应性。</p>
<h4 id="对于对象"><a href="#对于对象" class="headerlink" title="对于对象"></a><a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/reactivity.html#%E5%AF%B9%E4%BA%8E%E5%AF%B9%E8%B1%A1">对于对象</a></h4><p>Vue 无法检测 property 的添加或移除。由于 Vue 会在初始化实例时对 property 执行 getter&#x2F;setter 转化，所以 property 必须在 <code>data</code> 对象上存在才能让 Vue 将它转换为响应式的。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    a:1</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// `vm.a` 是响应式的</span><br><span class="line"></span><br><span class="line">vm.b = 2</span><br><span class="line">// `vm.b` 是非响应式的</span><br></pre></td></tr></table></figure>

<p>对于已经创建的实例，Vue 不允许动态添加根级别的响应式 property。但是，可以使用 <code>Vue.set(object, propertyName, value)</code> 方法向嵌套对象添加响应式 property。例如，对于：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.set(vm.someObject, &#x27;b&#x27;, 2)</span><br></pre></td></tr></table></figure>

<p>您还可以使用 <code>vm.$set</code> 实例方法，这也是全局 <code>Vue.set</code> 方法的别名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$set(this.someObject,&#x27;b&#x27;,2)</span><br></pre></td></tr></table></figure>

<p>有时你可能需要为已有对象赋值多个新 property，比如使用 <code>Object.assign()</code> 或 <code>_.extend()</code>。但是，这样添加到对象上的新 property 不会触发更新。在这种情况下，你应该用原对象与要混合进去的对象的 property 一起创建一个新的对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 代替 `Object.assign(this.someObject, &#123; a: 1, b: 2 &#125;)`</span><br><span class="line">this.someObject = Object.assign(&#123;&#125;, this.someObject, &#123; a: 1, b: 2 &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="对于数组"><a href="#对于数组" class="headerlink" title="对于数组"></a><a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/reactivity.html#%E5%AF%B9%E4%BA%8E%E6%95%B0%E7%BB%84">对于数组</a></h4><p>Vue 不能检测以下数组的变动：</p>
<ol>
<li>当你利用索引直接设置一个数组项时，例如：<code>vm.items[indexOfItem] = newValue</code></li>
<li>当你修改数组的长度时，例如：<code>vm.items.length = newLength</code></li>
</ol>
<p>举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    items: [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">vm.items[1] = &#x27;x&#x27; // 不是响应性的</span><br><span class="line">vm.items.length = 2 // 不是响应性的</span><br></pre></td></tr></table></figure>

<p>为了解决第一类问题，以下两种方式都可以实现和 <code>vm.items[indexOfItem] = newValue</code> 相同的效果，同时也将在响应式系统内触发状态更新：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Vue.set</span><br><span class="line">Vue.set(vm.items, indexOfItem, newValue)</span><br><span class="line">// Array.prototype.splice</span><br><span class="line">vm.items.splice(indexOfItem, 1, newValue)</span><br></pre></td></tr></table></figure>

<p>你也可以使用 <a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/api/#vm-set"><code>vm.$set</code></a> 实例方法，该方法是全局方法 <code>Vue.set</code> 的一个别名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.$set(vm.items, indexOfItem, newValue)</span><br></pre></td></tr></table></figure>

<p>为了解决第二类问题，你可以使用 <code>splice</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.items.splice(newLength)</span><br></pre></td></tr></table></figure>

<h4 id="声明响应式-property"><a href="#声明响应式-property" class="headerlink" title="声明响应式 property"></a><a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/reactivity.html#%E5%A3%B0%E6%98%8E%E5%93%8D%E5%BA%94%E5%BC%8F-property">声明响应式 property</a></h4><p><strong>由于 Vue 不允许动态添加根级响应式 property，所以你必须在初始化实例前声明所有根级响应式 property，哪怕只是一个空值</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">// 声明 message 为一个空值字符串</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 之后设置 `message`</span></span><br><span class="line">vm.<span class="property">message</span> = <span class="string">&#x27;Hello!&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果你未在 <code>data</code> 选项中声明 <code>message</code>，Vue 将警告你渲染函数正在试图访问不存在的 property。</p>
<p>这样的限制在背后是有其技术原因的，它消除了在依赖项跟踪系统中的一类边界情况，也使 Vue 实例能更好地配合类型检查系统工作。但与此同时在代码可维护性方面也有一点重要的考虑：<code>data</code> 对象就像组件状态的结构 (schema)。提前声明所有的响应式 property，可以让组件代码在未来修改或给其他开发人员阅读时更易于理解。</p>
<h4 id="异步更新队列"><a href="#异步更新队列" class="headerlink" title="异步更新队列"></a><a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/reactivity.html#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%98%9F%E5%88%97">异步更新队列</a></h4><p>可能你还没有注意到，Vue 在更新 DOM 时是<strong>异步</strong>执行的。只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。Vue 在内部对异步队列尝试使用原生的 <code>Promise.then</code>、<code>MutationObserver</code> 和 <code>setImmediate</code>，如果执行环境不支持，则会采用 <code>setTimeout(fn, 0)</code> 代替。</p>
<p>例如，当你设置 <code>vm.someData = &#39;new value&#39;</code>，该组件不会立即重新渲染。当刷新队列时，组件会在下一个事件循环“tick”中更新。多数情况我们不需要关心这个过程，但是如果你想基于更新后的 DOM 状态来做点什么，这就可能会有些棘手。虽然 Vue.js 通常鼓励开发人员使用“数据驱动”的方式思考，避免直接接触 DOM，但是有时我们必须要这么做。为了在数据变化之后等待 Vue 完成更新 DOM，可以在数据变化之后立即使用 <code>Vue.nextTick(callback)</code>。这样回调函数将在 DOM 更新完成后被调用。例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;example&quot;</span>&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;</span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#example&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;123&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">vm.<span class="property">message</span> = <span class="string">&#x27;new message&#x27;</span> <span class="comment">// 更改数据</span></span><br><span class="line">vm.<span class="property">$el</span>.<span class="property">textContent</span> === <span class="string">&#x27;new message&#x27;</span> <span class="comment">// false</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">nextTick</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  vm.<span class="property">$el</span>.<span class="property">textContent</span> === <span class="string">&#x27;new message&#x27;</span> <span class="comment">// true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在组件内使用 <code>vm.$nextTick()</code> 实例方法特别方便，因为它不需要全局 <code>Vue</code>，并且回调函数中的 <code>this</code> 将自动绑定到当前的 Vue 实例上：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;example&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;span&gt;&#123;&#123; message &#125;&#125;&lt;/span&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;未更新&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">updateMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;已更新&#x27;</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>.<span class="property">textContent</span>) <span class="comment">// =&gt; &#x27;未更新&#x27;</span></span><br><span class="line">      <span class="variable language_">this</span>.$nextTick(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>.<span class="property">textContent</span>) <span class="comment">// =&gt; &#x27;已更新&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>因为 <code>$nextTick()</code> 返回一个 <code>Promise</code> 对象，所以你可以使用新的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function">ES2017 async&#x2F;await</a> 语法完成相同的事情：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="attr">updateMessage</span>: <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;已更新&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>.<span class="property">textContent</span>) <span class="comment">// =&gt; &#x27;未更新&#x27;</span></span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.$nextTick()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>.<span class="property">textContent</span>) <span class="comment">// =&gt; &#x27;已更新&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Class-与-Style-绑定"><a href="#Class-与-Style-绑定" class="headerlink" title="Class 与 Style 绑定"></a>Class 与 Style 绑定</h2><h3 id="绑定Htnl-class"><a href="#绑定Htnl-class" class="headerlink" title="绑定Htnl class"></a>绑定Htnl class</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=26&vd_source=031f631a87cca114e71194f12ec3fc3f">https://www.bilibili.com/video/BV1Zy4y1K7SH?p=26&amp;vd_source=031f631a87cca114e71194f12ec3fc3f</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>绑定样式<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.basic</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.happy</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">4px</span> solid red;</span></span><br><span class="line"><span class="language-css">      ;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0.644</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">30deg</span>, yellow, pink, orange, yellow);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.sad</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">4px</span> dashed <span class="built_in">rgb</span>(<span class="number">2</span>, <span class="number">197</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: gray;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.normal</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.atguigu1</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: yellowgreen;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.atguigu2</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">text-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">10px</span> red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.atguigu3</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../vuejs/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 绑定样式：1. class样式写法:class=&quot;xxx&quot; xxx可以是字符串、对象、数组。:class中的样式会追加到原生的class中</span></span><br><span class="line"><span class="comment">				字符串写法适用于：类名不确定，要动态获取。</span></span><br><span class="line"><span class="comment">				对象写法适用于：要绑定多个样式，个数不确定，名字也不确定。</span></span><br><span class="line"><span class="comment">		数组写法适用于：要绑定多个样式，个数确定，名字也确定，但不确定用不用。</span></span><br><span class="line"><span class="comment">				2. style样式</span></span><br><span class="line"><span class="comment">					:style=&quot;&#123;fontSize: xxx&#125;&quot;其中xxx是动态值。</span></span><br><span class="line"><span class="comment">					:style=&quot;[a,b]&quot;其中a、b是样式对象。--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 准备好一个容器--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式--字符串写法，适用于：样式的类名不确定，需要动态指定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;mood&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeMood&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式--数组写法，适用于：要绑定的样式个数不确定、名字也不确定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;classArr&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式--对象写法，适用于：要绑定的样式个数确定、名字也确定，但要动态决定用不用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;classObj&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 绑定style样式--对象写法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;styleObj&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绑定style样式--数组写法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;styleArr&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;尚硅谷&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">mood</span>: <span class="string">&#x27;normal&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classArr</span>: [<span class="string">&#x27;atguigu1&#x27;</span>, <span class="string">&#x27;atguigu2&#x27;</span>, <span class="string">&#x27;atguigu3&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classObj</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">atguigu1</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">atguigu2</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">styleObj</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">fontSize</span>: <span class="string">&#x27;40px&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">styleObj2</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">backgroundColor</span>: <span class="string">&#x27;orange&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">styleArr</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">fontSize</span>: <span class="string">&#x27;40px&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">backgroundColor</span>: <span class="string">&#x27;gray&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      ]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">changeMood</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> arr = [<span class="string">&#x27;happy&#x27;</span>, <span class="string">&#x27;sad&#x27;</span>, <span class="string">&#x27;normal&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">3</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">mood</span> = arr[index]</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="字符串语法"><a href="#字符串语法" class="headerlink" title="字符串语法"></a>字符串语法</h4><p>:class&#x3D;’’  中的值会后追加到class中</p>
<ol start="2">
<li>style样式<br>:style&#x3D;”{fontSize: xxx}”其中xxx是动态值。<br>:style&#x3D;”[a,b]”其中a、b是样式对象</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式--字符串写法，适用于：样式的类名不确定，需要动态指定 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;mood&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeMood&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;类&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">mood</span>: <span class="string">&#x27;happy&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">changeMood</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> arr = [<span class="string">&#x27;happy&#x27;</span>, <span class="string">&#x27;sad&#x27;</span>, <span class="string">&#x27;normal&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">3</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">mood</span> = arr[index];</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br></pre></td></tr></table></figure>

<h4 id="数组语法"><a href="#数组语法" class="headerlink" title="数组语法"></a>数组语法</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式--字符串写法，适用于：样式的类名不确定，需要动态指定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;mood&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeMood&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式--数组写法，适用于：样式的类名不确定，数量不确定时使用可以通过操作数组来增减样式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;classArr&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可以将数组直接写在这 但不推荐用--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- val 不加引号 将会到data去寻找变量 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;div class=&quot;basic&quot; :class=&quot;[&#x27;hatguigu1&#x27;, &#x27;atguigu2&#x27;, &#x27;atguigu3&#x27;]&quot;&gt;&#123;&#123;name&#125;&#125;&lt;/div&gt; &lt;br&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;类&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">mood</span>: <span class="string">&#x27;happy&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classArr</span>: [<span class="string">&#x27;hatguigu1&#x27;</span>, <span class="string">&#x27;atguigu2&#x27;</span>, <span class="string">&#x27;atguigu3&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">changeMood</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> arr = [<span class="string">&#x27;happy&#x27;</span>, <span class="string">&#x27;sad&#x27;</span>, <span class="string">&#x27;normal&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">3</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">mood</span> = arr[index];</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br></pre></td></tr></table></figure>

<h4 id="对象写法"><a href="#对象写法" class="headerlink" title="对象写法"></a>对象写法</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 绑定class样式--字符串写法，适用于：样式的类名确定，数量确定，但要动态决定用不用 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 对象写法也可以象上面的数组写法一样写到:calss中 不过不推荐使用 不过是死 就是需要在data中定义其他的属性来控制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;calssobj&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;类&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">mood</span>: <span class="string">&#x27;happy&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classArr</span>: [<span class="string">&#x27;hatguigu1&#x27;</span>, <span class="string">&#x27;atguigu2&#x27;</span>, <span class="string">&#x27;atguigu3&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classobj</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">atguigu1</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">atguigu2</span>:<span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">changeMood</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> arr = [<span class="string">&#x27;happy&#x27;</span>, <span class="string">&#x27;sad&#x27;</span>, <span class="string">&#x27;normal&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">3</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">mood</span> = arr[index];</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br></pre></td></tr></table></figure>

<h4 id="用在组件上"><a href="#用在组件上" class="headerlink" title="用在组件上"></a>用在组件上</h4><h3 id="绑定Htnl-style"><a href="#绑定Htnl-style" class="headerlink" title="绑定Htnl style"></a>绑定Htnl style</h3><h4 id="对象语法与数组语法"><a href="#对象语法与数组语法" class="headerlink" title="对象语法与数组语法"></a>对象语法与数组语法</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 对象写法 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">&#x27;styleobj&#x27;</span>&gt;</span>绑定style1<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;fontSize: size+&#x27;px&#x27;&#125;&quot;</span>&gt;</span>绑定style2<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 数组写法 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">&#x27;stylearr&#x27;</span>&gt;</span>绑定style3<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">&quot;[&#123; fontSize: &#x27;40px&#x27; &#125;,</span></span></span><br><span class="line"><span class="string"><span class="tag">				&#123; color: &#x27;pink&#x27; &#125;,]&quot;</span>&gt;</span>绑定style3<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">size</span>: <span class="number">40</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">styleobj</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">fontSize</span>: <span class="string">&#x27;40px&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">stylearr</span>: [</span></span><br><span class="line"><span class="language-javascript">				&#123; <span class="attr">fontSize</span>: <span class="string">&#x27;40px&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">				&#123; <span class="attr">color</span>: <span class="string">&#x27;pink&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">			]</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h4 id="自动添加前缀"><a href="#自动添加前缀" class="headerlink" title="自动添加前缀"></a>自动添加前缀</h4><p>当 <code>v-bind:style</code> 使用需要添加<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Vendor_Prefix">浏览器引擎前缀</a>的 CSS property 时，如 <code>transform</code>，</p>
<p>Vue.js 会自动侦测并添加相应的前缀。</p>
<h4 id="多重值"><a href="#多重值" class="headerlink" title="多重值"></a>多重值</h4><blockquote>
<p>2.3.0+</p>
</blockquote>
<p>从 2.3.0 起你可以为 <code>style</code> 绑定中的 property 提供一个包含多个值的数组，常用于提供多个带前缀的值，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; display: [&#x27;-webkit-box&#x27;, &#x27;-ms-flexbox&#x27;, &#x27;flex&#x27;] &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样写只会渲染数组中最后一个被浏览器支持的值。在本例中，如果浏览器支持不带浏览器前缀的 flexbox，那么就只会渲染 <code>display: flex</code>。</p>
<h2 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h2><p><img src="/vue2/image-20221120005333689.png" alt="image-20221120005333689"></p>
<h3 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h3><p><code>v-if</code> 指令用于条件性地渲染一块内容。这块内容只会在指令的表达式返回 true 值的时候</p>
<p>被渲染。</p>
<p><strong>在被隐藏的元素不会渲染（即不会出现在Dom中）</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;awesome&quot;</span>&gt;</span>Vue is awesome!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可以用 <code>v-else</code> 添加一个“else 块”：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;awesome&quot;</span>&gt;</span>Vue is awesome!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span>Oh no 😢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="在template元素上使用v-if条件渲染分组"><a href="#在template元素上使用v-if条件渲染分组" class="headerlink" title="在template元素上使用v-if条件渲染分组"></a>在template元素上使用v-if条件渲染分组</h3><p>因为 <code>v-if</code> 是一个指令，所以必须将它添加到一个元素上。但是如果想切换多个元素呢？</p>
<p>此时可以把一个 <code>&lt;template&gt;</code> 元素当做不可见的包裹元素，并在上面使用 <code>v-if</code>。<strong>最终的</strong></p>
<p><strong>渲染结果将不包含 <code>&lt;template&gt;</code> 元素。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;ok&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>虽然用div或其他元素进行包裹也可以实现但破坏了结构</strong></p>
<p><strong>让之前的样式选择器无法找到对应的元素</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#app</span> <span class="selector-tag">h1</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>:pink</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span> = <span class="string">&#x27;true&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">         	asdsd   </span><br><span class="line">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="v-else"><a href="#v-else" class="headerlink" title="v-else"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/conditional.html#v-else"><code>v-else</code></a></h3><p>你可以使用 <code>v-else</code> 指令来表示 <code>v-if</code> 的“else 块”：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;Math.random() &gt; 0.5&quot;</span>&gt;</span></span><br><span class="line">  Now you see me</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  Now you don&#x27;t</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：<code>v-else</code> 元素必须紧跟在带 <code>v-if</code> 或者 <code>v-else-if</code> 的元素的后面，否则它将不会</strong></p>
<p><strong>被识别。</strong>还会报错</p>
<h3 id="v-else-if"><a href="#v-else-if" class="headerlink" title="v-else-if"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/conditional.html#v-else-if"><code>v-else-if</code></a></h3><blockquote>
<p>2.1.0 新增</p>
</blockquote>
<p><code>v-else-if</code>，顾名思义，充当 <code>v-if</code> 的“else-if 块”，可以连续使用：（不可以被打断即中间不能有其他的标签）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span></span><br><span class="line">  A</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span></span><br><span class="line">  B</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span></span><br><span class="line">  C</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  Not A/B/C</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>类似于 <code>v-else</code>，<code>v-else-if</code> 也必须紧跟在带 <code>v-if</code> 或者 <code>v-else-if</code> 的元素之后。</strong></p>
<h3 id="用key管理可以复用的元素"><a href="#用key管理可以复用的元素" class="headerlink" title="用key管理可以复用的元素"></a>用key管理可以复用的元素</h3><blockquote>
<p><strong>Vue 会尽可能高效地渲染元素，通常会复用已有元素而不是从头开始渲染。</strong>这么做除了使 &#96;&#96;</p>
</blockquote>
<p>Vue 变得非常快之外，还有其它一些好处。例如，如果你允许用户在不同的登录方式之间切</p>
<p>换：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;loginType === &#x27;username&#x27;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter your username&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter your email address&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>那么在上面的代码中切换 <code>loginType</code> 将不会清除用户已经输入的内容。因为两个模板使</p>
<p>用了相同的元素，**<code>&lt;input&gt;</code> 不会被替换掉——仅仅是替换了它的 <code>placeholder</code>**。</p>
<blockquote>
<p>这样也不总是符合实际需求，所以 <strong>Vue 为你提供了一种方式来表达“这两个元素是完全独立的，不要复用它们”。</strong>只需添加一个具有唯一值的 <code>key</code> attribute 即可</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 未设置key的元素vue会复用已有的元素而不是从头渲染 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 导致input中的值在切换后不改变 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- key值不能为空 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&#x27;login&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter your username&quot;</span> <span class="attr">key</span>=<span class="string">&quot;a&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>邮箱<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter your email&quot;</span> <span class="attr">key</span>=<span class="string">&quot;b&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;login = !login&#x27;</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">login</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意，<code>&lt;label&gt;</code> 元素仍然会被高效地复用，因为它们没有添加 <code>key</code> attribute。</p>
<p>原因详解查看列表渲染的key讲解</p>
<h3 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h3><p>另一个用于根据条件展示元素的选项是 <code>v-show</code> 指令。用法大致一样：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>Hello!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>不同的是带有 <code>v-show</code> 的元素始终会被渲染并保留在 DOM 中。</strong><code>v-show</code> 只是简单地切换</p>
<p>元素的 CSS property <code>display</code>。</p>
<p><strong>而在v-if、v-esle中被隐藏的元素不会出现在Dom中</strong></p>
<blockquote>
<p><strong>注意，<code>v-show</code> 不支持 <code>&lt;template&gt;</code> 元素，也不支持 <code>v-else</code></strong></p>
</blockquote>
<h3 id="v-ifVS-v-show"><a href="#v-ifVS-v-show" class="headerlink" title="v-ifVS v-show"></a>v-ifVS v-show</h3><p>1、<code>v-if</code> 是“真正”的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。</p>
<p>2、<code>v-if</code> 也是<strong>惰性的</strong>：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。</p>
<p>3、相比之下，<code>v-show</code> 就简单得多——不管初始条件是什么，元素总是会被渲染，并且只是简单地基于 CSS 进行切换。</p>
<p>4、一般来说，<code>v-if</code> 有更高的切换开销，而 <code>v-show</code> 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 <code>v-show</code> 较好；如果在运行时条件很少改变，则使用 <code>v-if</code> 较好。</p>
<p><code>转换频率高时用**show**</code></p>
<h3 id="v-if与v-for-一起使用"><a href="#v-if与v-for-一起使用" class="headerlink" title="v-if与v-for 一起使用"></a>v-if与v-for 一起使用</h3><ul>
<li><input checked disabled type="checkbox"> <strong>不推荐</strong>同时使用 <code>v-if</code> 和 <code>v-for</code>。请查阅<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E9%81%BF%E5%85%8D-v-if-%E5%92%8C-v-for-%E7%94%A8%E5%9C%A8%E4%B8%80%E8%B5%B7-%E5%BF%85%E8%A6%81">风格指南</a>以获取更多信息。</li>
</ul>
<blockquote>
<p>当 <code>v-if</code> 与 <code>v-for</code> 一起使用时，**<code>v-for</code> 具有比 <code>v-if</code> 更高的优先级**。请查阅[列表渲染</p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/list.html#v-for-with-v-if">指南</a>以获取详细信息。</p>
</blockquote>
<h2 id="列表渲染虚拟DOM-key"><a href="#列表渲染虚拟DOM-key" class="headerlink" title="列表渲染虚拟DOM\key"></a><strong>列表渲染</strong>虚拟DOM\key</h2><p><img src="/vue2/image-20221120010930924.png" alt="image-20221120010930924"></p>
<h3 id="用-v-for-把一个数组对应为一组元素"><a href="#用-v-for-把一个数组对应为一组元素" class="headerlink" title="用 v-for 把一个数组对应为一组元素"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/list.html#%E7%94%A8-v-for-%E6%8A%8A%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E5%AF%B9%E5%BA%94%E4%B8%BA%E4%B8%80%E7%BB%84%E5%85%83%E7%B4%A0">用 <code>v-for</code> 把一个数组对应为一组元素</a></h3><p>用 <code>v-for</code> 指令基于一个数组来渲染一个列表。<code>v-for</code> 指令需要使用 <code>item in items</code> <strong>(js中for -in - 语法)</strong></p>
<p>形式的特殊语法，其中 <code>items</code> 是源数据数组，而 <code>item</code> 则是被迭代的数组元素的<strong>别名</strong>。</p>
<p>:key<strong>特殊的绑定</strong> 使其具有唯一性为后面用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;val in arr&quot;</span> <span class="attr">:key</span>=<span class="string">&#x27;index&#x27;</span>&gt;</span>&#123;&#123;val&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 <code>v-for</code> 块中，我们可以访问所有父作用域的 property。**<code>v-for</code> 还支持一个可选的第二**</p>
<p><strong>个参数，即当前项的索引。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;example-2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in items&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; parentMessage &#125;&#125; - &#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>你也可以用 <code>of</code> 替代 <code>in</code> 作为分隔符，因为它更接近 JavaScript 迭代器的语法：</strong></p>
<p>历史遗留问题</p>
<p>遍历数组、对象、字符串、<strong>数字</strong>（数值时为遍历次数）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 遍历数组 （常用）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(val,index) in arr&quot;</span>&gt;</span>&#123;&#123;val&#125;&#125;---&#123;&#123;index&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 遍历对象 （）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&#x27;(val,key,index) in Obj&#x27;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 三个参数 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 分别对应 值、健、索引  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 一个参数为 val 两个参数对应 val、key --&gt;</span></span><br><span class="line">      &#123;&#123;val&#125;&#125;----&#123;&#123;key&#125;&#125;---&#123;&#123;index&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&#x27;(val,index) in &quot;asdqwe&quot;&#x27;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 两个参数 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 分别对应 值、健、索引  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 一个参数为 val 两个参数对应 val、key --&gt;</span></span><br><span class="line">      &#123;&#123;val&#125;&#125;----&#123;&#123;index&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&#x27;(val,index) in 6&#x27;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 三个参数 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 分别对应 值、健、索引  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 一个参数为 val 两个参数对应 val、key --&gt;</span></span><br><span class="line">      &#123;&#123;val&#125;&#125;---&#123;&#123;index&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">Obj</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">a</span>: <span class="string">&#x27;1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">b</span>: <span class="string">&#x27;2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c</span>: <span class="string">&#x27;3&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="在-v-for-里使用对象"><a href="#在-v-for-里使用对象" class="headerlink" title="在 v-for 里使用对象"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/list.html#%E5%9C%A8-v-for-%E9%87%8C%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1">在 <code>v-for</code> 里使用对象</a></h3><h4 id="你也可以用-v-for-来遍历一个对象的-property。"><a href="#你也可以用-v-for-来遍历一个对象的-property。" class="headerlink" title="你也可以用 v-for 来遍历一个对象的 property。"></a>你也可以用 <code>v-for</code> 来遍历一个对象的 property。</h4><p><img src="/vue2/image-20221120010542232.png" alt="image-20221120010542232"></p>
<p><img src="/vue2/image-20221120010915120.png" alt="image-20221120010915120"></p>
<p>&#x3D;&#x3D;必选的：&#x3D;&#x3D;第一参数property 的值 </p>
<p>可以提供第二个的参数为 property 名称 (也就是键名)：</p>
<p>可以用第三个参数作为索引</p>
<blockquote>
<p>在遍历对象时，会按 <code>Object.keys()</code> 的结果遍历，但是<strong>不能</strong>保证它的结果在不同的 </p>
<p>JavaScript 引擎下都一致。</p>
</blockquote>
<h4 id="维护状态-设置-key"><a href="#维护状态-设置-key" class="headerlink" title="维护状态 设置:key"></a>维护状态 设置:key</h4><p>设置注意：key中值的设定要根据具体况来确定</p>
<p>以主标识为主</p>
<p>&#x3D;&#x3D;index&#x3D;&#x3D;（索引）虽然可以设不过在一些场景中会出现问题<br>其原因为vue为提高效率对相同的元素节点的复用（下面有详解）</p>
<p>当 Vue 正在更新使用 <code>v-for</code> 渲染的元素列表时，它默认使用“就地更新”的策略。如果数据项的顺序被改变，Vue 将不会移动 DOM 元素来匹配数据项的顺序，而是就地更新每个元素，并且确保它们在每个索引位置正确渲染。这个类似 Vue 1.x 的 <code>track-by=&quot;$index&quot;</code>。</p>
<p>这个默认的模式是高效的，但是<strong>只适用于不依赖子组件状态或临时 DOM 状态 (例如：表单输入值) 的列表渲染输出</strong>。</p>
<p>为了给 Vue 一个提示，以便它能跟踪每个节点的身份，从而重用和重新排序现有元素，你需要为每项提供一个唯一 <code>key</code> attribute：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">v-bind:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>建议尽可能在使用 <code>v-for</code> 时提供 <code>key</code> attribute，除非遍历输出的 DOM 内容非常简单，或者是刻意依赖默认行为以获取性能上的提升。</p>
<p>因为它是 Vue 识别节点的一个通用机制，<code>key</code> 并不仅与 <code>v-for</code> 特别关联。后面我们将在指南中看到，它还具有其它用途。</p>
<p>不要使用对象或数组之类的非基本类型值作为 <code>v-for</code> 的 <code>key</code>。请用字符串或数值类型的值。</p>
<p>更多 <code>key</code> attribute 的细节用法请移步至 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#key"><code>key</code> 的 API 文档</a>。</p>
<h3 id="key"><a href="#key" class="headerlink" title=":key"></a>:key</h3><p><img src="/vue2/image-20230216123850844.png" alt="image-20230216123850844"></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=30&spm_id_from=333.880.my_history.page.click">尚硅谷Vue2.0+Vue3.0全套教程丨vuejs从入门到精通_哔哩哔哩_bilibili</a></p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p><img src="/vue2/image-20221120163114879.png" alt="image-20221120163114879"></p>
<p><img src="/vue2/image-20221120163124025.png" alt="image-20221120163124025"></p>
<p><img src="/vue2/image-20221120163100668.png" alt="image-20221120163100668"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	面试题：react、vue中的key有什么作用？（key的内部原理）</span></span><br><span class="line"><span class="comment">						</span></span><br><span class="line"><span class="comment">1. 虚拟DOM中key的作用：</span></span><br><span class="line"><span class="comment">	key是虚拟DOM对象的标识，当数据发生变化时，Vue会根据【新数据】生成【新的虚拟DOM】, </span></span><br><span class="line"><span class="comment">	随后Vue进行【新虚拟DOM】与【旧虚拟DOM】的差异比较，比较规则如下：</span></span><br><span class="line"><span class="comment">										</span></span><br><span class="line"><span class="comment">2.对比规则：</span></span><br><span class="line"><span class="comment">	(1).旧虚拟DOM中找到了与新虚拟DOM相同的key：</span></span><br><span class="line"><span class="comment">		①.若虚拟DOM中内容没变, 直接使用之前的真实DOM！</span></span><br><span class="line"><span class="comment">		②.若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	(2).旧虚拟DOM中未找到与新虚拟DOM相同的key</span></span><br><span class="line"><span class="comment">		创建新的真实DOM，随后渲染到到页面。</span></span><br><span class="line"><span class="comment">												</span></span><br><span class="line"><span class="comment">3. 用index作为key可能会引发的问题：</span></span><br><span class="line"><span class="comment">	1. 若对数据进行：逆序添加、逆序删除等破坏顺序操作:</span></span><br><span class="line"><span class="comment">		会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</span></span><br><span class="line"><span class="comment">	2. 如果结构中还包含输入类的DOM：</span></span><br><span class="line"><span class="comment">		会产生错误DOM更新 ==&gt; 界面有问题。</span></span><br><span class="line"><span class="comment">	4. 开发中如何选择key?:</span></span><br><span class="line"><span class="comment">		1.最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号、学号等唯一值。</span></span><br><span class="line"><span class="comment">		2.如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，</span></span><br><span class="line"><span class="comment">		使用index作为key是没有问题的。</span></span><br><span class="line"><span class="comment"> 4、在不写key时vue会自动将key的值设为索引值</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 准备好一个容器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 遍历数组 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>人员列表（遍历数组）<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.once</span>=<span class="string">&quot;add&quot;</span>&gt;</span>添加一个老刘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 你也可以用 of 替代 in 作为分隔符，因为它更接近 JavaScript 迭代器的语法：--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(p,index) of persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">			&#123;&#123;p.name&#125;&#125;-&#123;&#123;p.age&#125;&#125;</span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">persons</span>:[</span></span><br><span class="line"><span class="language-javascript">				&#123;<span class="attr">id</span>:<span class="string">&#x27;001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">				&#123;<span class="attr">id</span>:<span class="string">&#x27;002&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>,<span class="attr">age</span>:<span class="number">19</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">				&#123;<span class="attr">id</span>:<span class="string">&#x27;003&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;</span></span><br><span class="line"><span class="language-javascript">			]</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">add</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">const</span> p = &#123;<span class="attr">id</span>:<span class="string">&#x27;004&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;老刘&#x27;</span>,<span class="attr">age</span>:<span class="number">40</span>&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.<span class="property">persons</span>.<span class="title function_">unshift</span>(p)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>你也可以用 <code>of</code> 替代 <code>in</code> 作为分隔符，因为它更接近 JavaScript 迭代器的语法：</p>
<p>历史遗留问题都可以用其结果无区别</p>
<h4 id="虚拟DOM的本质"><a href="#虚拟DOM的本质" class="headerlink" title="虚拟DOM的本质"></a>虚拟DOM的本质</h4><blockquote>
<p>本质是保存节点信息，属性和内容的一个JS对象</p>
</blockquote>
<p><img src="/vue2/image-20230216123934562.png" alt="image-20230216123934562"></p>
<p>真实DOM的属性太多了过重，遍历耗时久，虚拟DOM的属性少轻便，遍历快</p>
<blockquote>
<p>在内存中比较变化部分，然后给真实DOM打补丁(更新)</p>
</blockquote>
<p><img src="/vue2/image-20230216123948853.png" alt="image-20230216123948853"></p>
<h4 id="虚拟DOM的Diff对比算法"><a href="#虚拟DOM的Diff对比算法" class="headerlink" title="虚拟DOM的Diff对比算法"></a>虚拟DOM的Diff对比算法</h4><h5 id="根元素"><a href="#根元素" class="headerlink" title="根元素"></a>根元素</h5><p><strong>同级比较</strong> <em>根元素</em>发生改变时整个dom数<strong>删除重新建立</strong></p>
<p><img src="/vue2/image-20230216124532455.png" alt="image-20230216124532455"></p>
<p>*<em>同级比较</em>  <em>根元素</em>不改变，某一个属性改变,更新属性</p>
<p><img src="/vue2/image-20230216124521641.png" alt="image-20230216124521641"></p>
<h5 id="如果标签内子标签-x2F-内容改变-diff算法是如何对比的"><a href="#如果标签内子标签-x2F-内容改变-diff算法是如何对比的" class="headerlink" title="如果标签内子标签&#x2F;内容改变, diff算法是如何对比的?"></a>如果标签内子标签&#x2F;内容改变, diff算法是如何对比的?</h5><p><img src="/vue2/image-20230216130133233.png" alt="image-20230216130133233"></p>
<p>设置了就以设置的值为主</p>
<p><img src="/vue2/image-20221120163743638.png" alt="image-20221120163743638"></p>
<p>对比的是虚拟DOM中的内容而不是真实DOM的内容（它是拿着vue中的模板来生成虚拟DOM的,而不是真实DOM来生成虚拟DOM）</p>
<p><img src="/vue2/image-20220520201927537.png" alt="image-20220520201927537"></p>
<p><img src="/vue2/image-20220520202101668.png" alt="image-20220520202101668"></p>
<p><img src="/vue2/image-20221120203202449.png" alt="image-20221120203202449"></p>
<p><img src="/vue2/image-20230216130234657.png" alt="image-20230216130234657"></p>
<p><img src="/vue2/image-20230216132104913.png" alt="image-20230216132104913"></p>
<h3 id="数组的更新"><a href="#数组的更新" class="headerlink" title="数组的更新"></a>数组的更新</h3><h4 id="变更方法-1"><a href="#变更方法-1" class="headerlink" title="变更方法"></a>变更方法</h4><p>Vue中不对&#x3D;&#x3D;（data 属性 多层 )&#x3D;&#x3D;数组的进行监听（<code>特别 对数组的对象的属性进行监听[多层]</code>）</p>
<p>Vue 将被侦听的数组的变更方法进行了包裹，所以它们也将会触发视图更新。这些被包裹过</p>
<p>的方法包括：</p>
<ul>
<li><code>push()</code></li>
<li><code>pop()</code></li>
<li><code>shift()</code></li>
<li><code>unshift()</code></li>
<li><code>splice()</code></li>
<li><code>sort()</code></li>
<li><code>reverse()</code></li>
</ul>
<p>你可以打开控制台，然后对前面例子的 <code>items</code> 数组尝试调用变更方法。比如 <code>example1.items.push(&#123; message: &#39;Baz&#39; &#125;)</code>。</p>
<h3 id="替换数组-1"><a href="#替换数组-1" class="headerlink" title="替换数组"></a>替换数组</h3><p><strong>变更方法，顾名思义，会变更调用了这些方法的原始数组</strong>。相比之下，也有非变更方法，例如 <code>filter()</code>、<code>concat()</code> 和 <code>slice()</code>。<strong>它们不会变更原始数组，</strong>而<strong>总是返回一个新数组</strong>。当使用非变更方法时，可以用新数组替换旧数组：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">example1.<span class="property">items</span> = example1.<span class="property">items</span>.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> item.<span class="property">message</span>.<span class="title function_">match</span>(<span class="regexp">/Foo/</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>你可能认为这将导致 Vue 丢弃现有 DOM 并重新渲染整个列表。幸运的是，事实并非如此。</p>
<p>Vue 为了使得 DOM 元素得到最大范围的重用而实现了一些智能的启发式方法，所以用一个</p>
<p>含有相同元素的数组去替换原来的数组是非常高效的操作。</p>
<h3 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h3><p>由于 JavaScript 的限制，Vue <strong>不能检测</strong>数组和对象的变化。<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/reactivity.html#%E6%A3%80%E6%B5%8B%E5%8F%98%E5%8C%96%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">深入响应式原理</a>中有相关的讨</p>
<p>论。</p>
<h3 id="列表过滤-x2F-排序的结果"><a href="#列表过滤-x2F-排序的结果" class="headerlink" title="列表过滤&#x2F;排序的结果"></a>列表过滤&#x2F;排序的结果</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入名字&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;warname&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType = 1&quot;</span>&gt;</span>升序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType = 2&quot;</span>&gt;</span>降序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType = 0&quot;</span>&gt;</span>原序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;val,index in arrcopy&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;val.name&#125;&#125; --- &#123;&#123;val.age&#125;&#125; --- &#123;&#123;val.sex&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">warname</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">sortType</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">arr</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">name</span>: <span class="string">&#x27;马冬梅&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">name</span>: <span class="string">&#x27;温召伦&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">name</span>: <span class="string">&#x27;周冬雨&#x27;</span>, <span class="attr">age</span>: <span class="number">17</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">name</span>: <span class="string">&#x27;周杰伦&#x27;</span>, <span class="attr">age</span>: <span class="number">40</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">      ]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">arrcopy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> obj = <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">p</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> p.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">warname</span>) != -<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sortType</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> obj.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">sortType</span> == <span class="number">1</span> ? a.<span class="property">age</span> - b.<span class="property">age</span> : b.<span class="property">age</span> - a.<span class="property">age</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> obj</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;      <span class="comment">// watch: &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//   warname: &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     immediate: true,</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     handler(val) &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//       // 注意字符串用indexOf匹配空字符串返回的为 0</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//       this.arrcopy = this.arr.filter((p) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//         return p.name.indexOf(val) != -1;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//       &#125;)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="在上使用v-for"><a href="#在上使用v-for" class="headerlink" title="在上使用v-for"></a><strong>在<template>上使用v-for</template></strong></h3><p>类似于 <code>v-if</code>，你也可以利用带有 <code>v-for</code> 的 <code>&lt;template&gt;</code> 来循环渲染一段包含多个元素</p>
<p>的内容。比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item.msg &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>template<strong>会自动除去</strong></p>
<h3 id="v-for-与-v-if一起使用"><a href="#v-for-与-v-if一起使用" class="headerlink" title="v-for 与 v-if一起使用"></a>v-for 与 v-if一起使用</h3><blockquote>
<p>注意我们不推荐在同一元素上使用 v-if 和 v-for。更多细节可查阅风格指南。</p>
</blockquote>
<p>当它们处于同一节点，<code>v-for</code> 的优先级比 <code>v-if</code> 更高，这意味着 <code>v-if</code> 将分别重复运行</p>
<p>于每个 <code>v-for</code> 循环中。(即通过foir创建的每个子节点中都有一个 v_if)当你只想为<em>部分</em>项渲染节点时，这种优先级的机制会十分有用，如</p>
<p>下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;todo in todos&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;!todo.isComplete&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; todo &#125;&#125;</span><br><span class="line">&lt;/li</span><br></pre></td></tr></table></figure>

<h3 id="在组件中用v-for"><a href="#在组件中用v-for" class="headerlink" title="在组件中用v_for"></a>在组件中用v_for</h3><p>补</p>
<h2 id="事件处理-1"><a href="#事件处理-1" class="headerlink" title="事件处理"></a>事件处理</h2><h3 id="监听事件"><a href="#监听事件" class="headerlink" title="监听事件"></a>监听事件</h3><p>可以用v-on指令监听 DOM  事件，并在触发时运行一些js代码</p>
<p>示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example-1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;counter += 1&quot;</span>&gt;</span>Add 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>The button above has been clicked &#123;&#123; counter &#125;&#125; times.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> example1 = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;#example-1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">counter</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="事件处理方法"><a href="#事件处理方法" class="headerlink" title="事件处理方法"></a>事件处理方法</h3><p>然而许多事件处理逻辑会更为复杂，所以直接把 JavaScript 代码写在 <code>v-on</code> 指令中是不可</p>
<p>行的。因此 <code>v-on</code> 还可以接收一个需要调用的方法名称。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example-2&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- `greet` 是在下面定义的方法名 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;greet&quot;</span>&gt;</span>Greet<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> example2 = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;#example-2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Vue.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 在 `methods` 对象中定义方法</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">greet</span>: <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// `this` 在方法里指向当前 Vue 实例</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">&#x27;Hello &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;!&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// `event` 是原生 DOM 事件</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (event) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(event.<span class="property">target</span>.<span class="property">tagName</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 也可以用 JavaScript 直接调用方法</span></span></span><br><span class="line"><span class="language-javascript">example2.<span class="title function_">greet</span>() <span class="comment">// =&gt; &#x27;Hello Vue.js!&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="内联处理器中的方法"><a href="#内联处理器中的方法" class="headerlink" title="内联处理器中的方法"></a>内联处理器中的方法</h3><p>除了直接绑定到一个方法，也可以在内联 JavaScript 语句中调用方法：(即传入参数)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example-3&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;say(&#x27;hi&#x27;)&quot;</span>&gt;</span>Say hi<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;say(&#x27;what&#x27;)&quot;</span>&gt;</span>Say what<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;#example-3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">say</span>: <span class="keyword">function</span> (<span class="params">message</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">     <span class="comment">// 不加括号会传过来事件对象</span></span></span><br><span class="line"><span class="language-javascript">	 <span class="comment">//this为vm即vue实例对象</span></span></span><br><span class="line"><span class="language-javascript">     <span class="comment">// 加括号后不传参数就为空</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 传参也只有传的参数除非加上$event才会有事件对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(message)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>有时也需要在内联语句处理器中访问原始的 DOM 事件。可以用特殊变量 <code>$event</code> 把它</strong></p>
<p><strong>传入方法：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;warn(&#x27;Form cannot be submitted yet.&#x27;, </span></span></span><br><span class="line"><span class="string"><span class="tag"> $event)&quot;</span>&gt;</span>  Submit <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="attr">warn</span>: <span class="keyword">function</span> (<span class="params">message, event</span>) &#123;</span><br><span class="line">    <span class="comment">// 现在我们可以访问原生事件对象</span></span><br><span class="line">    <span class="keyword">if</span> (event) &#123;</span><br><span class="line">      event.<span class="title function_">preventDefault</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">alert</span>(message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="事件修饰符-1"><a href="#事件修饰符-1" class="headerlink" title="事件修饰符"></a>事件修饰符</h3><p>在事件处理程序中调用 <code>event.preventDefault()</code> 或 <code>event.stopPropagation()</code> </p>
<p>是非常常见的需求。尽管我们可以在方法中轻松实现这点，但更好的方式是：方法只有纯粹</p>
<p>的数据逻辑，而不是去处理 DOM 事件细节。</p>
<p>处理 DOM 事件细节。</p>
<p>为了解决这个问题，Vue.js 为 <code>v-on</code> 提供了<strong>事件修饰符</strong>。之前提过，修饰符是由点开头的</p>
<p>指令后缀来表示的。</p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/vue2/vue-events.html">https://www.runoob.com/vue2/vue-events.html</a> (详解)</p>
<ul>
<li><code>.stop</code>  阻止事件冒泡</li>
<li><code>.prevent</code>  阻止默认事件的触发</li>
<li><code>.capture</code>  阻止捕获事件</li>
<li><code>.self</code> 只监听触发该元素的事件</li>
<li><code>.once</code>  只执行一次</li>
<li><code>.passive </code>  事件的默认行为立即执行，无需等待事件回调执行完毕；</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阻止冒泡事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 提交事件不再重载页面 阻止默认事件的发生--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 修饰符可以串联 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop.prevent</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只有修饰符 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加事件监听器时使用事件捕获模式 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即内部元素触发的事件先在此处理，然后才交由内部元素进行处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.capture</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只当在 event.target 是当前元素自身时触发处理函数 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即事件不是从内部元素触发的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.self</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用修饰符时，顺序很重要；相应的代码会以同样的顺序产生。因此，用 <code>v-</code></p>
<p><code>on:click.prevent.self</code> 会阻止<strong>所有的点击</strong>，而 <code>v-on:click.self.prevent</code> 只</p>
<p>会阻止对元素自身的点击。</p>
</blockquote>
<blockquote>
<p>2.1.4 新增</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 点击事件将只会触发一次 --&gt;</span><br><span class="line">&lt;a v-on:click.once=&quot;doThis&quot;&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>不像其它只能对原生的 DOM 事件起作用的修饰符，<code>.once</code> 修饰符还能被用到自定义的<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-custom-events.html">组件事件</a>上。如果你还没有阅读关于组件的文档，现在大可不必担心。</p>
<blockquote>
<p>2.3.0 新增</p>
</blockquote>
<p>Vue 还对应 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Parameters"><code>addEventListener</code> 中的 <code>passive</code> 选项</a>提供了 <code>.passive</code> 修饰符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 滚动事件的默认行为 (即滚动行为) 将会立即触发 --&gt;</span><br><span class="line">&lt;!-- 而不会等待 `onScroll` 完成  --&gt;</span><br><span class="line">&lt;!-- 这其中包含 `event.preventDefault()` 的情况 --&gt;</span><br><span class="line">&lt;div v-on:scroll.passive=&quot;onScroll&quot;&gt;...&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>这个 <code>.passive</code> 修饰符尤其能够提升移动端的性能。</p>
<blockquote>
<p>不要把 <code>.passive</code> 和 <code>.prevent</code> 一起使用，因为 <code>.prevent</code> 将会被忽略，同时浏览器</p>
<p>可能会向你展示一个警告。请记住，<code>.passive</code> 会告诉浏览器你<em>不</em>想阻止事件的默认行</p>
<p>为。</p>
</blockquote>
<h3 id="按键修饰符"><a href="#按键修饰符" class="headerlink" title="按键修饰符"></a>按键修饰符</h3><p>在监听键盘事件时，我们经常需要检查详细的按键。Vue 允许为 <code>v-on</code> 在监听键盘事件</p>
<p>时、添加按键修饰符：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只有在 `key` 是 `Enter` 时调用 `vm.submit()` --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.enter</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>你可以直接将 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values"><code>KeyboardEvent.key</code></a> 暴露的任意有效按键名转换为 kebab-case 来作为修</p>
<p>饰符。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.page-down</span>=<span class="string">&quot;onPageDown&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在上述示例中，处理函数只会在 <code>$event.key</code> 等于 <code>PageDown</code> 时被调用</p>
<h5 id="按键码"><a href="#按键码" class="headerlink" title="按键码"></a>按键码</h5><blockquote>
<p><code>keyCode</code> 的事件用法<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode">已经被废弃了</a>并可能不会被最新的浏览器支持。</p>
<p>使用 <code>keyCode</code> attribute 也是允许的：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.13</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>为了在必要的情况下支持旧浏览器，Vue 提供了绝大多数常用的按键码的别名：</p>
<ul>
<li><code>.enter</code> </li>
<li><code>.tab</code></li>
<li><code>.delete</code> (捕获“删除”和“退格”键)</li>
<li><code>.esc</code></li>
<li><code>.space</code></li>
<li><code>.up</code>  上</li>
<li><code>.down</code> 下</li>
<li><code>.left</code> 左</li>
<li><code>.right</code> 右</li>
</ul>
<p>有一些按键 (<code>.esc</code> 以及所有的方向键) 在 IE9 中有不同的 <code>key</code> 值, 如果你想支持 IE9，这些</p>
<p>内置的别名应该是首选。</p>
<blockquote>
<p>按下按键获取按键码按键名（键盘中的按键码可能存在差异）</p>
<p>通过事件对象的keyCode属性获取按键码</p>
<p>通过事件对象的key属性获取按键名</p>
</blockquote>
<h5 id="通过全局设置设置按键别名"><a href="#通过全局设置设置按键别名" class="headerlink" title="通过全局设置设置按键别名"></a>通过全局设置设置按键别名</h5><p>你还可以通过全局 <code>config.keyCodes</code> 对象<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#keyCodes">自定义按键修饰符别名</a>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可以使用 `v-on:keyup.f1`</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">keyCodes</span>.<span class="property">f1</span> = <span class="number">112</span></span><br></pre></td></tr></table></figure>



<h3 id="系统修饰符"><a href="#系统修饰符" class="headerlink" title="系统修饰符"></a>系统修饰符</h3><p>可以用如下修饰符来实现仅在按下相应按键时才触发鼠标或键盘事件的监听器。</p>
<ul>
<li><code>.ctrl</code></li>
<li><code>.alt</code></li>
<li><code>.shift</code></li>
<li><code>.meta</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Alt + C --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.alt.67</span>=<span class="string">&quot;clear&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Ctrl + Click --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.ctrl</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>Do something<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">请注意修饰键与常规按键不同，在和 `keyup` 事件一起用时，事件触发时修饰键必须处于按</span><br><span class="line"></span><br><span class="line">下状态。换句话说，只有在按住 `ctrl` 的情况下释放其它按键，才能触发 `keyup.ctrl`。</span><br><span class="line"></span><br><span class="line">而单单释放 `ctrl` 也不会触发事件。如果你想要这样的行为，请为 `ctrl` 换用 </span><br><span class="line"></span><br><span class="line">`keyCode`：`keyup.17`。</span><br></pre></td></tr></table></figure>
</blockquote>
<p>总结</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.Vue中常用的按键别名：</span><br><span class="line">	回车 =&gt; enter</span><br><span class="line">	删除 =&gt; delete (捕获“删除”和“退格”键)</span><br><span class="line">	退出 =&gt; esc</span><br><span class="line">	空格 =&gt; space</span><br><span class="line">	换行 =&gt; tab (特殊，必须配合keydown去使用)</span><br><span class="line">	上 =&gt; up</span><br><span class="line">	下 =&gt; down</span><br><span class="line">	左 =&gt; left</span><br><span class="line">	右 =&gt; right</span><br><span class="line"></span><br><span class="line">2.Vue未提供别名的按键，可以使用按键原始的key值去绑定，但注意要转为kebab-case（短横线命名）</span><br><span class="line"></span><br><span class="line">3.系统修饰键（用法特殊）：ctrl、alt、shift、meta</span><br><span class="line">	(1).配合keyup使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发。</span><br><span class="line">	(2).配合keydown使用：正常触发事件。</span><br><span class="line"></span><br><span class="line">4.也可以使用keyCode去指定具体的按键（不推荐）</span><br><span class="line"></span><br><span class="line">5.Vue.config.keyCodes.自定义键名 = 键码，可以去定制按键别名</span><br></pre></td></tr></table></figure>

<h4 id="exact-修饰符"><a href="#exact-修饰符" class="headerlink" title=".exact 修饰符"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/events.html#exact-%E4%BF%AE%E9%A5%B0%E7%AC%A6"><code>.exact</code> 修饰符</a></h4><blockquote>
<p>2.5.0 新增</p>
</blockquote>
<p><code>.exact</code> 修饰符允许你控制由精确的系统修饰符组合触发的事件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 即使 Alt 或 Shift 被一同按下时也会触发 --&gt;</span><br><span class="line">&lt;button v-on:click.ctrl=&quot;onClick&quot;&gt;A&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 有且只有 Ctrl 被按下的时候才触发 --&gt;</span><br><span class="line">&lt;button v-on:click.ctrl.exact=&quot;onCtrlClick&quot;&gt;A&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 没有任何系统修饰符被按下的时候才触发 --&gt;</span><br><span class="line">&lt;button v-on:click.exact=&quot;onClick&quot;&gt;A&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h3 id="鼠标按钮修饰符"><a href="#鼠标按钮修饰符" class="headerlink" title="鼠标按钮修饰符"></a>鼠标按钮修饰符</h3><blockquote>
<p>2.2.0 新增</p>
</blockquote>
<ul>
<li><code>.left</code></li>
<li><code>.right</code></li>
<li><code>.middle</code></li>
</ul>
<p>这些修饰符会限制处理函数仅响应特定的鼠标按钮。</p>
<h2 id="表单输入绑定（参考v-monde）"><a href="#表单输入绑定（参考v-monde）" class="headerlink" title="表单输入绑定（参考v-monde）"></a>表单输入绑定（参考v-monde）</h2><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a><strong>基本语法</strong></h3><p>可以用 <code>v-model</code> 指令在表单 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code> 及 <code>&lt;select&gt;</code> 元素上创建双向数据绑定。它会根据控件类型自动选取正确的方法来更新元素。尽管有些神奇，但 <code>v-model</code> 本质上不过是语法糖。它负责监听用户的输入事件以更新数据，并对一些极端场景进行一些特殊处理。</p>
<blockquote>
<p><code>v-model</code> 会忽略所有表单元素的 <code>value</code>、<code>checked</code>、<code>selected</code> attribute 的初始值而</p>
<p>总是将 Vue 实例的数据作为数据来源。你应该通过 JavaScript 在组件的 <code>data</code> 选项中声明</p>
<p>初始值。</p>
</blockquote>
<p>v-model 在内部为不同的输入元素使用不同的 property 并抛出不同的事件：</p>
<pre><code>text 和 textarea 元素使用 value property 和 input 事件；
checkbox 和 radio 使用 checked property 和 change 事件；
select 字段将 value 作为 prop 并将 change 作为事件
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">`v-model` 在内部为不同的输入元素使用不同的 property 并抛出不同的事件：</span><br><span class="line"></span><br><span class="line">- text 和 textarea 元素使用 `value` property 和 `input` 事件；</span><br><span class="line">- checkbox 和 radio 使用 `checked` property 和 `change` 事件；</span><br><span class="line">- select 字段将 `value` 作为 prop 并将 `change` 作为事件</span><br></pre></td></tr></table></figure>



<blockquote>
<p>对于需要使用<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%BE%93%E5%85%A5%E6%B3%95">输入法</a> (如中文、日文、韩文等) 的语言，你会发现 <code>v-model</code> 不会在输入法</p>
<p>组合文字过程中得到更新。如果你也想处理这个过程，请使用 <code>input</code> 事件。</p>
</blockquote>
<h3 id="文本类型"><a href="#文本类型" class="headerlink" title="文本类型"></a>文本类型</h3><p>直接使用v-moder就行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;edit me&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Message is: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="多行文本"><a href="#多行文本" class="headerlink" title="多行文本"></a>多行文本</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Multiline message is:<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;white-space: pre-line;&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;add multiple lines&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>在文本区域插值 (<code>&lt;textarea&gt;&#123;&#123;text&#125;&#125;&lt;/textarea&gt;</code>) 并不会生效，应用 <code>v-model</code>来</p>
<p>代替。</p>
</blockquote>
<h3 id="复选框"><a href="#复选框" class="headerlink" title="复选框"></a>复选框</h3><p>默认勾选checked</p>
<p><strong>单个复选框，绑定到布尔值</strong>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checked&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span>&#123;&#123; checked &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>多个复选框，绑定到同一个数组：</strong></p>
<p>不配置value值默认读取的是其中一个的checked值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;jack&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checkedNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;jack&quot;</span>&gt;</span>Jack<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;john&quot;</span> <span class="attr">value</span>=<span class="string">&quot;John&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checkedNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;john&quot;</span>&gt;</span>John<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;mike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Mike&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checkedNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;mike&quot;</span>&gt;</span>Mike<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Checked names: &#123;&#123; checkedNames &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"> <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;...&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">checkedNames</span>: [] <span class="comment">// 设为字符串时收集到的是布尔值会导致全选</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"> &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="单选按钮"><a href="#单选按钮" class="headerlink" title="单选按钮"></a>单选按钮</h3><p>默认是没有value值的，v-moder是收集value值的故必须加上value值</p>
<p>必须设置value值</p>
<p>设置为数组时将勾选的value值存入数组中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example-4&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;one&quot;</span> <span class="attr">value</span>=<span class="string">&quot;One&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;picked&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;one&quot;</span>&gt;</span>One<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;two&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Two&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;picked&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;two&quot;</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>Picked: &#123;&#123; picked &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;#example-4&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">picked</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="选择器（下拉列表）-单选多选"><a href="#选择器（下拉列表）-单选多选" class="headerlink" title="选择器（下拉列表） 单选多选"></a>选择器（下拉列表） 单选多选</h3><p>需要设置value值</p>
<h4 id="单选时："><a href="#单选时：" class="headerlink" title="单选时："></a>单选时：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example-5&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;selected&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">disabled</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>请选择<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;A&#x27;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;B&#x27;</span>&gt;</span>B<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;C&#x27;</span>&gt;</span>C<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>Selected: &#123;&#123; selected &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;...&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">selected</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//字符串只能选一个</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果 <code>v-model</code> 表达式的初始值未能匹配任何选项，<code>&lt;select&gt;</code> 元素将被渲染为“未选中”状态。在 iOS 中，这会使用户无法选择第一个选项。因为这样的情况下，iOS 不会触发 change 事件。因此，更推荐像上面这样提供一个值为空的禁用选项。</p>
</blockquote>
<h4 id="多选时-绑定一个数组-按着ctrl进行多选"><a href="#多选时-绑定一个数组-按着ctrl进行多选" class="headerlink" title="多选时(绑定一个数组) 按着ctrl进行多选"></a>多选时(绑定一个数组) 按着ctrl进行多选</h4><p><strong>不按ctrl直接选只能选一个</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example-6&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;selected&quot;</span> <span class="attr">multiple</span> <span class="attr">style</span>=<span class="string">&quot;width: 50px;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">disabled</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>请选择<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;A&#x27;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;B&#x27;</span>&gt;</span>B<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;C&#x27;</span>&gt;</span>C<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>Selected: &#123;&#123; selected &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  	<span class="attr">el</span>: <span class="string">&#x27;#example-6&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  	<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">selected</span>: []</span></span><br><span class="line"><span class="language-javascript"> 	&#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="用-v-for-渲染的动态选项："><a href="#用-v-for-渲染的动态选项：" class="headerlink" title="用 v-for 渲染的动态选项："></a>用 <code>v-for</code> 渲染的动态选项：</h3><p><strong>注意：同时使用了v-model 与 v-bind</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;selected&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">&quot;option in options&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;option.value&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; option.text &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Selected: &#123;&#123; selected &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;...&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">selected</span>: <span class="string">&#x27;A&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">options</span>: [</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="attr">text</span>: <span class="string">&#x27;One&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;A&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="attr">text</span>: <span class="string">&#x27;Two&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;B&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="attr">text</span>: <span class="string">&#x27;Three&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;C&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">    ]</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="值绑定"><a href="#值绑定" class="headerlink" title="值绑定"></a>值绑定</h3><p>对于单选按钮，复选框及选择框的选项，<code>v-model</code> 绑定的值通常是静态字符串 (对于复选</p>
<p>框也可以是布尔值)：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 当选中时，`picked` 为字符串 &quot;a&quot; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;picked&quot;</span> <span class="attr">value</span>=<span class="string">&quot;a&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- `toggle` 为 true 或 false --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;toggle&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 当选中第一个选项时，`selected` 为字符串 &quot;abc&quot; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;selected&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;abc&quot;</span>&gt;</span>ABC<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>但是有时我们可能想把值绑定到 Vue 实例的一个动态 property 上，这时可以用 <code>v-bind</code> </p>
<p>实现，并且这个 property 的值可以不是字符串。（设置value值与设置绑定属性的默认值类</p>
<p>型为数组）</p>
<h3 id="复选框-1"><a href="#复选框-1" class="headerlink" title="复选框"></a>复选框</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  type=&quot;checkbox&quot;</span><br><span class="line">  v-model=&quot;toggle&quot;</span><br><span class="line">  true-value=&quot;yes&quot;</span><br><span class="line">  false-value=&quot;no&quot;</span><br><span class="line">&gt;</span><br><span class="line">// 当选中时</span><br><span class="line">vm.toggle === &#x27;yes&#x27;</span><br><span class="line">// 当没有选中时</span><br><span class="line">vm.toggle === &#x27;no&#x27;</span><br></pre></td></tr></table></figure>

<p>这里的 <code>true-value</code> 和 <code>false-value</code> attribute 并不会影响输入控件的 <code>value</code> </p>
<p>attribute，因为浏览器在提交表单时并不会包含未被选中的复选框。如果要确保表单中这两</p>
<p>个值中的一个能够被提交，(即“yes”或“no”)，请换用单选按钮。</p>
<h3 id="单选按钮-1"><a href="#单选按钮-1" class="headerlink" title="单选按钮"></a>单选按钮</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;pick&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;a&quot;</span>&gt;</span></span><br><span class="line">// 当选中时</span><br><span class="line">vm.pick === vm.a</span><br></pre></td></tr></table></figure>

<h3 id="选择框的选项"><a href="#选择框的选项" class="headerlink" title="选择框的选项"></a>选择框的选项</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;selected&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 内联对象字面量 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;&#123; number: 123 &#125;&quot;</span>&gt;</span>123<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">// 当选中时</span><br><span class="line">typeof vm.selected // =&gt; &#x27;object&#x27;</span><br><span class="line">vm.selected.number // =&gt; 123</span><br></pre></td></tr></table></figure>

<h3 id="收集表单数据"><a href="#收集表单数据" class="headerlink" title="收集表单数据"></a>收集表单数据</h3><p>可以直接使用JSON.stringify将vm._data转换为JSON字符串形式（不建议直接操作 _data）</p>
<p>推荐使用一个额外属性将其包装起来,缺点使用麻烦</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以</span></span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;asd&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">_data</span>); <span class="comment">// 不推荐</span></span><br><span class="line"></span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">user</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;asd&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">user</span>); <span class="comment">//使用麻烦</span></span><br></pre></td></tr></table></figure>







<h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><p>v-model的三个修饰符：</p>
<p>​                  lazy：失去焦点再收集数据</p>
<p>​                  number：输入字符串转为有效的数字，（默认为字符）建议type&#x3D;’number’同时使用</p>
<p>​                  trim：输入首尾空格过滤</p>
<h3 id="在组件上使用-v-model"><a href="#在组件上使用-v-model" class="headerlink" title="在组件上使用 v-model"></a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/forms.html#%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%8A%E4%BD%BF%E7%94%A8-v-model">在组件上使用 <code>v-model</code></a></h3><p>补</p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p><img src="/vue2/image-20221122003443433.png" alt="image-20221122003443433"></p>
<blockquote>
<p>上述代码开了无数个定时器</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;script src=&quot;../vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2 :style=&quot;&#123;opacity&#125;&quot;&gt;欢迎学习Vue&lt;/h2&gt;</span><br><span class="line">    &#123;&#123;change()&#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    new Vue(&#123;</span><br><span class="line">      el:&quot;#app&quot;,</span><br><span class="line">      data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          opacity:1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods:&#123;</span><br><span class="line">        change()&#123;</span><br><span class="line">          if(v)&#123;</span><br><span class="line">            clearTimeout(V);</span><br><span class="line">          &#125;</span><br><span class="line">          var v = setTimeout(()=&gt;&#123;</span><br><span class="line">            console.log(&quot;清楚&quot;);</span><br><span class="line">            this.opacity -= 0.1</span><br><span class="line">            if(this.opacity &lt;= 0) &#123;</span><br><span class="line">              this.opacity = 1;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,100)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<p>可以使用vue提供生命函数钩子</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>生命周期：</p>
<p>​            1.又名：生命周期回调函数、生命周期函数、生命周期钩子。</p>
<p>​            2.是什么：Vue在关键时刻帮我们调用的一些特殊名称的函数。</p>
<p>​            3.生命周期函数的名字不可更改，但函数的具体内容是程序员根据需求编写的。</p>
<p>​            4.生命周期函数中的this指向是vm 或 组件实例对象。</p>
<p>this指向是vue实例！！只是异步过程中this指向了window下面图中红色框中的都是生命周期函数</p>
<p>常用的生命周期钩子：</p>
<blockquote>
<p>​            1.mounted: 发送ajax请求、启动定时器、绑定自定义事件、订阅消息等【初始化操作】。</p>
<p>​            2.beforeDestroy: 清除定时器、解绑自定义事件、取消订阅消息等【收尾工作】。</p>
</blockquote>
<p>​        关于销毁Vue实例</p>
<p>​            1.销毁后借助Vue开发者工具看不到任何信息。</p>
<p>​            <strong>2.销毁后自定义事件会失效，但原生DOM事件依然有效。</strong></p>
<p>​            3.一般不会在beforeDestroy操作数据，因为即便操作数据，也不会再触发更新流程了</p>
<p> Vue完成模板的解析并把初始的真实DOM元素放入页面后（挂载完毕）调用mounted</p>
<p>在创建vue实例时无el时页面会定在Has“template”option阶段，等着vm.$mount(el)指令</p>
<p>有了该指令不才继续执·	</p>
<p><img src="/vue2/9D7E810DA65B4FE9DA96A35582E7A3AB.jpg" alt="img"></p>
<p><img src="/vue2/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="$生命周期$"></p>
<p>vm.$el是真实dom</p>
<p>vm.$el instanceof HTMLElement</p>
<p><strong>beforeMount操作dom最终都不奏效的原因是：vue将内存中的虚拟DOM转为真实DOM插入页面（即实际上奏效了但被替换了，执行速度过快）</strong></p>
<blockquote>
<p>尽可能避免在mounted阶段进行dom操作</p>
</blockquote>
<p>生命周期销毁</p>
<ul>
<li><p><strong>用法</strong>：</p>
<p>完全销毁一个实例。清理它与其它实例的连接，解绑它的全部指令及事件监听器(自定义的事件)。</p>
<p>触发 <code>beforeDestroy</code> 和 <code>destroyed</code> 的钩子。</p>
<p>在大多数场景中你不应该调用这个方法。最好使用 <code>v-if</code> 和 <code>v-for</code> 指令以数据驱动的方式控制子组件的生命周期。</p>
</li>
</ul>
<blockquote>
<p>vue的指令绑定内置事件最终落到了真实的dom上，vue给dom节点绑定的自动事件会被销毁</p>
</blockquote>
<p>生命周期流程分为</p>
<ul>
<li><p>数据挂载</p>
</li>
<li><p>数据更新流程</p>
</li>
<li><p>生命周期销毁通过调用vm.$destroy()</p>
<ul>
<li><p>销毁后页面会存在但关于vm都没了</p>
</li>
<li><p>详细查看</p>
</li>
</ul>
</li>
</ul>
<p><img src="/vue2/image-20220524004010479.png" alt="image-20220524004010479"></p>
<h3 id="使用template配置项"><a href="#使用template配置项" class="headerlink" title="使用template配置项"></a>使用template配置项</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="comment">// 只能有一个根节点</span></span><br><span class="line">  <span class="comment">// template中的内容会代替容器的所有内容包括容器根节点或组件中的内容</span></span><br><span class="line">  <span class="comment">// 再此不能使用template作为根节点，</span></span><br><span class="line">  <span class="comment">// 介意组件中使用</span></span><br><span class="line">  <span class="comment">// template的优先级高</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">	&lt;div&gt; </span></span><br><span class="line"><span class="string">		&lt;h1&gt;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><h2 id="组件基础"><a href="#组件基础" class="headerlink" title="组件基础"></a>组件基础</h2><h3 id="非单文件组件"><a href="#非单文件组件" class="headerlink" title="非单文件组件"></a>非单文件组件</h3><p>一个文件中包含N个组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">		Vue中使用组件的三大步骤：</span></span><br><span class="line"><span class="comment">				一、定义组件(创建组件)</span></span><br><span class="line"><span class="comment">				二、注册组件</span></span><br><span class="line"><span class="comment">				三、使用组件(写组件标签)</span></span><br><span class="line"><span class="comment">		一、如何定义一个组件？</span></span><br><span class="line"><span class="comment">		使用Vue.extend(options)创建，其中options和new Vue(options)时传入的那个options几乎一样，但也有点区别；</span></span><br><span class="line"><span class="comment">		区别如下：</span></span><br><span class="line"><span class="comment">		1.el不要写，为什么？ ——— 最终所有的组件都要经过一个vm的管理，由vm中的el决定服务哪个容器。</span></span><br><span class="line"><span class="comment">	    2.data必须写成函数，为什么？ ———— 避免组件被复用时，数据存在引用关系。</span></span><br><span class="line"><span class="comment">					备注：使用template可以配置组件结构。</span></span><br><span class="line"><span class="comment">		二、如何注册组件？</span></span><br><span class="line"><span class="comment">			1.局部注册：靠new Vue的时候传入components选项</span></span><br><span class="line"><span class="comment">			2.全局注册：靠Vue.component(&#x27;组件名&#x27;,组件)</span></span><br><span class="line"><span class="comment">		三、编写组件标签：</span></span><br><span class="line"><span class="comment">			&lt;school&gt;&lt;/school&gt;</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 准备好一个容器--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 第三步：编写组件标签 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 第三步：编写组件标签 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">student</span>&gt;</span><span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root2&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="comment">//第一步：创建school组件</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">template</span>:<span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">			&lt;div class=&quot;demo&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">				&lt;h2&gt;学校名称：&#123;&#123;schoolName&#125;&#125;&lt;/h2&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">				&lt;h2&gt;学校地址：&#123;&#123;address&#125;&#125;&lt;/h2&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">				&lt;button @click=&quot;showName&quot;&gt;点我提示学校名&lt;/button&gt;	</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">			&lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">		`</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// el:&#x27;#root&#x27;, //组件定义时，一定不要写el配置项，因为最终所有的组件都要被一个vm管理，由vm决定服务于哪个容器。</span></span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">schoolName</span>:<span class="string">&#x27;尚硅谷&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">address</span>:<span class="string">&#x27;北京昌平&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">showName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">schoolName</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="comment">//第一步：创建student组件</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">template</span>:<span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">			&lt;div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">				&lt;h2&gt;学生姓名：&#123;&#123;studentName&#125;&#125;&lt;/h2&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">				&lt;h2&gt;学生年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">			&lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">		`</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">studentName</span>:<span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">age</span>:<span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript">	</span></span><br><span class="line"><span class="language-javascript">	<span class="comment">//第一步：创建hello组件</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">const</span> hello = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">template</span>:<span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">			&lt;div&gt;	</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">				&lt;h2&gt;你好啊！&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">			&lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">		`</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">name</span>:<span class="string">&#x27;Tom&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript">	</span></span><br><span class="line"><span class="language-javascript">	<span class="comment">//第二步：全局注册组件</span></span></span><br><span class="line"><span class="language-javascript">	<span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;hello&#x27;</span>,hello)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="comment">//创建vm</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">msg</span>:<span class="string">&#x27;你好啊！&#x27;</span></span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="comment">//第二步：注册组件（局部注册）</span></span></span><br><span class="line"><span class="language-javascript">		<span class="attr">components</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 组件名: 变量名</span></span></span><br><span class="line"><span class="language-javascript">			school,</span></span><br><span class="line"><span class="language-javascript">			student</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">el</span>:<span class="string">&#x27;#root2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="组件命名注意项"><a href="#组件命名注意项" class="headerlink" title="组件命名注意项"></a>组件命名注意项</h3><p>几个注意点：</p>
<p>​          1.关于组件名:</p>
<p>​                一个单词组成：</p>
<p>​                      第一种写法(首字母小写)：school</p>
<p>​                      第二种写法(首字母大写)：School</p>
<p>​                多个单词组成：</p>
<p>​                      第一种写法(kebab-case命名)：my-school</p>
<p>​                      第二种写法(CamelCase命名)：MySchool (需要Vue脚手架支持)</p>
<blockquote>
<p>​                备注：</p>
<p>​                    (1).组件名尽可能回避HTML中已有的元素名称，例如：h2、H2都不行。</p>
<p>​                    (2).可以使用name配置项指定组件在开发者工具中呈现的名字。</p>
<p>​							+ 只是设置了在开发者插件显示的名字其他的均不变（在下面的嵌套实例中体现出来）</p>
</blockquote>
<p>​          2.关于组件标签:</p>
<p>​                第一种写法：<school></school></p>
<p>​                第二种写法：<school></school></p>
<p>​                备注：不用使用脚手架时，<school>会导致后续组件不能渲染。</school></p>
<p>​          3.一个简写方式：</p>
<p>​                const school &#x3D; Vue.extend(options) 可简写为：const school &#x3D; options</p>
<p>​				未调用Vue.extend()创建组件的 情况下在注册组件时会默认自动调用，写了就不会调用</p>
<p><code>简写方式</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const hello = &#123;</span><br><span class="line">			template:`</span><br><span class="line">				&lt;div&gt;	</span><br><span class="line">					&lt;h2&gt;你好啊！&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			`,</span><br><span class="line">			data()&#123;</span><br><span class="line">				return &#123;</span><br><span class="line">					name:&#x27;Tom&#x27;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br></pre></td></tr></table></figure>

<h3 id="组件的名字问题"><a href="#组件的名字问题" class="headerlink" title="组件的名字问题"></a>组件的名字问题</h3><p>创建时定义的为组件的名字（改的是vue开发者工具中显示的名字）</p>
<p><img src="/vue2/image-20221122232743625.png" alt="image-20221122232743625"></p>
<p>注册时定义的名字为使用时的名字即使用组件时的标签名(未写name配置项时，开发者工具默认名字)</p>
<p><img src="/vue2/image-20221122232801153.png" alt="image-20221122232801153"></p>
<p><img src="/vue2/image-20221122232751494.png" alt="image-20221122232751494"></p>
<h3 id="嵌套组件"><a href="#嵌套组件" class="headerlink" title="嵌套组件"></a>嵌套组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;!-- &lt;school&gt;&lt;/school&gt;</span><br><span class="line">  &lt;hello&gt;&lt;/hello&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;app&gt;&lt;/app&gt;</span><br><span class="line">  &lt;hr&gt; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var student = &#123;</span><br><span class="line">    name: &#x27;students&#x27;, //只是设置了在开发者插件显示的名字其他的均不变</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123; name: &quot;李四&quot; &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;学生名：&#123;&#123;name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    `</span><br><span class="line">  &#125;</span><br><span class="line">  //简单嵌套</span><br><span class="line">  var school = &#123;</span><br><span class="line">    name: &#x27;schooll&#x27;, //只是设置了在开发者插件显示的名字其他的均不变</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123; name: &quot;二中&quot; &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;学校名&#123;&#123;name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;student&gt;&lt;/student&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    `,</span><br><span class="line">    components: &#123;</span><br><span class="line">      student// 谁注册谁使用 // 创建后才能注册</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  var hello = &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        mas: &quot;你好VUE&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123;mas&#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    `</span><br><span class="line">  &#125;</span><br><span class="line">  var app = &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">      school,</span><br><span class="line">      hello</span><br><span class="line">    &#125;,</span><br><span class="line">    template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;school&gt;&lt;/school&gt;</span><br><span class="line">  &lt;hello&gt;&lt;/hello&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    `</span><br><span class="line">  &#125;</span><br><span class="line">  var vm = new Vue(&#123;</span><br><span class="line">    el: &#x27;#app&#x27;,</span><br><span class="line">    template: &#x27;&lt;app&gt;&lt;/app&gt;&#x27;,</span><br><span class="line">    data: &#123;&#125;,</span><br><span class="line">    computed: &#123;&#125;,</span><br><span class="line">    watch: &#123;&#125;,</span><br><span class="line">    methods: &#123;&#125;,</span><br><span class="line">    filters: &#123;&#125;,</span><br><span class="line">    directives: &#123;&#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      school,</span><br><span class="line">      hello,</span><br><span class="line">      app</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p><img src="/vue2/image-20220524055722525.png" alt="image-20220524055722525"></p>
<p><img src="/vue2/image-20220524055836390.png" alt="image-20220524055836390"></p>
<p><img src="/vue2/image-20220524055653473.png" alt="image-20220524055653473"></p>
<h3 id="注册为全局进行嵌套问题"><a href="#注册为全局进行嵌套问题" class="headerlink" title="注册为全局进行嵌套问题"></a>注册为全局进行嵌套问题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;script src=&quot;../vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line">    &lt;scholl&gt;</span><br><span class="line">    // 注册为全局进行嵌套有效，只是被覆盖了</span><br><span class="line">    // template 中的数据会完全替换掉Scholl和它里面的数据</span><br><span class="line">      &lt;Hell&gt;&lt;/Hell&gt;</span><br><span class="line">    &lt;/scholl&gt;</span><br><span class="line">    </span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    let scholl = Vue.extend(&#123;</span><br><span class="line">      name: &quot;xuexiao&quot;,</span><br><span class="line">      // 只能有唯一根标签</span><br><span class="line">      template: `</span><br><span class="line">      &lt;h1&gt;&#123;&#123;name&#125;&#125;&lt;/h1&gt;`,</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          name: &quot;尚硅谷&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    let hell = Vue.extend(&#123;</span><br><span class="line">      name: &quot;hell&quot;,</span><br><span class="line">      template: `</span><br><span class="line">      &lt;h1&gt;&#123;&#123;name&#125;&#125;&lt;/h1&gt;`,</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          name: &quot;尚硅谷hell&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    Vue.component(&quot;Hell&quot;, hell)</span><br><span class="line"></span><br><span class="line">    new Vue(&#123;</span><br><span class="line">      el: &#x27;#root&#x27;,</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;&#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      components: &#123;</span><br><span class="line">        scholl</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>





<h3 id="构造函数VueComponent"><a href="#构造函数VueComponent" class="headerlink" title="构造函数VueComponent"></a>构造函数VueComponent</h3><p>关于VueComponent：</p>
<p>​            1.school组件本质是一个名为VueComponent的构造函数，且不是程序员定义的，是Vue.extend生成的。 </p>
<p>​            2.我们只需要写<school>或<school></school>，**Vue解析时会帮我们创建school组件的实例对象， <strong>即Vue帮我们执行的：new VueComponent(options)。</strong></school></p>
<p>​            3.特别注意：每次调用Vue.extend，返回的都是一个全新的VueComponent！！！！</p>
<p>​            4.关于this指向：</p>
<p>​                (1).组件配置中：</p>
<p>​                      data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【VueComponent实例对象】。</p>
<p>​                (2).new Vue(options)配置中：</p>
<p>​                      data函数、methods中的函数、watch中的函数、computed中的函数 <code>它们的this均是【Vue实例对象】</code>。</p>
<p>​            5.VueComponent的实例对象，以后简称vc（也可称之为：组件实例对象）。</p>
<p>​              <code>Vue的实例对象，以后简称vm</code>。</p>
<p> <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#vm-children">vm.$children</a></p>
<p>当前实例的直接子组件。<strong>需要注意 <code>$children</code> 并不保证顺序，也不是响应式的。</strong>如果你发现自己正在尝试使用 <code>$children</code> 来进行数据绑定，考虑使用一个数组配合 <code>v-for</code> 来生成子组件，并且使用 Array 作为真正的来源。</p>
<img src="../../../../../../media/home/mc/.config/Typora/typora-user-images/image-20220524232048891.png" alt="image-20220524232048891" style="zoom: 33%;">

<h3 id="一个重要的内置关系"><a href="#一个重要的内置关系" class="headerlink" title="一个重要的内置关系"></a>一个重要的内置关系</h3><p><img src="/vue2/image-20221123133454770.png" alt="image-20221123133454770"></p>
<p><img src="/vue2/image-20221123133548991.png" alt="image-20221123133548991"></p>
<p><img src="/vue2/image-20221123134010111.png" alt="image-20221123134010111"></p>
<h3 id="基本示例"><a href="#基本示例" class="headerlink" title="基本示例"></a>基本示例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**使用Vue.component(“”,&#123;&#125;)创建全局组件**</span><br></pre></td></tr></table></figure>

<p>组件创建实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/ 定义一个名为 button-counter 的新组件（全局的组件）</span><br><span class="line">Vue.component(&#x27;button-counter&#x27;, &#123;</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: &#x27;&lt;button v-on:click=&quot;count++&quot;&gt;You clicked me &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>组件是可复用的 Vue 实例，且带有一个名字：在这个例子中是 <code>&lt;button-counter&gt;</code>。我们可以在一个通过 <code>new Vue</code> 创建的 Vue 根实例中，把这个组件作为自定义元素来使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">components-demo</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>完整的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 创建组件</span></span></span><br><span class="line"><span class="language-javascript"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;button-counter&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">     <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">       	<span class="attr">count</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"> 			&#125;,</span></span><br><span class="line"><span class="language-javascript"> 			<span class="comment">// 模板</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">template</span>: <span class="string">&#x27;&lt;button v-on:click=&quot;count++&quot;&gt;You clicked me &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">computed</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">watch</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">methods</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">filters</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">directives</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>因为组件是可复用的 Vue 实例，所以它们与 <code>new Vue</code> 接收相同的选项，例如 <code>data</code>、<code>computed</code>、<code>watch</code>、<code>methods</code> 以及生命周期钩子等。</p>
<p>仅有的例外是像 <code>el</code> 这样根实例特有的选项。</p>
<h3 id="组件的复用"><a href="#组件的复用" class="headerlink" title="组件的复用"></a>组件的复用</h3><p>可以对组件进行任次的复用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;components-demo&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>注意当点击按钮时，每个组件都会各自独立维护它的 <code>count</code>。因为你每用一次组件，就会有一个它的新<strong>实例</strong>被创建。</p>
<h4 id="data必须的函数"><a href="#data必须的函数" class="headerlink" title="data必须的函数"></a>data必须的函数</h4><p>当我们定义这个 <code>&lt;button-counter&gt;</code> 组件时，你可能会发现它的 <code>data</code> 并不是像这样直接提供一个对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>取而代之的是，<strong>一个组件的 <code>data</code> 选项必须是一个函数</strong>，因此每个实例可以维护一份被返回对象的独立的拷贝：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果 Vue 没有这条规则，点击一个按钮就可能会一起改变而不会一个独立的个体</p>
<h3 id="组件的组织"><a href="#组件的组织" class="headerlink" title="组件的组织"></a>组件的组织</h3><p><strong>通常一个应用会以一棵嵌套的组件树的形式来组织：</strong></p>
<p><img src="/vue2/image-20220523093944452-16532699916173.png" alt="image-20220523093944452"></p>
<p>例如0你可能会有页头、侧边栏、内容区等组件，每个组件又包含了其它的像导航链接、博文之类的组件。</p>
<p>为了能在模板中使用，这些组件必须先注册以便 Vue 能够识别。这里有两种组件的注册类型：<strong>全局注册</strong>和<strong>局部注册</strong>。至此，我们的组件都只是通过 <code>Vue.component</code> 全局注册的。</p>
<p>全局注册的组件可以用在其被注册之后的任何 (通过 <code>new Vue</code>) 新创建的 Vue 根实例，也包括其组件树中的所有子组件的模板中</p>
<h3 id="通过Prop向子组件传递数据"><a href="#通过Prop向子组件传递数据" class="headerlink" title="通过Prop向子组件传递数据"></a>通过Prop向子组件传递数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Prop 是你可以在组件上注册的一些自定义 attribute。当一个值传递给一个 prop attribute 的时候，它就</span><br><span class="line">变成了那个组件实例的一个 property。为了给博文组件传递一个标题，我们可以</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#x27;blog-post&#x27;, &#123;</span><br><span class="line">  props: [&#x27;title&#x27;],</span><br><span class="line">  template: &#x27;<span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>一个组件默认可以拥有任意数量的prop，任何值都可以传给任何prop。在上述模板中，你会发现我们能够在组件实例中访问</p>
<h3 id="单文件组件"><a href="#单文件组件" class="headerlink" title="单文件组件"></a>单文件组件</h3><h4 id="预备知识点模块的导入导出"><a href="#预备知识点模块的导入导出" class="headerlink" title="预备知识点模块的导入导出"></a>预备知识点模块的导入导出</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">导出</span><br><span class="line"><span class="comment">// 默认暴露 （推荐使用）</span></span><br><span class="line">    <span class="comment">// export default school</span></span><br><span class="line">    <span class="comment">// 统一暴露</span></span><br><span class="line">    <span class="comment">// export &#123;school&#125;</span></span><br><span class="line">导入</span><br><span class="line">imporit <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./~&#x27;</span> <span class="comment">// es6新增的</span></span><br></pre></td></tr></table></figure>



<p>将每个组件设置为单个文件其基本结构如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 组件结构 --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="comment">/* 组件的样式 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.demo</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">background-color</span>: blueviolet;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="结构简介"><a href="#结构简介" class="headerlink" title="结构简介"></a>结构简介</h4><p>再将其整合到一个组件文件中</p>
<p>最后将其放到页面中展示整合的结果</p>
<p>其基本结构如下</p>
<h5 id="单个组件部分"><a href="#单个组件部分" class="headerlink" title="单个组件部分"></a><code>单个组件部分</code></h5><p>必须有一个App.vue文件</p>
<p>浏览器默认不支持es6的 导入模块</p>
<p>需要配置脚手架</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 组件结构 --&gt;</span><br><span class="line">  &lt;div class=&quot;demo&quot;&gt;</span><br><span class="line">    &lt;h1&gt;学校名称：&#123;&#123;name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;span&gt;地址：&#123;&#123;address&#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  // 局部组件</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;MySchool&#x27;,</span><br><span class="line">      // 在组件中的data不能写成对象形式只能写成函数式</span><br><span class="line">      // 组件创建过程中不能写el属性</span><br><span class="line">      data() &#123;</span><br><span class="line">        let obj = &#123;</span><br><span class="line">          name: &#x27;二中&#x27;,</span><br><span class="line">          address:&#x27;大冶&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">        return obj;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods:&#123;</span><br><span class="line">        showName()&#123;</span><br><span class="line">          alert(this.name)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 默认暴露 （推荐使用）</span><br><span class="line">    // export default school</span><br><span class="line">    // 统一暴露</span><br><span class="line">    // export &#123;school&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  /* 组件的样式 */</span><br><span class="line">  .demo&#123;</span><br><span class="line">    background-color: blueviolet;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 组件结构 --&gt;</span><br><span class="line">  &lt;div class=&quot;demo&quot;&gt;</span><br><span class="line">    &lt;h1&gt;学生：&#123;&#123;name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;span&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  // 局部组件</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;School&#x27;,</span><br><span class="line">      // 在组件中的data不能写成对象形式只能写成函数式</span><br><span class="line">      // 组件创建过程中不能写el属性</span><br><span class="line">      data() &#123;</span><br><span class="line">        let obj = &#123;</span><br><span class="line">          name: &#x27;李四&#x27;,</span><br><span class="line">          age: 20</span><br><span class="line">        &#125;</span><br><span class="line">        return obj;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods:&#123;</span><br><span class="line">        showName()&#123;</span><br><span class="line">          alert(this.name)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 默认暴露 （推荐使用）</span><br><span class="line">    // export default school</span><br><span class="line">    // 统一暴露</span><br><span class="line">    // export &#123;school&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  /* 组件的样式 */</span><br><span class="line">  .demo&#123;</span><br><span class="line">    background-color: pink;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="整合"><a href="#整合" class="headerlink" title="整合"></a>整合</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;School&gt;&lt;/School&gt;</span><br><span class="line">    &lt;MySchool&gt;&lt;/MySchool&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import School from &#x27;./school.vue&#x27;</span><br><span class="line">  import MySchool from &#x27;./MySchool.vue&#x27;</span><br><span class="line">  // 组件的总汇</span><br><span class="line">  export default &#123;</span><br><span class="line">    name :&#x27;App&#x27;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      School,</span><br><span class="line">      MySchool</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="创建实例进行页面绑定"><a href="#创建实例进行页面绑定" class="headerlink" title="创建实例进行页面绑定"></a>创建实例进行页面绑定</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需要配合脚手架才能运行</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`&lt;App&gt;&lt;/App&gt;`</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">App</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<h5 id="页面部分"><a href="#页面部分" class="headerlink" title="页面部分"></a>页面部分</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../vuejs/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="基础组件的自动化全局注册"><a href="#基础组件的自动化全局注册" class="headerlink" title="基础组件的自动化全局注册"></a><a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/components-registration.html#%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C">基础组件的自动化全局注册</a></h3><p>可能你的许多组件只是包裹了一个输入框或按钮之类的元素，是相对通用的。我们有时候会把它们称为<a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/style-guide/#%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E5%90%8D-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">基础组件</a>，它们会在各个组件中被频繁的用到。</p>
<p>所以会导致很多组件里都会有一个包含基础组件的长列表：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">BaseButton</span> <span class="keyword">from</span> <span class="string">&#x27;./BaseButton.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BaseIcon</span> <span class="keyword">from</span> <span class="string">&#x27;./BaseIcon.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BaseInput</span> <span class="keyword">from</span> <span class="string">&#x27;./BaseInput.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">BaseButton</span>,</span><br><span class="line">    <span class="title class_">BaseIcon</span>,</span><br><span class="line">    <span class="title class_">BaseInput</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而只是用于模板中的一小部分：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">BaseInput</span></span><br><span class="line">  v-model=<span class="string">&quot;searchText&quot;</span></span><br><span class="line">  @keydown.<span class="property">enter</span>=<span class="string">&quot;search&quot;</span></span><br><span class="line">/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">BaseButton</span> @<span class="attr">click</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">BaseIcon</span> <span class="attr">name</span>=<span class="string">&quot;search&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">BaseButton</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果你恰好使用了 webpack (或在内部使用了 webpack 的 <a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-cli">Vue CLI 3+</a>)，那么就可以使用 <code>require.context</code> 只全局注册这些非常通用的基础组件。这里有一份可以让你在应用入口文件 (比如 <code>src/main.js</code>) 中全局导入基础组件的示例代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> upperFirst <span class="keyword">from</span> <span class="string">&#x27;lodash/upperFirst&#x27;</span></span><br><span class="line"><span class="keyword">import</span> camelCase <span class="keyword">from</span> <span class="string">&#x27;lodash/camelCase&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> requireComponent = <span class="built_in">require</span>.<span class="title function_">context</span>(</span><br><span class="line">  <span class="comment">// 其组件目录的相对路径</span></span><br><span class="line">  <span class="string">&#x27;./components&#x27;</span>,</span><br><span class="line">  <span class="comment">// 是否查询其子目录</span></span><br><span class="line">  <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 匹配基础组件文件名的正则表达式</span></span><br><span class="line">  <span class="regexp">/Base[A-Z]\w+\.(vue|js)$/</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">requireComponent.<span class="title function_">keys</span>().<span class="title function_">forEach</span>(<span class="function"><span class="params">fileName</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 获取组件配置</span></span><br><span class="line">  <span class="keyword">const</span> componentConfig = requireComponent(fileName)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取组件的 PascalCase 命名</span></span><br><span class="line">  <span class="keyword">const</span> componentName = <span class="title function_">upperFirst</span>(</span><br><span class="line">    <span class="title function_">camelCase</span>(</span><br><span class="line">      <span class="comment">// 获取和目录深度无关的文件名</span></span><br><span class="line">      fileName</span><br><span class="line">        .<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pop</span>()</span><br><span class="line">        .<span class="title function_">replace</span>(<span class="regexp">/\.\w+$/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 全局注册组件</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">component</span>(</span><br><span class="line">    componentName,</span><br><span class="line">    <span class="comment">// 如果这个组件选项是通过 `export default` 导出的，</span></span><br><span class="line">    <span class="comment">// 那么就会优先使用 `.default`，</span></span><br><span class="line">    <span class="comment">// 否则回退到使用模块的根。</span></span><br><span class="line">    componentConfig.<span class="property">default</span> || componentConfig</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>记住<strong>全局注册的行为必须在根 Vue 实例 (通过 <code>new Vue</code>) 创建之前发生</strong>。<a target="_blank" rel="noopener" href="https://github.com/chrisvfritz/vue-enterprise-boilerplate/blob/master/src/components/_globals.js">这里</a>有一个真实项目情景下的示例。</p>
<h2 id="脚手架"><a href="#脚手架" class="headerlink" title="脚手架"></a>脚手架</h2><p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/">https://cli.vuejs.org/zh/</a></p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>安装vue</p>
<p><code>npm install -g @vue/cli</code></p>
<p>升级vue</p>
<p><code>npm update -g @vue/cli</code></p>
<p>升级依赖</p>
<p>请在项目目录下运行 <code>vue upgrade</code></p>
<p>vue将重要的配置文件都隐藏起来了</p>
<p><code>vue inspect &gt;output.js</code></p>
<p>将vue脚手架的默认的配置整理成一个文件输出</p>
<h3 id="创建一个项目"><a href="#创建一个项目" class="headerlink" title="创建一个项目"></a>创建一个项目</h3><p>通过终端</p>
<p><code>vue create 项目名</code></p>
<p>使用图形界面创建</p>
<p><code>vue ui</code></p>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ul>
<li><p>项目的起始文件为main.js（默认的可以修改）</p>
</li>
<li><p>组件名为多个单词</p>
<ul>
<li><p><img src="/vue2/603000a3d9a0451c9e508f62b4885647.png" alt="img"></p>
</li>
<li><p><img src="/vue2/59b4ca679b044bfe9ce3416579e7de1d.png" alt="img"></p>
</li>
<li><p><img src="/vue2/fd9afc029aee486b9064b80cd7898bfe.png" alt="img"></p>
</li>
<li><p><img src="/vue2/image-20221124150333979.png" alt="image-20221124150333979"></p>
</li>
<li><p>&#96;&#96;&#96;js<br>error Component name “School“ should always be multi-word vue&#x2F;multi-word-component-names 解决<br>或<br>在我们的vue.config.js文件中添加一句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    ![img](vue2/8c0cdf45b8b54a51a7b3514de75a101c.png)</span><br><span class="line"></span><br><span class="line">+ 创建的项目中引入的是阉割版的Vue（缺少模板解析）</span><br><span class="line"></span><br><span class="line">+ 解决方法1</span><br><span class="line"></span><br><span class="line">  + 引入完整版的Vue</span><br><span class="line"></span><br><span class="line">  + 具体实现操作</span><br><span class="line"></span><br><span class="line">  + 将引用改为</span><br><span class="line"></span><br><span class="line">  + `import Vue from &#x27;vue/dist/vue&#x27; `</span><br><span class="line"></span><br><span class="line">+ 解决方法二</span><br><span class="line"></span><br><span class="line">+ 使用render函数</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>render<br>类型：(createElement: () &#x3D;&gt; VNode) &#x3D;&gt; VNode</p>
</li>
</ul>
<p>详细：</p>
<p>字符串模板的代替方案，允许你发挥 JavaScript 最大的编程能力。该渲染函数接收一个 createElement 方法作为第一个参数用来创建 VNode。</p>
<p>如果组件是一个函数组件，渲染函数还会接收一个额外的 context 参数，为没有实例的函数组件提供上下文信息。</p>
<p>Vue 选项中的 render 函数若存在，则 Vue 构造函数不会从 template 选项或通过 el 选项指定的挂载元素中提取出的 HTML 模板编译渲染函数。</p>
<p>参考：渲染函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">使用方法</span><br><span class="line"></span><br><span class="line">简单使用</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &quot;#app&quot;,</span><br><span class="line">  // 将App组织放入容器中</span><br><span class="line">  // render: h =&gt; h(App),</span><br><span class="line"></span><br><span class="line">  // template: &#x27;&lt;h1&gt;&lt;/h1&gt;&#x27;,</span><br><span class="line">  // 完整版</span><br><span class="line">  // 必须要用返回值，无就会停止解析</span><br><span class="line">  // render(createElement) &#123;</span><br><span class="line">  //   // createElement为默认参数</span><br><span class="line">  //   // 创建元素的函数</span><br><span class="line">  //   return createElement(&#x27;h1&#x27;, &#x27;你好&#x27;)</span><br><span class="line">  // &#125;,</span><br><span class="line"></span><br><span class="line">  template: &quot;&lt;App&gt;&lt;/App&gt;&quot;,</span><br><span class="line">  // 简写</span><br><span class="line">  render: (q) =&gt; q(App),</span><br><span class="line">  components: &#123;</span><br><span class="line">    App</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="关于不同版本的Vue："><a href="#关于不同版本的Vue：" class="headerlink" title="关于不同版本的Vue："></a>关于不同版本的Vue：</h4><p>​    1.vue.js与vue.runtime.xxx.js的区别：</p>
<p>​        (1).vue.js是完整版的Vue，包含：核心功能+模板解析器。</p>
<p>​        (2).vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。</p>
<p>​    2.因为vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用</p>
<p>​      render函数接收到的createElement函数去指定具体内容。</p>
<h3 id="脚手架启动度入口文件配置（默认为-x2F-srt-x2F-main-js文件）"><a href="#脚手架启动度入口文件配置（默认为-x2F-srt-x2F-main-js文件）" class="headerlink" title="脚手架启动度入口文件配置（默认为.&#x2F;srt&#x2F;main.js文件）"></a>脚手架启动度入口文件配置（默认为.&#x2F;srt&#x2F;main.js文件）</h3><p>Vue脚手架隐藏了所有webpack相关配置，若想查看具体的webpakc配置执行</p>
<p><code>vue inspect &gt; output.js</code></p>
<p>将配置文件导出来（文件会报错但是正常的sp）</p>
<p>官网参考配置地址</p>
<p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/config/">https://cli.vuejs.org/zh/config/</a></p>
<p>在vue.config.js文件修改默认配置项</p>
<p><code>vue.config.js</code> 是一个可选的配置文件，如果项目的 (和 <code>package.json</code> 同级的) 根目录中存在这个文件，那么它会被 <code>@vue/cli-service</code> 自动加载。你也可以使用 <code>package.json</code> 中的 <code>vue</code> 字段，但是注意这种写法需要你严格遵照 JSON 的格式来写。</p>
<p>这个文件应该导出一个包含了选项的对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;@vue/cli-service&#x27;).ProjectOptions</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 选项...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者，你也可以使用 <code>@vue/cli-service</code> 提供的 <code>defineConfig</code> 帮手函数，以获得更好的类型提示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// 选项</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">pages</span>: &#123;</span><br><span class="line">    <span class="attr">index</span>: &#123;</span><br><span class="line">      <span class="comment">//配置后里面的内容不能为空</span></span><br><span class="line">      <span class="comment">// page 的入口</span></span><br><span class="line">      <span class="attr">entry</span>: <span class="string">&#x27;src/index/main.js&#x27;</span>,</span><br><span class="line">      <span class="comment">// 模板来源</span></span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;public/index.html&#x27;</span>,</span><br><span class="line">      <span class="comment">// 在 dist/index.html 的输出</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">      <span class="comment">// 当使用 title 选项时，</span></span><br><span class="line">      <span class="comment">// template 中的 title 标签需要是 &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span></span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Index Page&#x27;</span>,</span><br><span class="line">      <span class="comment">// 在这个页面中包含的块，默认情况下会包含</span></span><br><span class="line">      <span class="comment">// 提取出来的通用 chunk 和 vendor chunk。</span></span><br><span class="line">      <span class="attr">chunks</span>: [<span class="string">&#x27;chunk-vendors&#x27;</span>, <span class="string">&#x27;chunk-common&#x27;</span>, <span class="string">&#x27;index&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 当使用只有入口的字符串格式时，</span></span><br><span class="line">    <span class="comment">// 模板会被推导为 `public/subpage.html`</span></span><br><span class="line">    <span class="comment">// 并且如果找不到的话，就回退到 `public/index.html`。</span></span><br><span class="line">    <span class="comment">// 输出文件名会被推导为 `subpage.html`。</span></span><br><span class="line">    <span class="attr">subpage</span>: <span class="string">&#x27;src/subpage/main.js&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>运行使用</p>
<p><strong>设置 player.json的scripts项自动命名</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br><span class="line">低版本用</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h3 id="处理eslint代码检查"><a href="#处理eslint代码检查" class="headerlink" title="处理eslint代码检查"></a>处理eslint代码检查</h3><p>方式一，手动解决错误，解决错误</p>
<p>方式二，暂时关闭eslint语法检查</p>
<p>配置vue.conflig.js</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = <span class="punctuation">&#123;</span></span><br><span class="line">    lintOnSave<span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span> <span class="comment">// 关闭eslint语法检查</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="render函数"><a href="#render函数" class="headerlink" title="render函数"></a>render函数</h2><p>完整版的Vue包含核心 (生命周期钩子、一些配置属性) 和模板解析器</p>
<p>vue脚手架默认导入的是阉割版的Vue(留下核心部分，去除了模板解析器)</p>
<p>组件中便签类的template使用vue-template-compiler包（专门解析.vue文件的template便签的模板解析器）</p>
<p><img src="/vue2/image-20221125212205793.png" alt="image-20221125212205793"></p>
<p>按住ctrl单机Vue连接查看</p>
<p><img src="/vue2/image-20221125211613185.png" alt="image-20221125211613185"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">关于不同版本的Vue</span><br><span class="line">1、vue.js与vue.runtime.xxx.js的区别:</span><br><span class="line">	(1)、vue.js是完整版的Vue，包含：核心功能和模板解析器</span><br><span class="line">	(2)、vue.runtime.xxx.js是运行版的Vue，只包含核心功能;没有模板解析器</span><br><span class="line">	</span><br><span class="line">2、因为vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用render函数可接受到的createElement函数去指定具体的内容</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">render</span><br><span class="line">类型：(createElement: () =&gt; VNode) =&gt; VNode</span><br><span class="line"></span><br><span class="line">详细：</span><br><span class="line"></span><br><span class="line">字符串模板的代替方案，允许你发挥 JavaScript 最大的编程能力。该渲染函数接收一个 createElement 方法作为第一个参数用来创建 VNode。</span><br><span class="line"></span><br><span class="line">如果组件是一个函数组件，渲染函数还会接收一个额外的 context 参数，为没有实例的函数组件提供上下文信息。</span><br><span class="line"></span><br><span class="line">Vue 选项中的 render 函数若存在，则 Vue 构造函数不会从 template 选项或通过 el 选项指定的挂载元素中提取出的 HTML 模板编译渲染函数。</span><br><span class="line"></span><br><span class="line">参考：渲染函数</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> <span class="comment">//阉割版的</span></span><br><span class="line"><span class="comment">// import Vue from &#x27;vue/dist/vue&#x27; // 完整版的</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// new Vue(&#123;</span></span><br><span class="line"><span class="comment">//   // 将App组织放入容器中</span></span><br><span class="line"><span class="comment">//   render: h =&gt; h(App),</span></span><br><span class="line"><span class="comment">// &#125;).$mount(&#x27;#app&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法二</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>, <span class="comment">//$mount(&#x27;#app&#x27;)</span></span><br><span class="line">  <span class="comment">// 将App组织放入容器中</span></span><br><span class="line">  <span class="comment">// render: h =&gt; h(App),</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// template: &#x27;&lt;h1&gt;&lt;/h1&gt;&#x27;,</span></span><br><span class="line">  <span class="comment">// 完整版</span></span><br><span class="line">  <span class="comment">// 必须要用返回值，无就会停止解析</span></span><br><span class="line">  <span class="comment">// render(createElement) &#123;</span></span><br><span class="line">  <span class="comment">//   // createElement为默认参数</span></span><br><span class="line">  <span class="comment">//   // 创建元素的函数</span></span><br><span class="line">  <span class="comment">//   return createElement(&#x27;h1&#x27;, &#x27;你好&#x27;)</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 简写</span></span><br><span class="line">  <span class="comment">// 不能加引号,加引号是创建一个html中的App元素标签</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">q</span>) =&gt;</span> <span class="title function_">q</span>(<span class="title class_">App</span>),</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">App</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	该文件是整个项目的入口文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入App组件，它是所有组件的父组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//关闭vue的生产提示</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	关于不同版本的Vue：</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">		1.vue.js与vue.runtime.xxx.js的区别：</span></span><br><span class="line"><span class="comment">				(1).vue.js是完整版的Vue，包含：核心功能+模板解析器。</span></span><br><span class="line"><span class="comment">				(2).vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		2.因为vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用</span></span><br><span class="line"><span class="comment">			render函数接收到的createElement函数去指定具体内容。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Vue实例对象---vm</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">	<span class="comment">//render函数完成了这个功能：将App组件放入容器中</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">	<span class="comment">// render:q=&gt; q(&#x27;h1&#x27;,&#x27;你好啊&#x27;)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// template:`&lt;h1&gt;你好啊&lt;/h1&gt;`,</span></span><br><span class="line">	<span class="comment">// components:&#123;App&#125;,</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>





<h2 id="ref属性"><a href="#ref属性" class="headerlink" title="ref属性"></a>ref属性</h2><ol>
<li><p>被用来给元素或子组件注册引用信息<strong>（id的替代者）</strong></p>
</li>
<li><p>应用在html标签上获取的是真实DOM元素，<strong>应用在组件标签上是组件实例对象（vc）</strong></p>
</li>
<li><p>使用方式：</p>
<ol>
<li>打标识：<code>&lt;h1 ref=&quot;xxx&quot;&gt;.....&lt;/h1&gt;</code> 或 <code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></li>
<li>获取：<code>this.$refs.xxx</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template lang=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    名字:&#123;&#123;name&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-text</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">ref</span>=<span class="string">&#x27;title&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showDOM&quot;</span>&gt;</span>点我输出上面的元素<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">name</span>:<span class="string">&#x27;尚硅谷&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">msg</span>:<span class="string">&#x27;你好VUE&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">showDOM</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// console.log(e.target.previousSibling);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">title</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><img src="/vue2/image-20221125231032572.png" alt="image-20221125231032572"></p>
<h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41579104/article/details/120997444">https://blog.csdn.net/qq_41579104/article/details/120997444</a></p>
<ol>
<li><p>功能：让组件接收外部传过（）父组件传给子组件反过来不行</p>
</li>
<li><p>props主要用于组件的传值，他的工作就是为了接收外面传过来的数据，与data、el、ref是一个级别的配置项。来的数据</p>
</li>
<li><p>传递数据：<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></p>
</li>
<li><p>接收数据：</p>
<ol>
<li><p>第一种方式（只接收）：<code>s:[&#39;name&#39;]</code>（必须加引号）</p>
</li>
<li><p>第二种方式（限制类型）：<code>props:&#123;name:String&#125;</code></p>
</li>
<li><p>第三种方式（限制类型、限制必要性、指定默认值）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">	<span class="attr">name</span>:&#123;</span><br><span class="line">	<span class="attr">type</span>:<span class="title class_">String</span>, <span class="comment">//类型</span></span><br><span class="line">	<span class="attr">required</span>:<span class="literal">true</span>, <span class="comment">//必要性</span></span><br><span class="line">	<span class="attr">default</span>:<span class="string">&#x27;老王&#x27;</span> <span class="comment">//默认值</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>备注：<strong>props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告</strong>，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。</p>
<p>props的数据都会存在vc._props对象上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line"> <span class="variable language_">this</span>.<span class="property">propsData</span> = &#123;...<span class="variable language_">this</span>.<span class="property">_props</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>data与props中属性不要重名会冲突域props的优先级比data中的高</p>
</blockquote>
</li>
</ol>
<blockquote>
<p><strong>注意子组件未接收父组件通过组件标签传过来的数据会存放在this.$sttrs属性中</strong></p>
<p><strong>使用props接受的数据不会出现在this.$attrs属性上</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">默认传过来的字符串</span><br><span class="line">在传值时使用v-bind指令将字符串转换为表达式</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">School</span> msg=<span class="string">&quot;Welcome to Your Vue.js App&quot;</span> :age=<span class="string">&quot;18&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-text</span>=<span class="string">&#x27;age-0+1&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span> --&gt;</span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-text</span>=<span class="string">&#x27;age+1&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;todo-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;todo-wrap&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 传递的是对象的地址，即引用传递相当函数的传值 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">MyHeader</span> <span class="attr">ref</span>=<span class="string">&quot;List&quot;</span> <span class="attr">:receive</span>=<span class="string">&#x27;addItem&#x27;</span> <span class="attr">:zj</span> =<span class="string">&#x27;zj[0]&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">MyHeader</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">MyList</span> <span class="attr">:todo</span>=<span class="string">&quot;todos&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">MyList</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">MyFooter</span> <span class="attr">:todo</span>=<span class="string">&quot;todos&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">MyFooter</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">todos</span>: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;001&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;抽烟&quot;</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;002&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;喝酒&quot;</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;003&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;烫头&quot;</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">zj</span>:[]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="attr">props</span>:[<span class="string">&#x27;receive&#x27;</span>,<span class="string">&#x27;zj&#x27;</span>],</span><br><span class="line">   </span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">zj</span>.<span class="title function_">unshift</span>(<span class="number">1</span>)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><img src="/vue2/image-20221127224922591.png" alt="image-20221127224922591"></p>
<p><img src="/vue2/image-20221127224905254.png" alt="image-20221127224905254"></p>
<h4 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/EasonMu/article/details/122331477">https://blog.csdn.net/EasonMu/article/details/122331477</a></p>
<p>HTML 中的 attribute 名是大小写不敏感的，所以浏览器会把所有大写字符解释为小写字符。这意味着当你使用 DOM 中的模板时，camelCase (驼峰命名法) 的 prop 名需要使用其等价的 kebab-case (短横线分隔命名) 命名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#x27;blog-post&#x27;, &#123;</span><br><span class="line">  // 在 JavaScript 中是 camelCase 的</span><br><span class="line">  props: [&#x27;postTitle&#x27;],</span><br><span class="line">  template: &#x27;&lt;h3&gt;&#123;&#123; postTitle &#125;&#125;&lt;/h3&gt;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;!-- 在 HTML 中是 kebab-case 的 --&gt;</span><br><span class="line">&lt;blog-post post-title=&quot;hello!&quot;&gt;&lt;/blog-post&gt;</span><br></pre></td></tr></table></figure>

<p>重申一次，如果你使用字符串模板，那么这个限制就不存在了。</p>
<h2 id="mixin"><a href="#mixin" class="headerlink" title="mixin"></a>mixin</h2><ol>
<li><p>功能：可以把多个组件共用的配置提取成一个混入对象放在一个单独的js文件中</p>
</li>
<li><p>使用方式：</p>
<p>第一步定义混合：注意要导出对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;....&#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;....&#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二步使用混入：</p>
<p>​	全局混入：<code>Vue.mixin(xxx)</code><br>​	局部混入：<code>mixins:[&#39;xxx&#39;]	</code></p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> @<span class="attr">click</span>=<span class="string">&quot;showName&quot;</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>性别&#123;&#123; sex &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; x &#125;&#125;---&#123;&#123; y &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; hunhe, hunhe2 &#125; <span class="keyword">from</span> <span class="string">&quot;../mixin&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;Student&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">age</span>: <span class="number">20</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 当data中的与混合配置的有冲突以data的为主</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">x</span>: <span class="number">11</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">mixins</span>: [hunhe, hunhe2],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// mounted() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//   // 生命周期函数与混合配置冲突时会进行整合</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//   // 不会单独以某一个为主</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//   // 不过混合的会执行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//   console.log(&quot;整合后一起执行&quot;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.model</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background-color</span>: pink;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">// 全局写法</span></span><br><span class="line"><span class="keyword">import</span> &#123; hunhe2, hunhe &#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(hunhe)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(hunhe2)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">q</span> =&gt;</span> <span class="title function_">q</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><ol>
<li><p>功能：用于增强Vue</p>
</li>
<li><p>本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据。</p>
</li>
<li><p>定义插件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">对象.<span class="property">install</span> = <span class="keyword">function</span> (<span class="params">Vue, options</span>) &#123;</span><br><span class="line">    <span class="comment">// 1. 添加全局过滤器</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">filter</span>(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 添加全局指令</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">directive</span>(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 配置全局混入(合)</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. 添加实例方法</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myMethod</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;...&#125;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myProperty</span> = xxxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用插件：<code>Vue.use()</code></p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入插件</span></span><br><span class="line"><span class="keyword">import</span> &#123; plugins &#125; <span class="keyword">from</span> <span class="string">&#x27;./plugins&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 应用插件</span></span><br><span class="line"><span class="comment">// 必须在创建Vue实例前创建</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(plugins);</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(plugins);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">q</span> =&gt;</span> <span class="title function_">q</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> @<span class="attr">click</span>=<span class="string">&quot;showName&quot;</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>性别&#123;&#123; sex &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; x &#125;&#125;---&#123;&#123; y &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;Student&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">age</span>: <span class="number">20</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">x</span>: <span class="number">11</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.model</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background-color</span>: pink;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h2 id="scoped属性"><a href="#scoped属性" class="headerlink" title="scoped属性"></a>scoped属性</h2><ol>
<li>作用：让样式在局部生效，防止冲突。</li>
<li>写法：<code>&lt;style scoped&gt;</code></li>
<li>根组件不适合加scoped属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>性别&#123;&#123; sex &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;Student&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">age</span>: <span class="number">20</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&#x27;css&#x27;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="comment">/* 各组件的样式会被整合到一起</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">  导致一些样式别覆盖</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">  解决方法</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">  设置scoped让你可以在同一个文件里完全控制 CSS</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">*/</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.model</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background-color</span>: red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="comment">/* lang </span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">    选择样式语言 (css/less~)</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">    默认是css</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">    同时设置了lang与scoped时lang不能为空字符串</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">    在vue中使用less需要安装less-loader</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">    在安装时可能出现不兼容问题</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">    只需要更换less-loader 的版本就行</span></span></span></span><br><span class="line"><span class="comment"><span class="language-css"><span class="language-xml">  */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.model</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看包的有哪些版本</p>
<p>npm view webpack versions</p>
<p>查看包 的最新版本</p>
<p>npm view webpack version</p>
<h2 id="过滤器filter"><a href="#过滤器filter" class="headerlink" title="过滤器filter"></a>过滤器filter</h2><p><img src="/vue2/image-20221121180527007.png" alt="image-20221121180527007"></p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>		</span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">			过滤器：</span></span><br><span class="line"><span class="comment">				定义：对要显示的数据进行特定格式化后再显示（适用于一些简单逻辑的处理）。</span></span><br><span class="line"><span class="comment">				语法：</span></span><br><span class="line"><span class="comment">						1.注册过滤器：Vue.filter(name,callback) 或 new Vue&#123;filters:&#123;&#125;&#125;</span></span><br><span class="line"><span class="comment">						2.使用过滤器：&#123;&#123; xxx | 过滤器名&#125;&#125;  或  v-bind:属性 = &quot;xxx | 过滤器名&quot;</span></span><br><span class="line"><span class="comment">				备注：</span></span><br><span class="line"><span class="comment">						1.过滤器也可以接收额外参数、多个过滤器也可以串联</span></span><br><span class="line"><span class="comment">						2.并没有改变原本的数据, 是产生新的对应的数据</span></span><br><span class="line"><span class="comment">						3.可以用于v-bind和插值语法但不能用于v-model</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 准备好一个容器--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>显示格式化后的时间<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 计算属性实现 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在是：&#123;&#123;fmtTime&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- methods实现 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在是：&#123;&#123;getFmtTime()&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 过滤器实现 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在是：&#123;&#123;time | timeFormater&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 过滤器实现（传参） --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在是：&#123;&#123;time | timeFormater(&#x27;YYYY_MM_DD&#x27;) | mySlice&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span> <span class="attr">:x</span>=<span class="string">&quot;msg | mySlice&quot;</span>&gt;</span>尚硅谷<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root2&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;msg | mySlice&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">//全局过滤器</span></span></span><br><span class="line"><span class="language-javascript">		<span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;mySlice&#x27;</span>,<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> value.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">4</span>)</span></span><br><span class="line"><span class="language-javascript">		&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">time</span>:<span class="number">1621561377603</span>, <span class="comment">//时间戳</span></span></span><br><span class="line"><span class="language-javascript">				<span class="attr">msg</span>:<span class="string">&#x27;你好，尚硅谷&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">fmtTime</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span> <span class="title function_">dayjs</span>(<span class="variable language_">this</span>.<span class="property">time</span>).<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月DD日 HH:mm:ss&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">getFmtTime</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span> <span class="title function_">dayjs</span>(<span class="variable language_">this</span>.<span class="property">time</span>).<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月DD日 HH:mm:ss&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">//局部过滤器</span></span></span><br><span class="line"><span class="language-javascript">			<span class="attr">filters</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 不传参就过滤器会自动将要过滤的属性值传过来</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 传参第一个参数也不是你传过来的参数第一个参数默认就是将要过滤的属性值</span></span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">timeFormater</span>(<span class="params">valuer=<span class="string">&#x27;YYYY年MM月DD日 HH:mm:ss&#x27;</span></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// console.log(&#x27;@&#x27;,value)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span> <span class="title function_">dayjs</span>(value).<span class="title function_">format</span>(str)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">el</span>:<span class="string">&#x27;#root2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">msg</span>:<span class="string">&#x27;hello,atguigu!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;)</span></span><br><span class="line"><span class="language-javascript">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="内置指令"><a href="#内置指令" class="headerlink" title="内置指令"></a>内置指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">v-bind	: 单向绑定解析表达式, 可简写为 :xxx</span><br><span class="line">						v-model	: 双向数据绑定</span><br><span class="line">						v-for  	: 遍历数组/对象/字符串</span><br><span class="line">						v-on   	: 绑定事件监听, 可简写为@</span><br><span class="line">						v-if 	 	: 条件渲染（动态控制节点是否存存在）</span><br><span class="line">						v-else 	: 条件渲染（动态控制节点是否存存在）</span><br><span class="line">						v-show 	: 条件渲染 (动态控制节点是否展示)</span><br><span class="line">				v-text指令：</span><br><span class="line">						1.作用：向其所在的节点中渲染文本内容。</span><br><span class="line">						2.与插值语法的区别：v-text会替换掉节点中的内容，&#123;&#123;xx&#125;&#125;则不会。</span><br></pre></td></tr></table></figure>

<p>v-text的使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-text</span> = <span class="string">‘name’</span> &gt;</span> </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">v-text会将标签中的所有内容都替换掉其结果如 innerText一样</span><br></pre></td></tr></table></figure>

<p>v-html的使用</p>
<p>使用与上面一样</p>
<p>他的执行结果与 innerHtml一样  </p>
<p><img src="/vue2/image-20221121211215057.png" alt="image-20221121211215057"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">v-html指令：</span><br><span class="line">	1.作用：向指定节点中渲染包含html结构的内容。</span><br><span class="line">	2.与插值语法的区别：</span><br><span class="line">				(1).v-html会替换掉节点中所有的内容，&#123;&#123;xx&#125;&#125;则不会。</span><br><span class="line">				(2).v-html可以识别html结构。</span><br><span class="line">	3.严重注意：v-html有安全性问题！！！！</span><br><span class="line">			(1).在网站上动态渲染任意HTML是非常危险的，容易导致XSS攻击。</span><br><span class="line">			(2).一定要在可信的内容上使用v-html，永不要用在用户提交的内容上！</span><br></pre></td></tr></table></figure>

<p>v-once</p>
<p>v-once只执行一次渲染</p>
<p>即对其值进行修改该节点的插值结果还是第一次插入的不会改变</p>
<p><img src="/vue2/image-20221121215344192.png" alt="image-20221121215344192"></p>
<p><img src="/vue2/image-20221121215240020.png" alt="image-20221121215240020"></p>
<p><img src="/vue2/image-20221121215218988.png" alt="image-20221121215218988"></p>
<p><img src="/vue2/image-20221121215230351.png" alt="image-20221121215230351"></p>
<p>v-cloak防止网速过慢模板已经加载到页面上了但vue绑定的数据还没传过去</p>
<p>使用v-cloak与style配合可以解决</p>
<p><img src="/vue2/image-20221121215019710.png" alt="image-20221121215019710"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-attr">[v-cloak]</span>&#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-cloak</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- v-cloak属性在 vue创建并介入页面后不被vue给删除 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>v-pre  使vue跳过对该节点的解析和渲染</p>
<p>v-pre可以使用在无vue语法的节点中</p>
<p>v-if：根据表达式的值的真假条件渲染元素。在切换时元素及它的数据绑定 &#x2F; 组件被销毁并重建。</p>
<p>v-show：根据表达式之真假值，切换元素的 display CSS 属性。</p>
<p>v-for：循环指令，基于一个数组或者对象渲染一个列表，vue 2.0以上必须需配合 key值 使用。</p>
<p>v-bind：动态地绑定一个或多个特性，或一个组件 prop 到表达式。</p>
<p>v-on：用于监听指定元素的DOM事件，比如点击事件。绑定事件监听器。</p>
<p>v-model：实现表单输入和应用状态之间的双向绑定</p>
<p>v-pre：跳过这个元素和它的子元素的编译过程。可以用来显示原始 Mustache 标签。跳过大量没有指令的节点会加快编译。</p>
<p>v-once：只渲染元素和组件一次。随后的重新渲染，元素&#x2F;组件及其所有的子节点将被视为静态内容并跳过。这可以用于优化更新性能。</p>
<h2 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h2><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/custom-directive.html">https://cn.vuejs.org/v2/guide/custom-directive.html</a></p>
<p>自定义指令分为全局与局部</p>
<p><strong>写法有分函数写法与对象写法</strong></p>
<h3 id="对象写法（推荐写法）"><a href="#对象写法（推荐写法）" class="headerlink" title="对象写法（推荐写法）"></a>对象写法（推荐写法）</h3><p>全局的通过Vue.directive来指定</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册一个全局自定义指令 `v-focus`</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// 当被绑定的元素插入到 DOM 中时……</span></span><br><span class="line">  <span class="attr">inserted</span>: <span class="keyword">function</span> (<span class="params">el</span>) &#123;</span><br><span class="line">    <span class="comment">// 聚焦元素</span></span><br><span class="line">    el.<span class="title function_">focus</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>局部的通过directives:{}来指定</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">  <span class="attr">focus</span>: &#123;</span><br><span class="line">    <span class="comment">// 指令的定义</span></span><br><span class="line">    <span class="attr">inserted</span>: <span class="keyword">function</span> (<span class="params">el</span>) &#123;</span><br><span class="line">      el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数写法"><a href="#函数写法" class="headerlink" title="函数写法"></a>函数写法</h3><p><img src="/vue2/image-20221121224652828.png" alt="image-20221121224652828"></p>
<blockquote>
<p>在很多时候，你可能想在 <code>bind</code> 和 <code>update</code> 时触发相同行为，而不关心</p>
<p>其它的钩子。比如这样写</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-demo</span>=<span class="string">&quot;&#123; color: &#x27;white&#x27;, text: &#x27;hello!&#x27; &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;demo&#x27;</span>, <span class="keyword">function</span> (<span class="params">el, binding</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">color</span>) <span class="comment">// =&gt; &quot;white&quot;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">text</span>)  <span class="comment">// =&gt; &quot;hello!&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>! 注意:该方法存在坑</strong></p>
<p><strong>如执行后不能立即自动聚焦</strong></p>
<p>eg：</p>
</blockquote>
<p><img src="/vue2/image-20221121230138146.png" alt="image-20221121230138146"></p>
<blockquote>
<p>原因是vue将input当做模板解析</p>
<p>将指定绑定到元素上时input模板还未放到页面上</p>
</blockquote>
<h3 id="钩子函数"><a href="#钩子函数" class="headerlink" title="钩子函数"></a>钩子函数</h3><p><img src="/vue2/image-20221121234924480.png" alt="image-20221121234924480"></p>
<p>一个指令定义对象可以提供如下几个钩子函数 (均为可选)：</p>
<ul>
<li><code>bind</code>：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。</li>
<li><code>inserted</code>：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。</li>
<li><code>update</code>：所在组件的 VNode 更新时调用，<strong>但是可能发生在其子 VNode 更新之前</strong>。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 (详细的钩子函数参数见下)。</li>
</ul>
<blockquote>
<p><strong>这些钩子函数中的this都指向window</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我们会在稍后讨论渲染函数时介绍更多 VNodes 的细节。</span><br></pre></td></tr></table></figure>

<ul>
<li><code>componentUpdated</code>：指令所在组件的 VNode <strong>及其子 VNode</strong> 全部更新后调用。</li>
<li><code>unbind</code>：只调用一次，指令与元素解绑时调用。</li>
</ul>
<p>接下来我们来看一下钩子函数的参数 (即 <code>el</code>、<code>binding</code>、<code>vnode</code> 和 <code>oldVnode</code>)。</p>
<h4 id="钩子函数参数"><a href="#钩子函数参数" class="headerlink" title="钩子函数参数"></a>钩子函数参数</h4><p>指令钩子函数会被传入以下参数：</p>
<ul>
<li><code>el</code>：指令所绑定的元素，可以用来直接操作 DOM。</li>
<li><code>binding</code>：一个对象，包含以下 property：<ul>
<li><code>name</code>：指令名，不包括 <code>v-</code> 前缀。</li>
<li><code>value</code>：指令的绑定值，例如：<code>v-my-directive=&quot;1 + 1&quot;</code> 中，绑定值为 <code>2</code>。</li>
<li><code>oldValue</code>：指令绑定的前一个值，仅在 <code>update</code> 和 <code>componentUpdated</code> 钩子中可用。无论值是否改变都可用。</li>
<li><code>expression</code>：字符串形式的指令表达式。例如 <code>v-my-directive=&quot;1 + 1&quot;</code> 中，表达式为 <code>&quot;1 + 1&quot;</code>。</li>
<li><code>arg</code>：传给指令的参数，可选。例如 <code>v-my-directive:foo</code> 中，参数为 <code>&quot;foo&quot;</code>。</li>
<li><code>modifiers</code>：一个包含修饰符的对象。例如：<code>v-my-directive.foo.bar</code> 中，修饰符对象为 <code>&#123; foo: true, bar: true &#125;</code>。</li>
</ul>
</li>
<li><code>vnode</code>：Vue 编译生成的虚拟节点。移步 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#VNode-%E6%8E%A5%E5%8F%A3">VNode API</a> 来了解更多详情。</li>
<li><code>oldVnode</code>：上一个虚拟节点，仅在 <code>update</code> 和 <code>componentUpdated</code> 钩子中可用。</li>
</ul>
<blockquote>
<p>除了 <code>el</code> 之外，其它参数都应该是只读的，切勿进行修改。如果需要在钩子之间共享数据，建议通过</p>
<p>元素的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dataset"><code>dataset</code></a> 来进行</p>
</blockquote>
<p>这是一个使用了这些 property 的自定义钩子样例</p>
<p>name: “demo”<br>value: “hello!”<br>expression: “message”<br>argument: “foo”<br>modifiers: {“a”:true,”b”:true}<br>vnode keys: tag, data, children, text, elm, ns, context, fnContext, fnOptions, fnScopeId, key, componentOptions, componentInstance, parent, raw, isStatic, isRootInsert, isComment, isCloned, isOnce, asyncFactory, asyncMeta, isAsyncPlaceholder</p>
<h3 id="动态指令参数"><a href="#动态指令参数" class="headerlink" title="动态指令参数"></a>动态指令参数</h3><blockquote>
<p>指令的参数可以是动态的。例如，在 <code>v-mydirective:[argument]=&quot;value&quot;</code> 中，<code>argument</code> </p>
<p>参数可以根据组件实例数据进行更新！这使得自定义指令可以在应用中被灵活使用。</p>
</blockquote>
<p>例如你想要创建一个自定义指令，用来通过固定布局将元素固定在页面上。我们可以像这样创建一个通过指令值来更新竖直位置像素值的自定义指令：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;baseexample&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Scroll down the page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pin</span>=<span class="string">&quot;200&quot;</span>&gt;</span>Stick me 200px from the top of the page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;pin&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">bind</span>: <span class="keyword">function</span> (<span class="params">el, binding, vnode</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    el.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    el.<span class="property">style</span>.<span class="property">top</span> = binding.<span class="property">value</span> + <span class="string">&#x27;px&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;#baseexample&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这会把该元素固定在距离页面顶部 200 像素的位置。</p>
<blockquote>
<p>但如果场景是我们需要把元素固定在左侧而不是顶部又该怎么办呢？这时使用动态参数就可以非常方便地根据每个组件实例来进行更新。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dynamicexample&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Scroll down inside this section ↓<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pin:</span>[<span class="attr">direction</span>]=<span class="string">&quot;200&quot;</span>&gt;</span>I am pinned onto the page at 200px to the left.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;pin&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">bind</span>: <span class="keyword">function</span> (<span class="params">el, binding, vnode</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    el.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> s = (binding.<span class="property">arg</span> == <span class="string">&#x27;left&#x27;</span> ? <span class="string">&#x27;left&#x27;</span> : <span class="string">&#x27;top&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    el.<span class="property">style</span>[s] = binding.<span class="property">value</span> + <span class="string">&#x27;px&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&#x27;#dynamicexample&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">direction</span>: <span class="string">&#x27;left&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="对象字面量"><a href="#对象字面量" class="headerlink" title="对象字面量"></a>对象字面量</h3><p>如果指令需要多个值，可以传入一个 JavaScript 对象字面量。记住，指令函数能够接受所有合法的 JavaScript 表达式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-demo</span>=<span class="string">&quot;&#123; color: &#x27;white&#x27;, text: &#x27;hello!&#x27; &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;demo&#x27;</span>, <span class="keyword">function</span> (<span class="params">el, binding</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">color</span>) <span class="comment">// =&gt; &quot;white&quot;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(binding.<span class="property">value</span>.<span class="property">text</span>)  <span class="comment">// =&gt; &quot;hello!&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="长指令的定义（不能用驼峰法）"><a href="#长指令的定义（不能用驼峰法）" class="headerlink" title="长指令的定义（不能用驼峰法）"></a>长指令的定义（不能用驼峰法）</h3><blockquote>
<p>1.指令定义时不加v-，但使用时要加v-；</p>
<p><strong>2.指令名如果是多个单词，要使用kebab-case命名方式，不要用camelCase命名。即用“-”作为分隔符</strong></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;h2&gt;放大10倍后的n值是：&lt;span v-big-number=&quot;n&quot;&gt;&lt;/span&gt; &lt;/h2&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="string">&#x27;big-number&#x27;</span>(element,binding)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// console.log(&#x27;big&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">					element.<span class="property">innerText</span> = binding.<span class="property">value</span> * <span class="number">10</span></span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>总结</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- </span><br><span class="line">			需求1：定义一个v-big指令，和v-text功能类似，但会把绑定的数值放大10倍。</span><br><span class="line">			需求2：定义一个v-fbind指令，和v-bind功能类似，但可以让其所绑定的input元素默认获取焦点。</span><br><span class="line">			自定义指令总结：</span><br><span class="line">					一、定义语法：</span><br><span class="line">						(1).局部指令：</span><br><span class="line">								new Vue(&#123;															new Vue(&#123;</span><br><span class="line">										directives:&#123;指令名:配置对象&#125;   或   		directives&#123;指令名:回调函数&#125;</span><br><span class="line">											&#125;) 																		&#125;)</span><br><span class="line">								(2).全局指令：</span><br><span class="line">								Vue.directive(指令名,配置对象) 或   Vue.directive(指令名,回调函数)</span><br><span class="line">					二、配置对象中常用的3个回调：</span><br><span class="line">								(1).bind：指令与元素成功绑定时调用。</span><br><span class="line">								(2).inserted：指令所在元素被插入页面时调用。</span><br><span class="line">								(3).update：指令所在模板结构被重新解析时调用。</span><br><span class="line">					三、备注：</span><br><span class="line">								1.指令定义时不加v-，但使用时要加v-；</span><br><span class="line">								2.指令名如果是多个单词，要使用kebab-case命名方式，不要用camelCase(驼峰命名法)命名。</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>



<h2 id="webStorage"><a href="#webStorage" class="headerlink" title="webStorage"></a>webStorage</h2><ol>
<li><p>存储内容大小一般支持5MB左右（不同浏览器可能还不一样）</p>
</li>
<li><p>浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。</p>
</li>
<li><p>相关API：</p>
<ol>
<li><p><code>xxxxxStorage.setItem(&#39;key&#39;, &#39;value&#39;);</code><br>该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。</p>
</li>
<li><p><code>xxxxxStorage.getItem(&#39;person&#39;);</code></p>
<p>​		该方法接受一个键名作为参数，返回键名对应的值。</p>
</li>
<li><p><code>xxxxxStorage.removeItem(&#39;key&#39;);</code></p>
<p>​		该方法接受一个键名作为参数，并把该键名从存储中删除。</p>
</li>
<li><p><code> xxxxxStorage.clear()</code></p>
<p>​		该方法会清空存储中的所有数据。</p>
</li>
</ol>
</li>
<li><p>备注：</p>
<ol>
<li>SessionStorage存储的内容会随着浏览器窗口关闭而消失。</li>
<li>LocalStorage存储的内容，需要手动清除才会消失。</li>
<li><code>xxxxxStorage.getItem(xxx)</code>如果xxx对应的value获取不到，那么getItem的返回值是null。</li>
<li><code>JSON.parse(null)</code>的结果依然是null。</li>
</ol>
</li>
</ol>
<h2 id="组件自定事件"><a href="#组件自定事件" class="headerlink" title="组件自定事件"></a>组件自定事件</h2><ol>
<li><p>一种组件间通信的方式，<strong>适用于：<strong style="color:red">子组件 &#x3D;&#x3D;&#x3D;&gt; 父组件不能用于子祖之间</strong></strong></p>
</li>
<li><p>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（<span style="color:red">事件的回调在A中</span>）。</p>
</li>
<li><p>绑定自定义事件：</p>
<ol>
<li><p>第一种方式，在父组件中：<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code>  或 <code>&lt;Demo v-on:atguigu=&quot;test&quot;/&gt;</code></p>
</li>
<li><p>第二种方式，在父组件中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Demo</span> ref=<span class="string">&quot;demo&quot;</span>/&gt;</span><br><span class="line">......</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">xxx</span>.$on(<span class="string">&#x27;atguigu&#x27;</span>,<span class="variable language_">this</span>.<span class="property">test</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法。</p>
</li>
</ol>
</li>
<li><p>触发自定义事件：<code>this.$emit(&#39;atguigu&#39;,数据)</code>		</p>
</li>
<li><p>解绑自定义事件<code>this.$off(&#39;atguigu&#39;)</code></p>
</li>
<li><p>组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符。</p>
</li>
<li><p>注意：通过<code>this.$refs.xxx.$on(&#39;atguigu&#39;,回调)</code>绑定自定义事件时，回调<span style="Failed to get response from https://registry.yarnpkg.com/vue-cli-version-marker">要么配置在methods中</span>，<span style="color:red">要么用箭头函数</span>，否则this指向会出问题！</p>
</li>
<li><p><strong>自定事件中回调函数是谁触发的this指向谁</strong><code>this.$refs.xxx.$on(&#39;atguigu&#39;,function()&#123;&#125;)</code></p>
</li>
<li><p><strong>组件上直接写原生Dom事件Vue也会将其当成自定事件来处理，</strong>在使用时加上.native修饰符</p>
<p>改修饰符会将其改为原生Dom事件并且将其事件绑定到该组件的根元素上</p>
<p><strong>&lt;School @click.native&#x3D;’’&gt;</strong></p>
</li>
</ol>
<p>APP</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;!-- 内置事件 --&gt;</span><br><span class="line">    &lt;School :getpass=&quot;getpass&quot; /&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;!-- 组件自定事件 --&gt;</span><br><span class="line">    &lt;!-- 写法一 --&gt;</span><br><span class="line">    &lt;!-- &lt;Student v-on:custom=&quot;getStudent&quot; /&gt; --&gt;</span><br><span class="line">    &lt;Student ref=&quot;Student&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import School from &quot;./components/School.vue&quot;;</span><br><span class="line">import Student from &quot;./components/Studen.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    Student,</span><br><span class="line">    School,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getpass(data) &#123;</span><br><span class="line">      console.log(data);</span><br><span class="line">    &#125;,</span><br><span class="line">    getStudent(data) &#123;</span><br><span class="line">      console.log(data);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    //操作性更强 例如添加定时器</span><br><span class="line">    // 在Student组件上定义custom事件</span><br><span class="line">    this.$refs.Student.$on(&quot;custom&quot;, this.getStudent);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;model&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;性别&#123;&#123; sex &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄&#123;&#123; age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;pass&quot;&gt;点击将数据传到App中&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Student&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;李四&quot;,</span><br><span class="line">      sex: &quot;男&quot;,</span><br><span class="line">      age: 20,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    pass() &#123;</span><br><span class="line">      // 触发this上定义的custom事件</span><br><span class="line">      this.$emit(&quot;custom&quot;, this.name);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style lang=&#x27;css&#x27; scoped&gt;</span><br><span class="line">/* 各组件的样式会被整合到一起</span><br><span class="line">  导致一些样式别覆盖</span><br><span class="line">  解决方法</span><br><span class="line">  设置scoped让你可以在同一个文件里完全控制 CSS</span><br><span class="line">*/</span><br><span class="line">.model &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.model &#123;</span><br><span class="line">  font-size: 40px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="全局事件总线（GlobalEventBus）"><a href="#全局事件总线（GlobalEventBus）" class="headerlink" title="全局事件总线（GlobalEventBus）"></a>全局事件总线（GlobalEventBus）</h2><p><img src="/vue2/image-20221128222317855.png" alt="image-20221128222317855"></p>
<ol>
<li><p>一种组件间通信的方式，适用于<span style="color:red">任意组件间通信</span>。</p>
</li>
<li><p>安装全局事件总线：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	......</span><br><span class="line">	<span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    	<span class="comment">// Vue是vm实例对象的构造函数</span></span><br><span class="line">    	<span class="comment">// vm实例对象上有$on\$emit\$off</span></span><br><span class="line">    	<span class="comment">// 事件都是绑定到了vm实例对象上的$bus身上，回调函数放在接受数据的组件中</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span> <span class="comment">//安装全局事件总线，$bus就是当前应用的vm</span></span><br><span class="line">	&#125;,</span><br><span class="line">    ......</span><br><span class="line">&#125;) </span><br><span class="line"><span class="comment">// 或写成</span></span><br><span class="line"><span class="keyword">const</span> demo = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;&#125;);</span><br><span class="line"><span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title function_">demo</span>();</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = d;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用事件总线：</p>
<ol>
<li><p>接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的<span style="color:red">回调留在A组件自身。</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">methods</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title function_">demo</span>(<span class="params">data</span>)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;xxxx&#x27;</span>,<span class="variable language_">this</span>.<span class="property">demo</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供数据：<code>this.$bus.$emit(&#39;xxxx&#39;,数据)</code></p>
</li>
</ol>
</li>
<li><p>最好在beforeDestroy钩子中，用$off去解绑<span style="color:red">当前组件所用到的</span>事件。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> demo = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;&#125;);</span><br><span class="line"><span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title function_">demo</span>();</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">x</span> = d;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">q</span> =&gt;</span> <span class="title function_">q</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;model&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;性别&#123;&#123; sex &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄&#123;&#123; age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;cdstudent&quot;&gt;点击&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Student&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;李四&quot;,</span><br><span class="line">      sex: &quot;男&quot;,</span><br><span class="line">      age: 20,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  // mounted() &#123;</span><br><span class="line">  //   console.log(&quot;Student&quot;, this.x);</span><br><span class="line">  // &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    cdstudent() &#123;</span><br><span class="line">      this.x.$emit(&quot;hello&quot;, this.name);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style lang=&#x27;css&#x27; scoped&gt;</span><br><span class="line">.model &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.model &#123;</span><br><span class="line">  font-size: 40px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;model&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; name &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; a &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;School&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;二中&quot;,</span><br><span class="line">      a: &quot;daye&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">     // this是当前组件</span><br><span class="line">    this.x.$on(&quot;hello&quot;, (data) =&gt; &#123;</span><br><span class="line">      &#123;</span><br><span class="line">        console.log(&quot;school接收到了数据&quot;, data);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.model &#123;</span><br><span class="line">  background-color: pink;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="消息订阅与发布（pubsub）"><a href="#消息订阅与发布（pubsub）" class="headerlink" title="消息订阅与发布（pubsub）"></a>消息订阅与发布（pubsub）</h2><p><a target="_blank" rel="noopener" href="https://github.com/mroderick/PubSubJS/">官网</a></p>
<p><a target="_blank" rel="noopener" href="http://www.npmdoc.org/pubsub-jszhongwenwendangpubsub-js-jszhongwenjiaochengjiexi.html">中文文档</a></p>
<ol>
<li><p>一种组件间通信的方式，适用于<span style="color:red">任意组件间通信</span>。</p>
</li>
<li><p>使用步骤：</p>
<ol>
<li><p>安装pubsub：<code>npm i pubsub-js</code></p>
</li>
<li><p>引入: <code>import pubsub from &#39;pubsub-js&#39;</code></p>
</li>
<li><p>接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的<span style="color:red">回调留在A组件自身。</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">methods</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title function_">demo</span>(<span class="params">data</span>)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pid</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&#x27;xxx&#x27;</span>,<span class="variable language_">this</span>.<span class="property">demo</span>) <span class="comment">//订阅消息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供数据：<code>pubsub.publish(&#39;xxx&#39;,数据)</code></p>
</li>
<li><p>最好在beforeDestroy钩子中，用<code>PubSub.unsubscribe(pid)</code>去<span style="color:red">取消订阅。</span></p>
</li>
</ol>
<p>订阅事件(接受数据)</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;model&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; name &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; a &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import PubSub from &quot;pubsub-js&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;School&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;二中&quot;,</span><br><span class="line">      a: &quot;daye&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    this.x.$on(&quot;hello&quot;, (data) =&gt; &#123;</span><br><span class="line">      &#123;</span><br><span class="line">        console.log(&quot;school接收到了数据&quot;, data);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    this.pubId = PubSub.subscribe(&quot;hello&quot;, function (mas, data) &#123;</span><br><span class="line">      console.log(this); //undefined 写成箭头函数this为vc或者将回调函数写到methods中</span><br><span class="line">      console.log(&quot;消息订阅有人发布了消息&quot;, mas, data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy() &#123;</span><br><span class="line">    PubSub.unsubscribe(this.pubId);</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.model &#123;</span><br><span class="line">  background-color: pink;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>发送数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;model&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;性别&#123;&#123; sex &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄&#123;&#123; age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;cdstudent&quot;&gt;点击&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import PubSub from &quot;pubsub-js&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Student&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;李四&quot;,</span><br><span class="line">      sex: &quot;男&quot;,</span><br><span class="line">      age: 20,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    PubSub.publish(&quot;hello&quot;, &quot;!@hello world!!!&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    cdstudent() &#123;</span><br><span class="line">      this.x.$emit(&quot;hello&quot;, this.name);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style lang=&#x27;css&#x27; scoped&gt;</span><br><span class="line">.model &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.model &#123;</span><br><span class="line">  font-size: 40px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h2><ol>
<li><p>语法：<code>this.$nextTick(回调函数)</code></p>
</li>
<li><p>作用：在下一次 DOM 更新结束后执行其指定的回调。</p>
</li>
<li><p>什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在nextTick所指定的回调函数中执行。</p>
</li>
</ol>
<p><code>// 在回调函数解析完后才会重新解析页面  // 因此导致先聚焦后解析模板重新加载页使聚焦的有失去了焦点</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;transition appear name=&quot;todo&quot;&gt;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">      &lt;label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; :checked=&quot;todo.done&quot; @click=&quot;handles(todo.id)&quot; /&gt;</span><br><span class="line">        &lt;span v-show=&quot;!todo.edit&quot;&gt;&#123;&#123; todo.title &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          type=&quot;text&quot;</span><br><span class="line">          v-show=&quot;todo.edit&quot;</span><br><span class="line">          v-model=&quot;todo.title&quot;</span><br><span class="line">          ref=&quot;title&quot;</span><br><span class="line">          @blur=&quot;bc(todo)&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/label&gt;</span><br><span class="line">      &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handledelete(todo.id)&quot;&gt;</span><br><span class="line">        删除</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        class=&quot;btn btn-edit&quot;</span><br><span class="line">        v-show=&quot;!todo.edit&quot;</span><br><span class="line">        @click=&quot;handleEdit(todo)&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        编辑</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &lt;button class=&quot;btn btn-edit&quot; v-show=&quot;todo.edit&quot; @click=&quot;bc(todo)&quot;&gt;</span><br><span class="line">        保存</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/transition&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;MyItem&quot;,</span><br><span class="line">  props: [&quot;todo&quot;],</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handledelete(id) &#123;</span><br><span class="line">      if (confirm(&quot;你确认吗?&quot;)) &#123;</span><br><span class="line">        this.$bus.$emit(&quot;deleteTodo&quot;, id);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    handles(id) &#123;</span><br><span class="line">      console.log(id);</span><br><span class="line">      this.$bus.$emit(&quot;handle&quot;, id);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleEdit(todo) &#123;</span><br><span class="line">      todo.edit = !todo.edit;</span><br><span class="line">       // 直接写会导致无法聚焦</span><br><span class="line">       // 在回调函数解析完后才会重新解析页面</span><br><span class="line">       // 因此导致先聚焦后解析模板重新加载页使聚焦的有失去了焦点</span><br><span class="line">      // setTimeout(() =&gt; &#123;</span><br><span class="line">      //   this.$refs.title.focus();</span><br><span class="line">      // &#125;, 0);</span><br><span class="line">      this.$nextTick(function () &#123;</span><br><span class="line">        this.$refs.title.focus();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    bc(todo) &#123;</span><br><span class="line">      todo.edit = false;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/*item*/</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="Vue封装的过度与动画"><a href="#Vue封装的过度与动画" class="headerlink" title="Vue封装的过度与动画"></a>Vue封装的过度与动画</h2><p><img src="/vue2/image-20221129162046008.png" alt="image-20221129162046008"></p>
<ol>
<li><p>作用：在插入、更新或移除 DOM元素时，在合适的时候给元素添加样式类名。</p>
</li>
<li><p>写法：</p>
<ol>
<li><p>准备好样式：</p>
<ul>
<li>元素进入的样式：<ol>
<li>v-enter：进入的起点</li>
<li>v-enter-active：进入过程中</li>
<li>v-enter-to：进入的终点</li>
</ol>
</li>
<li>元素离开的样式：<ol>
<li>v-leave：离开的起点</li>
<li>v-leave-active：离开过程中</li>
<li>v-leave-to：离开的终点</li>
</ol>
</li>
</ul>
</li>
<li><p>使用<code>&lt;transition&gt;</code>（单个）包裹要过度的元素，并配置name属性：设置name后前面的V要改成name的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;hello&quot;&gt;</span><br><span class="line">   &lt;h1 v-show=&quot;isShow&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>备注：若有多个元素需要过度，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code>值。</p>
</li>
<li><p>设置appear 属性性自动执行第一个动画效果</p>
</li>
<li><p><transition>不会添加到DOM上</transition></p>
</li>
</ol>
</li>
</ol>
<p><code>动画</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isShow = !isShow&quot;&gt;显示/隐藏&lt;/button&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;transition name=&quot;hell&quot; appear&gt;</span><br><span class="line">      &lt;h1 v-show=&quot;isShow&quot; class=&quot;come&quot;&gt;你好1&lt;/h1&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Test&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h1 &#123;</span><br><span class="line">  width: 50%;</span><br><span class="line">  height: 100px;</span><br><span class="line">  background-color: pink;</span><br><span class="line">&#125;</span><br><span class="line">/* .come &#123;</span><br><span class="line">  animation: atguigu 1s;</span><br><span class="line">&#125;</span><br><span class="line">.go &#123;</span><br><span class="line">  animation: atguigu 1s reverse;</span><br><span class="line">&#125; */</span><br><span class="line">.hell-enter-active &#123;</span><br><span class="line">  animation: atguigu 1s;</span><br><span class="line">&#125;</span><br><span class="line">.hell-leave-active &#123;</span><br><span class="line">  animation: atguigu 1s reverse;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes atguigu &#123;</span><br><span class="line">  from &#123;</span><br><span class="line">    transform: translateX(-50%);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    transform: translateX(0px);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>过度</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = !isShow&quot;</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">appear</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;Test&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">isShow</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-tag">h1</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background-color</span>: <span class="number">#ffc0cb</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  // <span class="attribute">transition</span>: <span class="number">0.5s</span> linear;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.hello-enter</span> ,<span class="selector-class">.hello-leave-to</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.hello-enter-to</span> ,<span class="selector-class">.hello-leave</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">hello-enter-active,hello-leave-active&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">     <span class="attribute">transition</span>: <span class="number">0.5s</span> linear;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>第三方库（animate.css）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isShow = !isShow&quot;&gt;显示/隐藏&lt;/button&gt;</span><br><span class="line">    &lt;transition</span><br><span class="line">      appear</span><br><span class="line">      name=&quot;animate__animated animate__bounce&quot;</span><br><span class="line">      enter-active-class=&quot;animate__swing&quot;</span><br><span class="line">      leave-active-class=&quot;animate__backOutUp&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;h1 v-show=&quot;isShow&quot;&gt;你好2&lt;/h1&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &quot;animate.css&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Test&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h1 &#123;</span><br><span class="line">  width: 50%;</span><br><span class="line">  height: 100px;</span><br><span class="line">  background-color: #ffc0cb;</span><br><span class="line">  transition: 0.5s linear;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="vue脚手架配置代理-解决跨域"><a href="#vue脚手架配置代理-解决跨域" class="headerlink" title="vue脚手架配置代理(解决跨域)"></a>vue脚手架配置代理(解决跨域)</h2><p>ajax请求的发起</p>
<ol>
<li>xh  			new XMLHttpRequest()</li>
<li>jquery </li>
<li>axios 推荐使用</li>
<li>fetch 兼容性不支持IE</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">直接发送请求同源策略</span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:5000/students&#x27;</span>).<span class="title function_">then</span>(</span><br><span class="line">        <span class="function">(<span class="params">response</span>) =&gt;</span> &#123; </span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">error</span>) =&gt;</span> &#123; </span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br></pre></td></tr></table></figure>



<p><img src="/vue2/image-20221130003841584.png" alt="image-20221130003841584"></p>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>​	在vue.config.js中添加如下配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>:&#123;</span><br><span class="line">  <span class="attr">proxy</span>:<span class="string">&quot;http://localhost:5000&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>优点：配置简单，<strong>请求资源时直接发给前端（8080）即可。</strong></li>
<li>缺点：不能配置多个代理，不能灵活的控制请求是否走代理。</li>
<li>工作方式：若按照上述配置代理，当请求了前端不存在的资源时(即public文件夹中无时)，那么该请求会转发给服务器 （优先匹配前端资源）解决方法使用方法二配置</li>
</ol>
<p><strong>注意：发送的请求是发给代理服务器其端口为项目运行端口</strong></p>
<p>服务器</p>
<p><img src="/vue2/image-20221130005446752.png" alt="image-20221130005446752">请求</p>
<p><img src="/vue2/image-20221130005427051.png" alt="image-20221130005427051"></p>
<p>项目运行在8080端口</p>
<p><img src="/vue2/image-20221130005504916.png" alt="image-20221130005504916"></p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>​	编写vue.config.js配置具体代理规则：</p>
<h4 id="vue-cli-proxyTable中跨域中pathRewrite-怎么用"><a href="#vue-cli-proxyTable中跨域中pathRewrite-怎么用" class="headerlink" title="vue-cli proxyTable中跨域中pathRewrite 怎么用"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/hanguidong/p/9460495.html">vue-cli proxyTable中跨域中pathRewrite 怎么用</a></h4><p><img src="/vue2/1378694-20180811174731753-1489722472.png" alt="img"></p>
<p>问：proxyTable 里面的pathRewrite里面的‘^&#x2F;iclient’:’’ 什么意思？</p>
<p>答：用代理, 首先你得有一个标识, 告诉他你这个连接要用代理. 不然的话, 可能你的 html, css, js这些静态资源都跑去代理. 所以我们只要接口用代理, 静态文件用本地.</p>
<p><code>&#39;/iclient&#39;: &#123;&#125;</code>, 就是告诉<code>node</code>, 我接口只要是<code>&#39;/iclient&#39;</code>开头的才用代理.所以你的接口就要这么写 <code>/iclient/xx/xx</code>. 最后代理的路径就是 <code>http://xxx.xx.com/iclient/xx/xx</code>.</p>
<p>可是不对啊, 我正确的接口路径里面没有<code>/iclient</code>啊. 所以就需要 <code>pathRewrite</code>,用<code>&#39;&#39;^/iclient&#39;&#39;:&#39;&#39;</code>, 把<code>&#39;/iclient&#39;</code>去掉, 这样既能有正确标识, 又能在请求接口的时候去掉<code>iclient</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125; <span class="comment">//必须配置这个属性不配置会连带代理服务器设置的请求前缀一起发送给服务器</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7041441723238580238">解释pathRewrite</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">	<span class="attr">devServer</span>: &#123;</span><br><span class="line">      <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api1&#x27;</span>: &#123;<span class="comment">// 匹配所有以 &#x27;/api1&#x27;开头的请求路径</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span>,<span class="comment">// 代理目标的基础路径</span></span><br><span class="line">         <span class="comment">// true时给服务器的端口参数与服务器端口一样true说谎5000 false说实话8080</span></span><br><span class="line">         <span class="comment">// 但都可获取数据除非后端有限制建议使用true</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,  </span><br><span class="line">         <span class="comment">// 为false时与脚手架端口号一样</span></span><br><span class="line">        <span class="attr">ws</span>:<span class="literal">true</span>,  <span class="comment">// 用于支持websocket的</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/api1&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;/api2&#x27;</span>: &#123;<span class="comment">// 匹配所有以 &#x27;/api2&#x27;开头的请求路径</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5001&#x27;</span>,<span class="comment">// 代理目标的基础路径</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/api2&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class="line"><span class="comment">   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080</span></span><br><span class="line"><span class="comment">   changeOrigin默认值为true</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理。</li>
<li>缺点：配置略微繁琐，请求资源时必须加前缀。</li>
</ol>
<h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><ol>
<li><p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 <strong style="color:red">父组件 &#x3D;&#x3D;&#x3D;&gt; 子组件</strong> 。</p>
</li>
<li><p>分类：默认插槽、具名插槽、作用域插槽</p>
</li>
<li><p>使用方式：</p>
<ol>
<li><p>默认插槽：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">        &lt;Category&gt;</span><br><span class="line">          &lt;!-- 在父组件中进行解析后再插入子组件的插槽中 --&gt;</span><br><span class="line">          &lt;!-- 会将该结构体css样式一起带到子组件中，应用在整个组件中 --&gt;</span><br><span class="line">          &lt;!-- 当父组件的style加了scoped属性时样式只会影响插槽中的 --&gt;</span><br><span class="line">           &lt;div&gt;html结构1&lt;/div&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line"></span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              </span><br><span class="line">            &lt;!-- 定义插槽 --&gt;</span><br><span class="line">               &lt;!-- 未写slot标签时组件标签的结构体内的内容会解析但不会放到组件内部（它不知道放在哪） --&gt;</span><br><span class="line">            &lt;slot&gt;没有东西插入时插槽默认的内容...&lt;/slot&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>具名插槽：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">        &lt;Category&gt;</span><br><span class="line">          &lt;!--  --&gt;</span><br><span class="line">            &lt;template slot=&quot;center&quot;&gt;</span><br><span class="line">              &lt;div&gt;html结构1&lt;/div&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">			&lt;!-- 写template时才可以写v-slot其他的不能写 --&gt;                 </span><br><span class="line">            &lt;template v-slot:footer&gt;</span><br><span class="line">               &lt;div&gt;html结构2&lt;/div&gt;</span><br><span class="line">			写&amp;nbsp;&amp;nbsp;无效</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">         &lt;div&gt;</span><br><span class="line">               &lt;!-- 定义插槽 --&gt;</span><br><span class="line">            &lt;!--- 重复会已追加的形式添加到插槽中--&gt;</span><br><span class="line">               &lt;slot name=&quot;center&quot;&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class="line">            &lt;slot name=&quot;footer&quot;&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">     &lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>作用域插槽：</p>
<ol>
<li><p>理解：<span style="color:red">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（games数据在Category组件中，但使用数据所遍历出来的结构由App组件决定）</p>
</li>
<li><p>具体编码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">		&lt;Category&gt;</span><br><span class="line">      必须使用template和scope才能接受到数据接受到的是一个对象（接收时可以使用es6的解构赋值）</span><br><span class="line">			&lt;template scope=&quot;scopeData&quot;&gt;</span><br><span class="line">				&lt;!-- 生成的是ul列表 --&gt;</span><br><span class="line">				&lt;ul&gt;</span><br><span class="line">					&lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">		&lt;/Category&gt;</span><br><span class="line"></span><br><span class="line">		&lt;Category&gt;</span><br><span class="line">      slot-scope （新）与 scope一样只是新旧api的问题</span><br><span class="line">			&lt;template slot-scope=&quot;scopeData&quot;&gt;</span><br><span class="line">				&lt;!-- 生成的是h4标题 --&gt;</span><br><span class="line">				&lt;h4 v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/h4&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">		&lt;/Category&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              :games=&quot;games&quot;将数据传给插槽的使用者谁插入的传给谁</span><br><span class="line">                &lt;slot :games=&quot;games&quot;&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">		</span><br><span class="line">     &lt;script&gt;</span><br><span class="line">            export default &#123;</span><br><span class="line">                name:&#x27;Category&#x27;,</span><br><span class="line">                props:[&#x27;title&#x27;],</span><br><span class="line">                //数据在子组件自身时使用默认插槽使用者无法获取数据</span><br><span class="line">                data() &#123;</span><br><span class="line">                    return &#123;</span><br><span class="line">                        games:[&#x27;红色警戒&#x27;,&#x27;穿越火线&#x27;,&#x27;劲舞团&#x27;,&#x27;超级玛丽&#x27;]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<blockquote>
<p><strong>注意：如果子组件中未写插槽表签slot也不会丢失会存放在$slots.default属性中</strong></p>
</blockquote>
</li>
</ol>
<h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><p>安装vuex时注意</p>
<blockquote>
<p>vue2 &#x3D;&gt;vuex3</p>
<p>vue3 &#x3D;&gt; vuex4</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/">vuex官网参考</a></p>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/cessstudy/kak11d/dkrrce">vuex参考1</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46104934/article/details/126671922?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-126671922-blog-125155540.pc_relevant_recovery_v2&spm=1001.2101.3001.4242.1&utm_relevant_index=3">vuex参考2</a></p>
<p><img src="/vue2/image-20221201154749651.png" alt="image-20221201154749651"></p>
<p><img src="/vue2/image-20221202151620130.png" alt="image-20221202151620130"></p>
<p><img src="/vue2/image-20221202153048821.png" alt="image-20221202153048821"></p>
<p><strong>Devtools为开发者工具</strong></p>
<h3 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h3><p>​		在Vue中实现<strong>集中式</strong>状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读&#x2F;写），也是一种组件间通信的方式，且适用于任意组件间通信。</p>
<h3 id="2-何时使用？"><a href="#2-何时使用？" class="headerlink" title="2.何时使用？"></a>2.何时使用？</h3><p>​		多个组件需要共享数据时</p>
<p>Vuex 可以帮助我们管理共享状态，并附带了更多的概念和框架。这需要对短期和长期效益进行权衡。<br>如果您不打算开发大型单页应用，使用 Vuex 可能是繁琐冗余的。确实是如此——如果您的应用够简单，您最好不要使用 Vuex。一个简单的 store 模式 (opens new window)就足够您所需了。但是，如果您需要构建一个中大型单页应用，您很可能会考虑如何更好地在组件外部管理状态，Vuex 将会成为自然而然的选择。</p>
<h3 id="3、什么是“状态管理模式”？"><a href="#3、什么是“状态管理模式”？" class="headerlink" title="3、什么是“状态管理模式”？"></a>3、什么是“状态管理模式”？</h3><p>让我们从一个简单的 Vue 计数应用开始：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="comment">// state</span></span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// view</span></span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="comment">// actions</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    increment () &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这个状态自管理应用包含以下几个部分：</p>
<ul>
<li>state，驱动应用的数据源；</li>
<li>view，以声明方式将 state 映射到视图；</li>
<li>actions，响应在 view 上的用户输入导致的状态变化。</li>
</ul>
<p>以下是一个表示“单向数据流”理念的简单示意：</p>
<p><img src="/vue2/f3a8bb92614e44e5bb010991cb46c75d.png" alt="在这里插入图片描述"></p>
<p>但是，当我们的应用遇到多个组件共享状态时，单向数据流的简洁性很容易被破坏：</p>
<ul>
<li>多个视图依赖于同一状态。</li>
<li>来自不同视图的行为需要变更同一状态。</li>
</ul>
<p>对于问题一，传参的方法对于多层嵌套的组件将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。对于问题二，我们经常会采用父子组件直接引用或者通过事件来变更和同步状态的多份拷贝。以上的这些模式非常脆弱，通常会导致无法维护的代码。</p>
<p>因此，我们为什么不把组件的共享状态抽取出来，以一个全局单例模式管理呢？在这种模式下，我们的组件树构成了一个巨大的“视图”，不管在树的哪个位置，任何组件都能获取状态或者触发行为！</p>
<p>通过定义和隔离状态管理中的各种概念并通过强制规则维持视图和状态间的独立性，我们的代码将会变得更结构化且易维护。</p>
<p>这就是 Vuex 背后的基本思想，借鉴了 Flux (opens new window)、Redux (opens new window)和 The Elm Architecture (opens new window)。与其他模式不同的是，Vuex 是专门为 Vue.js 设计的状态管理库，以利用 Vue.js 的细粒度数据响应机制来进行高效的状态更新。</p>
<p>如果你想交互式地学习 Vuex，可以看这个 Scrimba 上的 Vuex 课程 (opens new window)，它将录屏和代码试验场混合在了一起，你可以随时暂停并尝试。</p>
<ul>
<li>vuex是采用集中式管理组件依赖的共享数据的一个工具，可以解决不同组件数据共享问题</li>
</ul>
<p><img src="/vue2/f2cdf3e033e74199a43b686004054f67.png" alt="img"></p>
<p><img src="/vue2/63f2d0d213c6486cbb9cc0f31a5812e6.jpeg" alt="img"></p>
<p>结论<br>修改state状态必须通过mutations<br>mutations只能执行同步代码，类似ajax，定时器之类的代码不能在mutations中执行<br>执行异步代码，要通过actions，然后将数据提交给mutations才可以完成<br>state的状态即共享数据可以在组件中引用<br>组件中可以调用action</p>
<h3 id="4-搭建vuex环境"><a href="#4-搭建vuex环境" class="headerlink" title="4.搭建vuex环境"></a>4.搭建vuex环境</h3><ol>
<li><p>创建文件：</p>
<p><code>src/store/index.js</code>（引用时import store from ‘.&#x2F;store’）(index文件为默认的)或</p>
<p>创建<code>src/vuex/store.js</code>（import store from ‘.&#x2F;vuex&#x2F;store.js’）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Vue核心库</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备actions对象——响应组件中用户的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="comment">//准备mutations对象——修改state中的数据</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="comment">//准备state对象——保存具体的数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	actions,</span><br><span class="line">	mutations,</span><br><span class="line">	state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>main.js</code>中创建vm时传入<code>store</code>配置项</p>
<p>注意import引入时会发生引用提升故vuex的使用写在了<code>src/store/index.js</code>文件中</p>
<p>再创建store实例之前使用vuex插件</p>
<p><img src="/vue2/image-20221203150508142.png" alt="image-20221203150508142"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="comment">//引入store</span></span><br><span class="line"><span class="comment">//先使用Vuex插件在创建store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">	<span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">	store</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-基本使用"><a href="#5-基本使用" class="headerlink" title="5.基本使用"></a>5.基本使用</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH/?p=110&spm_id_from=333.880.my_history.page.click&vd_source=031f631a87cca114e71194f12ec3fc3f">尚硅谷视屏</a></p>
<ol>
<li><p>初始化数据、配置<code>actions</code>、配置<code>mutations</code>，操作文件<code>store.js</code></p>
<p>context</p>
<p><img src="/vue2/image-20221202162227195.png" alt="image-20221202162227195"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Vue核心库</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//引用Vuex</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="comment">//响应组件中加的动作</span></span><br><span class="line">	<span class="title function_">jia</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">    <span class="comment">// 使用context的原因是防止数据处理的逻辑很复杂</span></span><br><span class="line">    <span class="comment">// 通过context.disptch()执行另一个动作来处理，也可以实现了动作的复用</span></span><br><span class="line">		<span class="comment">// 在此处修改state页面有效但开发者工具失效了</span></span><br><span class="line">		<span class="comment">// console.log(&#x27;actions中的jia被调用了&#x27;,miniStore,value)</span></span><br><span class="line">		context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="comment">//执行加</span></span><br><span class="line">	<span class="title function_">JIA</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">		<span class="comment">// console.log(&#x27;mutations中的JIA被调用了&#x27;,state,value)</span></span><br><span class="line">		state.<span class="property">sum</span> += value</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">   <span class="attr">sum</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	actions,</span><br><span class="line">	mutations,</span><br><span class="line">	state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件中读取vuex中的数据：<code>$store.state.sum</code></p>
</li>
<li><p>组件中修改vuex中的数据：<code>$store.dispatch(&#39;action中的方法名&#39;,数据)</code> 或 <code>$store.commit(&#39;mutations中的方法名&#39;,数据)</code></p>
<blockquote>
<p> 备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写<code>dispatch</code>，直接编写<code>commit</code></p>
</blockquote>
</li>
</ol>
<h3 id="6-getters的使用"><a href="#6-getters的使用" class="headerlink" title="6.getters的使用"></a>6.getters的使用</h3><ol>
<li><p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。</p>
</li>
<li><p>在<code>store.js</code>中追加<code>getters</code>配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">	<span class="title function_">bigSum</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="comment">// 与计算属性类似必须写返回值</span></span><br><span class="line">		<span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	......</span><br><span class="line">	getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件中读取数据：<code>$store.getters.bigSum</code></p>
</li>
</ol>
<h3 id="7-四个map方法的使用"><a href="#7-四个map方法的使用" class="headerlink" title="7.四个map方法的使用"></a>7.四个map方法的使用</h3><p>先要引入对应的方法才能使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapState,mapGetters,mapMutations,mapActions&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>

<p>对象写法注意象</p>
<p> <strong>值的sum等必须加引号，不加加载的是变量而不是指定字符串</strong></p>
<p>数组写法注意象</p>
<p><strong>要生成的计算属性名和state中的数据名相同时才行</strong></p>
<p><code>两种写法生成的都是一个对象需要进行解构</code></p>
<ol>
<li><p><strong>mapState方法：</strong>用于帮助我们映射<code>state</code>中的数据为计算属性</p>
<p><strong>借助mapState生成计算属性：sum、school、subject</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">//借助mapState生成计算属性：sum、school、subject（对象写法）</span></span><br><span class="line">  	<span class="comment">// 值的sum等必须加引号，不加加载的是变量而不是指定字符串</span></span><br><span class="line">  	<span class="comment">//生成的是一个对象需要进行解构</span></span><br><span class="line">     ...<span class="title function_">mapState</span>(&#123;<span class="attr">sum</span>:<span class="string">&#x27;sum&#x27;</span>,<span class="attr">school</span>:<span class="string">&#x27;school&#x27;</span>,<span class="attr">subject</span>:<span class="string">&#x27;subject&#x27;</span>&#125;),</span><br><span class="line">         </span><br><span class="line">    <span class="comment">//借助mapState生成计算属性：sum、school、subject（数组写法）</span></span><br><span class="line">       <span class="comment">// 要生成的计算属性名和state中的数据名相同时才行</span></span><br><span class="line">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><strong>注意不能使用对象的简写形式</strong>找变量去了</p>
<p>…mapState({sum,school,subject}),</p>
</li>
<li><p><strong>mapGetters方法：</strong>用于帮助我们映射<code>getters</code>中的数据为计算属性</p>
<p><strong>借助mapGetters生成计算属性</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">//借助mapGetters生成计算属性：bigSum（对象写法）</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>(&#123;<span class="attr">bigSum</span>:<span class="string">&#x27;bigSum&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">//借助mapGetters生成计算属性：bigSum（数组写法）</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;bigSum&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>


</li>
<li><p><strong>mapActions方法：</strong>用于帮助我们生成与<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>的函数</p>
<p><strong>借助mapActions生成对应的方法，方法中会调用对应的dispatch去联系Actions</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="comment">//靠mapActions生成：incrementOdd、incrementWait（对象形式）</span></span><br><span class="line">    ...<span class="title function_">mapActions</span>(&#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;jiaWait&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//靠mapActions生成：incrementOdd、incrementWait（数组形式）</span></span><br><span class="line">    ...<span class="title function_">mapActions</span>([<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="string">&#x27;jiaWait&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p><strong>mapMutations方法：</strong>用于帮助我们生成与<code>mutations</code>对话的方法，即：包含<code>$store.commit(xxx)</code>的函数</p>
<p><strong>借助mapMutations生成对应的方法，方法中会调用对应的commit去联系mutations</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="comment">//靠mapActions生成：increment、decrement（对象形式）</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>(&#123;<span class="attr">increment</span>:<span class="string">&#x27;JIA&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;JIAN&#x27;</span>&#125;),</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//靠mapMutations生成：JIA、JIAN（对象形式）</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;JIA&#x27;</span>,<span class="string">&#x27;JIAN&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p><strong>备注：mapActions与mapMutations使用时，若需要传递参数需要：在组件模板中绑定事件的传递好参数，否则参数是事件对象。（event）</strong></p>
</blockquote>
<p>没写时</p>
<p><img src="/vue2/image-20221202170626711.png" alt="image-20221202170626711"></p>
<p><img src="/vue2/image-20221202170640302.png" alt="image-20221202170640302"></p>
<p><img src="/vue2/image-20221202170707280.png" alt="image-20221202170707280"></p>
<p>解决方法一推荐</p>
<p><img src="/vue2/image-20221202170748577.png" alt="image-20221202170748577"></p>
<p>解决方法二（不推荐）繁琐</p>
<p><img src="/vue2/image-20221202170957815.png" alt="image-20221202170957815"></p>
<h3 id="8-模块化-命名空间"><a href="#8-模块化-命名空间" class="headerlink" title="8.模块化+命名空间"></a>8.模块化+命名空间</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=115">尚硅谷视屏</a></p>
<ol>
<li><p>目的：让代码更好维护，让多种数据分类更加明确。</p>
</li>
<li><p>修改<code>store.js</code></p>
<p>按照功能业务功能等进行配置的拆开，最后&#x2F;创建并暴露store</p>
<blockquote>
<p><code>namespaced:true</code></p>
<p>namespaced默认为false</p>
<p>不开启命名空间</p>
<p>namespaced为true时</p>
<p>可以通过map四种方法的第一个参数指定命名空间获取指定的数据</p>
</blockquote>
<p>index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> countOptions <span class="keyword">from</span> <span class="string">&#x27;./count&#x27;</span></span><br><span class="line"><span class="keyword">import</span> personOptions <span class="keyword">from</span> <span class="string">&#x27;./person&#x27;</span></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	<span class="attr">modules</span>:&#123;</span><br><span class="line">		<span class="attr">countAbout</span>:countOptions,</span><br><span class="line">		<span class="attr">personAbout</span>:personOptions</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>count.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求和相关的配置</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 开启命名空间</span></span><br><span class="line">	<span class="attr">namespaced</span>:<span class="literal">true</span>,</span><br><span class="line">	<span class="attr">actions</span>:&#123;</span><br><span class="line">		<span class="title function_">jiaOdd</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;actions中的jiaOdd被调用了&#x27;</span>)</span><br><span class="line">			<span class="keyword">if</span>(context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>)&#123;</span><br><span class="line">				context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="title function_">jiaWait</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;actions中的jiaWait被调用了&#x27;</span>)</span><br><span class="line">			<span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">				context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">			&#125;,<span class="number">500</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">mutations</span>:&#123;</span><br><span class="line">		<span class="title function_">JIA</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mutations中的JIA被调用了&#x27;</span>)</span><br><span class="line">			state.<span class="property">sum</span> += value</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="title function_">JIAN</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mutations中的JIAN被调用了&#x27;</span>)</span><br><span class="line">			state.<span class="property">sum</span> -= value</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">state</span>:&#123;</span><br><span class="line">		<span class="attr">sum</span>:<span class="number">0</span>, <span class="comment">//当前的和</span></span><br><span class="line">		<span class="attr">school</span>:<span class="string">&#x27;尚硅谷&#x27;</span>,</span><br><span class="line">		<span class="attr">subject</span>:<span class="string">&#x27;前端&#x27;</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">getters</span>:&#123;</span><br><span class="line">		<span class="title function_">bigSum</span>(<span class="params">state</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> state.<span class="property">sum</span>*<span class="number">10</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>person.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//人员管理相关的配置</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; nanoid &#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="attr">namespaced</span>:<span class="literal">true</span>,</span><br><span class="line">	<span class="attr">actions</span>:&#123;</span><br><span class="line">		<span class="title function_">addPersonWang</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span>(value.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;王&#x27;</span>) === <span class="number">0</span>)&#123;</span><br><span class="line">				context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD_PERSON&#x27;</span>,value)</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="title function_">alert</span>(<span class="string">&#x27;添加的人必须姓王！&#x27;</span>)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="title function_">addPersonServer</span>(<span class="params">context</span>)&#123;</span><br><span class="line">			axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uixsj.cn/hitokoto/get?type=social&#x27;</span>).<span class="title function_">then</span>(</span><br><span class="line">				<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">					context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD_PERSON&#x27;</span>,&#123;<span class="attr">id</span>:<span class="title function_">nanoid</span>(),<span class="attr">name</span>:response.<span class="property">data</span>&#125;)</span><br><span class="line">				&#125;,</span><br><span class="line">				<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">					<span class="title function_">alert</span>(error.<span class="property">message</span>)</span><br><span class="line">				&#125;</span><br><span class="line">			)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">mutations</span>:&#123;</span><br><span class="line">		<span class="title function_">ADD_PERSON</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mutations中的ADD_PERSON被调用了&#x27;</span>)</span><br><span class="line">			state.<span class="property">personList</span>.<span class="title function_">unshift</span>(value)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">state</span>:&#123;</span><br><span class="line">		<span class="attr">personList</span>:[</span><br><span class="line">			&#123;<span class="attr">id</span>:<span class="string">&#x27;001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">		]</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">getters</span>:&#123;</span><br><span class="line">		<span class="title function_">firstPersonName</span>(<span class="params">state</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> state.<span class="property">personList</span>[<span class="number">0</span>].<span class="property">name</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用</p>
<p>map方法的使用使用命名空间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;h1&gt;当前求和为：&#123;&#123;sum&#125;&#125;&lt;/h1&gt;</span><br><span class="line">		&lt;h3&gt;当前求和放大10倍为：&#123;&#123;bigSum&#125;&#125;&lt;/h3&gt;</span><br><span class="line">		&lt;h3&gt;我在&#123;&#123;school&#125;&#125;，学习&#123;&#123;subject&#125;&#125;&lt;/h3&gt;</span><br><span class="line">		&lt;h3 style=&quot;color:red&quot;&gt;Person组件的总人数是：&#123;&#123;personList.length&#125;&#125;&lt;/h3&gt;</span><br><span class="line">		&lt;select v-model.number=&quot;n&quot;&gt;</span><br><span class="line">			&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span><br><span class="line">			&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><br><span class="line">			&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><br><span class="line">		&lt;/select&gt;</span><br><span class="line">		&lt;button @click=&quot;increment(n)&quot;&gt;+&lt;/button&gt;</span><br><span class="line">		&lt;button @click=&quot;decrement(n)&quot;&gt;-&lt;/button&gt;</span><br><span class="line">		&lt;button @click=&quot;incrementOdd(n)&quot;&gt;当前求和为奇数再加&lt;/button&gt;</span><br><span class="line">		&lt;button @click=&quot;incrementWait(n)&quot;&gt;等一等再加&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;mapState,mapGetters,mapMutations,mapActions&#125; from &#x27;vuex&#x27;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name:&#x27;Count&#x27;,</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				n:1, //用户选择的数字</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		computed:&#123;</span><br><span class="line">			//借助mapState生成计算属性，从state中读取数据。（数组写法）</span><br><span class="line">      // 使用命名空间</span><br><span class="line">			...mapState(&#x27;countAbout&#x27;,[&#x27;sum&#x27;,&#x27;school&#x27;,&#x27;subject&#x27;]),</span><br><span class="line">			...mapState(&#x27;personAbout&#x27;,[&#x27;personList&#x27;]),</span><br><span class="line">			//借助mapGetters生成计算属性，从getters中读取数据。（数组写法）</span><br><span class="line">			...mapGetters(&#x27;countAbout&#x27;,[&#x27;bigSum&#x27;])</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">			//借助mapMutations生成对应的方法，方法中会调用commit去联系mutations(对象写法)</span><br><span class="line">			...mapMutations(&#x27;countAbout&#x27;,&#123;increment:&#x27;JIA&#x27;,decrement:&#x27;JIAN&#x27;&#125;),</span><br><span class="line">			//借助mapActions生成对应的方法，方法中会调用dispatch去联系actions(对象写法)</span><br><span class="line">			...mapActions(&#x27;countAbout&#x27;,&#123;incrementOdd:&#x27;jiaOdd&#x27;,incrementWait:&#x27;jiaWait&#x27;&#125;)</span><br><span class="line">		&#125;,</span><br><span class="line">		mounted() &#123;</span><br><span class="line">			console.log(this.$store)</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;css&quot;&gt;</span><br><span class="line">	button&#123;</span><br><span class="line">		margin-left: 5px;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>不用map方法时</p>
<p><code>this.$store.state.personAbout.personList</code></p>
<p><code>this.$store.dispatch(&#39;personAbout/addPersonWang&#39;,personObj)</code></p>
<p><img src="/vue2/image-20221202222912039.png" alt="image-20221202222912039"></p>
<p>注意<code>this.$store.getters[&#39;personAbout/firstPersonName&#39;]</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;h1&gt;人员列表&lt;/h1&gt;</span><br><span class="line">		&lt;h3 style=&quot;color:red&quot;&gt;Count组件求和为：&#123;&#123;sum&#125;&#125;&lt;/h3&gt;</span><br><span class="line">		&lt;h3&gt;列表中第一个人的名字是：&#123;&#123;firstPersonName&#125;&#125;&lt;/h3&gt;</span><br><span class="line">		&lt;input type=&quot;text&quot; placeholder=&quot;请输入名字&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">		&lt;button @click=&quot;add&quot;&gt;添加&lt;/button&gt;</span><br><span class="line">		&lt;button @click=&quot;addWang&quot;&gt;添加一个姓王的人&lt;/button&gt;</span><br><span class="line">		&lt;button @click=&quot;addPersonServer&quot;&gt;添加一个人，名字随机&lt;/button&gt;</span><br><span class="line">		&lt;ul&gt;</span><br><span class="line">			&lt;li v-for=&quot;p in personList&quot; :key=&quot;p.id&quot;&gt;&#123;&#123;p.name&#125;&#125;&lt;/li&gt;</span><br><span class="line">		&lt;/ul&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;nanoid&#125; from &#x27;nanoid&#x27;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name:&#x27;Person&#x27;,</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				name:&#x27;&#x27;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		computed:&#123;</span><br><span class="line">			personList()&#123;</span><br><span class="line">				return this.$store.state.personAbout.personList</span><br><span class="line">			&#125;,</span><br><span class="line">			sum()&#123;</span><br><span class="line">				return this.$store.state.countAbout.sum</span><br><span class="line">			&#125;,</span><br><span class="line">			firstPersonName()&#123;</span><br><span class="line">				return this.$store.getters[&#x27;personAbout/firstPersonName&#x27;]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">			add()&#123;</span><br><span class="line">				const personObj = &#123;id:nanoid(),name:this.name&#125;</span><br><span class="line">				this.$store.commit(&#x27;personAbout/ADD_PERSON&#x27;,personObj)</span><br><span class="line">				this.name = &#x27;&#x27;</span><br><span class="line">			&#125;,</span><br><span class="line">			addWang()&#123;</span><br><span class="line">				const personObj = &#123;id:nanoid(),name:this.name&#125;</span><br><span class="line">				this.$store.dispatch(&#x27;personAbout/addPersonWang&#x27;,personObj)</span><br><span class="line">				this.name = &#x27;&#x27;</span><br><span class="line">			&#125;,</span><br><span class="line">			addPersonServer()&#123;</span><br><span class="line">				this.$store.dispatch(&#x27;personAbout/addPersonServer&#x27;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countAbout = &#123;</span><br><span class="line">  <span class="attr">namespaced</span>:<span class="literal">true</span>,<span class="comment">//开启命名空间</span></span><br><span class="line">  <span class="attr">state</span>:&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">bigSum</span>(<span class="params">state</span>)&#123;</span><br><span class="line">       <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> personAbout = &#123;</span><br><span class="line">  <span class="attr">namespaced</span>:<span class="literal">true</span>,<span class="comment">//开启命名空间</span></span><br><span class="line">  <span class="attr">state</span>:&#123; ... &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    countAbout,</span><br><span class="line">    personAbout</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启命名空间后，组件中读取state数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：自己直接读取</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">personAbout</span>.<span class="property">list</span></span><br><span class="line"><span class="comment">//方式二：借助mapState读取：</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]),</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启命名空间后，组件中读取getters数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：自己直接读取</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[<span class="string">&#x27;personAbout/firstPersonName&#x27;</span>]</span><br><span class="line"><span class="comment">//方式二：借助mapGetters读取：</span></span><br><span class="line">...<span class="title function_">mapGetters</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;bigSum&#x27;</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启命名空间后，组件中调用dispatch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：自己直接dispatch</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;personAbout/addPersonWang&#x27;</span>,person)</span><br><span class="line"><span class="comment">//方式二：借助mapActions：</span></span><br><span class="line">...<span class="title function_">mapActions</span>(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;jiaWait&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启命名空间后，组件中调用commit</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：自己直接commit</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;personAbout/ADD_PERSON&#x27;</span>,person)</span><br><span class="line"><span class="comment">//方式二：借助mapMutations：</span></span><br><span class="line">...<span class="title function_">mapMutations</span>(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">increment</span>:<span class="string">&#x27;JIA&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;JIAN&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="vue路由"><a href="#vue路由" class="headerlink" title="vue路由"></a>vue路由</h2><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/">官方文档</a></p>
<p><img src="/vue2/image-20221203142344590.png" alt="image-20221203142344590"></p>
<p><img src="/vue2/image-20221203105252515.png" alt="image-20221203105252515"></p>
<p><img src="/vue2/image-20221203142154166.png" alt="image-20221203142154166"></p>
<ol>
<li>理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。</li>
<li>前端路由：key是路径，value是组件。</li>
</ol>
<p><img src="/vue2/image-20221203142357905.png" alt="image-20221203142357905"></p>
<p><img src="/vue2/image-20221203142418686.png" alt="image-20221203142418686"> </p>
<h3 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h3><ol>
<li><p>安装vue-router，命令：<code>npm i vue-router</code></p>
</li>
<li><p>应用插件：<code>Vue.use(VueRouter)</code></p>
<blockquote>
<p>在vue中多了一个router的配置项</p>
<p>可以先创建router在使用vue-router插件</p>
</blockquote>
</li>
<li><p>编写router配置项:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入VueRouter</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//引入Luyou 组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;../components/About&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Home&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建router实例对象，去管理一组一组的路由规则</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">	<span class="attr">routes</span>:[</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">			<span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">			<span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//暴露router</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入App</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//引入VueRouter</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//引入路由器</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭Vue的生产提示</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"><span class="comment">//应用插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">	<span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">	<span class="attr">router</span>:router</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>实现切换（active-class可配置高亮样式）<strong>最后默认转为了a标签</strong></p>
<p>标签router-link</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>指定展示位置router-view</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-几个注意点"><a href="#2-几个注意点" class="headerlink" title="2.几个注意点"></a>2.几个注意点</h3><ol>
<li>路由组件通常存放在<code>pages</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</li>
<li>通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。</li>
<li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息。</li>
<li>整个应用只有一个router，可以通过组件的<code>$router</code>属性获取到。</li>
</ol>
<h3 id="3-多级路由（多级路由）"><a href="#3-多级路由（多级路由）" class="headerlink" title="3.多级路由（多级路由）"></a>3.多级路由（多级路由）</h3><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/essentials/nested-routes.html#%E5%B5%8C%E5%A5%97%E7%9A%84%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1">官网文档</a></p>
<p><strong>注意，以 <code>/</code> 开头的嵌套路径将被视为根路径。这允许你利用组件嵌套，而不必使用嵌套的 URL。</strong> </p>
<ol>
<li><p>配置路由规则，使用children配置项：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,  <span class="comment">// 这里必须加 /</span></span><br><span class="line">		<span class="attr">component</span>:<span class="title class_">About</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>, <span class="comment">// 这里必须加 /</span></span><br><span class="line">		<span class="attr">component</span>:<span class="title class_">Home</span>,</span><br><span class="line">		<span class="attr">children</span>:[ <span class="comment">//通过children配置子级路由</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="attr">path</span>:<span class="string">&#x27;news&#x27;</span>, <span class="comment">//此处一定不要写：/news（及不能带/）</span></span><br><span class="line">				<span class="attr">component</span>:<span class="title class_">News</span></span><br><span class="line">			&#125;,</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="attr">path</span>:<span class="string">&#x27;message&#x27;</span>,<span class="comment">//此处一定不要写：/message</span></span><br><span class="line">				<span class="attr">component</span>:<span class="title class_">Message</span>,</span><br><span class="line">        		<span class="attr">children</span>:[]</span><br><span class="line">			&#125;</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>跳转（要写完整路径）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/home/news&quot;&gt;News&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-路由的query参数"><a href="#4-路由的query参数" class="headerlink" title="4.路由的query参数"></a>4.路由的query参数</h3><ol>
<li><p>传递参数</p>
</li>
<li><p><img src="/vue2/image-20221203161921786.png" alt="image-20221203161921786"></p>
<p><img src="/vue2/image-20221203162125795.png" alt="image-20221203162125795"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转并携带query参数，to的字符串写法route上都会有一个query --&gt;</span><br><span class="line">&lt;router-link to=&quot;/home/message/detail?id=666&amp;title=你好&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line">&lt;router-link :to=&quot;`/home/message/detail?id=$&#123;val1&#125;&amp;title=$&#123;val2&#125;`&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带query参数，to的对象写法 --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">	:to=&quot;&#123;</span><br><span class="line">		path:&#x27;/home/message/detail&#x27;,</span><br><span class="line">		query:&#123;</span><br><span class="line">		   id:666,</span><br><span class="line">       		title:&#x27;你好&#x27;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;&quot;</span><br><span class="line">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>接收参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.<span class="property">query</span>.<span class="property">id</span></span><br><span class="line">$route.<span class="property">query</span>.<span class="property">title</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-命名路由"><a href="#5-命名路由" class="headerlink" title="5.命名路由"></a>5.命名路由</h3><ol>
<li><p>作用：可以简化路由的跳转。</p>
</li>
<li><p>如何使用</p>
<ol>
<li><p>给路由命名：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">path</span>:<span class="string">&#x27;/demo&#x27;</span>,</span><br><span class="line">	<span class="attr">component</span>:<span class="title class_">Demo</span>,</span><br><span class="line">	<span class="attr">children</span>:[</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">path</span>:<span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">			<span class="attr">component</span>:<span class="title class_">Test</span>,</span><br><span class="line">			<span class="attr">children</span>:[</span><br><span class="line">				&#123;</span><br><span class="line">          <span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span> <span class="comment">//给路由命名</span></span><br><span class="line">					<span class="attr">path</span>:<span class="string">&#x27;welcome&#x27;</span>,</span><br><span class="line">					<span class="attr">component</span>:<span class="title class_">Hello</span>,</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>简化跳转：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--简化前，需要写完整的路径 --&gt;</span><br><span class="line">&lt;router-link to=&quot;/demo/test/welcome&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--简化后，直接通过名字跳转 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;hello&#x27;&#125;&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--简化写法配合传递参数 --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">	:to=&quot;&#123;</span><br><span class="line">		name:&#x27;hello&#x27;,</span><br><span class="line">		query:&#123;</span><br><span class="line">		   id:666,</span><br><span class="line">            title:&#x27;你好&#x27;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;&quot;</span><br><span class="line">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h3 id="6-路由的params参数"><a href="#6-路由的params参数" class="headerlink" title="6.路由的params参数"></a>6.路由的params参数</h3><ol>
<li><p>配置路由，声明接收params参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">	<span class="attr">component</span>:<span class="title class_">Home</span>,</span><br><span class="line">	<span class="attr">children</span>:[</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">path</span>:<span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">			<span class="attr">component</span>:<span class="title class_">News</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">component</span>:<span class="title class_">Message</span>,</span><br><span class="line">			<span class="attr">children</span>:[</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">					<span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title&#x27;</span>, <span class="comment">//使用占位符声明接收params参数</span></span><br><span class="line">					<span class="attr">component</span>:<span class="title class_">Detail</span></span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>传递参数</p>
<blockquote>
<p><strong>注意对象写法时不能使用path只能使用name</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转并携带params参数，to的字符串写法 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;/home/message/detail/666/你好&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line">				</span><br><span class="line">&lt;!-- 跳转并携带params参数，to的对象写法 --&gt;</span><br><span class="line">&lt;!-- 对象写法时不能使用path只能使用name --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">	:to=&quot;&#123;</span><br><span class="line">		name:&#x27;xiangqing&#x27;,</span><br><span class="line">		params:&#123;</span><br><span class="line">		   id:666,</span><br><span class="line">            title:&#x27;你好&#x27;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;&quot;</span><br><span class="line">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！</p>
</blockquote>
</li>
<li><p>接收参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.<span class="property">params</span>.<span class="property">id</span></span><br><span class="line">$route.<span class="property">params</span>.<span class="property">title</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-路由的props配置"><a href="#7-路由的props配置" class="headerlink" title="7.路由的props配置"></a>7.路由的props配置</h3><p>​	作用：让路由组件更方便的收到参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">	<span class="attr">path</span>:<span class="string">&#x27;detail/:id&#x27;</span>,</span><br><span class="line">	<span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件</span></span><br><span class="line">	<span class="comment">// props:&#123;a:900&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件，无法接收query参数</span></span><br><span class="line">	<span class="comment">// props:true</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件</span></span><br><span class="line">	<span class="title function_">props</span>(<span class="params">route</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="attr">id</span>:route.<span class="property">query</span>.<span class="property">id</span>,</span><br><span class="line">			<span class="attr">title</span>:route.<span class="property">query</span>.<span class="property">title</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/vue2/image-20221203165240867.png" alt="image-20221203165240867"></p>
<h3 id="8-lt-router-link-gt-的replace属性"><a href="#8-lt-router-link-gt-的replace属性" class="headerlink" title="8.&lt;router-link&gt;的replace属性"></a>8.<code>&lt;router-link&gt;</code>的replace属性</h3><ol>
<li>作用：控制路由跳转时操作浏览器历史记录的模式</li>
<li>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>，<code>push</code>是追加历史记录，<code>replace</code>是替换当前记录。路由跳转时候默认为<code>push</code></li>
<li>如何开启<code>replace</code>模式：<code>&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li>
<li></li>
</ol>
<h3 id="9-编程式路由导航"><a href="#9-编程式路由导航" class="headerlink" title="9.编程式路由导航"></a>9.编程式路由导航</h3><ol>
<li><p>作用：不借助<code>&lt;router-link&gt; </code>实现路由跳转，让路由跳转更加灵活</p>
</li>
<li><p>具体编码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$router的两个API</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">		<span class="attr">params</span>:&#123;</span><br><span class="line">			<span class="attr">id</span>:xxx,</span><br><span class="line">			<span class="attr">title</span>:xxx</span><br><span class="line">		&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(&#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">		<span class="attr">params</span>:&#123;</span><br><span class="line">			<span class="attr">id</span>:xxx,</span><br><span class="line">			<span class="attr">title</span>:xxx</span><br><span class="line">		&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">forward</span>() <span class="comment">//前进</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">back</span>() <span class="comment">//后退</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>() <span class="comment">//可前进也可后退</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>该方法的参数可以是一个字符串路径，或者一个描述地址的对象。例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 字符串</span><br><span class="line">this.$router.push(&#x27;home&#x27;)</span><br><span class="line"></span><br><span class="line">// 对象</span><br><span class="line">this.$router.push(&#123; path: &#x27;home&#x27; &#125;)</span><br><span class="line"></span><br><span class="line">// 命名的路由</span><br><span class="line">this.$router.push(&#123; name: &#x27;user&#x27;, params: &#123; userId: 123 &#125;&#125;)</span><br><span class="line"></span><br><span class="line">// 带查询参数，变成 /register?plan=private</span><br><span class="line">this.$router.push(&#123; path: &#x27;register&#x27;, query: &#123; plan: &#x27;private&#x27; &#125;&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="10-缓存路由组件"><a href="#10-缓存路由组件" class="headerlink" title="10.缓存路由组件"></a>10.缓存路由组件</h3><ol>
<li><p>作用：让不展示的路由组件保持挂载，不被销毁。</p>
</li>
<li><p>具体编码：</p>
<p>直接写keep-alive不写include&#x3D;”News”时将会缓存所有在这里展示的组件</p>
<p>写的是组件名即组件配置项的name值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include=&quot;News&quot;&gt; </span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;keep-alive :include=&quot;[&#x27;News&#x27;,&#x27;Message&#x27;]&quot;&gt; </span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="11-两个新的生命周期钩子"><a href="#11-两个新的生命周期钩子" class="headerlink" title="11.两个新的生命周期钩子"></a>11.两个新的生命周期钩子</h3><ol>
<li>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。</li>
<li>具体名字：<ol>
<li><code>activated</code>路由组件被激活时触发。即展示时</li>
<li><code>deactivated</code>路由组件失活时触发。即切换走了</li>
</ol>
</li>
</ol>
<h3 id="12-路由守卫"><a href="#12-路由守卫" class="headerlink" title="12.路由守卫"></a>12.路由守卫</h3><ol>
<li><p>作用：对路由进行权限控制</p>
</li>
<li><p>分类：全局守卫、独享守卫、组件内守卫</p>
</li>
<li><p>全局守卫:</p>
<p>路由配置项文件中写</p>
<p>初始</p>
<p><img src="/vue2/image-20221203235521084.png" alt="image-20221203235521084"></p>
<p><code>全局前置守卫：初始化时执行和每次路由切换前执行</code></p>
<ul>
<li><strong><code>to</code></strong>: 即将要进入的目标 <a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/api/#routelocationnormalized">用一种标准化的方式</a></li>
<li><strong><code>from</code></strong>: 当前导航正要离开的路由 <a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/api/#routelocationnormalized">用一种标准化的方式</a></li>
</ul>
<p><img src="/vue2/image-20221203235146984.png" alt="image-20221203235146984"></p>
<p><a href="!%5Bimage-20221203235233572%5D(vue2.assets/image-20221203235233572.png)">官网说明</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局前置守卫：初始化时执行和每次路由切换前执行</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 从from到to</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeEach&#x27;</span>,to,<span class="keyword">from</span>)</span><br><span class="line">  	<span class="comment">// 附加到从父级到子级合并（非递归）的所有匹配记录的任意数据。（路由的原信息）</span></span><br><span class="line">	<span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">isAuth</span>)&#123; <span class="comment">//判断当前路由是否需要进行权限控制</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;atguigu&#x27;</span>)&#123; <span class="comment">//权限控制的具体规则</span></span><br><span class="line">			<span class="title function_">next</span>() <span class="comment">//放行</span></span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="title function_">alert</span>(<span class="string">&#x27;暂无权限查看&#x27;</span>)</span><br><span class="line">			<span class="title function_">next</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>&#125;) <span class="comment">// 切换到指定的路由</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="title function_">next</span>() <span class="comment">//放行</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 后置守卫修改网页title</span></span><br><span class="line"><span class="comment">//全局后置守卫：初始化时执行、每次路由切换后执行</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span></span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;afterEach&#x27;</span>,to,<span class="keyword">from</span>)</span><br><span class="line">	<span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">title</span>)&#123; </span><br><span class="line">		<span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span> <span class="comment">//修改网页的title</span></span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;vue_test&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>独享守卫:</p>
<p>独享守卫只有前置路由守卫<strong>没有后置路由守卫</strong></p>
<p>可以与全局后置守卫搭配使用</p>
<p><img src="/vue2/image-20221204000446761.png" alt="image-20221204000446761"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeEnter</span>(<span class="params">to,<span class="keyword">from</span>,next</span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeEnter&#x27;</span>,to,<span class="keyword">from</span>)</span><br><span class="line">	<span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">isAuth</span>)&#123; <span class="comment">//判断当前路由是否需要进行权限控制</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;atguigu&#x27;</span>)&#123;</span><br><span class="line">			<span class="title function_">next</span>()</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="title function_">alert</span>(<span class="string">&#x27;暂无权限查看&#x27;</span>)</span><br><span class="line">			<span class="comment">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="title function_">next</span>()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件内守卫：</p>
<blockquote>
<p>通过路由规则进入的组件才会触发</p>
<p>直接写的普通组件不会触发</p>
</blockquote>
<p><img src="/vue2/image-20221204001529052.png" alt="image-20221204001529052"></p>
<p>配置方法</p>
<p><img src="/vue2/image-20221204000729678.png" alt="image-20221204000729678"></p>
<blockquote>
<p>&#x2F;&#x2F;<strong>进入守卫</strong>：通过路由规则，进入该组件时被调用</p>
<p>&#x2F;&#x2F;<strong>离开守卫</strong>：通过路由规则，离开该组件时被调用</p>
<p>不可以理解为前后置路由守卫</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//进入守卫：通过路由规则，进入该组件时被调用</span></span><br><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//离开守卫：通过路由规则，离开该组件时被调用</span></span><br><span class="line">beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="13-路由器的两种工作模式"><a href="#13-路由器的两种工作模式" class="headerlink" title="13.路由器的两种工作模式"></a>13.路由器的两种工作模式</h3><ol>
<li><p>对于一个url来说，什么是hash值？—— #及其后面的内容就是hash值。</p>
</li>
<li><p>hash值不会包含在 HTTP 请求中，即：hash值不会带给服务器。</p>
</li>
<li><p>hash模式：</p>
<ol>
<li>地址中永远带着#号，不美观 。</li>
<li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法。</li>
<li>兼容性较好。</li>
</ol>
</li>
<li><p>history模式：（默认为hashx修改方法）</p>
<ol>
<li><p>地址干净，美观 。</p>
</li>
<li><p>兼容性和hash模式相比<strong>略差</strong>。</p>
</li>
<li><p>应用部署上线时需要后端人员支持，<strong>解决刷新页面服务端404的问题（刷新后url地址会发送给服务器在服务器中未配置时会出现404问题）。而hash模式不存在这个问题</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH/?p=133&spm_id_from=pageDriver&vd_source=031f631a87cca114e71194f12ec3fc3f">说明视屏</a></p>
<p>在nodejs中可以使用connect-history-api-fallback中间件解决history刷新404问题</p>
<p>使用时必须在打包文件进行挂载前挂载到后端路由上</p>
<p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/connect-history-api-fallback">文档</a></p>
<p><img src="/vue2/image-20221204004847285.png" alt="image-20221204004847285"></p>
</li>
</ol>
</li>
</ol>
<p><img src="/vue2/image-20221204002927844.png" alt="image-20221204002927844"></p>
<p>hasn分析</p>
<p><img src="/vue2/image-20221204002502022.png" alt="image-20221204002502022"></p>
<p><img src="/vue2/image-20221204002652937.png" alt="image-20221204002652937"></p>
<p><img src="/vue2/image-20221204002753123.png" alt="image-20221204002753123"></p>
<h3 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h3><p>使用<code>npm run build</code></p>
<p>简单部署</p>
<p>将打包后文件在挂载到服务器中</p>
<p><img src="/vue2/image-20221204003943754.png" alt="image-20221204003943754"></p>
<h2 id="vue中的this"><a href="#vue中的this" class="headerlink" title="vue中的this"></a>vue中的this</h2><p>注意: 如果没有特殊指向，setInterval和setTimeout的回调函数中this的指向都是window。</p>
<p>两个重要的小原则：</p>
<p>   1.所被Vue管理的函数，最好写成普通函数，这样this的指向才是vm 或 组件实例对象。</p>
<p>   2.所有不被Vue所管理的函数（定时器的回调函数、ajax的回调函数等、Promise的回调函数），最好写成箭头函数，这样this的指向才是vm 或 组件实例对象。</p>
<p>排序函数sort中的this也指向window</p>
<h2 id="Vue-uI组件库"><a href="#Vue-uI组件库" class="headerlink" title="Vue uI组件库"></a><strong>Vue uI组件库</strong></h2><h3 id="移动端UI组件库"><a href="#移动端UI组件库" class="headerlink" title="移动端UI组件库"></a>移动端UI组件库</h3><p><a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant/#/zh-CN/">Vant</a></p>
<p><a target="_blank" rel="noopener" href="https://didi.github.io/cube-ui/#/zh-CN">Cube UI</a></p>
<p><a target="_blank" rel="noopener" href="https://mint-ui.github.io/#!/zh-cn">Mint UI</a></p>
<h3 id="PC端常用UI组件库"><a href="#PC端常用UI组件库" class="headerlink" title="PC端常用UI组件库"></a>PC端常用UI组件库</h3><p><a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN">Element UI</a></p>
<p><a target="_blank" rel="noopener" href="https://www.iviewui.com/">IView UI</a></p>
<p><img src="/vue2/image-20221204222444348.png" alt="image-20221204222444348"></p>
<h1 id="TodoList案例"><a href="#TodoList案例" class="headerlink" title="TodoList案例"></a>TodoList案例</h1><p><img src="/vue2/image-20221127013125894.png" alt="image-20221127013125894"></p>
<p><code>生成id可以使用uuid包 或 迷你版nanoid</code></p>
<p><a target="_blank" rel="noopener" href="https://github.com/ai/nanoid/blob/main/README.zh-CN.md">https://github.com/ai/nanoid/blob/main/README.zh-CN.md</a></p>
<p>安装调用nanoid()函数即可</p>
<h1 id="github搜索案例"><a href="#github搜索案例" class="headerlink" title="github搜索案例"></a>github搜索案例</h1><h1 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h1><h2 id="组件间通讯传递数据"><a href="#组件间通讯传递数据" class="headerlink" title="组件间通讯传递数据"></a>组件间通讯传递数据</h2><p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Vue&spm=1001.2101.3001.7020">Vue</a> 组件之间数据传递的几种方式：</p>
<ol>
<li>父组件向子组件传递数据，使用props属性；子组件向父组件中传递数据，在子组件中使用$emit派发事件，父组件中使用v-on<br>监听事件；缺点：组件嵌套层次多的话，传递数据比较麻烦。</li>
<li>祖先组件通过依赖注入(inject &#x2F; provide)的方式，向其所有子孙后代传递数据；缺点：无法监听数据修改的来源，不支持响应式。</li>
<li>通过属性$root &#x2F; $parent &#x2F; $children &#x2F;<br>ref，访问根组件、父级组件、子组件中的数据；缺点：要求组件之间要有传递性。</li>
<li>通过事件总线(event<br>bus)的方式，可以实现任意两个组件间进行数据传递；缺点：不支持响应式，这个概念是vue1.0版本中的，现在已经废弃。</li>
<li>通过 VueJs 的状态管理模式 Vuex，实现多个组件进行数据共享，推荐使用这种方式进行项目中各组件间的数据传递。<br>下面详细介绍数据传递的几种方式：</li>
</ol>
<h2 id="1-props-x2F-emit"><a href="#1-props-x2F-emit" class="headerlink" title="1.props&#x2F;$emit"></a>1.props&#x2F;$emit</h2><p>prop 是在组件上注册的一些自定义的 attribute。就像下面的 :sub-num 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :sub-num=<span class="string">&quot;num&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="1-1-父组件向子组件中传递数据"><a href="#1-1-父组件向子组件中传递数据" class="headerlink" title="1.1 父组件向子组件中传递数据"></a>1.1 父组件向子组件中传递数据</h3><p>1、一个组件默认可以拥有任意数量的 prop，任何值都可以传递给任何 prop。<br>2、当一个值传递给一个 prop attribute 的时候，它就变成了那个组件实例的一个属性（例如下面的 subNum），通过属性名，我们就能够在组件实例中访问这个值。<br><strong>父组件向子组件中传递数据，可以在子组件中通过设置props属性来接收传递过来的数据。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	&lt;!-- 将父组件中的num，传递给子组件中的sub-num --&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">blog-count</span> <span class="attr">:sub-num</span>=<span class="string">&quot;num&quot;</span> <span class="attr">:sub-user</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-count</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   const blogCount=&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    	//子组件中通过props属性接收父组件传递过来的数据</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">       props:[&quot;subNum&quot;,&quot;subUser&quot;],</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">       template:`<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                   <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是从父组件传进来的数字：</span><span class="template-variable">&#123;&#123;<span class="name">subNum</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                   <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是从父组件传进来的对象：</span><span class="template-variable">&#123;&#123;<span class="name">subUser.name</span>&#125;&#125;</span><span class="language-xml">-</span><span class="template-variable">&#123;&#123;<span class="name">subUser.age</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">      </span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   var vm=new Vue(&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">       el:&quot;#app&quot;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">       data:&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">           num:2,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">           user:&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">               name:&quot;zhangsan&quot;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">               age:18</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">           &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">       &#125;,</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">       components:&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            blogCount</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">       &#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   &#125;)</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-子组件向父组件传递数据"><a href="#1-2-子组件向父组件传递数据" class="headerlink" title="1.2 子组件向父组件传递数据"></a>1.2 子组件向父组件传递数据</h3><p><strong>子组件向父组件传递数据，通过 $emit派发事件，父组件中通过 v-on 接收该事件，拿到传递的数据。</strong></p>
<p>语法：$emit(eventName，data)，第一个参数为事件名称，需要跟父组件中 v-on 监听的事件名称一致；第二个参数为要传递的数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &lt;!-- 通过 v-on 监听事件--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">blog-count</span> @<span class="attr">countchange</span>=<span class="string">&quot;changeHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-count</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> blogCount=&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">template</span>:<span class="string">`&lt;button @click=&quot;clickHandle&quot;&gt;点击接收子组件传递过来的数据&lt;/button&gt;`</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;<span class="attr">num</span>:<span class="number">6</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">clickHandle</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            	<span class="comment">//使用 $emit派发事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.$emit(<span class="string">&quot;countchange&quot;</span>,<span class="variable language_">this</span>.<span class="property">num</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> vm=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">num</span>:<span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">changeHandle</span>(<span class="params">data</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.<span class="property">num</span>=data;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            blogCount</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-sync-修饰符"><a href="#1-3-sync-修饰符" class="headerlink" title="1.3 .sync 修饰符"></a>1.3 .sync 修饰符</h3><p>如果使用 update:myPropName 的模式触发事件，上面的代码可以写成下面这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">blog-count</span> <span class="attr">:num</span>=<span class="string">&quot;num&quot;</span> @<span class="attr">update:countchange</span>=<span class="string">&quot;num=$event&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-count</span>&gt;</span></span></span><br><span class="line">    &lt;!--最终可以简写为--&gt;</span><br><span class="line">    &lt;!--  <span class="language-xml"><span class="tag">&lt;<span class="name">blog-count</span> <span class="attr">:countchange.sync</span>=<span class="string">&quot;num&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-count</span>&gt;</span></span>  --&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">const</span> blogCount=&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">template</span>:<span class="string">`&lt;button @click=&quot;$emit(&#x27;update:countchange&#x27;,num)&quot;&gt;点击接收子组件传递过来的数据&lt;/button&gt;`</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;<span class="attr">num</span>:<span class="number">6</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> vm=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>:&#123;<span class="attr">num</span>:<span class="number">0</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>提取出组件的代码为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-count :num=<span class="string">&quot;num&quot;</span> @<span class="attr">update</span>:countchange=<span class="string">&quot;num=$event&quot;</span>&gt;&lt;/blog-count&gt;<span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">为了方便起见，我们为这种模式提供一个缩写，即 .sync 修饰符：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line">&lt;blog-count :countchange.<span class="property">sync</span>=<span class="string">&quot;num&quot;</span>&gt;&lt;/blog-count&gt;</span><br></pre></td></tr></table></figure>

<p>子组件向父组件传递数据，也可以通过使用 .sync 修饰符来完成。</p>
<h2 id="2-依赖注入-provide-inject"><a href="#2-依赖注入-provide-inject" class="headerlink" title="2. 依赖注入 provide inject"></a>2. 依赖注入 provide inject</h2><ol>
<li>这对选项是2.2.0版本新增的。需要一起使用，它允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立的时间里始终生效。</li>
<li>主要解决了跨级组件间的通信问题。</li>
<li>在祖先组件中增加属性 provide，它的属性值是一个对象或返回一个对象的函数。该对象包含了给子组件要传递的数据。</li>
<li>在子组件中增加属性 inject ，用来接收数据，它的选项是一个字符串数组，或一个对象。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">blog-count</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-count</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> blogCount=&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    	<span class="comment">//子组件中使用inject属性来接收数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">inject</span>:[<span class="string">&quot;num&quot;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">template</span>:<span class="string">`&lt;div&gt;&#123;&#123;num&#125;&#125;&lt;/div&gt;`</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> vm=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">num</span>:<span class="number">10</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//父组件中使用provide属性存放要传递的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">provide</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">num</span>:<span class="variable language_">this</span>.<span class="property">num</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            blogCount</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>依赖注入 provide inject，这种方式的缺点：</strong></p>
<ol>
<li>祖先组件不需要知道哪些后代组件使用它提供的属性。</li>
<li>后代组件不需要知道被注入的属性来自哪里。</li>
<li>会将应用程序中的组件与它们当前的组织方式耦合起来，使重构变得更加困难。</li>
<li><strong>所提供的属性是非响应式的。</strong></li>
</ol>
<h2 id="3-root-x2F-parent-x2F-children-x2F-ref"><a href="#3-root-x2F-parent-x2F-children-x2F-ref" class="headerlink" title="3. $root &#x2F; $parent &#x2F; $children &#x2F; ref"></a>3. $root &#x2F; $parent &#x2F; $children &#x2F; ref</h2><ol>
<li>通过 $root 属性访问根实例 new Vue()。</li>
<li>通过$parent 属性访问父组件的实例。</li>
<li>通过$children 属性访问当前实例的直接子组件。需要注意 $children 并不保证顺序，也不是响应式的。</li>
<li>通过 r e f s 属 性 访 问 子 组 件 中 的 数 据 ， 子 组 件 标 签 上 加 r e f 的 属 性 。 例 如 在 子 组 件 的 d o m 元 素 上 增 加 属 性 r e f &#x3D; “ a b c “ ， 就 可 以 使 用 t h i s . refs 属性访问子组件中的数据，子组件标签上加 ref 的属性。例如在子组件的dom元素上增加属性 ref &#x3D; “abc”，就可以使用this.refs属性访问子组件中的数据，子组件标签上加ref的属性。例如在子组件的dom元素上增加属性ref&#x3D;”abc”，就可以使用this.refs.abc 拿到这个子组件的实例。</li>
<li>ref，如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例。</li>
<li>$refs 只会在组件渲染完成之后生效，并且它们不是响应式的。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">blog-count</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-count</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> blogItem=&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">template</span>:<span class="string">`&lt;div&gt;&#123;&#123;$root.num&#125;&#125;-&#123;&#123;$parent.num&#125;&#125;&lt;/div&gt;`</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">num</span>:<span class="number">3</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        	<span class="comment">//访问根实例中的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Vue.num:&quot;</span>+<span class="variable language_">this</span>.<span class="property">$root</span>.<span class="property">num</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//访问父级组件中的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;blogCount.num:&quot;</span>+<span class="variable language_">this</span>.<span class="property">$parent</span>.<span class="property">num</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//调用父级组件中的方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$parent</span>.<span class="title function_">start</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> blogCount=&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">template</span>:<span class="string">`&lt;div&gt;&lt;blogItem ref=&quot;refItem&quot;&gt;&lt;/blogItem&gt;&lt;/div&gt;`</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;<span class="attr">num</span>:<span class="number">6</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            blogItem</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">start</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;blogCount start...&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$children</span>[<span class="number">0</span>].<span class="property">num</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        	<span class="comment">//访问子组件的实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">refItem</span>.<span class="property">num</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> vm=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">num</span>:<span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            blogCount</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="4-event-bus-事件总线"><a href="#4-event-bus-事件总线" class="headerlink" title="4. event bus 事件总线"></a>4. event bus 事件总线</h2><p>事件的触发器，vue 1.0版本使用比较多，现在已经不用。</p>
<p>这种方法可以看作是通过一个空的实例 new Vue()作为事件总线（事件中心），用它来派发和监听事件，可以实现任何组件间的通信，包括父子、兄弟、跨级。缺点：这种传递数据的方式不是响应式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">blog-count</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-count</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;clickHandle&quot;</span>&gt;</span>send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="comment">//创建一个空的vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> eventbus=<span class="keyword">new</span> <span class="title class_">Vue</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="comment">//子组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> blogCount=&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;<span class="attr">num</span>:<span class="number">1</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">template</span>:<span class="string">`&lt;div&gt;&#123;&#123;num&#125;&#125;&lt;/div&gt;`</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        	<span class="comment">//监听事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            eventbus.$on(<span class="string">&quot;message&quot;</span>,<span class="function">(<span class="params">msg</span>)=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.<span class="property">num</span>=msg;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> vm=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">num</span>:<span class="number">10</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            blogCount</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">clickHandle</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            	<span class="comment">//派发事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                eventbus.$emit(<span class="string">&#x27;message&#x27;</span>,<span class="variable language_">this</span>.<span class="property">num</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="5-vuex"><a href="#5-vuex" class="headerlink" title="5. vuex"></a>5. vuex</h2><p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它的状态存储是响应式的。采用集中式存储管理应用的所有组件的状态，也就是说，对数据的所有操作都要在vuex中进行。</p>
<h3 id="5-1-vuex-原理"><a href="#5-1-vuex-原理" class="headerlink" title="5.1 vuex 原理"></a>5.1 vuex 原理</h3><p>vuex 实现了一个单向数据流，在全局拥有一个 State 用来存放数据，当组件用同步的方式更改 State 中的数据时，必须通过 Mutation 进行。当使用异步方式（例如 ajax请求）修改数据，必须先经过 Actions ，再由 Actions 经过 Mutation来操作。</p>
<p><img src="/vue2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NpUWlhbmdsb3Zl,size_16,color_FFFFFF,t_70#pic_center.png" alt="在这里插入图片描述"></p>
<h3 id="5-2-store"><a href="#5-2-store" class="headerlink" title="5.2 store"></a>5.2 store</h3><p>每一个 Vuex 应用的核心就是 store（仓库）。“store”基本上就是一个容器，它包含着你的应用中大部分的状态 (state)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	<span class="attr">state</span>: &#123;</span><br><span class="line">		<span class="comment">//相当于自定义组件中的data</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">getters</span>:&#123;</span><br><span class="line">		<span class="comment">//相当于自定义组件中的computed</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">mutations</span>: &#123;</span><br><span class="line">		<span class="comment">//相当于自定义组件中的methods，只能做同步的操作</span></span><br><span class="line">		<span class="comment">//对state中的数据进行修改</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">actions</span>: &#123;</span><br><span class="line">		<span class="comment">//异步操作，例如ajax请求</span></span><br><span class="line">		<span class="comment">//使用commit 触发 mutations</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-3-vuex的核心概念"><a href="#5-3-vuex的核心概念" class="headerlink" title="5.3 vuex的核心概念"></a>5.3 vuex的核心概念</h3><p><strong>5.3.1 State</strong></p>
<ol>
<li>State相当于自定义组件中的data，用来存放数据，页面中所有的数据都是从该对象中进行读取。</li>
<li>在组件中使用 store.state &#x2F; this.$store.state 来读取vuex中的数据。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建 vuex 实例</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	<span class="attr">state</span>: &#123;</span><br><span class="line">		<span class="attr">count</span>:<span class="number">3</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建 vue 实例</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">	store,</span><br><span class="line">	<span class="attr">components</span>: &#123; <span class="title class_">Counter</span> &#125;,</span><br><span class="line">	<span class="attr">template</span>: <span class="string">`&lt;div class=&quot;app&quot;&gt;&lt;counter&gt;&lt;/counter&gt;&lt;/div&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//自定义组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Counter</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`&lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt;`</span>,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    count () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">count</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-3-2-getter"><a href="#5-3-2-getter" class="headerlink" title="5.3.2 getter"></a>5.3.2 getter</h3><ol>
<li>getter 相当于自定义组件中的computed，getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。</li>
<li>Getter 接受 state 作为其第一个参数，也可以接受其他 getter 作为第二个参数。</li>
<li>可以使用 store.getters &#x2F; this.$store.getters 访问这些值。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	<span class="attr">state</span>: &#123;</span><br><span class="line">		<span class="attr">sourceList</span>:[],</span><br><span class="line">        <span class="attr">pageNo</span>:<span class="number">1</span>,</span><br><span class="line">        <span class="attr">pageSize</span>:<span class="number">5</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">getters</span>: &#123;</span><br><span class="line">		<span class="attr">dataList</span>:<span class="function">(<span class="params">state</span>)=&gt;</span>&#123;</span><br><span class="line">           <span class="comment">//计算分页后的数据</span></span><br><span class="line">            <span class="keyword">let</span> start=(state.<span class="property">pageNo</span>-<span class="number">1</span>)*state.<span class="property">pageSize</span>;</span><br><span class="line">            <span class="keyword">let</span> end=start+state.<span class="property">pageSize</span>;</span><br><span class="line">            <span class="keyword">let</span> result=state.<span class="property">sourceList</span>.<span class="title function_">slice</span>(start,end);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pages</span>:<span class="function">(<span class="params">state,getters</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">//计算页码的范围</span></span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">ceil</span>(getters.<span class="property">dataList</span>.<span class="property">length</span>/state.<span class="property">pageSize</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-3-3-Mutation"><a href="#5-3-3-Mutation" class="headerlink" title="5.3.3 Mutation"></a>5.3.3 Mutation</h3><ol>
<li>mutation 相当于自定义组件中的methods。</li>
<li>mutation是更改 Vuex 的 State 中数据的唯一方法。</li>
<li>通过 store.commit(type,data)调用 mutation，第一个参数为事件类型，需要和mutation中函数名称一致；第二个参数为要传递的参数。</li>
<li>mutation中的函数接受 state 作为其第一个参数。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	<span class="attr">state</span>: &#123;</span><br><span class="line">	  <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">mutations</span>: &#123;</span><br><span class="line">	  increment (state) &#123;</span><br><span class="line">	    <span class="comment">// 变更状态</span></span><br><span class="line">	    state.<span class="property">count</span>++</span><br><span class="line">	  &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>()&#123;</span><br><span class="line">	<span class="attr">methods</span>:&#123;</span><br><span class="line">		<span class="title function_">change</span>(<span class="params"></span>)&#123;</span><br><span class="line">			store.<span class="title function_">commit</span>(<span class="string">&quot;increment&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-3-4-Action"><a href="#5-3-4-Action" class="headerlink" title="5.3.4 Action"></a>5.3.4 Action</h3><ol>
<li>action 主要用来操作所有的异步请求。</li>
<li>action 不能直接对State 中的数据进行操作，只能通过commit(type,data) 方法调用 mutation。</li>
<li>action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此你可以调用 context.commit 提交一个 mutation，或者通过 context.state 和 context.getters 来获取 state 和 getters。</li>
<li>通过 store.dispatch(type)方法触发action，参数为事件类型，需要和action中函数名称一致。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	<span class="attr">state</span>: &#123;</span><br><span class="line">		<span class="attr">dataList</span>:[]</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">mutations</span>: &#123;</span><br><span class="line">		<span class="title function_">render</span>(<span class="params">state,data</span>)&#123;</span><br><span class="line">			state.<span class="property">dataList</span>=data;</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">actions</span>: &#123;</span><br><span class="line">		<span class="title function_">getData</span>(<span class="params">&#123;commit&#125;</span>)&#123;</span><br><span class="line">			<span class="title function_">fetch</span>(<span class="string">&quot;./data.json&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>res.<span class="title function_">json</span>()).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">				  <span class="title function_">commit</span>(<span class="string">&quot;render&quot;</span>,res.<span class="property">data</span>);</span><br><span class="line">			&#125;)</span><br><span class="line">**加粗样式**		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>()&#123;</span><br><span class="line">	<span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line">		store.<span class="title function_">dispatch</span>(<span class="string">&quot;getData&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p><strong>父组件和子组件间通信：</strong></p>
<ol>
<li>父向子传递数据是通过props，子向父传递数据是通过event($emit)；</li>
<li>通过父链&#x2F;子链进行数据传递($parent &#x2F; $children)；</li>
<li>通过 ref 也可以访问组件实例；</li>
<li>依赖注入：provide &#x2F; inject；<br><strong>兄弟组件间通信：</strong></li>
<li>event bus</li>
<li>Vuex<br><strong>跨级组件间通信：</strong></li>
<li>event bus；</li>
<li>Vuex；</li>
<li>依赖注入：provide &#x2F; inject；</li>
</ol>
<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><p><img src="/vue2/image-20221127005419115.png" alt="image-20221127005419115"></p>
<p><img src="/vue2/image-20221127005437233.png" alt="image-20221127005437233"></p>
<p><img src="/vue2/image-20221127005018372.png" alt="image-20221127005018372"></p>
<p><img src="/vue2/image-20221127005345634.png" alt="image-20221127005345634"></p>
<h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1><p><a href="./vue3.md#vue3" target="_top">vue3</a></p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/vue2/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018-2023 <a href="https://clear-liquid.github.io.git/" target="_blank">沐澈</a>
    	</div>
      	<div class="footer-right">
			
			
      		GitHub:<a href="https://github.com/JoeyBling/hexo-theme-yilia-plus" target="_blank">hexo-theme-yilia-plus</a> by Litten
      	</div>
    </div>
  </div>
  
  
	<script src="/lib/busuanzi.pure.js"></script>
	
  
  
	
	<span id="busuanzi_container_site_pv" style="display:none">
		本站总访问量<span id="busuanzi_value_site_pv"></span>次	
	        <span class="post-meta-divider" >|</span>
	</span>
  	<span id="busuanzi_container_site_uv" style='display:none'>
  		本站访客数<span id="busuanzi_value_site_uv"></span>人
  	</span>
  
</footer>

    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: true
	}
</script>

<script>!function(r){function e(t){if(i[t])return i[t].exports;var n=i[t]={exports:{},id:t,loaded:!1};return r[t].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};e.m=r,e.c=i,e.p="./",e(0)}([function(t,n,r){r(208),t.exports=r(205)},function(t,n,r){var d=r(3),y=r(46),g=r(26),b=r(27),x=r(47),m="prototype",S=function(t,n,r){var e,i,o,u,c=t&S.F,f=t&S.G,a=t&S.S,s=t&S.P,l=t&S.B,h=f?d:a?d[n]||(d[n]={}):(d[n]||{})[m],v=f?y:y[n]||(y[n]={}),p=v[m]||(v[m]={});for(e in f&&(r=n),r)o=((i=!c&&h&&void 0!==h[e])?h:r)[e],u=l&&i?x(o,d):s&&"function"==typeof o?x(Function.call,o):o,h&&b(h,e,o,t&S.U),v[e]!=o&&g(v,e,u),s&&p[e]!=o&&(p[e]=o)};d.core=y,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(5);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n,r){var e=r(118)("wks"),i=r(79),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(49),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(174),o=r(53),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(24);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(22),i=r(60),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(96),i=r(34);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(40)("wks"),i=r(25),o=r(6).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(51);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(18);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=!0},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(11),i=r(75);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var o=r(3),u=r(26),c=r(30),f=r(79)("src"),e=r(219),i="toString",a=(""+e).split(i);r(46).inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,r,e){var i="function"==typeof r;i&&(c(r,"name")||u(r,"name",n)),t[n]!==r&&(i&&(c(r,f)||u(r,f,t[n]?""+t[n]:a.join(String(n)))),t===o?t[n]=r:e?t[n]?t[n]=r:u(t,n,r):(delete t[n],u(t,n,r)))})(Function.prototype,i,function(){return"function"==typeof this&&this[f]||e.call(this)})},function(t,n,r){var e=r(1),i=r(4),u=r(51),c=/"/g,o=function(t,n,r,e){var i=String(u(t)),o="<"+n;return""!==r&&(o+=" "+r+'="'+String(e).replace(c,"&quot;")+'"'),o+">"+i+"</"+n+">"};t.exports=function(n,t){var r={};r[n]=t(o),e(e.P+e.F*i(function(){var t=""[n]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",r)}},function(t,n,r){var e=r(65),i=r(35);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(117),i=r(75),o=r(33),u=r(53),c=r(30),f=r(174),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(30),i=r(17),o=r(154)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(116),i=r(51);t.exports=function(t){return e(i(t))}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(9),o=r(16)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(25);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(19),i=r(6),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(23)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var i=r(18);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(6),i=r(19),o=r(23),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(16)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n,r){var o=r(21);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){"use strict";var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var x=r(47),m=r(116),S=r(17),w=r(8),e=r(138);t.exports=function(l,t){var h=1==l,v=2==l,p=3==l,d=4==l,y=6==l,g=5==l||y,b=t||e;return function(t,n,r){for(var e,i,o=S(t),u=m(o),c=x(n,r,3),f=w(u.length),a=0,s=h?b(t,f):v?b(t,0):void 0;a<f;a++)if((g||a in u)&&(i=c(e=u[a],a,o),l))if(h)s[a]=i;else if(i)switch(l){case 3:return!0;case 5:return e;case 6:return a;case 2:s.push(e)}else if(d)return!1;return y?-1:p||d?d:s}}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var i=r(1),o=r(46),u=r(4);t.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],e={};e[t]=n(r),i(i.S+i.F*u(function(){r(1)}),"Object",e)}},function(t,n,r){var i=r(5);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var d=r(6),y=r(19),g=r(93),b=r(13),x=r(9),m="prototype",S=function(t,n,r){var e,i,o,u=t&S.F,c=t&S.G,f=t&S.S,a=t&S.P,s=t&S.B,l=t&S.W,h=c?y:y[n]||(y[n]={}),v=h[m],p=c?d:f?d[n]:(d[n]||{})[m];for(e in c&&(r=n),r)(i=!u&&p&&void 0!==p[e])&&x(h,e)||(o=i?p[e]:r[e],h[e]=c&&"function"!=typeof p[e]?r[e]:s&&i?g(o,d):l&&p[e]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[m]=e[m],t}(o):a&&"function"==typeof o?g(Function.call,o):o,a&&((h.virtual||(h.virtual={}))[e]=o,t&S.R&&v&&!v[e]&&b(v,e,o)))};S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(34);t.exports=function(t){return Object(e(t))}},function(t,n,r){var o=r(196),e=r(1),i=r(118)("metadata"),u=i.store||(i.store=new(r(200))),c=function(t,n,r){var e=u.get(t);if(!e){if(!r)return;u.set(t,e=new o)}var i=e.get(n);if(!i){if(!r)return;e.set(n,i=new o)}return i};t.exports={store:u,map:c,has:function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},get:function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},set:function(t,n,r,e){c(r,e,!0).set(t,n)},keys:function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){e(e.S,"Reflect",t)}}},function(t,n,r){"use strict";if(r(10)){var g=r(68),b=r(3),x=r(4),m=r(1),S=r(132),e=r(159),h=r(47),w=r(70),i=r(75),_=r(26),o=r(76),u=r(49),O=r(8),E=r(194),c=r(78),f=r(53),a=r(30),M=r(81),P=r(5),v=r(17),p=r(145),j=r(72),F=r(32),A=r(73).f,d=r(161),s=r(79),l=r(7),y=r(50),I=r(120),L=r(119),N=r(162),T=r(82),k=r(125),R=r(77),C=r(137),D=r(166),G=r(11),W=r(31),U=G.f,V=W.f,B=b.RangeError,q=b.TypeError,z=b.Uint8Array,K="ArrayBuffer",H="Shared"+K,J="BYTES_PER_ELEMENT",$="prototype",Y=Array[$],X=e.ArrayBuffer,Q=e.DataView,Z=y(0),tt=y(2),nt=y(3),rt=y(4),et=y(5),it=y(6),ot=I(!0),ut=I(!1),ct=N.values,ft=N.keys,at=N.entries,st=Y.lastIndexOf,lt=Y.reduce,ht=Y.reduceRight,vt=Y.join,pt=Y.sort,dt=Y.slice,yt=Y.toString,gt=Y.toLocaleString,bt=l("iterator"),xt=l("toStringTag"),mt=s("typed_constructor"),St=s("def_constructor"),wt=S.CONSTR,_t=S.TYPED,Ot=S.VIEW,Et="Wrong length!",Mt=y(1,function(t,n){return It(L(t,t[St]),n)}),Pt=x(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),jt=!!z&&!!z[$].set&&x(function(){new z(1).set({})}),Ft=function(t,n){var r=u(t);if(r<0||r%n)throw B("Wrong offset!");return r},At=function(t){if(P(t)&&_t in t)return t;throw q(t+" is not a typed array!")},It=function(t,n){if(!(P(t)&&mt in t))throw q("It is not a typed array constructor!");return new t(n)},Lt=function(t,n){return Nt(L(t,t[St]),n)},Nt=function(t,n){for(var r=0,e=n.length,i=It(t,e);r<e;)i[r]=n[r++];return i},Tt=function(t,n,r){U(t,n,{get:function(){return this._d[r]}})},kt=function(t){var n,r,e,i,o,u,c=v(t),f=arguments.length,a=1<f?arguments[1]:void 0,s=void 0!==a,l=d(c);if(null!=l&&!p(l)){for(u=l.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(s&&2<f&&(a=h(a,arguments[2],2)),n=0,r=O(c.length),i=It(this,r);n<r;n++)i[n]=s?a(c[n],n):c[n];return i},Rt=function(){for(var t=0,n=arguments.length,r=It(this,n);t<n;)r[t]=arguments[t++];return r},Ct=!!z&&x(function(){gt.call(new z(1))}),Dt=function(){return gt.apply(Ct?dt.call(At(this)):At(this),arguments)},Gt={copyWithin:function(t,n){return D.call(At(this),t,n,2<arguments.length?arguments[2]:void 0)},every:function(t){return rt(At(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return C.apply(At(this),arguments)},filter:function(t){return Lt(this,tt(At(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return et(At(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(At(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(At(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return ut(At(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(At(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return vt.apply(At(this),arguments)},lastIndexOf:function(t){return st.apply(At(this),arguments)},map:function(t){return Mt(At(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return lt.apply(At(this),arguments)},reduceRight:function(t){return ht.apply(At(this),arguments)},reverse:function(){for(var t,n=this,r=At(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(At(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return pt.call(At(this),t)},subarray:function(t,n){var r=At(this),e=r.length,i=c(t,e);return new(L(r,r[St]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,O((void 0===n?e:c(n,e))-i))}},Wt=function(t,n){return Lt(this,dt.call(At(this),t,n))},Ut=function(t){At(this);var n=Ft(arguments[1],1),r=this.length,e=v(t),i=O(e.length),o=0;if(r<i+n)throw B(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(At(this))},keys:function(){return ft.call(At(this))},values:function(){return ct.call(At(this))}},Bt=function(t,n){return P(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return Bt(t,n=f(n,!0))?i(2,t[n]):V(t,n)},zt=function(t,n,r){return!(Bt(t,n=f(n,!0))&&P(r)&&a(r,"value"))||a(r,"get")||a(r,"set")||r.configurable||a(r,"writable")&&!r.writable||a(r,"enumerable")&&!r.enumerable?U(t,n,r):(t[n]=r.value,t)};wt||(W.f=qt,G.f=zt),m(m.S+m.F*!wt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:zt}),x(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Kt=o({},Gt);o(Kt,Vt),_(Kt,bt,Vt.values),o(Kt,{slice:Wt,set:Ut,constructor:function(){},toString:yt,toLocaleString:Dt}),Tt(Kt,"buffer","b"),Tt(Kt,"byteOffset","o"),Tt(Kt,"byteLength","l"),Tt(Kt,"length","e"),U(Kt,xt,{get:function(){return this[_t]}}),t.exports=function(t,l,n,o){var h=t+((o=!!o)?"Clamped":"")+"Array",r="get"+t,u="set"+t,v=b[h],c=v||{},e=v&&F(v),i=!v||!S.ABV,f={},a=v&&v[$],p=function(t,i){U(t,i,{get:function(){return t=i,(n=this._d).v[r](t*l+n.o,Pt);var t,n},set:function(t){return n=i,r=t,e=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void e.v[u](n*l+e.o,r,Pt);var n,r,e},enumerable:!0})};i?(v=n(function(t,n,r,e){w(t,v,h,"_d");var i,o,u,c,f=0,a=0;if(P(n)){if(!(n instanceof X||(c=M(n))==K||c==H))return _t in n?Nt(v,n):kt.call(v,n);i=n,a=Ft(r,l);var s=n.byteLength;if(void 0===e){if(s%l)throw B(Et);if((o=s-a)<0)throw B(Et)}else if(s<(o=O(e)*l)+a)throw B(Et);u=o/l}else u=E(n),i=new X(o=u*l);for(_(t,"_d",{b:i,o:a,l:o,e:u,v:new Q(i)});f<u;)p(t,f++)}),a=v[$]=j(Kt),_(a,"constructor",v)):x(function(){v(1)})&&x(function(){new v(-1)})&&k(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=n(function(t,n,r,e){var i;return w(t,v,h),P(n)?n instanceof X||(i=M(n))==K||i==H?void 0!==e?new c(n,Ft(r,l),e):void 0!==r?new c(n,Ft(r,l)):new c(n):_t in n?Nt(v,n):kt.call(v,n):new c(E(n))}),Z(e!==Function.prototype?A(c).concat(A(e)):A(c),function(t){t in v||_(v,t,c[t])}),v[$]=a,g||(a.constructor=v));var s=a[bt],d=!!s&&("values"==s.name||null==s.name),y=Vt.values;_(v,mt,!0),_(a,_t,h),_(a,Ot,!0),_(a,St,v),(o?new v(1)[xt]==h:xt in a)||U(a,xt,{get:function(){return h}}),f[h]=v,m(m.G+m.W+m.F*(v!=c),f),m(m.S,h,{BYTES_PER_ELEMENT:l}),m(m.S+m.F*x(function(){c.of.call(v,1)}),h,{from:kt,of:Rt}),J in a||_(a,J,l),m(m.P,h,Gt),R(h),m(m.P+m.F*jt,h,{set:Ut}),m(m.P+m.F*!d,h,Vt),g||a.toString==yt||(a.toString=yt),m(m.P+m.F*x(function(){new v(1).slice()}),h,{slice:Wt}),m(m.P+m.F*(x(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!x(function(){a.toLocaleString.call([1,2])})),h,{toLocaleString:Dt}),T[h]=d?s:y,g||d||_(a,bt,y)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(18),i=r(6).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(20)(function(){return 7!=Object.defineProperty(r(59)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var x=r(23),m=r(54),S=r(66),w=r(13),_=r(36),O=r(98),E=r(38),M=r(104),P=r(16)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n,e){var i=e(22),o=e(101),u=e(35),c=e(39)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(59)("iframe"),r=u.length;for(n.style.display="none",e(95).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(65),i=r(35).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var u=r(9),c=r(15),f=r(92)(!1),a=r(39)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;null==i[e]&&r(26)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n){t.exports=!1},function(t,n,r){var e=r(79)("meta"),i=r(5),o=r(30),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n,r){var h=r(47),v=r(177),p=r(145),d=r(2),y=r(8),g=r(161),b={},x={};(n=t.exports=function(t,n,r,e,i){var o,u,c,f,a=i?function(){return t}:g(t),s=h(r,e,n?2:1),l=0;if("function"!=typeof a)throw TypeError(t+" is not iterable!");if(p(a)){for(o=y(t.length);l<o;l++)if((f=n?s(d(u=t[l])[0],u[1]):s(t[l]))===b||f===x)return f}else for(c=a.call(t);!(u=c.next()).done;)if((f=v(c,s,u.value,n))===b||f===x)return f}).BREAK=b,n.RETURN=x},function(t,n,e){var i=e(2),o=e(183),u=e(141),c=e(154)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(140)("iframe"),r=u.length;for(n.style.display="none",e(143).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(185),i=r(141).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(185),i=r(141);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var i=r(27);t.exports=function(t,n,r){for(var e in n)i(t,e,n[e],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(49),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(5);t.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,r){var i=r(45),o=r(7)("toStringTag"),u="Arguments"==i(function(){return arguments}());t.exports=function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:u?i(n):"Object"==(e=i(n))&&"function"==typeof n.callee?"Arguments":e}},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(30),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var u=r(1),e=r(51),c=r(4),f=r(157),i="["+f+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t,n,r){var e={},i=c(function(){return!!f[t]()||"​"!="​"[t]()}),o=e[t]=i?n(l):f[t];r&&(e[r]=o),u(u.P+u.F*i,"String",e)},l=s.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(o,"")),2&n&&(t=t.replace(a,"")),t};t.exports=s},function(t,n,r){t.exports={default:r(88),__esModule:!0}},function(t,n,r){t.exports={default:r(89),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=e(r(86)),o=e(r(85)),u="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};n.default="function"==typeof o.default&&"symbol"===u(i.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,n,r){r(111),r(109),r(112),r(113),t.exports=r(19).Symbol},function(t,n,r){r(110),r(114),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var f=r(15),a=r(107),s=r(106);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){var o=r(90);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){var c=r(29),f=r(64),a=r(37);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){var e=r(6).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(58);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(58);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(62),i=r(24),o=r(38),u={};r(13)(u,r(16)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(25)("meta"),i=r(18),o=r(9),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(20)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n,r){var u=r(14),c=r(22),f=r(29);t.exports=r(12)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(24),o=r(15),u=r(42),c=r(9),f=r(60),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(15),i=r(63).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var e=r(9),i=r(55),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var f=r(41),a=r(34);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(91),i=r(99),o=r(36),u=r(15);t.exports=r(61)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(105)(!0);r(61)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(6),u=r(9),i=r(12),o=r(54),c=r(66),f=r(100).KEY,a=r(20),s=r(40),l=r(38),h=r(25),v=r(16),p=r(44),d=r(43),y=r(94),g=r(97),b=r(22),x=r(18),m=r(55),S=r(15),w=r(42),_=r(24),O=r(62),E=r(103),M=r(102),P=r(64),j=r(14),F=r(29),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,K=!z||!z[R]||!z[R].findChild,H=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),H(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),H(this,n,_(1,t))};return i&&K&&H(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(63).f=E.f=tt,r(37).f=Q,P.f=nt,i&&!r(23)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(13)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(108);for(var e=r(6),i=r(13),o=r(36),u=r(16)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),f=0;f<c.length;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(46),i=r(3),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(68)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n,r){var i=r(2),o=r(21),u=r(7)("species");t.exports=function(t,n){var r,e=i(t).constructor;return void 0===e||null==(r=i(e)[u])?n:o(r)}},function(t,n,r){var f=r(33),a=r(8),s=r(78);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){"use strict";var g=r(3),b=r(1),x=r(27),m=r(76),S=r(69),w=r(71),_=r(70),O=r(5),E=r(4),M=r(125),P=r(83),j=r(144);t.exports=function(e,t,n,r,i,o){var u=g[e],c=u,f=i?"set":"add",a=c&&c.prototype,s={},l=function(t){var r=a[t];x(a,t,"delete"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!O(t)?void 0:r.call(this,0===t?0:t)}:"add"==t?function(t){return r.call(this,0===t?0:t),this}:function(t,n){return r.call(this,0===t?0:t,n),this})};if("function"==typeof c&&(o||a.forEach&&!E(function(){(new c).entries().next()}))){var h=new c,v=h[f](o?{}:-0,1)!=h,p=E(function(){h.has(1)}),d=M(function(t){new c(t)}),y=!o&&E(function(){for(var t=new c,n=5;n--;)t[f](n,n);return!t.has(-0)});d||(((c=t(function(t,n){_(t,c,e);var r=j(new u,t,c);return null!=n&&w(n,i,r[f],r),r})).prototype=a).constructor=c),(p||y)&&(l("delete"),l("has"),i&&l("get")),(y||v)&&l(f),o&&a.clear&&delete a.clear}else c=r.getConstructor(t,e,i,f),m(c.prototype,n),S.NEED=!0;return P(c,e),s[e]=c,b(b.G+b.W+b.F*(c!=u),s),o||r.setStrong(c,e,i),c}},function(t,n,r){"use strict";r(197);var s=r(27),l=r(26),h=r(4),v=r(51),p=r(7),d=r(152),y=p("species"),g=!h(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),b=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(r,t,n){var e=p(r),o=!h(function(){var t={};return t[e]=function(){return 7},7!=""[r](t)}),i=o?!h(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===r&&(n.constructor={},n.constructor[y]=function(){return n}),n[e](""),!t}):void 0;if(!o||!i||"replace"===r&&!g||"split"===r&&!b){var u=/./[e],c=n(v,e,""[r],function(t,n,r,e,i){return n.exec===d?o&&!i?{done:!0,value:u.call(n,r,e)}:{done:!0,value:t.call(r,n,e)}:{done:!1}}),f=c[0],a=c[1];s(String.prototype,r,f),l(RegExp.prototype,e,2==t?function(t,n){return a.call(t,this,n)}:function(t){return a.call(t,this)})}}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(5),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var o=r(7)("iterator"),u=!1;try{var e=[7][o]();e.return=function(){u=!0},Array.from(e,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!u)return!1;var r=!1;try{var e=[7],i=e[o]();i.next=function(){return{done:r=!0}},e[o]=function(){return i},t(e)}catch(t){}return r}},function(t,n,r){"use strict";t.exports=r(68)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){"use strict";var i=r(81),o=RegExp.prototype.exec;t.exports=function(t,n){var r=t.exec;if("function"==typeof r){var e=r.call(t,n);if("object"!=typeof e)throw new TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,n)}},function(t,n,r){"use strict";var e=r(1),u=r(21),c=r(47),f=r(71);t.exports=function(t){e(e.S,t,{from:function(t){var n,r,e,i,o=arguments[1];return u(this),(n=void 0!==o)&&u(o),null==t?new this:(r=[],n?(e=0,i=c(o,arguments[2],2),f(t,!1,function(t){r.push(i(t,e++))})):f(t,!1,r.push,r),new this(r))}})}},function(t,n,r){"use strict";var e=r(1);t.exports=function(t){e(e.S,t,{of:function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return new this(n)}})}},function(t,n,r){var f=r(49),a=r(51);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){for(var e,i=r(3),o=r(26),u=r(79),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n,r){var e=r(3).navigator;t.exports=e&&e.userAgent||""},function(t,n){"use strict";var r,e={versions:(r=window.navigator.userAgent,{trident:-1<r.indexOf("Trident"),presto:-1<r.indexOf("Presto"),webKit:-1<r.indexOf("AppleWebKit"),gecko:-1<r.indexOf("Gecko")&&-1==r.indexOf("KHTML"),mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<r.indexOf("Android")||-1<r.indexOf("Linux"),iPhone:-1<r.indexOf("iPhone")||-1<r.indexOf("Mac"),iPad:-1<r.indexOf("iPad"),webApp:-1==r.indexOf("Safari"),weixin:-1==r.indexOf("MicroMessenger")})};t.exports=e},function(t,n,r){"use strict";var e,i=r(87),l=(e=i)&&e.__esModule?e:{default:e},h=function(){function n(t,n,r){return n||r?String.fromCharCode(n||r):o[t]||t}function r(t){return s[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,i=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},u=/\u00a0/g,c=/<br\s*\/?>/gi,f=/\r?\n/g,a=/\s/g,s={};for(var t in o)s[o[t]]=t;return o["&apos;"]="'",s["'"]="&#39;",{encode:function(t){return t?(""+t).replace(i,r).replace(f,"<br/>").replace(a,"&nbsp;"):""},decode:function(t){return t?(""+t).replace(c,"\n").replace(e,n).replace(u," "):""},encodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;for(var n=[],r=0,e=(t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")})).length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)t[n]=h.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,l.default)(t)))for(var e in t)t[e]=h.encodeObject(t[e]);else if("string"==typeof t)return h.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=h},function(t,n,r){"use strict";var e=r(131)(!0);t.exports=function(t,n,r){return n+(r?e(t,n).length:1)}},function(t,n,r){"use strict";var c=r(17),f=r(78),a=r(8);t.exports=function(t){for(var n=c(this),r=a(n.length),e=arguments.length,i=f(1<e?arguments[1]:void 0,r),o=2<e?arguments[2]:void 0,u=void 0===o?r:f(o,r);i<u;)n[i++]=t;return n}},function(t,n,r){var e=r(215);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(11),i=r(75);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(5),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(n){var r=/./;try{"/./"[n](r)}catch(t){try{return r[e]=!1,!"/./"[n](r)}catch(n){}}return!0}},function(t,n,r){var e=r(3).document;t.exports=e&&e.documentElement},function(t,n,r){var o=r(5),u=r(153).set;t.exports=function(t,n,r){var e,i=n.constructor;return i!==r&&"function"==typeof i&&(e=i.prototype)!==r.prototype&&o(e)&&u&&u(t,e),t}},function(t,n,r){var e=r(82),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){"use strict";var e=r(72),i=r(75),o=r(83),u={};r(26)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var x=r(68),m=r(1),S=r(27),w=r(26),_=r(82),O=r(146),E=r(83),M=r(32),P=r(7)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n){var r=Math.expm1;t.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var c=r(3),f=r(158).set,a=c.MutationObserver||c.WebKitMutationObserver,s=c.process,l=c.Promise,h="process"==r(45)(s);t.exports=function(){var r,e,i,t=function(){var t,n;for(h&&(t=s.domain)&&t.exit();r;){n=r.fn,r=r.next;try{n()}catch(t){throw r?i():e=void 0,t}}e=void 0,t&&t.enter()};if(h)i=function(){s.nextTick(t)};else if(!a||c.navigator&&c.navigator.standalone)if(l&&l.resolve){var n=l.resolve(void 0);i=function(){n.then(t)}}else i=function(){f.call(c,t)};else{var o=!0,u=document.createTextNode("");new a(t).observe(u,{characterData:!0}),i=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};e&&(e.next=n),r||(r=n,i()),e=n}}},function(t,n,r){"use strict";function e(t){var r,e;this.promise=new t(function(t,n){if(void 0!==r||void 0!==e)throw TypeError("Bad Promise constructor");r=t,e=n}),this.resolve=i(r),this.reject=i(e)}var i=r(21);t.exports.f=function(t){return new e(t)}},function(t,n,r){"use strict";var e,i,u=r(115),c=RegExp.prototype.exec,f=String.prototype.replace,o=c,a="lastIndex",s=(e=/a/,i=/b*/g,c.call(e,"a"),c.call(i,"a"),0!==e[a]||0!==i[a]),l=void 0!==/()??/.exec("")[1];(s||l)&&(o=function(t){var n,r,e,i,o=this;return l&&(r=new RegExp("^"+o.source+"$(?!\\s)",u.call(o))),s&&(n=o[a]),e=c.call(o,t),s&&e&&(o[a]=o.global?e.index+e[0].length:n),l&&e&&1<e.length&&f.call(e[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(e[i]=void 0)}),e}),t.exports=o},function(t,n,i){var r=i(5),e=i(2),o=function(t,n){if(e(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,e){try{(e=i(47)(Function.call,i(31).f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function(t,n){return o(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(118)("keys"),i=r(79);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(124),i=r(51);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var i=r(49),o=r(51);t.exports=function(t){var n=String(o(this)),r="",e=i(t);if(e<0||e==1/0)throw RangeError("Count can't be negative");for(;0<e;(e>>>=1)&&(n+=n))1&e&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(47),c=r(175),f=r(143),a=r(140),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=s.Dispatch,y=0,g={},b="onreadystatechange",x=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},m=function(t){x.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return g[++y]=function(){c("function"==typeof t?t:Function(t),n)},e(y),y},v=function(t){delete g[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(x,t,1))}:d&&d.now?e=function(t){d.now(u(x,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=b in a("script")?function(t){f.appendChild(a("script"))[b]=function(){f.removeChild(this),x.call(t)}}:function(t){setTimeout(u(x,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";function e(t,n,r){var e,i,o,u=new Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?W(2,-24)-W(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=G(t))!=t||t===C?(i=t!=t?1:0,e=f):(e=U(V(t)/B),t*(o=W(2,-e))<1&&(e--,o*=2),2<=(t+=1<=e+a?s/o:s*W(2,1-a))*o&&(e++,o/=2),f<=e+a?(i=0,e=f):1<=e+a?(i=(t*o-1)*W(2,n),e+=a):(i=t*W(2,a-1)*W(2,n),e=0));8<=n;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;0<c;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function i(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;0<c;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-C:C;e+=W(2,n),s-=u}return(a?-1:1)*e*W(2,s-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function u(t){return[255&t]}function c(t){return[255&t,t>>8&255]}function f(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return e(t,52,8)}function s(t){return e(t,23,4)}function l(t,n,r){M(t[I],n,{get:function(){return this[r]}})}function h(t,n,r,e){var i=O(+r);if(i+n>t[H])throw R(L);var o=t[K]._b,u=i+t[J],c=o.slice(u,u+n);return e?c:c.reverse()}function v(t,n,r,e,i,o){var u=O(+r);if(u+n>t[H])throw R(L);for(var c=t[K]._b,f=u+t[J],a=e(+i),s=0;s<n;s++)c[f+s]=a[o?s:n-s-1]}var p=r(3),d=r(10),y=r(68),g=r(132),b=r(26),x=r(76),m=r(4),S=r(70),w=r(49),_=r(8),O=r(194),E=r(73).f,M=r(11).f,P=r(137),j=r(83),F="ArrayBuffer",A="DataView",I="prototype",L="Wrong index!",N=p[F],T=p[A],k=p.Math,R=p.RangeError,C=p.Infinity,D=N,G=k.abs,W=k.pow,U=k.floor,V=k.log,B=k.LN2,q="byteLength",z="byteOffset",K=d?"_b":"buffer",H=d?"_l":q,J=d?"_o":z;if(g.ABV){if(!m(function(){N(1)})||!m(function(){new N(-1)})||m(function(){return new N,new N(1.5),new N(NaN),N.name!=F})){for(var $,Y=(N=function(t){return S(this,N),new D(O(t))})[I]=D[I],X=E(D),Q=0;X.length>Q;)($=X[Q++])in N||b(N,$,D[$]);y||(Y.constructor=N)}var Z=new T(new N(2)),tt=T[I].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||x(T[I],{setInt8:function(t,n){tt.call(this,t,n<<24>>24)},setUint8:function(t,n){tt.call(this,t,n<<24>>24)}},!0)}else N=function(t){S(this,N,F);var n=O(t);this._b=P.call(new Array(n),0),this[H]=n},T=function(t,n,r){S(this,T,A),S(t,N,A);var e=t[H],i=w(n);if(i<0||e<i)throw R("Wrong offset!");if(e<i+(r=void 0===r?e-i:_(r)))throw R("Wrong length!");this[K]=t,this[J]=i,this[H]=r},d&&(l(N,q,"_l"),l(T,"buffer","_b"),l(T,q,"_l"),l(T,z,"_o")),x(T[I],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,u,n)},setUint8:function(t,n){v(this,1,t,u,n)},setInt16:function(t,n){v(this,2,t,c,n,arguments[2])},setUint16:function(t,n){v(this,2,t,c,n,arguments[2])},setInt32:function(t,n){v(this,4,t,f,n,arguments[2])},setUint32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,s,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});j(N,F),j(T,A),b(T[I],g.VIEW,!0),n[F]=N,n[A]=T},function(t,n,r){var e=r(3),i=r(46),o=r(68),u=r(195),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(81),i=r(7)("iterator"),o=r(82);t.exports=r(46).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(67),i=r(178),o=r(82),u=r(33);t.exports=r(147)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){t.exports=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n}},function(t,n){t.exports=function(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var a=r(17),s=r(78),l=r(8);t.exports=[].copyWithin||function(t,n){var r=a(this),e=l(r.length),i=s(t,e),o=s(n,e),u=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===u?e:s(u,e))-o,e-i),f=1;for(o<i&&i<o+c&&(f=-1,o+=c-1,i+=c-1);0<c--;)o in r?r[i]=r[o]:delete r[i],i+=f,o+=f;return r}},function(t,n,r){var e=r(71);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var s=r(21),l=r(17),h=r(116),v=r(8);t.exports=function(t,n,r,e,i){s(n);var o=l(t),u=h(o),c=v(o.length),f=i?c-1:0,a=i?-1:1;if(r<2)for(;;){if(f in u){e=u[f],f+=a;break}if(f+=a,i?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=f:f<c;f+=a)f in u&&(e=n(e,u[f],f,o));return e}},function(t,n,r){"use strict";var o=r(21),u=r(5),c=r(175),f=[].slice,a={};t.exports=Function.bind||function(n){var r=o(this),e=f.call(arguments,1),i=function(){var t=e.concat(f.call(arguments));return this instanceof i?function(t,n,r){if(!(n in a)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";a[n]=Function("F,a","return new F("+e.join(",")+")")}return a[n](t,r)}(r,t.length,t):c(r,t,n)};return u(r.prototype)&&(i.prototype=r.prototype),i}},function(t,n,r){"use strict";var u=r(11).f,c=r(72),f=r(76),a=r(47),s=r(70),l=r(71),e=r(147),i=r(178),o=r(77),h=r(10),v=r(69).fastKey,p=r(80),d=h?"_s":"size",y=function(t,n){var r,e=v(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,o,r,e){var i=t(function(t,n){s(t,i,o,"_i"),t._t=o,t._i=c(null),t._f=void 0,t._l=void 0,t[d]=0,null!=n&&l(n,r,t[e],t)});return f(i.prototype,{clear:function(){for(var t=p(this,o),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=p(this,o),r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){p(this,o);for(var n,r=a(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,o),t)}}),h&&u(i.prototype,"size",{get:function(){return p(this,o)[d]}}),i},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=v(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,r,n){e(t,r,function(t,n){this._t=p(t,r),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?i(0,"keys"==n?r.k:"values"==n?r.v:[r.k,r.v]):(t._t=void 0,i(1))},n?"entries":"values",!n,!0),o(r)}}},function(t,n,r){var e=r(81),i=r(167);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var u=r(76),c=r(69).getWeak,i=r(2),f=r(5),a=r(70),s=r(71),e=r(50),l=r(30),h=r(80),o=e(5),v=e(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return o(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var r=g(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(n){var t=v(this.a,function(t){return t[0]===n});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,r,e,i){var o=t(function(t,n){a(t,o,r,"_i"),t._t=r,t._i=p++,t._l=void 0,null!=n&&s(n,e,t[i],t)});return u(o.prototype,{delete:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).has(t):n&&l(n,this._i)}}),o},def:function(t,n,r){var e=c(i(n),!0);return!0===e?d(t).set(n,r):e[t._i]=r,t},ufstore:d}},function(t,n,r){"use strict";var p=r(123),d=r(5),y=r(8),g=r(47),b=r(7)("isConcatSpreadable");t.exports=function t(n,r,e,i,o,u,c,f){for(var a,s,l=o,h=0,v=!!c&&g(c,f,3);h<i;){if(h in e){if(a=v?v(e[h],h,r):e[h],s=!1,d(a)&&(s=void 0!==(s=a[b])?!!s:p(a)),s&&0<u)l=t(n,r,a,y(a.length),l,u-1)-1;else{if(9007199254740991<=l)throw TypeError();n[l]=a}l++}h++}return l}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(140)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(5),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var o=r(2);t.exports=function(t,n,r,e){try{return e?n(o(r)[0],r[1]):n(r)}catch(n){var i=t.return;throw void 0!==i&&o(i.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var o=r(149),e=Math.pow,u=e(2,-52),c=e(2,-23),f=e(2,127)*(2-c),a=e(2,-126);t.exports=Math.fround||function(t){var n,r,e=Math.abs(t),i=o(t);return e<a?i*(e/a/c+1/u-1/u)*a*c:f<(r=(n=(1+c/u)*e)-(n-e))||r!=r?i*(1/0):i*r}},function(t,n){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n){t.exports=Math.scale||function(t,n,r,e,i){return 0===arguments.length||t!=t||n!=n||r!=r||e!=e||i!=i?NaN:t===1/0||t===-1/0?t:(t-n)*(i-e)/(r-n)+e}},function(t,n,r){"use strict";var h=r(10),v=r(74),p=r(127),d=r(117),y=r(17),g=r(116),i=Object.assign;t.exports=!i||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=i({},t)[r]||Object.keys(i({},n)).join("")!=e})?function(t,n){for(var r=y(t),e=arguments.length,i=1,o=p.f,u=d.f;i<e;)for(var c,f=g(arguments[i++]),a=o?v(f).concat(o(f)):v(f),s=a.length,l=0;l<s;)c=a[l++],h&&!u.call(f,c)||(r[c]=f[c]);return r}:i},function(t,n,r){var u=r(11),c=r(2),f=r(74);t.exports=r(10)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(33),i=r(73).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var u=r(30),c=r(33),f=r(120)(!1),a=r(154)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){var f=r(10),a=r(74),s=r(33),l=r(117).f;t.exports=function(c){return function(t){for(var n,r=s(t),e=a(r),i=e.length,o=0,u=[];o<i;)n=e[o++],f&&!l.call(r,n)||u.push(c?[n,r[n]]:r[n]);return u}}},function(t,n,r){var e=r(73),i=r(127),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(84).trim;t.exports=1/e(r(157)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(84).trim,o=r(157),u=/^[-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,r){var e=r(2),i=r(5),o=r(151);t.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var s=r(8),l=r(156),h=r(51);t.exports=function(t,n,r,e){var i=String(h(t)),o=i.length,u=void 0===r?" ":String(r),c=s(n);if(c<=o||""==u)return i;var f=c-o,a=l.call(u,Math.ceil(f/u.length));return a.length>f&&(a=a.slice(0,f)),e?a+i:i+a}},function(t,n,r){var e=r(49),i=r(8);t.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},function(t,n,r){"use strict";var e=r(152);r(1)({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e})},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(115)})},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var o,e=r(3),i=r(50)(0),u=r(27),c=r(69),f=r(182),a=r(172),s=r(5),l=r(80),h=r(80),v=!e.ActiveXObject&&"ActiveXObject"in e,p="WeakMap",d=c.getWeak,y=Object.isExtensible,g=a.ufstore,b=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},x={get:function(t){if(s(t)){var n=d(t);return!0===n?g(l(this,p)).get(t):n?n[this._i]:void 0}},set:function(t,n){return a.def(l(this,p),t,n)}},m=t.exports=r(121)(p,b,x,a,!0,!0);h&&v&&(f((o=a.getConstructor(b,p)).prototype,x),c.NEED=!0,i(["delete","has","get","set"],function(e){var t=m.prototype,i=t[e];u(t,e,function(t,n){if(!s(t)||y(t))return i.call(this,t,n);this._f||(this._f=new o);var r=this._f[e](t,n);return"set"==e?this:r})}))},,,,function(t,n){"use strict";t.exports={init:function(){var t=document.querySelector("#page-nav");t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new&&document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")}),yiliaConfig&&yiliaConfig.toc_hide_index&&document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n,r,e,i){var o=function(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}(t),u=function(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}(t)-n;if(u-r<=i){var c=t.$newDom;c||(c=t.cloneNode(!0),(0,a.default)(t,c),(t.$newDom=c).style.position="fixed",c.style.top=(r||u)+"px",c.style.left=o+"px",c.style.zIndex=e||2,c.style.width="100%",c.style.color="#fff"),c.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var f=t.$newDom;f&&(f.style.visibility="hidden")}}function o(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");i(t,document.body.scrollTop,-63,2,0),i(n,document.body.scrollTop,1,3,0)}var f=e(r(163)),a=e((e(r(164)),r(414))),u=e(r(134)),c=e(r(204)),s=r(135);u.default.versions.mobile&&window.screen.width<800&&(function(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var i=t[r];o=n,u=i.getAttribute("href"),c=/\/|index.html/g,o.replace(c,"")===u.replace(c,"")&&(0,f.default)(i,"active")}var o,u,c}(),document.querySelector("#container").addEventListener("scroll",function(t){o()}),window.addEventListener("scroll",function(t){o()}),o()),(0,s.addLoadEvent)(function(){c.default.init()}),t.exports={}},,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object.defineProperty(t,n,{writable:!0,configurable:!0,value:r})}if(r(413),r(209),r(211),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},function(L,t){(function(t){!function(t){"use strict";function o(t,n,r,e){var o,u,c,f,i=n&&n.prototype instanceof h?n:h,a=Object.create(i.prototype),s=new p(e||[]);return a._invoke=(o=t,u=r,c=s,f=_,function(t,n){if(f===E)throw new Error("Generator is already running");if(f===M){if("throw"===t)throw n;return d()}for(c.method=t,c.arg=n;;){var r=c.delegate;if(r){var e=v(r,c);if(e){if(e===P)continue;return e}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(f===_)throw f=M,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);f=E;var i=l(o,u,c);if("normal"===i.type){if(f=c.done?M:O,i.arg===P)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(f=M,c.method="throw",c.arg=i.arg)}}),a}function l(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function h(){}function r(){}function n(){}function e(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(c){function f(t,n,r,e){var i=l(c[t],c,n);if("throw"!==i.type){var o=i.arg,u=o.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(t){f("next",t,r,e)},function(t){f("throw",t,r,e)}):Promise.resolve(u).then(function(t){o.value=t,r(o)},e)}e(i.arg)}var n;"object"==typeof t.process&&t.process.domain&&(f=t.process.domain.bind(f)),this._invoke=function(r,e){function t(){return new Promise(function(t,n){f(r,e,t,n)})}return n=n?n.then(t,t):t()}}function v(t,n){var r=t.iterator[n.method];if(r===a){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=a,v(t,n),"throw"===n.method))return P;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var e=l(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,P;var i=e.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=a),n.delegate=null,P):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P)}function i(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function c(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(i,this),this.reset(!0)}function f(n){if(n){var t=n[b];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,e=function t(){for(;++r<n.length;)if(y.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=a,t.done=!0,t};return e.next=e}}return{next:d}}function d(){return{value:a,done:!0}}var a,s=Object.prototype,y=s.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",m=g.toStringTag||"@@toStringTag",S="object"==typeof L,w=t.regeneratorRuntime;if(w)S&&(L.exports=w);else{(w=t.regeneratorRuntime=S?L.exports:{}).wrap=o;var _="suspendedStart",O="suspendedYield",E="executing",M="completed",P={},j={};j[b]=function(){return this};var F=Object.getPrototypeOf,A=F&&F(F(f([])));A&&A!==s&&y.call(A,b)&&(j=A);var I=n.prototype=h.prototype=Object.create(j);r.prototype=I.constructor=n,n.constructor=r,n[m]=r.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===r||"GeneratorFunction"===(n.displayName||n.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,m in t||(t[m]="GeneratorFunction")),t.prototype=Object.create(I),t},w.awrap=function(t){return{__await:t}},e(u.prototype),u.prototype[x]=function(){return this},w.AsyncIterator=u,w.async=function(t,n,r,e){var i=new u(o(t,n,r,e));return w.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},e(I),I[m]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},w.keys=function(r){var e=[];for(var t in r)e.push(t);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},w.values=f,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(c),!t)for(var n in this)"t"===n.charAt(0)&&y.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){function t(t,n){return o.type="throw",o.arg=r,e.next=t,n&&(e.method="next",e.arg=a),!!n}if(this.done)throw r;for(var e=this,n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var u=y.call(i,"catchLoc"),c=y.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&y.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),P},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),c(r),P}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;c(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:f(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=a),P}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},,function(t,n,r){r(221),t.exports=r(46).RegExp.escape},,,,function(t,n,r){var e=r(5),i=r(123),o=r(7)("species");t.exports=function(t){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&(null===(n=n[o])&&(n=void 0))),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return 9<t?t:"0"+t};t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":9999<n?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(99<r?r:"0"+u(r))+"Z"}:o},function(t,n,r){"use strict";var e=r(2),i=r(53);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},function(t,n,r){var c=r(74),f=r(127),a=r(117);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){t.exports=r(118)("native-function-to-string",Function.toString)},function(t,n){t.exports=function(n,r){var e=r===Object(r)?function(t){return r[t]}:r;return function(t){return String(t).replace(n,e)}}},function(t,n,r){var e=r(1),i=r(220)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(166)}),r(67)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(50)(4);e(e.P+e.F*!r(48)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(137)}),r(67)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(50)(2);e(e.P+e.F*!r(48)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(50)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(50)(0),o=r(48)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var h=r(47),e=r(1),v=r(17),p=r(177),d=r(145),y=r(8),g=r(139),b=r(161);e(e.S+e.F*!r(125)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,e,i,o=v(t),u="function"==typeof this?this:Array,c=arguments.length,f=1<c?arguments[1]:void 0,a=void 0!==f,s=0,l=b(o);if(a&&(f=h(f,2<c?arguments[2]:void 0,2)),null==l||u==Array&&d(l))for(r=new u(n=y(o.length));s<n;s++)g(r,s,a?f(o[s],s):o[s]);else for(i=l.call(o),r=new u;!(e=i.next()).done;s++)g(r,s,a?p(i,f,[e.value,s],!0):e.value);return r.length=s,r}})},function(t,n,r){"use strict";var e=r(1),i=r(120)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(48)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(123)})},function(t,n,r){"use strict";var e=r(1),i=r(33),o=[].join;e(e.P+e.F*(r(116)!=Object||!r(48)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(33),o=r(49),u=r(8),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(48)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(1<arguments.length&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);0<=e;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(1);e(e.P+e.F*!r(48)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(139);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);t<n;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(143),a=r(45),s=r(78),l=r(8),h=[].slice;e(e.P+e.F*r(4)(function(){i&&h.call(i)}),"Array",{slice:function(t,n){var r=l(this.length),e=a(this);if(n=void 0===n?r:n,"Array"==e)return h.call(this,t,n);for(var i=s(t,r),o=s(n,r),u=l(o-i),c=new Array(u),f=0;f<u;f++)c[f]="String"==e?this.charAt(i+f):this[i+f];return c}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(3);e(e.P+e.F*!r(48)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(21),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(48)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(77)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){var e=r(1),i=r(216);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(26)(i,e,r(217))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(27)(e,o,function(){var t=c.call(this);return t==t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(169)})},function(t,n,r){"use strict";var e=r(5),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(10)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(180),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){var e=r(1),i=Math.asinh;e(e.S+e.F*!(i&&0<1/i(0)),"Math",{asinh:function t(n){return isFinite(n=+n)&&0!=n?n<0?-t(-n):Math.log(n+Math.sqrt(n*n+1)):n}})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(149);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(148);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1);e(e.S,"Math",{fround:r(179)})},function(t,n,r){var e=r(1),f=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,i=0,o=0,u=arguments.length,c=0;o<u;)c<(r=f(arguments[o++]))?(i=i*(e=c/r)*e+1,c=r):0<r?i+=(e=r/c)*e:i+=r;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(180)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(149)})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(30),o=r(45),u=r(144),s=r(53),c=r(4),f=r(73).f,a=r(31).f,l=r(11).f,h=r(84).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(72)(y))==v,b="trim"in String.prototype,x=function(t){var n=s(t,!1);if("string"==typeof n&&2<n.length){var r,e,i,o=(n=b?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),f=0,a=c.length;f<a;f++)if((u=c.charCodeAt(f))<48||i<u)return NaN;return parseInt(c,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?c(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(x(n)),r,p):x(n)};for(var m,S=r(10)?f(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)i(d,m=S[w])&&!i(p,m)&&l(p,m,a(d,m));(p.prototype=y).constructor=p,r(27)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(176)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(176),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(188);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),a=r(49),s=r(165),l=r(156),i=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",v=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*u[r],u[r]=e%1e7,e=o(e/1e7)},p=function(t){for(var n=6,r=0;0<=--n;)r+=u[n],u[n]=o(r/t),r=r%t*1e7},d=function(){for(var t=6,n="";0<=--t;)if(""!==n||0===t||0!==u[t]){var r=String(u[t]);n=""===n?r:n+l.call("0",7-r.length)+r}return n},y=function(t,n,r){return 0===n?r:n%2==1?y(t,n-1,r*t):y(t*t,n/2,r)};e(e.P+e.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){i.call({})})),"Number",{toFixed:function(t){var n,r,e,i,o=s(this,h),u=a(t),c="",f="0";if(u<0||20<u)throw RangeError(h);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c="-",o=-o),1e-21<o)if(r=(n=function(t){for(var n=0,r=t;4096<=r;)n+=12,r/=4096;for(;2<=r;)n+=1,r/=2;return n}(o*y(2,69,1))-69)<0?o*y(2,-n,1):o/y(2,n,1),r*=4503599627370496,0<(n=52-n)){for(v(0,r),e=u;7<=e;)v(1e7,0),e-=7;for(v(y(10,e,1),0),e=n-1;23<=e;)p(1<<23),e-=23;p(1<<e),v(1,1),p(2),f=d()}else v(0,r),v(1<<-n,0),f=d()+l.call("0",u);return f=0<u?c+((i=f.length)<=u?"0."+l.call("0",u-i)+f:f.slice(0,i-u)+"."+f.slice(i-u)):c+f}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(165),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(182)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(72)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(183)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("freeze",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(33),i=r(31).f;r(52)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(52)("getOwnPropertyNames",function(){return r(184).f})},function(t,n,r){var e=r(17),i=r(32);r(52)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5);r(52)("isExtensible",function(n){return function(t){return!!e(t)&&(!n||n(t))}})},function(t,n,r){var e=r(5);r(52)("isFrozen",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(5);r(52)("isSealed",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(192)})},function(t,n,r){var e=r(17),i=r(74);r(52)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("preventExtensions",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("seal",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(153).set})},function(t,n,r){"use strict";var e=r(81),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(27)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(188);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u,c=r(68),f=r(3),a=r(47),s=r(81),l=r(1),h=r(5),v=r(21),p=r(70),d=r(71),y=r(119),g=r(158).set,b=r(150)(),x=r(151),m=r(190),S=r(133),w=r(191),_="Promise",O=f.TypeError,E=f.process,M=E&&E.versions,P=M&&M.v8||"",j=f[_],F="process"==s(E),A=function(){},I=i=x.f,L=!!function(){try{var t=j.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(A,A)};return(F||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n&&0!==P.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},T=function(s,r){if(!s._n){s._n=!0;var e=s._c;b(function(){for(var f=s._v,a=1==s._s,t=0,n=function(t){var n,r,e,i=a?t.ok:t.fail,o=t.resolve,u=t.reject,c=t.domain;try{i?(a||(2==s._h&&C(s),s._h=1),!0===i?n=f:(c&&c.enter(),n=i(f),c&&(c.exit(),e=!0)),n===t.promise?u(O("Promise-chain cycle")):(r=N(n))?r.call(n,o,u):o(n)):u(f)}catch(t){c&&!e&&c.exit(),u(t)}};e.length>t;)n(e[t++]);s._c=[],s._n=!1,r&&!s._h&&k(s)})}},k=function(o){g.call(f,function(){var t,n,r,e=o._v,i=R(o);if(i&&(t=m(function(){F?E.emit("unhandledRejection",e,o):(n=f.onunhandledrejection)?n({promise:o,reason:e}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",e)}),o._h=F||R(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},C=function(n){g.call(f,function(){var t;F?E.emit("rejectionHandled",n):(t=f.onrejectionhandled)&&t({promise:n,reason:n._v})})},D=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},G=function(t){var r,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw O("Promise can't be resolved itself");(r=N(t))?b(function(){var n={_w:e,_d:!1};try{r.call(t,a(G,n,1),a(D,n,1))}catch(t){D.call(n,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){D.call({_w:e,_d:!1},t)}}};L||(j=function(t){p(this,j,_,"_h"),v(t),e.call(this);try{t(a(G,this,1),a(D,this,1))}catch(t){D.call(this,t)}},(e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(76)(j.prototype,{then:function(t,n){var r=I(y(this,j));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=F?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&T(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=a(G,t,1),this.reject=a(D,t,1)},x.f=I=function(t){return t===j||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!L,{Promise:j}),r(83)(j,_),r(77)(_),u=r(46)[_],l(l.S+l.F*!L,_,{reject:function(t){var n=I(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!L),_,{resolve:function(t){return w(c&&this===u?j:this,t)}}),l(l.S+l.F*!(L&&r(125)(function(t){j.all(t).catch(A)})),_,{all:function(t){var u=this,n=I(u),c=n.resolve,f=n.reject,r=m(function(){var e=[],i=0,o=1;d(t,!1,function(t){var n=i++,r=!1;e.push(void 0),o++,u.resolve(t).then(function(t){r||(r=!0,e[n]=t,--o||c(e))},f)}),--o||c(e)});return r.e&&f(r.v),n.promise},race:function(t){var n=this,r=I(n),e=r.reject,i=m(function(){d(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},function(t,n,r){var e=r(1),o=r(21),u=r(2),c=(r(3).Reflect||{}).apply,f=Function.apply;e(e.S+e.F*!r(4)(function(){c(function(){})}),"Reflect",{apply:function(t,n,r){var e=o(t),i=u(r);return c?c(e,n,i):f.call(e,n,i)}})},function(t,n,r){var e=r(1),c=r(72),f=r(21),a=r(2),s=r(5),i=r(4),l=r(169),h=(r(3).Reflect||{}).construct,v=i(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),p=!i(function(){h(function(){})});e(e.S+e.F*(v||p),"Reflect",{construct:function(t,n){f(t),a(n);var r=arguments.length<3?t:f(arguments[2]);if(p&&!v)return h(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(l.apply(t,e))}var i=r.prototype,o=c(s(i)?i:Object.prototype),u=Function.apply.call(t,o,n);return s(u)?u:o}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(53);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(146)(o,"Object",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){var u=r(31),c=r(32),f=r(30),e=r(1),a=r(5),s=r(2);e(e.S,"Reflect",{get:function t(n,r){var e,i,o=arguments.length<3?n:arguments[2];return s(n)===o?n[r]:(e=u.f(n,r))?f(e,"value")?e.value:void 0!==e.get?e.get.call(o):void 0:a(i=c(n))?t(i,r,o):void 0}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(187)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(153);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){var f=r(11),a=r(31),s=r(32),l=r(30),e=r(1),h=r(75),v=r(2),p=r(5);e(e.S,"Reflect",{set:function t(n,r,e){var i,o,u=arguments.length<4?n:arguments[3],c=a.f(v(n),r);if(!c){if(p(o=s(n)))return t(o,r,e,u);c=h(0)}if(l(c,"value")){if(!1===c.writable||!p(u))return!1;if(i=a.f(u,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=e,f.f(u,r,i)}else f.f(u,r,h(0,e));return!0}return void 0!==c.set&&(c.set.call(u,e),!0)}})},function(t,n,r){var e=r(3),o=r(144),i=r(11).f,u=r(73).f,c=r(124),f=r(115),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),i=void 0===n;return!r&&e&&t.constructor===a&&i?t:o(p?new s(e&&!i?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&i?f.call(t):n),r?this:l,a)};for(var d=function(n){n in a||i(a,n,{configurable:!0,get:function(){return s[n]},set:function(t){s[n]=t}})},y=u(s),g=0;y.length>g;)d(y[g++]);(l.constructor=a).prototype=l,r(27)(e,"RegExp",a)}r(77)("RegExp")},function(t,n,r){"use strict";var l=r(2),h=r(8),v=r(136),p=r(128);r(122)("match",1,function(e,i,a,s){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=s(a,t,this);if(n.done)return n.value;var r=l(t),e=String(this);if(!r.global)return p(r,e);for(var i,o=r.unicode,u=[],c=r.lastIndex=0;null!==(i=p(r,e));){var f=String(i[0]);""===(u[c]=f)&&(r.lastIndex=v(e,h(r.lastIndex),o)),c++}return 0===c?null:u}]})},function(t,n,r){"use strict";var O=r(2),e=r(17),E=r(8),M=r(49),P=r(136),j=r(128),F=Math.max,A=Math.min,h=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(122)("replace",2,function(i,o,S,w){function _(o,u,c,f,a,t){var s=c+o.length,l=f.length,n=p;return void 0!==a&&(a=e(a),n=v),S.call(t,n,function(t,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return o;case"`":return u.slice(0,c);case"'":return u.slice(s);case"<":r=a[n.slice(1,-1)];break;default:var e=+n;if(0===e)return t;if(l<e){var i=h(e/10);return 0===i?t:i<=l?void 0===f[i-1]?n.charAt(1):f[i-1]+n.charAt(1):t}r=f[e-1]}return void 0===r?"":r})}return[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):S.call(String(r),t,n)},function(t,n){var r=w(S,t,this,n);if(r.done)return r.value;var e=O(t),i=String(this),o="function"==typeof n;o||(n=String(n));var u,c=e.global;if(c){var f=e.unicode;e.lastIndex=0}for(var a=[];;){var s=j(e,i);if(null===s)break;if(a.push(s),!c)break;""===String(s[0])&&(e.lastIndex=P(i,E(e.lastIndex),f))}for(var l="",h=0,v=0;v<a.length;v++){s=a[v];for(var p=String(s[0]),d=F(A(M(s.index),i.length),0),y=[],g=1;g<s.length;g++)y.push(void 0===(u=s[g])?u:String(u));var b=s.groups;if(o){var x=[p].concat(y,d,i);void 0!==b&&x.push(b);var m=String(n.apply(void 0,x))}else m=_(p,i,d,y,b,n);h<=d&&(l+=i.slice(h,d)+m,h=d+p.length)}return l+i.slice(h)}]})},function(t,n,r){"use strict";var f=r(2),a=r(192),s=r(128);r(122)("search",1,function(e,i,u,c){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=c(u,t,this);if(n.done)return n.value;var r=f(t),e=String(this),i=r.lastIndex;a(i,0)||(r.lastIndex=0);var o=s(r,e);return a(r.lastIndex,i)||(r.lastIndex=i),null===o?-1:o.index}]})},function(t,n,r){"use strict";var l=r(124),x=r(2),m=r(119),S=r(136),w=r(8),_=r(128),h=r(152),e=r(4),O=Math.min,v=[].push,u="split",p="length",d="lastIndex",E=4294967295,M=!e(function(){RegExp(E,"y")});r(122)("split",2,function(i,o,y,g){var b;return b="c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[p]||2!="ab"[u](/(?:ab)*/)[p]||4!="."[u](/(.?)(.?)/)[p]||1<"."[u](/()()/)[p]||""[u](/.?/)[p]?function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!l(t))return y.call(r,t,n);for(var e,i,o,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,a=void 0===n?E:n>>>0,s=new RegExp(t.source,c+"g");(e=h.call(s,r))&&!(f<(i=s[d])&&(u.push(r.slice(f,e.index)),1<e[p]&&e.index<r[p]&&v.apply(u,e.slice(1)),o=e[0][p],f=i,u[p]>=a));)s[d]===e.index&&s[d]++;return f===r[p]?!o&&s.test("")||u.push(""):u.push(r.slice(f)),u[p]>a?u.slice(0,a):u}:"0"[u](void 0,0)[p]?function(t,n){return void 0===t&&0===n?[]:y.call(this,t,n)}:y,[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):b.call(String(r),t,n)},function(t,n){var r=g(b,t,this,n,b!==y);if(r.done)return r.value;var e=x(t),i=String(this),o=m(e,RegExp),u=e.unicode,c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(M?"y":"g"),f=new o(M?e:"^(?:"+e.source+")",c),a=void 0===n?E:n>>>0;if(0===a)return[];if(0===i.length)return null===_(f,i)?[i]:[];for(var s=0,l=0,h=[];l<i.length;){f.lastIndex=M?l:0;var v,p=_(f,M?i:i.slice(l));if(null===p||(v=O(w(f.lastIndex+(M?0:l)),i.length))===s)l=S(i,l,u);else{if(h.push(i.slice(s,l)),h.length===a)return h;for(var d=1;d<=p.length-1;d++)if(h.push(p[d]),h.length===a)return h;l=s=v}}return h.push(i.slice(s)),h}]})},function(t,n,r){"use strict";r(198);var e=r(2),i=r(115),o=r(10),u="toString",c=/./[u],f=function(t){r(27)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(28)("anchor",function(n){return function(t){return n(this,"a","name",t)}})},function(t,n,r){"use strict";r(28)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(28)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(28)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),u=r(8),c=r(155),f="endsWith",a=""[f];e(e.P+e.F*r(142)(f),"String",{endsWith:function(t){var n=c(this,t,f),r=1<arguments.length?arguments[1]:void 0,e=u(n.length),i=void 0===r?e:Math.min(u(r),e),o=String(t);return a?a.call(n,o,i):n.slice(i-o.length,i)===o}})},function(t,n,r){"use strict";r(28)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(28)("fontcolor",function(n){return function(t){return n(this,"font","color",t)}})},function(t,n,r){"use strict";r(28)("fontsize",function(n){return function(t){return n(this,"font","size",t)}})},function(t,n,r){var e=r(1),o=r(78),u=String.fromCharCode,i=String.fromCodePoint;e(e.S+e.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,i=0;i<e;){if(n=+arguments[i++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?u(n):u(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(155);e(e.P+e.F*r(142)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(28)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(131)(!0);r(147)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(28)("link",function(n){return function(t){return n(this,"a","href",t)}})},function(t,n,r){var e=r(1),u=r(33),c=r(8);e(e.S,"String",{raw:function(t){for(var n=u(t.raw),r=c(n.length),e=arguments.length,i=[],o=0;o<r;)i.push(String(n[o++])),o<e&&i.push(String(arguments[o]));return i.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(156)})},function(t,n,r){"use strict";r(28)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(8),o=r(155),u="startsWith",c=""[u];e(e.P+e.F*r(142)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(28)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(28)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(28)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(84)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),u=r(30),i=r(10),o=r(1),c=r(27),f=r(69).KEY,a=r(4),s=r(118),l=r(83),h=r(79),v=r(7),p=r(195),d=r(160),y=r(218),g=r(123),b=r(2),x=r(5),m=r(17),S=r(33),w=r(53),_=r(75),O=r(72),E=r(184),M=r(31),P=r(127),j=r(11),F=r(74),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,K=!z||!z[R]||!z[R].findChild,H=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),H(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),H(this,n,_(1,t))};return i&&K&&H(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(73).f=E.f=tt,r(117).f=Q,P.f=nt,i&&!r(68)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(26)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(132),o=r(159),a=r(2),s=r(78),l=r(8),u=r(5),c=r(3).ArrayBuffer,h=r(119),v=o.ArrayBuffer,p=o.DataView,f=i.ABV&&c.isView,d=v.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(c!==v),{ArrayBuffer:v}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return f&&f(t)||u(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new v(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(a(this),t);for(var r=a(this).byteLength,e=s(t,r),i=s(void 0===n?r:n,r),o=new(h(this,v))(l(i-e)),u=new p(this),c=new p(o),f=0;e<i;)c.setUint8(f++,u.getUint8(e++));return o}}),r(77)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(132).ABV,{DataView:r(159).DataView})},function(t,n,r){r(57)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(t,n,r){"use strict";var e=r(172),i=r(80);r(121)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(8),c=r(21),f=r(138);e(e.P,"Array",{flatMap:function(t){var n,r,e=o(this);return c(t),n=u(e.length),r=f(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),r(67)("flatMap")},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(8),c=r(49),f=r(138);e(e.P,"Array",{flatten:function(){var t=arguments[0],n=o(this),r=u(n.length),e=f(n,0);return i(e,n,n,r,0,void 0===t?1:c(t)),e}}),r(67)("flatten")},function(t,n,r){"use strict";var e=r(1),i=r(120)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)("includes")},function(t,n,r){var e=r(1),i=r(150)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.G,{global:r(3)})},function(t,n,r){r(129)("Map")},function(t,n,r){r(130)("Map")},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(171)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{clamp:function(t,n,r){return Math.min(r,Math.max(n,t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,n,r){var e=r(1),i=180/Math.PI;e(e.S,"Math",{degrees:function(t){return t*i}})},function(t,n,r){var e=r(1),o=r(181),u=r(179);e(e.S,"Math",{fscale:function(t,n,r,e,i){return u(o(t,n,r,e,i))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)+(e>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>16,c=e>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>16)+((i*c>>>0)+(65535&f)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)-(e>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,n,r){var e=r(1),i=Math.PI/180;e(e.S,"Math",{radians:function(t){return t*i}})},function(t,n,r){var e=r(1);e(e.S,"Math",{scale:r(181)})},function(t,n,r){var e=r(1);e(e.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>>16,c=e>>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>>16)+((i*c>>>0)+(65535&f)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(21),u=r(11);r(10)&&e(e.P+r(126),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(21),u=r(11);r(10)&&e(e.P+r(126),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(186)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),f=r(187),a=r(33),s=r(31),l=r(139);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r,e=a(t),i=s.f,o=f(e),u={},c=0;o.length>c;)void 0!==(r=i(e,n=o[c++]))&&l(u,n,r);return u}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(32),c=r(31).f;r(10)&&e(e.P+r(126),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(32),c=r(31).f;r(10)&&e(e.P+r(126),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(186)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),o=r(3),u=r(46),i=r(150)(),c=r(7)("observable"),f=r(21),a=r(2),s=r(70),l=r(76),h=r(26),v=r(71),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},x=function(t,n){a(t),this._c=void 0,this._o=t,t=new m(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};x.prototype=l({},{unsubscribe:function(){b(this)}});var m=function(t){this._s=t};m.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var S=function(t){s(this,S,"Observable","_f")._f=f(t)};l(S.prototype,{subscribe:function(t){return new x(t,this._f)},forEach:function(e){var i=this;return new(u.Promise||o.Promise)(function(t,n){f(e);var r=i.subscribe({next:function(t){try{return e(t)}catch(t){n(t),r.unsubscribe()}},error:n,complete:t})})}}),l(S,{from:function(t){var n="function"==typeof this?this:S,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return i(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,e=new Array(n);t<n;)e[t]=arguments[t++];return new("function"==typeof this?this:S)(function(n){var r=!1;return i(function(){if(!r){for(var t=0;t<e.length;++t)if(n.next(e[t]),r)return;n.complete()}}),function(){r=!0}})}}),h(S.prototype,c,function(){return this}),e(e.G,{Observable:S}),r(77)("Observable")},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(3),u=r(119),c=r(191);e(e.P+e.R,"Promise",{finally:function(n){var r=u(this,i.Promise||o.Promise),t="function"==typeof n;return this.then(t?function(t){return c(r,n()).then(function(){return t})}:n,t?function(t){return c(r,n()).then(function(){throw t})}:n)}})},function(t,n,r){"use strict";var e=r(1),i=r(151),o=r(190);e(e.S,"Promise",{try:function(t){var n=i.f(this),r=o(t);return(r.e?n.reject:n.resolve)(r.v),n.promise}})},function(t,n,r){var e=r(56),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(56),o=r(2),u=e.key,c=e.map,f=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:u(arguments[2]),e=c(o(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var i=f.get(n);return i.delete(r),!!i.size||f.delete(n)}})},function(t,n,r){var o=r(199),u=r(167),e=r(56),i=r(2),c=r(32),f=e.keys,a=e.key,s=function(t,n){var r=f(t,n),e=c(t);if(null===e)return r;var i=s(e,n);return i.length?r.length?u(new o(r.concat(i))):i:r};e.exp({getMetadataKeys:function(t){return s(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(21),u=e.key,c=e.set;e.exp({metadata:function(r,e){return function(t,n){c(r,e,(void 0!==n?i:o)(t),u(n))}}})},function(t,n,r){r(129)("Set")},function(t,n,r){r(130)("Set")},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(171)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(51),o=r(8),u=r(124),c=r(115),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(146)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(84)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(84)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(160)("asyncIterator")},function(t,n,r){r(160)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){r(129)("WeakMap")},function(t,n,r){r(130)("WeakMap")},function(t,n,r){r(129)("WeakSet")},function(t,n,r){r(130)("WeakSet")},function(t,n,r){for(var e=r(162),i=r(74),o=r(27),u=r(3),c=r(26),f=r(82),a=r(7),s=a("iterator"),l=a("toStringTag"),h=f.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],b=v[g],x=u[g],m=x&&x.prototype;if(m&&(m[s]||c(m,s,h),m[l]||c(m,l,g),f[g]=h,b))for(y in e)m[y]||o(m,y,e[y],!0)}},function(t,n,r){var e=r(1),i=r(158);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(133),u=[].slice,c=/MSIE .\./.test(o),f=function(i){return function(t,n){var r=2<arguments.length,e=!!r&&u.call(arguments,2);return i(r?function(){("function"==typeof t?t:Function(t)).apply(this,e)}:t,n)}};i(i.G+i.B+i.F*c,{setTimeout:f(e.setTimeout),setInterval:f(e.setInterval)})},function(t,n,r){r(341),r(280),r(282),r(281),r(284),r(286),r(291),r(285),r(283),r(293),r(292),r(288),r(289),r(287),r(279),r(290),r(294),r(295),r(247),r(249),r(248),r(297),r(296),r(267),r(277),r(278),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(328),r(333),r(340),r(331),r(323),r(324),r(329),r(334),r(336),r(319),r(320),r(321),r(322),r(325),r(326),r(327),r(330),r(332),r(335),r(337),r(338),r(339),r(242),r(244),r(243),r(246),r(245),r(231),r(229),r(235),r(232),r(238),r(240),r(228),r(234),r(225),r(239),r(223),r(237),r(236),r(230),r(233),r(222),r(224),r(227),r(226),r(241),r(162),r(313),r(197),r(318),r(198),r(314),r(315),r(316),r(317),r(298),r(196),r(199),r(200),r(353),r(342),r(343),r(348),r(351),r(352),r(346),r(349),r(347),r(350),r(344),r(345),r(299),r(300),r(301),r(302),r(303),r(306),r(304),r(305),r(307),r(308),r(309),r(310),r(312),r(311),r(356),r(354),r(355),r(397),r(400),r(399),r(401),r(402),r(398),r(403),r(404),r(378),r(381),r(377),r(375),r(376),r(379),r(380),r(362),r(396),r(361),r(395),r(407),r(409),r(360),r(394),r(406),r(408),r(359),r(405),r(358),r(363),r(364),r(365),r(366),r(367),r(369),r(368),r(370),r(371),r(372),r(374),r(373),r(383),r(384),r(385),r(386),r(388),r(387),r(390),r(389),r(391),r(392),r(393),r(357),r(382),r(412),r(411),r(410),t.exports=r(46)},function(t,n){t.exports=function(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}}])</script><script src="/./main.a5fda8.js"></script><script>!function(){var e,t;e="/slider.27463f.js",t=document.createElement("script"),document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}()</script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



<!--  -->

<script>
  /* 标签页标题切换 */
  var originTitle = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function () {
    if (document.hidden) {
      document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
      titleTime = setTimeout(function () {
        document.title = originTitle;
      }, 2000);
    }
  });
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 50%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 50%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">框架</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia-plus根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="https://clear-liquid.github.io" target="_blank" 
                class="search-title" >
                
                  <img src="https://zhousiwei.gitee.io/ibooks/favicon.ico">
                
                試毅-思伟_技术笔记
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://github.com/JoeyBling" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                GitHub
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://gitee.com/mu-ce" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                码云
              </a>
            </li>
          
        </ul>
  		
    	</section>
    

    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>

  
  
<script type="text/javascript" src="/plugins/activate-power-mode/activate-power-mode.js"></script>
<script>
  POWERMODE.colorful = true; // make power mode colorful
  POWERMODE.shake = true; // turn off shake
  document.body.addEventListener('input', POWERMODE);
</script>

  
  <!-- <script async type="text/javascript" size="90" alpha="0.2" zIndex="0" src="/plugins/ribbon.js/ribbon.min.js"></script> -->
  
  
    <script type="text/javascript" src="/plugins/live2d-widget.js/L2Dwidget.min.js"></script>
<script type="text/javascript">
  /**
   * 完整配置请参考：https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init
   */
  var pluginModelPath = "assets/", // 模型的文件路径，无需更改
    pluginRootPath = "/live2d_models/"; // 插件的路径，无需更改
  //特定的模型json文件名称
  var modelPathJson = {
    "epsilon2_1": "Epsilon2.1",
    "gf": "Gantzert_Felixander",
    "haru/01": "haru01",
    "haru/02": "haru02",
    "nietzsche": "nietzche"
  }

  
    var modelName = "hibiki";
  

  var modelJsonPath = "";
  if (modelPathJson[modelName]) {
    modelJsonPath = pluginRootPath + modelName + "/" + pluginModelPath + modelPathJson[modelName] +
      ".model.json";
  } else {
    modelJsonPath = pluginRootPath + modelName + "/" + pluginModelPath + modelName + ".model.json";
  }
  L2Dwidget.init({
    model: {
      jsonPath: modelJsonPath
    },
    display: {
       position: "right", 
       width: 145, 
       height: 315, 
       hOffset: 50, 
      
    },
    mobile: {
       show: false, 
       scale: 0.6 
    },
    react: {
       opacity: 0.8 
    }
  })

</script>

  
  
  <script type="text/javascript" src="/lib/snow.js"></script>
  <script type="text/javascript" src="/lib/jquery-2.1.4.min.js"></script>
  <script>
    snow.down();
    $(window).resize(function() {
      $("canvas").css("z-index","500").remove();
      snow.down();
    });
  </script>
  
</body>

</html>
